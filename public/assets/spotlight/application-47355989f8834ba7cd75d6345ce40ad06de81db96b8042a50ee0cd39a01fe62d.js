function URLify(t,e){return t=downcode(t),t=t.replace(/[^-\w\s]/g," "),t=t.replace(/^\s+|\s+$/g,""),t=t.replace(/[-\s]+/g,"-"),(t=t.toLowerCase()).substring(0,e)}function addRestoreDefaultBehavior(){$("[data-behavior='restore-default']").each(function(){var t=$("[data-default-value]",$(this)),e=$($("[data-in-place-edit-target]",$(this)).data("in-place-edit-target"),$(this)),n=$("[data-restore-default]",$(this));t.on("blur",function(){$(this).val()==$(this).data("default-value")?n.addClass("hidden"):n.removeClass("hidden")}),n.on("click",function(i){i.preventDefault(),t.val(t.data("default-value")),e.text(t.data("default-value")),n.hide()})})}function addCheckboxToggleBehavior(){function t(t){return $("input[type='checkbox']",t).length==$("input[type='checkbox']:checked",t).length}function e(e,n){t(n)?e.text(e.data("deselect-text")):e.text(e.data("select-text"))}$("[data-behavior='metadata-select']").each(function(){var n=$(this),i=n.parents("th"),r=i.closest("table"),o=$("tr td:nth-child("+(i.index()+1)+")",r),s=$("input[type='checkbox']",o);e(n,o),n.on("click",function(i){i.preventDefault();var r=t(o);o.each(function(){$("input[type='checkbox']",$(this)).prop("checked",!r),e(n,o)})}),s.each(function(){$(this).on("change",function(){e(n,o)})})})}function addEnableToggleBehavior(){$("[data-behavior='enable-feature']").each(function(){var t=$(this),e=$($(this).data("target"));t.on("change",function(){$(this).is(":checked")?e.find("input:checkbox").not("[data-behavior='enable-feature']").prop("checked",!0).attr("disabled",!1):e.find("input:checkbox").not("[data-behavior='enable-feature']").prop("checked",!1).attr("disabled",!0)})})}function observedForms(){return $("[data-form-observer]")}function serializeObservedForms(t){t.each(function(){serializeFormStatus($(this)),unbindObservedFormSubmit()})}function unbindObservedFormSubmit(){observedForms().each(function(){$(this).on("submit",function(){$(this).data("being-submitted",!0)})})}function serializeFormStatus(t){t.data("serialized-form",formSerialization(t))}function formSerialization(t){var e=[],n=0;return $("[contenteditable='true']",t).each(function(){e.push("&contenteditable_"+n+"="+$(this).text())}),t.serialize()+e.join()}function serializedFormStatus(t){return t.data("serialized-form")}function observedFormsStatusHasChanged(){var t=!1;return observedForms().each(function(){$(this).data("being-submitted")||serializedFormStatus($(this))!=formSerialization($(this))&&(t=!0)}),t}function itemsBloodhound(){var t=new Bloodhound({datumTokenizer:function(t){return Bloodhound.tokenizers.whitespace(t.title)},queryTokenizer:Bloodhound.tokenizers.whitespace,limit:100,remote:{url:$("form[data-autocomplete-exhibit-catalog-path]").data("autocomplete-exhibit-catalog-path").replace("%25QUERY","%QUERY"),filter:function(t){return $.map(t.docs,function(t){return t})}}});return t.initialize(),t}function itemsTemplate(){return'<div class="autocomplete-item{{#if private}} blacklight-private{{/if}}">{{#if thumbnail}}<div class="document-thumbnail thumbnail"><img src="{{thumbnail}}" /></div>{{/if}}<span class="autocomplete-title">{{title}}</span><br/><small>&nbsp;&nbsp;{{description}}</small></div>'}function addAutocompletetoFeaturedImage(){$("[data-featured-image-typeahead]").length>0&&$("[data-featured-image-typeahead]").spotlightSearchTypeAhead({bloodhound:itemsBloodhound(),template:itemsTemplate()}).on("click",function(){$(this).select()}).on("typeahead:selected typeahead:autocompleted",function(t,e){var n=$($(this).data("target-panel"));addImageSelector($(this),n,e.iiif_manifest,!0),$($(this).data("id-field")).val(e.global_id),$(this).attr("type","text")})}function addImageSelector(t,e,n,i){if(n){var r=t.data("iiifCropper");$.ajax(n).success(function(o){var s=new(require("spotlight/iiif"))(n,o).imagesArray();hideNonIiifAlert(t),i&&(r.setIiifFields(s[0]),e.multiImageSelector()),s.length>1&&(e.show(),e.multiImageSelector(s,function(t){r.setIiifFields(t)},r.iiifImageField.val()))})}else showNonIiifAlert(t)}function showNonIiifAlert(t){t.parent().prev('[data-behavior="non-iiif-alert"]').show()}function hideNonIiifAlert(t){t.parent().prev('[data-behavior="non-iiif-alert"]').hide()}(function(){function t(t){function e(e,n,i,r,o,s){for(;o>=0&&o<s;o+=t){var a=r?r[o]:o;i=n(i,e[a],a,e)}return i}return function(n,i,r,o){i=y(i,o,4);var s=!L(n)&&_.keys(n),a=(s||n).length,u=t>0?0:a-1;return arguments.length<3&&(r=n[s?s[u]:u],u+=t),e(n,i,r,s,u,a)}}function e(t){return function(e,n,i){n=b(n,i);for(var r=S(e),o=t>0?0:r-1;o>=0&&o<r;o+=t)if(n(e[o],o,e))return o;return-1}}function n(t,e,n){return function(i,r,o){var s=0,a=S(i);if("number"==typeof o)t>0?s=o>=0?o:Math.max(o+a,s):a=o>=0?Math.min(o+1,a):o+a+1;else if(n&&o&&a)return o=n(i,r),i[o]===r?o:-1;if(r!=r)return(o=e(l.call(i,s,a),_.isNaN))>=0?o+s:-1;for(o=t>0?s:a-1;o>=0&&o<a;o+=t)if(i[o]===r)return o;return-1}}function i(t,e){var n=A.length,i=t.constructor,r=_.isFunction(i)&&i.prototype||a,o="constructor";for(_.has(t,o)&&!_.contains(e,o)&&e.push(o);n--;)(o=A[n])in t&&t[o]!==r[o]&&!_.contains(e,o)&&e.push(o)}var r=this,o=r._,s=Array.prototype,a=Object.prototype,u=Function.prototype,c=s.push,l=s.slice,h=a.toString,f=a.hasOwnProperty,d=Array.isArray,p=Object.keys,m=u.bind,g=Object.create,v=function(){},_=function(t){return t instanceof _?t:this instanceof _?void(this._wrapped=t):new _(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=_),exports._=_):r._=_,_.VERSION="1.8.3";var y=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)};case 4:return function(n,i,r,o){return t.call(e,n,i,r,o)}}return function(){return t.apply(e,arguments)}},b=function(t,e,n){return null==t?_.identity:_.isFunction(t)?y(t,e,n):_.isObject(t)?_.matcher(t):_.property(t)};_.iteratee=function(t,e){return b(t,e,Infinity)};var x=function(t,e){return function(n){var i=arguments.length;if(i<2||null==n)return n;for(var r=1;r<i;r++)for(var o=arguments[r],s=t(o),a=s.length,u=0;u<a;u++){var c=s[u];e&&void 0!==n[c]||(n[c]=o[c])}return n}},w=function(t){if(!_.isObject(t))return{};if(g)return g(t);v.prototype=t;var e=new v;return v.prototype=null,e},k=function(t){return function(e){return null==e?void 0:e[t]}},E=Math.pow(2,53)-1,S=k("length"),L=function(t){var e=S(t);return"number"==typeof e&&e>=0&&e<=E};_.each=_.forEach=function(t,e,n){e=y(e,n);var i,r;if(L(t))for(i=0,r=t.length;i<r;i++)e(t[i],i,t);else{var o=_.keys(t);for(i=0,r=o.length;i<r;i++)e(t[o[i]],o[i],t)}return t},_.map=_.collect=function(t,e,n){e=b(e,n);for(var i=!L(t)&&_.keys(t),r=(i||t).length,o=Array(r),s=0;s<r;s++){var a=i?i[s]:s;o[s]=e(t[a],a,t)}return o},_.reduce=_.foldl=_.inject=t(1),_.reduceRight=_.foldr=t(-1),_.find=_.detect=function(t,e,n){var i;if(void 0!==(i=L(t)?_.findIndex(t,e,n):_.findKey(t,e,n))&&-1!==i)return t[i]},_.filter=_.select=function(t,e,n){var i=[];return e=b(e,n),_.each(t,function(t,n,r){e(t,n,r)&&i.push(t)}),i},_.reject=function(t,e,n){return _.filter(t,_.negate(b(e)),n)},_.every=_.all=function(t,e,n){e=b(e,n);for(var i=!L(t)&&_.keys(t),r=(i||t).length,o=0;o<r;o++){var s=i?i[o]:o;if(!e(t[s],s,t))return!1}return!0},_.some=_.any=function(t,e,n){e=b(e,n);for(var i=!L(t)&&_.keys(t),r=(i||t).length,o=0;o<r;o++){var s=i?i[o]:o;if(e(t[s],s,t))return!0}return!1},_.contains=_.includes=_.include=function(t,e,n,i){return L(t)||(t=_.values(t)),("number"!=typeof n||i)&&(n=0),_.indexOf(t,e,n)>=0},_.invoke=function(t,e){var n=l.call(arguments,2),i=_.isFunction(e);return _.map(t,function(t){var r=i?e:t[e];return null==r?r:r.apply(t,n)})},_.pluck=function(t,e){return _.map(t,_.property(e))},_.where=function(t,e){return _.filter(t,_.matcher(e))},_.findWhere=function(t,e){return _.find(t,_.matcher(e))},_.max=function(t,e,n){var i,r,o=-Infinity,s=-Infinity;if(null==e&&null!=t)for(var a=0,u=(t=L(t)?t:_.values(t)).length;a<u;a++)(i=t[a])>o&&(o=i);else e=b(e,n),_.each(t,function(t,n,i){((r=e(t,n,i))>s||r===-Infinity&&o===-Infinity)&&(o=t,s=r)});return o},_.min=function(t,e,n){var i,r,o=Infinity,s=Infinity;if(null==e&&null!=t)for(var a=0,u=(t=L(t)?t:_.values(t)).length;a<u;a++)(i=t[a])<o&&(o=i);else e=b(e,n),_.each(t,function(t,n,i){((r=e(t,n,i))<s||r===Infinity&&o===Infinity)&&(o=t,s=r)});return o},_.shuffle=function(t){for(var e,n=L(t)?t:_.values(t),i=n.length,r=Array(i),o=0;o<i;o++)(e=_.random(0,o))!==o&&(r[o]=r[e]),r[e]=n[o];return r},_.sample=function(t,e,n){return null==e||n?(L(t)||(t=_.values(t)),t[_.random(t.length-1)]):_.shuffle(t).slice(0,Math.max(0,e))},_.sortBy=function(t,e,n){return e=b(e,n),_.pluck(_.map(t,function(t,n,i){return{value:t,index:n,criteria:e(t,n,i)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(n<i||void 0===i)return-1}return t.index-e.index}),"value")};var T=function(t){return function(e,n,i){var r={};return n=b(n,i),_.each(e,function(i,o){var s=n(i,o,e);t(r,i,s)}),r}};_.groupBy=T(function(t,e,n){_.has(t,n)?t[n].push(e):t[n]=[e]}),_.indexBy=T(function(t,e,n){t[n]=e}),_.countBy=T(function(t,e,n){_.has(t,n)?t[n]++:t[n]=1}),_.toArray=function(t){return t?_.isArray(t)?l.call(t):L(t)?_.map(t,_.identity):_.values(t):[]},_.size=function(t){return null==t?0:L(t)?t.length:_.keys(t).length},_.partition=function(t,e,n){e=b(e,n);var i=[],r=[];return _.each(t,function(t,n,o){(e(t,n,o)?i:r).push(t)}),[i,r]},_.first=_.head=_.take=function(t,e,n){if(null!=t)return null==e||n?t[0]:_.initial(t,t.length-e)},_.initial=function(t,e,n){return l.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},_.last=function(t,e,n){if(null!=t)return null==e||n?t[t.length-1]:_.rest(t,Math.max(0,t.length-e))},_.rest=_.tail=_.drop=function(t,e,n){return l.call(t,null==e||n?1:e)},_.compact=function(t){return _.filter(t,_.identity)};var C=function(t,e,n,i){for(var r=[],o=0,s=i||0,a=S(t);s<a;s++){var u=t[s];if(L(u)&&(_.isArray(u)||_.isArguments(u))){e||(u=C(u,e,n));var c=0,l=u.length;for(r.length+=l;c<l;)r[o++]=u[c++]}else n||(r[o++]=u)}return r};_.flatten=function(t,e){return C(t,e,!1)},_.without=function(t){return _.difference(t,l.call(arguments,1))},_.uniq=_.unique=function(t,e,n,i){_.isBoolean(e)||(i=n,n=e,e=!1),null!=n&&(n=b(n,i));for(var r=[],o=[],s=0,a=S(t);s<a;s++){var u=t[s],c=n?n(u,s,t):u;e?(s&&o===c||r.push(u),o=c):n?_.contains(o,c)||(o.push(c),r.push(u)):_.contains(r,u)||r.push(u)}return r},_.union=function(){return _.uniq(C(arguments,!0,!0))},_.intersection=function(t){for(var e=[],n=arguments.length,i=0,r=S(t);i<r;i++){var o=t[i];if(!_.contains(e,o)){for(var s=1;s<n&&_.contains(arguments[s],o);s++);s===n&&e.push(o)}}return e},_.difference=function(t){var e=C(arguments,!0,!0,1);return _.filter(t,function(t){return!_.contains(e,t)})},_.zip=function(){return _.unzip(arguments)},_.unzip=function(t){for(var e=t&&_.max(t,S).length||0,n=Array(e),i=0;i<e;i++)n[i]=_.pluck(t,i);return n},_.object=function(t,e){for(var n={},i=0,r=S(t);i<r;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},_.findIndex=e(1),_.findLastIndex=e(-1),_.sortedIndex=function(t,e,n,i){for(var r=(n=b(n,i,1))(e),o=0,s=S(t);o<s;){var a=Math.floor((o+s)/2);n(t[a])<r?o=a+1:s=a}return o},_.indexOf=n(1,_.findIndex,_.sortedIndex),_.lastIndexOf=n(-1,_.findLastIndex),_.range=function(t,e,n){null==e&&(e=t||0,t=0),n=n||1;for(var i=Math.max(Math.ceil((e-t)/n),0),r=Array(i),o=0;o<i;o++,t+=n)r[o]=t;return r};var M=function(t,e,n,i,r){if(!(i instanceof e))return t.apply(n,r);var o=w(t.prototype),s=t.apply(o,r);return _.isObject(s)?s:o};_.bind=function(t,e){if(m&&t.bind===m)return m.apply(t,l.call(arguments,1));if(!_.isFunction(t))throw new TypeError("Bind must be called on a function");var n=l.call(arguments,2),i=function(){return M(t,i,e,this,n.concat(l.call(arguments)))};return i},_.partial=function(t){var e=l.call(arguments,1),n=function(){for(var i=0,r=e.length,o=Array(r),s=0;s<r;s++)o[s]=e[s]===_?arguments[i++]:e[s];for(;i<arguments.length;)o.push(arguments[i++]);return M(t,n,this,this,o)};return n},_.bindAll=function(t){var e,n,i=arguments.length;if(i<=1)throw new Error("bindAll must be passed function names");for(e=1;e<i;e++)t[n=arguments[e]]=_.bind(t[n],t);return t},_.memoize=function(t,e){var n=function(i){var r=n.cache,o=""+(e?e.apply(this,arguments):i);return _.has(r,o)||(r[o]=t.apply(this,arguments)),r[o]};return n.cache={},n},_.delay=function(t,e){var n=l.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},_.defer=_.partial(_.delay,_,1),_.throttle=function(t,e,n){var i,r,o,s=null,a=0;n||(n={});var u=function(){a=!1===n.leading?0:_.now(),s=null,o=t.apply(i,r),s||(i=r=null)};return function(){var c=_.now();a||!1!==n.leading||(a=c);var l=e-(c-a);return i=this,r=arguments,l<=0||l>e?(s&&(clearTimeout(s),s=null),a=c,o=t.apply(i,r),s||(i=r=null)):s||!1===n.trailing||(s=setTimeout(u,l)),o}},_.debounce=function(t,e,n){var i,r,o,s,a,u=function(){var c=_.now()-s;c<e&&c>=0?i=setTimeout(u,e-c):(i=null,n||(a=t.apply(o,r),i||(o=r=null)))};return function(){o=this,r=arguments,s=_.now();var c=n&&!i;return i||(i=setTimeout(u,e)),c&&(a=t.apply(o,r),o=r=null),a}},_.wrap=function(t,e){return _.partial(e,t)},_.negate=function(t){return function(){return!t.apply(this,arguments)}},_.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,i=t[e].apply(this,arguments);n--;)i=t[n].call(this,i);return i}},_.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},_.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},_.once=_.partial(_.before,2);var I=!{toString:null}.propertyIsEnumerable("toString"),A=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];_.keys=function(t){if(!_.isObject(t))return[];if(p)return p(t);var e=[];for(var n in t)_.has(t,n)&&e.push(n);return I&&i(t,e),e},_.allKeys=function(t){if(!_.isObject(t))return[];var e=[];for(var n in t)e.push(n);return I&&i(t,e),e},_.values=function(t){for(var e=_.keys(t),n=e.length,i=Array(n),r=0;r<n;r++)i[r]=t[e[r]];return i},_.mapObject=function(t,e,n){e=b(e,n);for(var i,r=_.keys(t),o=r.length,s={},a=0;a<o;a++)s[i=r[a]]=e(t[i],i,t);return s},_.pairs=function(t){for(var e=_.keys(t),n=e.length,i=Array(n),r=0;r<n;r++)i[r]=[e[r],t[e[r]]];return i},_.invert=function(t){for(var e={},n=_.keys(t),i=0,r=n.length;i<r;i++)e[t[n[i]]]=n[i];return e},_.functions=_.methods=function(t){var e=[];for(var n in t)_.isFunction(t[n])&&e.push(n);return e.sort()},_.extend=x(_.allKeys),_.extendOwn=_.assign=x(_.keys),_.findKey=function(t,e,n){e=b(e,n);for(var i,r=_.keys(t),o=0,s=r.length;o<s;o++)if(i=r[o],e(t[i],i,t))return i},_.pick=function(t,e,n){var i,r,o={},s=t;if(null==s)return o;_.isFunction(e)?(r=_.allKeys(s),i=y(e,n)):(r=C(arguments,!1,!1,1),i=function(t,e,n){return e in n},s=Object(s));for(var a=0,u=r.length;a<u;a++){var c=r[a],l=s[c];i(l,c,s)&&(o[c]=l)}return o},_.omit=function(t,e,n){if(_.isFunction(e))e=_.negate(e);else{var i=_.map(C(arguments,!1,!1,1),String);e=function(t,e){return!_.contains(i,e)}}return _.pick(t,e,n)},_.defaults=x(_.allKeys,!0),_.create=function(t,e){var n=w(t);return e&&_.extendOwn(n,e),n},_.clone=function(t){return _.isObject(t)?_.isArray(t)?t.slice():_.extend({},t):t},_.tap=function(t,e){return e(t),t},_.isMatch=function(t,e){var n=_.keys(e),i=n.length;if(null==t)return!i;for(var r=Object(t),o=0;o<i;o++){var s=n[o];if(e[s]!==r[s]||!(s in r))return!1}return!0};var P=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof _&&(t=t._wrapped),e instanceof _&&(e=e._wrapped);var r=h.call(t);if(r!==h.call(e))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e}var o="[object Array]"===r;if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var s=t.constructor,a=e.constructor;if(s!==a&&!(_.isFunction(s)&&s instanceof s&&_.isFunction(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],i=i||[];for(var u=n.length;u--;)if(n[u]===t)return i[u]===e;if(n.push(t),i.push(e),o){if((u=t.length)!==e.length)return!1;for(;u--;)if(!P(t[u],e[u],n,i))return!1}else{var c,l=_.keys(t);if(u=l.length,_.keys(e).length!==u)return!1;for(;u--;)if(c=l[u],!_.has(e,c)||!P(t[c],e[c],n,i))return!1}return n.pop(),i.pop(),!0};_.isEqual=function(t,e){return P(t,e)},_.isEmpty=function(t){return null==t||(L(t)&&(_.isArray(t)||_.isString(t)||_.isArguments(t))?0===t.length:0===_.keys(t).length)},_.isElement=function(t){return!(!t||1!==t.nodeType)},_.isArray=d||function(t){return"[object Array]"===h.call(t)},_.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},_.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){_["is"+t]=function(e){return h.call(e)==="[object "+t+"]"}}),_.isArguments(arguments)||(_.isArguments=function(t){return _.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(_.isFunction=function(t){return"function"==typeof t||!1}),_.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},_.isNaN=function(t){return _.isNumber(t)&&t!==+t},_.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===h.call(t)},_.isNull=function(t){return null===t},_.isUndefined=function(t){return void 0===t},_.has=function(t,e){return null!=t&&f.call(t,e)},_.noConflict=function(){return r._=o,this},_.identity=function(t){return t},_.constant=function(t){return function(){return t}},_.noop=function(){},_.property=k,_.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},_.matcher=_.matches=function(t){return t=_.extendOwn({},t),function(e){return _.isMatch(e,t)}},_.times=function(t,e,n){var i=Array(Math.max(0,t));e=y(e,n,1);for(var r=0;r<t;r++)i[r]=e(r);return i},_.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},_.now=Date.now||function(){return(new Date).getTime()};var O={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},D=_.invert(O),N=function(t){var e=function(e){return t[e]},n="(?:"+_.keys(t).join("|")+")",i=RegExp(n),r=RegExp(n,"g");return function(t){return t=null==t?"":""+t,i.test(t)?t.replace(r,e):t}};_.escape=N(O),_.unescape=N(D),_.result=function(t,e,n){var i=null==t?void 0:t[e];return void 0===i&&(i=n),_.isFunction(i)?i.call(t):i};var B=0;_.uniqueId=function(t){var e=++B+"";return t?t+e:e},_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var z=/(.)^/,j={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},R=/\\|'|\r|\n|\u2028|\u2029/g,F=function(t){return"\\"+j[t]};_.template=function(t,e,n){!e&&n&&(e=n),e=_.defaults({},e,_.templateSettings);var i=RegExp([(e.escape||z).source,(e.interpolate||z).source,(e.evaluate||z).source].join("|")+"|$","g"),r=0,o="__p+='";t.replace(i,function(e,n,i,s,a){return o+=t.slice(r,a).replace(R,F),r=a+e.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?o+="'+\n((__t=("+i+"))==null?'':__t)+\n'":s&&(o+="';\n"+s+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var s=new Function(e.variable||"obj","_",o)}catch(c){throw c.source=o,c}var a=function(t){return s.call(this,t,_)},u=e.variable||"obj";return a.source="function("+u+"){\n"+o+"}",a},_.chain=function(t){var e=_(t);return e._chain=!0,e};var $=function(t,e){return t._chain?_(e).chain():e};_.mixin=function(t){_.each(_.functions(t),function(e){var n=_[e]=t[e];_.prototype[e]=function(){var t=[this._wrapped];return c.apply(t,arguments),$(this,n.apply(_,t))}})},_.mixin(_),_.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=s[t];_.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],$(this,n)}}),_.each(["concat","join","slice"],function(t){var e=s[t];_.prototype[t]=function(){return $(this,e.apply(this._wrapped,arguments))}}),_.prototype.value=function(){return this._wrapped},_.prototype.valueOf=_.prototype.toJSON=_.prototype.value,_.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return _})}).call(this),function(t,e){"function"==typeof define&&define.amd?define("eventable",function(){return t.Eventable=e()}):"undefined"!=typeof exports?module.exports=e():t.Eventable=e()}(this,function(){function t(t){var e,n=2;return function(){return--n>0?e=t.apply(this,arguments):t=null,e}}function e(t,e){i[t]=function(t,n,i){return(this._listeners||(this._listeners={}))[t._listenerId||(t._listenerId=(new Date).getTime())]=t,"object"==typeof n&&(i=this),t[e](n,i,this),this}}var n=[].slice,i={on:function(t,e,n){if(!o(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});return(this._events[t]||(this._events[t]=[])).push({callback:e,context:n,ctx:n||this}),this},once:function(e,n,i){if(!o(this,"once",e,[n,i])||!n)return this;var r=this,s=t(function(){r.off(e,s),n.apply(this,arguments)});return s._callback=n,this.on(e,s,i)},off:function(t,e,n){var i,r,s,a,u,c,l,h;if(!this._events||!o(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(u=0,c=(a=t?[t]:Object.keys(this._events)).length;u<c;u++)if(t=a[u],s=this._events[t]){if(this._events[t]=i=[],e||n)for(l=0,h=s.length;l<h;l++)r=s[l],(e&&e!==r.callback&&e!==r.callback._callback||n&&n!==r.context)&&i.push(r);i.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=n.call(arguments,1);if(!o(this,"trigger",t,e))return this;var i=this._events[t],r=this._events.all;return i&&s(i,e),r&&s(r,arguments),this},stopListening:function(t,e,n){var i=this._listeners;if(!i)return this;var r=!e&&!n;"object"==typeof e&&(n=this),t&&((i={})[t._listenerId]=t);for(var o in i)i[o].off(e,n,this),r&&delete this._listeners[o];return this}},r=/\s+/,o=function(t,e,n,i){if(!n)return!0;if("object"==typeof n){for(var o in n)t[e].apply(t,[o,n[o]].concat(i));return!1}if(r.test(n)){for(var s=n.split(r),a=0,u=s.length;a<u;a++)t[e].apply(t,[s[a]].concat(i));return!1}return!0},s=function(t,e){var n,i=-1,r=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++i<r;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o);return;case 2:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o,s);return;case 3:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o,s,a);return;default:for(;++i<r;)(n=t[i]).callback.apply(n.ctx,e)}};return e("listenTo","on"),e("listenToOnce","once"),i.bind=i.on,i.unbind=i.off,i}),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.SirTrevor=e():t.SirTrevor=e()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}(function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))switch(typeof t[e]){case"function":break;case"object":t[e]=function(e){var n=e.slice(1),i=t[e[0]];return function(t,e,r){i.apply(this,[t,e,r].concat(n))}}(t[e]);break;default:t[e]=t[t[e]]}return t}([function(t,e,n){"use strict";t.exports=n(1),n(280)},function(t,e,n){"use strict";var i=n(2)["default"];n(17),n(18).shim(),n(21),n(22),n(23).polyfill();var r=n(29),o={config:n(68),log:r.log,Locales:n(72),Events:n(73),EventBus:n(75),EditorStore:n(76),Submittable:n(77),FileUploader:n(78),BlockMixins:n(128),BlockPositioner:n(234),BlockReorder:n(237),BlockDeletion:n(238),BlockValidations:n(239),BlockStore:n(240),BlockManager:n(241),SimpleBlock:n(245),Block:n(244),Blocks:n(242),FormatBar:n(269),Editor:n(271),toMarkdown:n(279),toHTML:n(253),setDefaults:function(t){i(o.config.defaults,t||{})},getInstance:r.getInstance,setBlockOptions:function(t,e){var n=o.Blocks[t];void 0!==n&&i(n.prototype,e||{})},runOnAllInstances:function(t){if(o.Editor.prototype.hasOwnProperty(t)){var e=Array.prototype.slice.call(arguments,1);Array.prototype.forEach.call(o.config.instances,function(n){n[t].apply(null,e)})}else o.log("method doesn't exist")}};i(o,n(272)),t.exports=o},function(t,e,n){t.exports={"default":n(3),__esModule:!0}},function(t,e,n){n(4),t.exports=n(7).Object.assign},function(t,e,n){var i=n(5);i(i.S+i.F,"Object",{assign:n(10)})},function(t,e,n){var i=n(6),r=n(7),o=n(8),s="prototype",a=function(t,e,n){var u,c,l,h=t&a.F,f=t&a.G,d=t&a.S,p=t&a.P,m=t&a.B,g=t&a.W,v=f?r:r[e]||(r[e]={}),_=f?i:d?i[e]:(i[e]||{})[s];f&&(n=e);for(u in n)(c=!h&&_&&u in _)&&u in v||(l=c?_[u]:n[u],v[u]=f&&"function"!=typeof _[u]?n[u]:m&&c?o(l,i):g&&_[u]==l?function(t){var e=function(e){return this instanceof t?new t(e):t(e)};return e[s]=t[s],e}(l):p&&"function"==typeof l?o(Function.call,l):l,p&&((v[s]||(v[s]={}))[u]=l))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,t.exports=a},function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)},function(t){var e=t.exports={version:"1.2.6"};"number"==typeof __e&&(__e=e)},function(t,e,n){var i=n(9);t.exports=function(t,e,n){if(i(t),e===undefined)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}}},function(t){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var i=n(11),r=n(12),o=n(14);t.exports=n(16)(function(){var t=Object.assign,e={},n={},i=Symbol(),r="abcdefghijklmnopqrst";return e[i]=7,r.split("").forEach(function(t){n[t]=t}),7!=t({},e)[i]||Object.keys(t({},n)).join("")!=r})?function(t){for(var e=r(t),n=arguments,s=n.length,a=1,u=i.getKeys,c=i.getSymbols,l=i.isEnum;s>a;)for(var h,f=o(n[a++]),d=c?u(f).concat(c(f)):u(f),p=d.length,m=0;p>m;)l.call(f,h=d[m++])&&(e[h]=f[h]);return e}:Object.assign},function(t){var e=Object;t.exports={create:e.create,getProto:e.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:e.getOwnPropertyDescriptor,setDesc:e.defineProperty,setDescs:e.defineProperties,getKeys:e.keys,getNames:e.getOwnPropertyNames,getSymbols:e.getOwnPropertySymbols,each:[].forEach}},function(t,e,n){var i=n(13);t.exports=function(t){return Object(i(t))}},function(t){t.exports=function(t){if(t==undefined)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var i=n(15);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},function(t){var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},function(t){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(){},function(t,e,n){"use strict";var i=n(19),r=function(t){return void 0!==t&&null!==t},o=function(t){if(!r(t))throw new TypeError("target must be an object");var e,n,o,s,a=Object(t);for(e=1;e<arguments.length;++e)for(n=Object(arguments[e]),s=i(n),o=0;o<s.length;++o)a[s[o]]=n[s[o]];return a};o.shim=function(){return Object.assign||(Object.assign=o),Object.assign||o},t.exports=o},function(t,e,n){"use strict";var i=Object.prototype.hasOwnProperty,r=Object.prototype.toString,o=Array.prototype.slice,s=n(20),a=Object.prototype.propertyIsEnumerable,u=!a.call({toString:null},"toString"),c=a.call(function(){},"prototype"),l=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],h=function(t){var e=t.constructor;return e&&e.prototype===t},f={$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},d=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!f["$"+t]&&i.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{h(window[t])}catch(e){return!0}}catch(e){return!0}return!1}(),p=function(t){if("undefined"==typeof window||!d)return h(t);try{return h(t)}catch(e){return!1}},m=function(t){var e=null!==t&&"object"==typeof t,n="[object Function]"===r.call(t),o=s(t),a=e&&"[object String]"===r.call(t),h=[];if(!e&&!n&&!o)throw new TypeError("Object.keys called on a non-object");var f=c&&n;if(a&&t.length>0&&!i.call(t,0))for(var d=0;d<t.length;++d)h.push(String(d));if(o&&t.length>0)for(var m=0;m<t.length;++m)h.push(String(m));else for(var g in t)f&&"prototype"===g||!i.call(t,g)||h.push(String(g));if(u)for(var v=p(t),_=0;_<l.length;++_)v&&"constructor"===l[_]||!i.call(t,l[_])||h.push(l[_]);return h};m.shim=function(){if(Object.keys){if(!function(){return 2===(Object.keys(arguments)||"").length}(1,2)){var t=Object.keys;Object.keys=function(e){return t(s(e)?o.call(e):e)}}}else Object.keys=m;return Object.keys||m},t.exports=m},function(t){"use strict";var e=Object.prototype.toString;t.exports=function(t){var n=e.call(t),i="[object Arguments]"===n;return i||(i="[object Array]"!==n&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===e.call(t.callee)),i}},function(){!function(){if(!Array.prototype.find){var t=function(t){var e=Object(this),n=e.length<0?0:e.length>>>0;if(0===n)return undefined;if("function"!=typeof t||"[object Function]"!==Object.prototype.toString.call(t))throw new TypeError("Array#find: predicate must be a function");for(var i,r=arguments[1],o=0;o<n;o++)if(i=e[o],t.call(r,i,o,e))return i;return undefined};if(Object.defineProperty)try{Object.defineProperty(Array.prototype,"find",{value:t,configurable:!0,enumerable:!1,writable:!0})}catch(e){}Array.prototype.find||(Array.prototype.find=t)}}()},function(){"use strict";Array.prototype.includes||(Array.prototype.includes=function(t){var e=Object(this),n=parseInt(e.length)||0;if(0===n)return!1;var i,r=parseInt(arguments[1])||0;r>=0?i=r:(i=n+r)<0&&(i=0);for(var o;i<n;){if(o=e[i],t===o||t!=t&&o!=o)return!0;i++}return!1})},function(t,e,n){var i;(function(t,r,o,s){(function(){"use strict";function a(t){return"function"==typeof t||"object"==typeof t&&null!==t}function u(t){return"function"==typeof t}function c(t){return"object"==typeof t&&null!==t}function l(t){W=t}function h(t){X=t}function f(){var e=t.nextTick,n=t.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(n)&&"0"===n[1]&&"10"===n[2]&&(e=r),function(){e(v)}}function d(){return function(){V(v)}}function p(){var t=0,e=new tt(v),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function m(){var t=new MessageChannel;return t.port1.onmessage=v,function(){t.port2.postMessage(0)}}function g(){return function(){setTimeout(v,1)}}function v(){for(var t=0;t<Y;t+=2){(0,it[t])(it[t+1]),it[t]=undefined,it[t+1]=undefined}Y=0}function _(){try{var t=n(27);return V=t.runOnLoop||t.runOnContext,d()}catch(e){return g()}}function y(){}function b(){return new TypeError("You cannot resolve a promise with itself")}function x(){return new TypeError("A promises callback cannot return that same promise.")}function w(t){try{return t.then}catch(e){return at.error=e,at}}function k(t,e,n,i){try{t.call(e,n,i)}catch(r){return r}}function E(t,e,n){X(function(t){var i=!1,r=k(n,e,function(n){i||(i=!0,e!==n?T(t,n):M(t,n))},function(e){i||(i=!0,I(t,e))},"Settle: "+(t._label||" unknown promise"));!i&&r&&(i=!0,I(t,r))},t)}function S(t,e){e._state===ot?M(t,e._result):e._state===st?I(t,e._result):A(e,undefined,function(e){T(t,e)},function(e){I(t,e)})}function L(t,e){if(e.constructor===t.constructor)S(t,e);else{var n=w(e);n===at?I(t,at.error):n===undefined?M(t,e):u(n)?E(t,e,n):M(t,e)}}function T(t,e){t===e?I(t,b()):a(e)?L(t,e):M(t,e)}function C(t){t._onerror&&t._onerror(t._result),P(t)}function M(t,e){t._state===rt&&(t._result=e,t._state=ot,0!==t._subscribers.length&&X(P,t))}function I(t,e){t._state===rt&&(t._state=st,t._result=e,X(C,t))}function A(t,e,n,i){var r=t._subscribers,o=r.length;t._onerror=null,r[o]=e,r[o+ot]=n,r[o+st]=i,0===o&&t._state&&X(P,t)}function P(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var i,r,o=t._result,s=0;s<e.length;s+=3)i=e[s],r=e[s+n],i?N(n,i,r,o):r(o);t._subscribers.length=0}}function O(){this.error=null}function D(t,e){try{return t(e)}catch(n){return ut.error=n,ut}}function N(t,e,n,i){var r,o,s,a,c=u(n);if(c){if((r=D(n,i))===ut?(a=!0,o=r.error,r=null):s=!0,e===r)return void I(e,x())}else r=i,s=!0;e._state!==rt||(c&&s?T(e,r):a?I(e,o):t===ot?M(e,r):t===st&&I(e,r))}
function B(t,e){try{e(function(e){T(t,e)},function(e){I(t,e)})}catch(n){I(t,n)}}function z(t,e){var n=this;n._instanceConstructor=t,n.promise=new t(y),n._validateInput(e)?(n._input=e,n.length=e.length,n._remaining=e.length,n._init(),0===n.length?M(n.promise,n._result):(n.length=n.length||0,n._enumerate(),0===n._remaining&&M(n.promise,n._result))):I(n.promise,n._validationError())}function j(t){return new ct(this,t).promise}function R(t){function e(t){T(r,t)}function n(t){I(r,t)}var i=this,r=new i(y);if(!G(t))return I(r,new TypeError("You must pass an array to race.")),r;for(var o=t.length,s=0;r._state===rt&&s<o;s++)A(i.resolve(t[s]),undefined,e,n);return r}function F(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(y);return T(n,t),n}function $(t){var e=new this(y);return I(e,t),e}function U(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function H(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function q(t){this._id=pt++,this._state=undefined,this._result=undefined,this._subscribers=[],y!==t&&(u(t)||U(),this instanceof q||H(),B(this,t))}function Z(){var t;if(void 0!==o)t=o;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(n){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;e&&"[object Promise]"===Object.prototype.toString.call(e.resolve())&&!e.cast||(t.Promise=mt)}var V,W,K,G=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},Y=0,X=({}.toString,function(t,e){it[Y]=t,it[Y+1]=e,2===(Y+=2)&&(W?W(v):K())}),Q="undefined"!=typeof window?window:undefined,J=Q||{},tt=J.MutationObserver||J.WebKitMutationObserver,et=void 0!==t&&"[object process]"==={}.toString.call(t),nt="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,it=new Array(1e3);K=et?f():tt?p():nt?m():Q===undefined?_():g();var rt=void 0,ot=1,st=2,at=new O,ut=new O;z.prototype._validateInput=function(t){return G(t)},z.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},z.prototype._init=function(){this._result=new Array(this.length)};var ct=z;z.prototype._enumerate=function(){for(var t=this,e=t.length,n=t.promise,i=t._input,r=0;n._state===rt&&r<e;r++)t._eachEntry(i[r],r)},z.prototype._eachEntry=function(t,e){var n=this,i=n._instanceConstructor;c(t)?t.constructor===i&&t._state!==rt?(t._onerror=null,n._settledAt(t._state,e,t._result)):n._willSettleAt(i.resolve(t),e):(n._remaining--,n._result[e]=t)},z.prototype._settledAt=function(t,e,n){var i=this,r=i.promise;r._state===rt&&(i._remaining--,t===st?I(r,n):i._result[e]=n),0===i._remaining&&M(r,i._result)},z.prototype._willSettleAt=function(t,e){var n=this;A(t,undefined,function(t){n._settledAt(ot,e,t)},function(t){n._settledAt(st,e,t)})};var lt=j,ht=R,ft=F,dt=$,pt=0,mt=q;q.all=lt,q.race=ht,q.resolve=ft,q.reject=dt,q._setScheduler=l,q._setAsap=h,q._asap=X,q.prototype={constructor:q,then:function(t,e){var n=this,i=n._state;if(i===ot&&!t||i===st&&!e)return this;var r=new this.constructor(y),o=n._result;if(i){var s=arguments[i-1];X(function(){N(i,r,s,o)})}else A(n,r,t,e);return r},"catch":function(t){return this.then(null,t)}};var gt=Z,vt={Promise:mt,polyfill:gt};n(28).amd?(i=function(){return vt}.call(e,n,e,s))===undefined||(s.exports=i):void 0!==s&&s.exports?s.exports=vt:void 0!==this&&(this.ES6Promise=vt),gt()}).call(this)}).call(e,n(24),n(25).setImmediate,function(){return this}(),n(26)(t))},function(t){function e(){l&&u&&(l=!1,u.length?c=u.concat(c):h=-1,c.length&&n())}function n(){if(!l){var t=o(e);l=!0;for(var n=c.length;n;){for(u=c,c=[];++h<n;)u&&u[h].run();h=-1,n=c.length}u=null,l=!1,s(t)}}function i(t,e){this.fun=t,this.array=e}function r(){}var o,s,a=t.exports={};!function(){try{o=setTimeout}catch(t){o=function(){throw new Error("setTimeout is not defined")}}try{s=clearTimeout}catch(t){s=function(){throw new Error("clearTimeout is not defined")}}}();var u,c=[],l=!1,h=-1;a.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];c.push(new i(t,e)),1!==c.length||l||o(n,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=r,a.addListener=r,a.once=r,a.off=r,a.removeListener=r,a.removeAllListeners=r,a.emit=r,a.binding=function(){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(t,e,n){(function(t,i){function r(t,e){this._id=t,this._clearFn=e}var o=n(24).nextTick,s=Function.prototype.apply,a=Array.prototype.slice,u={},c=0;e.setTimeout=function(){return new r(s.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new r(s.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},e.setImmediate="function"==typeof t?t:function(t){var n=c++,i=!(arguments.length<2)&&a.call(arguments,1);return u[n]=!0,o(function(){u[n]&&(i?t.apply(null,i):t.call(null),e.clearImmediate(n))}),n},e.clearImmediate="function"==typeof i?i:function(t){delete u[t]}}).call(e,n(25).setImmediate,n(25).clearImmediate)},function(t){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(){},function(t){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e,n){"use strict";var i=n(30)["default"],r=n(34),o=n(68),s=n(69),a=/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/,u={getInstance:function(t){return r.isUndefined(t)?o.instances[0]:r.isString(t)?o.instances.find(function(e){return e.ID===t}):o.instances[t]},getInstanceBySelection:function(){return u.getInstance(s.getClosest(window.getSelection().anchorNode.parentNode,".st-block").getAttribute("data-instance"))},getBlockBySelection:function(){return u.getInstanceBySelection().findBlockById(s.getClosest(window.getSelection().anchorNode.parentNode,".st-block").id)},log:function(){!r.isUndefined(console)&&o.debug&&console.log.apply(console,arguments)},isURI:function(t){return a.test(t)},titleize:function(t){return null===t?"":(t=String(t).toLowerCase()).replace(/(?:^|\s|-)\S/g,function(t){return t.toUpperCase()})},classify:function(t){return u.titleize(String(t).replace(/[\W_]/g," ")).replace(/\s/g,"")},capitalize:function(t){return t.charAt(0).toUpperCase()+t.substring(1).toLowerCase()},flatten:function(t){var e={};return(Array.isArray(t)?t:i(t)).forEach(function(t){e[t]=!0}),e},underscored:function(t){return t.trim().replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},reverse:function(t){return t.split("").reverse().join("")},toSlug:function(t){return t.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-")},leftTrim:function(t){return t.replace(/^\s+/,"")}};t.exports=u},function(t,e,n){t.exports={"default":n(31),__esModule:!0}},function(t,e,n){n(32),t.exports=n(7).Object.keys},function(t,e,n){var i=n(12);n(33)("keys",function(t){return function(e){return t(i(e))}})},function(t,e,n){var i=n(5),r=n(7),o=n(16);t.exports=function(t,e){var n=(r.Object||{})[t]||Object[t],s={};s[t]=e(n),i(i.S+i.F*o(function(){n(1)}),"Object",s)}},function(t,e,n){"use strict";e.isEmpty=n(35),e.isFunction=n(49),e.isObject=n(43),e.isString=n(54),e.isUndefined=n(55),e.result=n(56),e.template=n(57),e.uniqueId=n(67)},function(t,e,n){function i(t){var e=!0;if(!t)return e;var n=l.call(t),i=t.length;return n==a||n==c||n==s||n==u&&"number"==typeof i&&o(t.splice)?!i:(r(t,function(){return e=!1}),e)}var r=n(36),o=n(49),s="[object Arguments]",a="[object Array]",u="[object Object]",c="[object String]",l=Object.prototype.toString;t.exports=i},function(t,e,n){var i=n(37),r=n(52),o=n(44),s=function(t,e,n){var s,a=t,u=a;if(!a)return u;if(!o[typeof a])return u;e=e&&void 0===n?e:i(e,n,3);for(var c=-1,l=o[typeof a]&&r(a),h=l?l.length:0;++c<h;)if(s=l[c],!1===e(a[s],s,t))return u;return u};t.exports=s},function(t,e,n){function i(t,e,n){if("function"!=typeof t)return o;if(void 0===e||!("prototype"in t))return t;var i=t.__bindData__;if(void 0===i&&(a.funcNames&&(i=!t.name),!(i=i||!a.funcDecomp))){var h=l.call(t);a.funcNames||(i=!u.test(h)),i||(i=c.test(h),s(t,i))}if(!1===i||!0!==i&&1&i[1])return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)};case 4:return function(n,i,r,o){return t.call(e,n,i,r,o)}}return r(t,e)}var r=n(38),o=n(50),s=n(46),a=n(51),u=/^\s*function[ \n\r\t]+\w/,c=/\bthis\b/,l=Function.prototype.toString;t.exports=i},function(t,e,n){function i(t,e){return arguments.length>2?r(t,17,o(arguments,2),null,e):r(t,1,null,null,e)}var r=n(39),o=n(47);t.exports=i},function(t,e,n){function i(t,e,n,u,h,f){var d=1&e,p=4&e,m=16&e,g=32&e;if(!(2&e)&&!s(t))throw new TypeError;m&&!n.length&&(e&=-17,m=n=!1),g&&!u.length&&(e&=-33,g=u=!1);var v=t&&t.__bindData__;if(v&&!0!==v)return(v=a(v))[2]&&(v[2]=a(v[2])),v[3]&&(v[3]=a(v[3])),!d||1&v[1]||(v[4]=h),!d&&1&v[1]&&(e|=8),!p||4&v[1]||(v[5]=f),m&&c.apply(v[2]||(v[2]=[]),n),g&&l.apply(v[3]||(v[3]=[]),u),v[1]|=e,i.apply(null,v);return(1==e||17===e?r:o)([t,e,n,u,h,f])}var r=n(40),o=n(48),s=n(49),a=n(47),u=[],c=u.push,l=u.unshift;t.exports=i},function(t,e,n){function i(t){function e(){if(i){var t=a(i);u.apply(t,arguments)}if(this instanceof e){var s=r(n.prototype),l=n.apply(s,t||arguments);return o(l)?l:s}return n.apply(c,t||arguments)}var n=t[0],i=t[2],c=t[4];return s(e,t),e}var r=n(41),o=n(43),s=n(46),a=n(47),u=[].push;t.exports=i},function(t,e,n){(function(e){function i(t){return o(t)?s(t):{}}var r=n(42),o=n(43),s=(n(45),r(s=Object.create)&&s);s||(i=function(){function t(){}return function(n){if(o(n)){t.prototype=n;var i=new t;t.prototype=null}return i||e.Object()}}()),t.exports=i}).call(e,function(){return this}())},function(t){function e(t){return"function"==typeof t&&i.test(t)}var n=Object.prototype.toString,i=RegExp("^"+String(n).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");t.exports=e},function(t,e,n){function i(t){return!(!t||!r[typeof t])}var r=n(44);t.exports=i},function(t){var e={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1};t.exports=e},function(t){function e(){}t.exports=e},function(t,e,n){var i=n(42),r=n(45),o={configurable:!1,enumerable:!1,value:null,writable:!1},s=function(){try{var t={},e=i(e=Object.defineProperty)&&e,n=e(t,t,t)&&e}catch(r){}return n}(),a=s?function(t,e){o.value=e,s(t,"__bindData__",o)}:r;t.exports=a},function(t){function e(t,e,n){e||(e=0),void 0===n&&(n=t?t.length:0);for(var i=-1,r=n-e||0,o=Array(r<0?0:r);++i<r;)o[i]=t[e+i];return o}t.exports=e},function(t,e,n){function i(t){function e(){var t=p?f:this;if(l){var s=a(l);u.apply(s,arguments)}if((h||g)&&(s||(s=a(arguments)),h&&u.apply(s,h),g&&s.length<d))return c|=16,i([n,v?c:-4&c,s,null,f,d]);if(s||(s=arguments),m&&(n=t[_]),this instanceof e){t=r(n.prototype);var y=n.apply(t,s);return o(y)?y:t}return n.apply(t,s)}var n=t[0],c=t[1],l=t[2],h=t[3],f=t[4],d=t[5],p=1&c,m=2&c,g=4&c,v=8&c,_=n;return s(e,t),e}var r=n(41),o=n(43),s=n(46),a=n(47),u=[].push;t.exports=i},function(t){function e(t){return"function"==typeof t}t.exports=e},function(t){function e(t){return t}t.exports=e},function(t,e,n){(function(e){var i=n(42),r=/\bthis\b/,o={};o.funcDecomp=!i(e.WinRTError)&&r.test(function(){return this}),o.funcNames="string"==typeof Function.name,t.exports=o}).call(e,function(){return this}())},function(t,e,n){var i=n(42),r=n(43),o=n(53),s=i(s=Object.keys)&&s,a=s?function(t){return r(t)?s(t):[]}:o;t.exports=a},function(t,e,n){var i=n(44),r=Object.prototype.hasOwnProperty,o=function(t){var e,n=t,o=[];if(!n)return o;if(!i[typeof t])return o;for(e in n)r.call(n,e)&&o.push(e);return o};t.exports=o},function(t){function e(t){return"string"==typeof t||t&&"object"==typeof t&&i.call(t)==n||!1}var n="[object String]",i=Object.prototype.toString;t.exports=e},function(t){function e(t){return void 0===t}t.exports=e},function(t,e,n){function i(t,e){if(t){var n=t[e];return r(n)?t[e]():n}}var r=n(49);t.exports=i},function(t,e,n){function i(t,e,n){var i=u.imports._.templateSettings||u;t=String(t||""),n=r({},n,i);var g,v=r({},n.imports,i.imports),_=s(v),y=c(v),b=0,x=n.interpolate||p,w="__p += '",k=RegExp((n.escape||p).source+"|"+x.source+"|"+(x===a?d:p).source+"|"+(n.evaluate||p).source+"|$","g");t.replace(k,function(e,n,i,r,s,a){return i||(i=r),w+=t.slice(b,a).replace(m,o),n&&(w+="' +\n__e("+n+") +\n'"),s&&(g=!0,w+="';\n"+s+";\n__p += '"),i&&(w+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),b=a+e.length,e}),w+="';\n";var E=n.variable,S=E;S||(w="with ("+(E="obj")+") {\n"+w+"\n}\n"),w=(g?w.replace(l,""):w).replace(h,"$1").replace(f,"$1;"),w="function("+E+") {\n"+(S?"":E+" || ("+E+" = {});\n")+"var __t, __p = '', __e = _.escape"+(g?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+w+"return __p\n}";try{var L=Function(_,"return "+w).apply(undefined,y)}catch(T){throw T.source=w,T}return e?L(e):(L.source=w,L)}var r=n(58),o=(n(59),n(63)),s=n(52),a=n(64),u=n(65),c=n(66),l=/\b__p \+= '';/g,h=/\b(__p \+=) '' \+/g,f=/(__e\(.*?\)|\b__t\)) \+\n'';/g,d=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,p=/($^)/,m=/['\n\r\t\u2028\u2029\\]/g;t.exports=i},function(t,e,n){var i=n(52),r=n(44),o=function(t,e,n){var o,s=t,a=s;if(!s)return a;for(var u=arguments,c=0,l="number"==typeof n?2:u.length;++c<l;)if((s=u[c])&&r[typeof s])for(var h=-1,f=r[typeof s]&&i(s),d=f?f.length:0;++h<d;)"undefined"==typeof a[o=f[h]]&&(a[o]=s[o]);return a};t.exports=o},function(t,e,n){function i(t){return null==t?"":String(t).replace(o,r)}var r=n(60),o=(n(52),n(62));t.exports=i},function(t,e,n){function i(t){return r[t]}var r=n(61);t.exports=i},function(t){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};t.exports=e},function(t,e,n){var i=n(61),r=n(52),o=RegExp("["+r(i).join("")+"]","g");t.exports=o},function(t){function e(t){return"\\"+n[t]}var n={"\\":"\\","'":"'","\n":"n","\r":"r","\t":"t","\u2028":"u2028","\u2029":"u2029"};t.exports=e},function(t){var e=/<%=([\s\S]+?)%>/g;t.exports=e},function(t,e,n){var i=n(59),r={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:n(64),variable:"",imports:{_:{escape:i}}};t.exports=r},function(t,e,n){function i(t){for(var e=-1,n=r(t),i=n.length,o=Array(i);++e<i;)o[e]=t[n[e]];return o}var r=n(52);t.exports=i},function(t){function e(t){var e=++n;return String(null==t?"":t)+e}var n=0;t.exports=e},function(t){"use strict";var e={html:['<div class="st-block__dropzone">','<svg role="img" class="st-icon"><use xlink:href="<%= config.defaults.iconUrl %>#<%= _.result(block, "icon_name") %>"/></svg>','<p><%= i18n.t("general:drop", { block: "<span>" + _.result(block, "title") + "</span>" }) %>',"</p></div>"].join("\n"),re_render_on_reorder:!1},n={html:['<input type="text" placeholder="<%= i18n.t("general:paste") %>"',' class="st-block__paste-input st-paste-block">'].join("")},i={html:['<div class="st-block__upload-container">','<input type="file" type="st-file-upload">','<button class="st-upload-btn"><%= i18n.t("general:upload") %></button>',"</div>"].join("\n")};t.exports={debug:!1,scribeDebug:!1,skipValidation:!1,version:"0.4.0",language:"en",instances:[],defaults:{defaultType:!1,spinner:{className:"st-spinner",lines:9,length:8,width:3,radius:6,color:"#000",speed:1.4,trail:57,shadow:!1,left:"50%",top:"50%"},Block:{drop_options:e,paste_options:n,upload_options:i},blockLimit:0,blockTypeLimits:{},required:[],uploadUrl:"/attachments",attachmentName:"attachment[name]",attachmentFile:"attachment[file]",attachmentUid:"attachment[uid]",baseImageUrl:"/sir-trevor-uploads/",iconUrl:"../src/icons/sir-trevor-icons.svg",errorsContainer:undefined,convertFromMarkdown:!0,formatBar:{commands:[{name:"Bold",title:"bold",iconName:"fmt-bold",cmd:"bold",keyCode:66,text:"B"},{name:"Italic",title:"italic",iconName:"fmt-italic",cmd:"italic",keyCode:73,text:"i"},{name:"Link",title:"link",iconName:"fmt-link",cmd:"linkPrompt",text:"link"},{name:"Unlink",title:"unlink",iconName:"fmt-unlink",cmd:"unlink",text:"link"},{name:"Heading",title:"heading",iconName:"fmt-heading",cmd:"heading",text:"heading"},{name:"Quote",title:"quote",iconName:"fmt-quote",cmd:"quote",text:"quote"}]},ajaxOptions:{headers:{}}}}},function(t,e,n){"use strict";var i=n(70)["default"],r=n(30)["default"],o=n(34),s=i(null);s.setAttributes=function(t){var e=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];return e.html&&(t.innerHTML=o.result(e,"html"),delete e.html),e.text&&(t.textContent=e.text,delete e.text),r(e).forEach(function(n){t.setAttribute(n,e[n])}),t},s.createElement=function(t){var e=arguments.length<=1||arguments[1]===undefined?{}:arguments[1],n=document.createElement(t);return s.setAttributes(n,e),n},s.insertAfter=function(t,e){e.parentNode.insertBefore(t,e.nextSibling)},s.remove=function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},s.replaceWith=function(t,e){s.remove(e),t.parentNode.replaceChild(e,t)},s.hide=function(t){t.style.display="none"},s.show=function(t){t.style.display=""},s.matches=function(t){var e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector||function(t){for(var e=this,n=(e.document||e.ownerDocument).querySelectorAll(t),i=0;n[i]&&n[i]!==e;)i++;return!!n[i]};return function(t,n){return e.call(t,n)}}(Element.prototype),s.getClosest=function(t,e){for(;t&&t!==document.body&&!s.matches(t,e);t=t.parentNode);return t},s.wrap=function(t,e){return e=e||document.createElement("div"),t.nextSibling?t.parentNode.insertBefore(e,t.nextSibling):t.parentNode.appendChild(e),e.appendChild(t)},s.createDocumentFragmentFromString=function(t){var e=document.createDocumentFragment(),n=document.createElement("div");for(n.innerHTML=t;n.childNodes[0];)e.appendChild(n.childNodes[0]);return e},t.exports=s},function(t,e,n){t.exports={"default":n(71),__esModule:!0}},function(t,e,n){var i=n(11);t.exports=function(t,e){return i.create(t,e)}},function(t,e,n){"use strict";var i=n(30)["default"],r=n(34),o=n(68),s=n(29),a={en:{general:{"delete":"Delete?",drop:"Drag __block__ here",paste:"Or paste URL here",upload:"...or choose a file",close:"close",position:"Position",wait:"Please wait...",link:"Enter a link",yes:"Yes",no:"No"},errors:{title:"You have the following errors:",validation_fail:"__type__ block is invalid",block_empty:"__name__ must not be empty",type_missing:"You must have a block of type __type__",required_type_empty:"A required block type __type__ is empty",load_fail:"There was a problem loading the contents of the document"},blocks:{text:{title:"Text"},list:{title:"List"},quote:{title:"Quote",credit_field:"Credit"},image:{title:"Image",upload_error:"There was a problem with your upload"},video:{title:"Video"},tweet:{title:"Tweet",fetch_error:"There was a problem fetching your tweet"},embedly:{title:"Embedly",fetch_error:"There was a problem fetching your embed",key_missing:"An Embedly API key must be present"},heading:{title:"Heading"}}}};window.i18n===undefined?(s.log("Using i18n stub"),window.i18n={t:function(t,e){var n,s,u,c,l=t.split(":");for(s=a[o.language],c=0;c<l.length;c++)u=l[c],r.isUndefined(s[u])||(s=s[u]);return n=s,r.isString(n)?(n.indexOf("__")>=0&&i(e).forEach(function(t){n=n.replace("__"+t+"__",e[t])}),n):""}}):(s.log("Using i18next"),i18n.init({resStore:a,fallbackLng:o.language,ns:{namespaces:["general","blocks"],defaultNs:"general"}})),t.exports=a},function(t,e,n){"use strict";t.exports=n(74)},function(t,e,n){var i;!function(r,o){(i=function(){return r.Eventable=o()}.call(e,n,e,t))===undefined||(t.exports=i)}(this,function(){function t(t){var e,n=2;return function(){return--n>0?e=t.apply(this,arguments):t=null,e}}function e(t,e){i[t]=function(t,n,i){return(this._listeners||(this._listeners={}))[t._listenerId||(t._listenerId=(new Date).getTime())]=t,"object"==typeof n&&(i=this),t[e](n,i,this),this}}var n=[].slice,i={on:function(t,e,n){if(!o(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});return(this._events[t]||(this._events[t]=[])).push({callback:e,context:n,ctx:n||this}),this},once:function(e,n,i){if(!o(this,"once",e,[n,i])||!n)return this;var r=this,s=t(function(){r.off(e,s),n.apply(this,arguments)});return s._callback=n,this.on(e,s,i)},off:function(t,e,n){var i,r,s,a,u,c,l,h;if(!this._events||!o(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(u=0,c=(a=t?[t]:Object.keys(this._events)).length;u<c;u++)if(t=a[u],s=this._events[t]){if(this._events[t]=i=[],e||n)for(l=0,h=s.length;l<h;l++)r=s[l],(e&&e!==r.callback&&e!==r.callback._callback||n&&n!==r.context)&&i.push(r);i.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=n.call(arguments,1);if(!o(this,"trigger",t,e))return this;var i=this._events[t],r=this._events.all;return i&&s(i,e),r&&s(r,arguments),this},stopListening:function(t,e,n){var i=this._listeners;if(!i)return this;var r=!e&&!n;"object"==typeof e&&(n=this),t&&((i={})[t._listenerId]=t);for(var o in i)i[o].off(e,n,this),r&&delete this._listeners[o];return this}},r=/\s+/,o=function(t,e,n,i){if(!n)return!0;if("object"==typeof n){for(var o in n)t[e].apply(t,[o,n[o]].concat(i));return!1}if(r.test(n)){for(var s=n.split(r),a=0,u=s.length;a<u;a++)t[e].apply(t,[s[a]].concat(i));return!1}return!0},s=function(t,e){var n,i=-1,r=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++i<r;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o);return;case 2:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o,s);return;case 3:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o,s,a);return;default:for(;++i<r;)(n=t[i]).callback.apply(n.ctx,e)}};return e("listenTo","on"),e("listenToOnce","once"),i.bind=i.on,i.unbind=i.off,i})},function(t,e,n){"use strict";var i=n(2)["default"];t.exports=i({},n(73))},function(t,e,n){"use strict";var i=n(2)["default"],r=n(34),o=n(29),s=function(t,e){this.mediator=e,this.initialize(t?t.trim():"")};i(s.prototype,{initialize:function(t){this.store=this._parseData(t)||{data:[]}},retrieve:function(){return this.store},toString:function(t){return JSON.stringify(this.store,undefined,t)},reset:function(){o.log("Resetting the EditorStore"),this.store={data:[]}},addData:function(t){return this.store.data.push(t),this.store},_parseData:function(t){var e;if(0===t.length)return e;try{var n=JSON.parse(t);r.isUndefined(n.data)||(e=n)}catch(i){this.mediator.trigger("errors:add",{text:i18n.t("errors:load_fail")}),this.mediator.trigger("errors:render"),console.log("Sorry there has been a problem with parsing the JSON"),console.log(i)}return e}}),t.exports=s},function(t,e,n){"use strict";var i=n(2)["default"],r=n(30)["default"],o=n(29),s=n(75),a=function(t){this.form=t,this.initialize()};i(a.prototype,{initialize:function(){this.submitBtns=this.form.querySelectorAll("input[type='submit']");var t=[];Array.prototype.forEach.call(this.submitBtns,function(e){t.push(e.getAttribute("value"))}),this.submitBtnTitles=t,this.canSubmit=!0,this.globalUploadCount=0,this._bindEvents()},setSubmitButton:function(t,e){Array.prototype.forEach.call(this.submitBtns,function(t){t.setAttribute("value",e)})},resetSubmitButton:function(){var t=this.submitBtnTitles;Array.prototype.forEach.call(this.submitBtns,function(e,n){e.setAttribute("value",t[n])})},onUploadStart:function(){this.globalUploadCount++,o.log("onUploadStart called "+this.globalUploadCount),1===this.globalUploadCount&&this._disableSubmitButton()},onUploadStop:function(){this.globalUploadCount=this.globalUploadCount<=0?0:this.globalUploadCount-1,o.log("onUploadStop called "+this.globalUploadCount),0===this.globalUploadCount&&this._enableSubmitButton()},onError:function(){o.log("onError called"),this.canSubmit=!1},_disableSubmitButton:function(t){this.setSubmitButton(null,t||i18n.t("general:wait")),Array.prototype.forEach.call(this.submitBtns,function(t){t.setAttribute("disabled","disabled"),t.classList.add("disabled")})},_enableSubmitButton:function(){this.resetSubmitButton(),Array.prototype.forEach.call(this.submitBtns,function(t){t.removeAttribute("disabled"),t.classList.remove("disabled")})},_events:{disableSubmitButton:"_disableSubmitButton",enableSubmitButton:"_enableSubmitButton",setSubmitButton:"setSubmitButton",resetSubmitButton:"resetSubmitButton",onError:"onError",onUploadStart:"onUploadStart",onUploadStop:"onUploadStop"},_bindEvents:function(){r(this._events).forEach(function(t){s.on(t,this[this._events[t]],this)},this)}}),t.exports=a},function(t,e,n){"use strict";var i=n(34),r=n(68),o=n(29),s=n(79),a=n(75);t.exports=function(t,e,n,u){var c=[t.blockID,(new Date).getTime(),"raw"].join("-"),l=new FormData,h=t.attachmentName||r.defaults.attachmentName,f=t.attachmentFile||r.defaults.attachmentFile,d=t.attachmentUid||r.defaults.attachmentUid;l.append(h,e.name),l.append(f,e),l.append(d,c),a.trigger("onUploadStart",l),t.resetMessages();var p=function(e){o.log("Upload callback called"),a.trigger("onUploadStop",e),!i.isUndefined(n)&&i.isFunction(n)&&n.apply(t,arguments,e),t.removeQueuedItem(c)},m=function(e,n,r){o.log("Upload callback error called"),a.trigger("onUploadStop",undefined,r,n,e),!i.isUndefined(u)&&i.isFunction(u)&&u.call(t,n),t.removeQueuedItem(c)},g=t.uploadUrl||r.defaults.uploadUrl,v=s.fetch(g,{body:l,method:"POST",dataType:"json"});return t.addQueuedItem(c,v),v.then(p)["catch"](m),v}},function(t,e,n){"use strict";var i=n(70)["default"],r=n(2)["default"];n(80);var o=n(81),s=n(82),a=n(68),u=i(null);u.fetch=function(t){var e,n=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];return e=(n=r({},a.defaults.ajaxOptions,n)).jsonp?o(t).promise:fetch(t,n).then(function(t){return"json"===n.dataType?t.json():t.text()}),s(e)},t.exports=u},function(){!function(){"use strict";function t(t){if("string"!=typeof t&&(t=t.toString()),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function e(t){return"string"!=typeof t&&(t=t.toString()),t}function n(t){this.map={},t instanceof n?t.forEach(function(t,e){this.append(e,t)},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function i(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function r(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function o(t){var e=new FileReader;return e.readAsArrayBuffer(t),r(e)}function s(t){var e=new FileReader;return e.readAsText(t),r(e)}function a(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,"string"==typeof t)this._bodyText=t;else if(d.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(d.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else{if(t)throw new Error("unsupported BodyInit type");this._bodyText=""}},d.blob?(this.blob=function(){var t=i(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(o)},this.text=function(){var t=i(this);if(t)return t;if(this._bodyBlob)return s(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var t=i(this);return t||Promise.resolve(this._bodyText)},d.formData&&(this.formData=function(){return this.text().then(l)}),this.json=function(){return this.text().then(JSON.parse)},this}function u(t){var e=t.toUpperCase();return p.indexOf(e)>-1?e:t}function c(t,e){if(e=e||{},this.url=t,this.credentials=e.credentials||"omit",this.headers=new n(e.headers),this.method=u(e.method||"GET"),this.mode=e.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&e.body)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(e.body)}function l(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),i=n.shift().replace(/\+/g," "),r=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(i),decodeURIComponent(r))}}),e}function h(t){var e=new n;return t.getAllResponseHeaders().trim().split("\n").forEach(function(t){var n=t.trim().split(":"),i=n.shift().trim(),r=n.join(":").trim();e.append(i,r)}),e}function f(t,e){e||(e={}),this._initBody(t),this.type="default",this.url=null,this.status=e.status,this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText,this.headers=e.headers instanceof n?e.headers:new n(e.headers),this.url=e.url||""}if(!self.fetch){n.prototype.append=function(n,i){n=t(n),i=e(i);var r=this.map[n];r||(r=[],this.map[n]=r),r.push(i)},n.prototype["delete"]=function(e){delete this.map[t(e)]},n.prototype.get=function(e){var n=this.map[t(e)];return n?n[0]:null},n.prototype.getAll=function(e){return this.map[t(e)]||[]},n.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},n.prototype.set=function(n,i){this.map[t(n)]=[e(i)]},n.prototype.forEach=function(t,e){Object.getOwnPropertyNames(this.map).forEach(function(n){this.map[n].forEach(function(i){t.call(e,i,n,this)},this)},this)};var d={blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in self},p=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];a.call(c.prototype),a.call(f.prototype),self.Headers=n,self.Request=c,self.Response=f,self.fetch=function(t,e){var n;return n=c.prototype.isPrototypeOf(t)&&!e?t:new c(t,e),new Promise(function(t,e){function i(){return"responseURL"in r?r.responseURL:/^X-Request-URL:/m.test(r.getAllResponseHeaders())?r.getResponseHeader("X-Request-URL"):void 0}var r=new XMLHttpRequest;r.onload=function(){var n=1223===r.status?204:r.status;if(n<100||n>599)e(new TypeError("Network request failed"));else{var o={status:n,statusText:r.statusText,headers:h(r),url:i()},s="response"in r?r.response:r.responseText;t(new f(s,o))}},r.onerror=function(){e(new TypeError("Network request failed"))},r.open(n.method,n.url,!0),"include"===n.credentials&&(r.withCredentials=!0),"responseType"in r&&d.blob&&(r.responseType="blob"),n.headers.forEach(function(t,e){r.setRequestHeader(e,t)}),r.send("undefined"==typeof n._bodyInit?null:n._bodyInit)})},self.fetch.polyfill=!0}}()},function(t){var e=0,n=function(t,n){var i,r,o,s,a,u=(n=n||{}).prefix||"__jp",c=n.param||"callback",l=n.timeout?n.timeout:15e3,h=document.getElementsByTagName("script")[0]||document.head,f=function(){},d=u+e++;return o=function(){i&&i.parentNode&&i.parentNode.removeChild(i),window[d]=f,r&&clearTimeout(r)},a=new Promise(function(e,n){l&&(r=setTimeout(function(){o(),n(new Error("Timeout"))},l)),window[d]=function(t){o(),e(t)},t=(t+=(~t.indexOf("?")?"&":"?")+c+"="+encodeURIComponent(d)).replace("?&","?"),(i=document.createElement("script")).src=t,h.parentNode.insertBefore(i,h),s=function(){window[d]&&(o(),n(new Error("Canceled")))}}),{promise:a,cancel:s}};t.exports=n},function(t,e,n){"use strict";var i=n(83)["default"],r=function(t){var e,n,r=new i(function(t,i){e=t,n=i});return t.then(function(t){r.cancelled||e(t)},function(t){r.cancelled||n(t)}),r.cancel=function(){this.cancelled=!0},r};t.exports=r},function(t,e,n){t.exports={"default":n(84),__esModule:!0}},function(t,e,n){n(85),n(86),n(102),n(107),t.exports=n(7).Promise},function(){},function(t,e,n){"use strict";var i=n(87)(!0);n(89)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:undefined,done:!0}:(t=i(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){var i=n(88),r=n(13);t.exports=function(t){return function(e,n){var o,s,a=String(r(e)),u=i(n),c=a.length;return u<0||u>=c?t?"":undefined:(o=a.charCodeAt(u))<55296||o>56319||u+1===c||(s=a.charCodeAt(u+1))<56320||s>57343?t?a.charAt(u):o:t?a.slice(u,u+2):s-56320+(o-55296<<10)+65536}}},function(t){var e=Math.ceil,n=Math.floor
;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:e)(t)}},function(t,e,n){"use strict";var i=n(90),r=n(5),o=n(91),s=n(92),a=n(95),u=n(96),c=n(97),l=n(98),h=n(11).getProto,f=n(99)("iterator"),d=!([].keys&&"next"in[].keys()),p="@@iterator",m="keys",g="values",v=function(){return this};t.exports=function(t,e,n,_,y,b,x){c(n,e,_);var w,k,E=function(t){if(!d&&t in C)return C[t];switch(t){case m:case g:return function(){return new n(this,t)}}return function(){return new n(this,t)}},S=e+" Iterator",L=y==g,T=!1,C=t.prototype,M=C[f]||C[p]||y&&C[y],I=M||E(y);if(M){var A=h(I.call(new t));l(A,S,!0),!i&&a(C,p)&&s(A,f,v),L&&M.name!==g&&(T=!0,I=function(){return M.call(this)})}if(i&&!x||!d&&!T&&C[f]||s(C,f,I),u[e]=I,u[S]=v,y)if(w={values:L?I:E(g),keys:b?I:E(m),entries:L?E("entries"):I},x)for(k in w)k in C||o(C,k,w[k]);else r(r.P+r.F*(d||T),e,w);return w}},function(t){t.exports=!0},function(t,e,n){t.exports=n(92)},function(t,e,n){var i=n(11),r=n(93);t.exports=n(94)?function(t,e,n){return i.setDesc(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},function(t){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){t.exports=!n(16)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t){var e={}.hasOwnProperty;t.exports=function(t,n){return e.call(t,n)}},function(t){t.exports={}},function(t,e,n){"use strict";var i=n(11),r=n(93),o=n(98),s={};n(92)(s,n(99)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=i.create(s,{next:r(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var i=n(11).setDesc,r=n(95),o=n(99)("toStringTag");t.exports=function(t,e,n){t&&!r(t=n?t:t.prototype,o)&&i(t,o,{configurable:!0,value:e})}},function(t,e,n){var i=n(100)("wks"),r=n(101),o=n(6).Symbol;t.exports=function(t){return i[t]||(i[t]=o&&o[t]||(o||r)("Symbol."+t))}},function(t,e,n){var i=n(6),r="__core-js_shared__",o=i[r]||(i[r]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t){var e=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(t===undefined?"":t,")_",(++e+n).toString(36))}},function(t,e,n){n(103);var i=n(96);i.NodeList=i.HTMLCollection=i.Array},function(t,e,n){"use strict";var i=n(104),r=n(105),o=n(96),s=n(106);t.exports=n(89)(Array,"Array",function(t,e){this._t=s(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=undefined,r(1)):"keys"==e?r(0,n):"values"==e?r(0,t[n]):r(0,[n,t[n]])},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(t){t.exports=function(){}},function(t){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){var i=n(14),r=n(13);t.exports=function(t){return i(r(t))}},function(t,e,n){"use strict";var i,r=n(11),o=n(90),s=n(6),a=n(8),u=n(108),c=n(5),l=n(109),h=n(110),f=n(9),d=n(111),p=n(112),m=n(117).set,g=n(118),v=n(99)("species"),_=n(119),y=n(120),b="Promise",x=s.process,w="process"==u(x),k=s[b],E=function(t){var e=new k(function(){});return t&&(e.constructor=Object),k.resolve(e)===e},S=function(){function t(e){var n=new k(e);return m(n,t.prototype),n}var e=!1;try{if(e=k&&k.resolve&&E(),m(t,k),t.prototype=r.create(k.prototype,{constructor:{value:t}}),t.resolve(5).then(function(){})instanceof t||(e=!1),e&&n(94)){var i=!1;k.resolve(r.setDesc({},"then",{get:function(){i=!0}})),e=i}}catch(o){e=!1}return e}(),L=function(t,e){return!(!o||t!==k||e!==i)||g(t,e)},T=function(t){var e=h(t)[v];return e!=undefined?e:t},C=function(t){var e;return!(!l(t)||"function"!=typeof(e=t.then))&&e},M=function(t){var e,n;this.promise=new t(function(t,i){if(e!==undefined||n!==undefined)throw TypeError("Bad Promise constructor");e=t,n=i}),this.resolve=f(e),this.reject=f(n)},I=function(t){try{t()}catch(e){return{error:e}}},A=function(t,e){if(!t.n){t.n=!0;var n=t.c;y(function(){for(var i=t.v,r=1==t.s,o=0,a=function(e){var n,o,s=r?e.ok:e.fail,a=e.resolve,u=e.reject;try{s?(r||(t.h=!0),(n=!0===s?i:s(i))===e.promise?u(TypeError("Promise-chain cycle")):(o=C(n))?o.call(n,a,u):a(n)):u(i)}catch(c){u(c)}};n.length>o;)a(n[o++]);n.length=0,t.n=!1,e&&setTimeout(function(){var e,n,r=t.p;P(r)&&(w?x.emit("unhandledRejection",i,r):(e=s.onunhandledrejection)?e({promise:r,reason:i}):(n=s.console)&&n.error&&n.error("Unhandled promise rejection",i)),t.a=undefined},1)})}},P=function(t){var e,n=t._d,i=n.a||n.c,r=0;if(n.h)return!1;for(;i.length>r;)if((e=i[r++]).fail||!P(e.promise))return!1;return!0},O=function(t){var e=this;e.d||(e.d=!0,(e=e.r||e).v=t,e.s=2,e.a=e.c.slice(),A(e,!0))},D=function(t){var e,n=this;if(!n.d){n.d=!0,n=n.r||n;try{if(n.p===t)throw TypeError("Promise can't be resolved itself");(e=C(t))?y(function(){var i={r:n,d:!1};try{e.call(t,a(D,i,1),a(O,i,1))}catch(r){O.call(i,r)}}):(n.v=t,n.s=1,A(n,!1))}catch(i){O.call({r:n,d:!1},i)}}};S||(k=function(t){f(t);var e=this._d={p:d(this,k,b),c:[],a:undefined,s:0,d:!1,v:undefined,h:!1,n:!1};try{t(a(D,e,1),a(O,e,1))}catch(n){O.call(e,n)}},n(125)(k.prototype,{then:function(t,e){var n=new M(_(this,k)),i=n.promise,r=this._d;return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,r.c.push(n),r.a&&r.a.push(n),r.s&&A(r,!1),i},"catch":function(t){return this.then(undefined,t)}})),c(c.G+c.W+c.F*!S,{Promise:k}),n(98)(k,b),n(126)(b),i=n(7)[b],c(c.S+c.F*!S,b,{reject:function(t){var e=new M(this);return(0,e.reject)(t),e.promise}}),c(c.S+c.F*(!S||E(!0)),b,{resolve:function(t){if(t instanceof k&&L(t.constructor,this))return t;var e=new M(this);return(0,e.resolve)(t),e.promise}}),c(c.S+c.F*!(S&&n(127)(function(t){k.all(t)["catch"](function(){})})),b,{all:function(t){var e=T(this),n=new M(e),i=n.resolve,o=n.reject,s=[],a=I(function(){p(t,!1,s.push,s);var n=s.length,a=Array(n);n?r.each.call(s,function(t,r){var s=!1;e.resolve(t).then(function(t){s||(s=!0,a[r]=t,--n||i(a))},o)}):i(a)});return a&&o(a.error),n.promise},race:function(t){var e=T(this),n=new M(e),i=n.reject,r=I(function(){p(t,!1,function(t){e.resolve(t).then(n.resolve,i)})});return r&&i(r.error),n.promise}})},function(t,e,n){var i=n(15),r=n(99)("toStringTag"),o="Arguments"==i(function(){return arguments}());t.exports=function(t){var e,n,s;return t===undefined?"Undefined":null===t?"Null":"string"==typeof(n=(e=Object(t))[r])?n:o?i(e):"Object"==(s=i(e))&&"function"==typeof e.callee?"Arguments":s}},function(t){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){var i=n(109);t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},function(t){t.exports=function(t,e,n){if(!(t instanceof e))throw TypeError(n+": use the 'new' operator!");return t}},function(t,e,n){var i=n(8),r=n(113),o=n(114),s=n(110),a=n(115),u=n(116);t.exports=function(t,e,n,c){var l,h,f,d=u(t),p=i(n,c,e?2:1),m=0;if("function"!=typeof d)throw TypeError(t+" is not iterable!");if(o(d))for(l=a(t.length);l>m;m++)e?p(s(h=t[m])[0],h[1]):p(t[m]);else for(f=d.call(t);!(h=f.next()).done;)r(f,p,h.value,e)}},function(t,e,n){var i=n(110);t.exports=function(t,e,n,r){try{return r?e(i(n)[0],n[1]):e(n)}catch(s){var o=t["return"];throw o!==undefined&&i(o.call(t)),s}}},function(t,e,n){var i=n(96),r=n(99)("iterator"),o=Array.prototype;t.exports=function(t){return t!==undefined&&(i.Array===t||o[r]===t)}},function(t,e,n){var i=n(88),r=Math.min;t.exports=function(t){return t>0?r(i(t),9007199254740991):0}},function(t,e,n){var i=n(108),r=n(99)("iterator"),o=n(96);t.exports=n(7).getIteratorMethod=function(t){if(t!=undefined)return t[r]||t["@@iterator"]||o[i(t)]}},function(t,e,n){var i=n(11).getDesc,r=n(109),o=n(110),s=function(t,e){if(o(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{(r=n(8)(Function.call,i(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(o){e=!0}return function(t,n){return s(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):undefined),check:s}},function(t){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},function(t,e,n){var i=n(110),r=n(9),o=n(99)("species");t.exports=function(t,e){var n,s=i(t).constructor;return s===undefined||(n=i(s)[o])==undefined?e:r(n)}},function(t,e,n){var i,r,o,s=n(6),a=n(121).set,u=s.MutationObserver||s.WebKitMutationObserver,c=s.process,l=s.Promise,h="process"==n(15)(c),f=function(){var t,e,n;for(h&&(t=c.domain)&&(c.domain=null,t.exit());i;)e=i.domain,n=i.fn,e&&e.enter(),n(),e&&e.exit(),i=i.next;r=undefined,t&&t.enter()};if(h)o=function(){c.nextTick(f)};else if(u){var d=1,p=document.createTextNode("");new u(f).observe(p,{characterData:!0}),o=function(){p.data=d=-d}}else o=l&&l.resolve?function(){l.resolve().then(f)}:function(){a.call(s,f)};t.exports=function(t){var e={fn:t,next:undefined,domain:h&&c.domain};r&&(r.next=e),i||(i=e,o()),r=e}},function(t,e,n){var i,r,o,s=n(8),a=n(122),u=n(123),c=n(124),l=n(6),h=l.process,f=l.setImmediate,d=l.clearImmediate,p=l.MessageChannel,m=0,g={},v="onreadystatechange",_=function(){var t=+this;if(g.hasOwnProperty(t)){var e=g[t];delete g[t],e()}},y=function(t){_.call(t.data)};f&&d||(f=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return g[++m]=function(){a("function"==typeof t?t:Function(t),e)},i(m),m},d=function(t){delete g[t]},"process"==n(15)(h)?i=function(t){h.nextTick(s(_,t,1))}:p?(o=(r=new p).port2,r.port1.onmessage=y,i=s(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(i=function(t){l.postMessage(t+"","*")},l.addEventListener("message",y,!1)):i=v in c("script")?function(t){u.appendChild(c("script"))[v]=function(){u.removeChild(this),_.call(t)}}:function(t){setTimeout(s(_,t,1),0)}),t.exports={set:f,clear:d}},function(t){t.exports=function(t,e,n){var i=n===undefined;switch(e.length){case 0:return i?t():t.call(n);case 1:return i?t(e[0]):t.call(n,e[0]);case 2:return i?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return i?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return i?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){t.exports=n(6).document&&document.documentElement},function(t,e,n){var i=n(109),r=n(6).document,o=i(r)&&i(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}},function(t,e,n){var i=n(91);t.exports=function(t,e){for(var n in e)i(t,n,e[n]);return t}},function(t,e,n){"use strict";var i=n(7),r=n(11),o=n(94),s=n(99)("species");t.exports=function(t){var e=i[t];o&&e&&!e[s]&&r.setDesc(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,n){var i=n(99)("iterator"),r=!1;try{var o=[7][i]();o["return"]=function(){r=!0},Array.from(o,function(){throw 2})}catch(s){}t.exports=function(t,e){if(!e&&!r)return!1;var n=!1;try{var o=[7],a=o[i]();a.next=function(){n=!0},o[i]=function(){return a},t(o)}catch(s){}return n}},function(t,e,n){"use strict";t.exports={Ajaxable:n(129),Controllable:n(130),Droppable:n(132),Fetchable:n(134),Pastable:n(135),Uploadable:n(136),MultiEditable:n(137),Textable:n(229)}},function(t,e,n){"use strict";var i=n(29);t.exports={mixinName:"Ajaxable",ajaxable:!0,initializeAjaxable:function(){this._queued=[]},addQueuedItem:function(t,e){i.log("Adding queued item for "+this.blockID+" called "+t),this._queued.push({name:t,deferred:e})},removeQueuedItem:function(t){i.log("Removing queued item for "+this.blockID+" called "+t),this._queued=this._queued.filter(function(e){return e.name!==t})},hasItemsInQueue:function(){return this._queued.length>0},resolveAllInQueue:function(){this._queued.forEach(function(t){i.log("Aborting queued request: "+t.name),t.deferred.cancel()},this)}}},function(t,e,n){"use strict";var i=n(30)["default"],r=n(29),o=n(68),s=n(69),a=n(131);t.exports={mixinName:"Controllable",initializeControllable:function(){r.log("Adding controllable to block "+this.blockID),this.inner.classList.add("st-block__inner--controllable"),this.control_ui=s.createElement("div",{"class":"st-block__control-ui"}),i(this.controls).forEach(function(t){this.addUiControl(t,this.controls[t].bind(this))},this),this.inner.appendChild(this.control_ui)},getControlTemplate:function(t){return s.createElement("a",{"data-icon":t,"class":"st-icon st-block-control-ui-btn st-block-control-ui-btn--"+t,html:'<svg role="img" class="st-icon">\n                  <use xlink:href="'+o.defaults.iconUrl+"#"+t+'"/>\n                </svg>'})},addUiControl:function(t,e){var n=this;this.control_ui.appendChild(this.getControlTemplate(t)),a.delegate(this.control_ui,".st-block-control-ui-btn--"+t,"click",function(i){n.selectUiControl(t),e(i)})},selectUiControl:function(t){var e=this,n="st-block-control-ui-btn--selected";i(this.controls).forEach(function(t){e.getControlUiBtn(t).classList.remove(n)}),this.getControlUiBtn(t).classList.add(n)},getControlUiBtn:function(t){return this.control_ui.querySelector(".st-block-control-ui-btn--"+t)}}},function(t,e,n){"use strict";var i=n(69),r=function(t,e){for(var n,i={},r={shared:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),mouseEvent:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),keyEvent:"char charCode key keyCode".split(" ")},o=/^key/,s=/^(?:mouse|pointer|contextmenu|drag|drop)|click/.test(t.type)?r.shared.concat(r.mouseEvent):o.test(t.type)?r.shared.concat(r.keyEvent):r.shared,a=0;a<s.length;a++)i[n=s[a]]=t[n];return i.currentTarget=e,i.originalEvent=t,i.preventDefault=function(){this.originalEvent&&this.originalEvent.preventDefault()},i.stopPropagation=function(){this.originalEvent&&this.originalEvent.stopPropagation()},i};t.exports.delegate=function(t,e,n,o){var s=!(arguments.length<=4||arguments[4]===undefined)&&arguments[4];t.addEventListener(n,function(n){for(var s=n.target;s&&s!==t;s=s.parentNode)if(i.matches(s,e)){o.call(s,r(n,s));break}s=null},s)}},function(t,e,n){"use strict";var i=n(2)["default"],r=n(34),o=n(68),s=n(29),a=n(69),u=n(133),c=n(75);t.exports={mixinName:"Droppable",valid_drop_file_types:["File","Files","text/plain","text/uri-list"],requireInputs:!0,initializeDroppable:function(){s.log("Adding droppable to block "+this.blockID),this.drop_options=i({},o.defaults.Block.drop_options,this.drop_options),a.hide(this.editor),this.inputs.insertAdjacentHTML("beforeend",r.template(this.drop_options.html,{block:this,_:r,config:o})),u.dropArea(this.inputs.lastElementChild).addEventListener("drop",this._handleDrop.bind(this)),this.el.classList.add("st-block--droppable"),this.inner.classList.add("st-block__inner--droppable"),this._setupKeyEvents()},_handleDrop:function(t){t.preventDefault(),t.stopPropagation();var e=t.target,n=[].slice.call(t.dataTransfer.types);e.classList.remove("st-dropzone--dragover"),n&&n.some(function(t){return this.valid_drop_file_types.includes(t)},this)&&this.onDrop(t.dataTransfer),c.trigger("block:content:dropped",this.blockID)},focus:function(){this.inner.focus()},_setupKeyEvents:function(){var t=this;this.inner.setAttribute("tabindex",0),this.inner.addEventListener("keyup",function(e){if(e.target===t.inner)switch(e.keyCode){case 13:t.mediator.trigger("block:create","Text",null,t.el);break;case 8:return void t.onDeleteClick.call(t,new CustomEvent("click"))}})}}},function(t){"use strict";function e(t){t.preventDefault(),t.stopPropagation()}function n(t){t.dataTransfer.dropEffect="copy",t.currentTarget.classList.add("st-drag-over"),t.preventDefault(),t.stopPropagation()}function i(t){t.currentTarget.classList.remove("st-drag-over"),t.preventDefault(),t.stopPropagation()}t.exports={dropArea:function(t){return t.addEventListener("dragenter",e),t.addEventListener("dragover",n),t.addEventListener("dragleave",i),t},noDropArea:function(t){return t.removeEventListener("dragenter"),t.removeEventListener("dragover"),t.removeEventListener("dragleave"),t}}},function(t,e,n){"use strict";var i=n(34),r=n(79);t.exports={mixinName:"Fetchable",initializeFetchable:function(){this.withMixin(n(129))},fetch:function(t,e,n,o){function s(t,e){t.call(this,e),this.removeQueuedItem(a)}var a=i.uniqueId(this.blockID+"_fetch"),u=r.fetch(t,e);return this.resetMessages(),this.addQueuedItem(a,u),i.isUndefined(n)||u.then(s.bind(this,n)),i.isUndefined(o)||u["catch"](s.bind(this,o)),u}}},function(t,e,n){"use strict";var i=n(2)["default"],r=n(34),o=n(68),s=n(29);t.exports={mixinName:"Pastable",requireInputs:!0,initializePastable:function(){var t=this;s.log("Adding pastable to block "+this.blockID),this.paste_options=i({},o.defaults.Block.paste_options,this.paste_options),this.inputs.insertAdjacentHTML("beforeend",r.template(this.paste_options.html,this)),Array.prototype.forEach.call(this.$(".st-paste-block"),function(e){e.addEventListener("click",function(){var t=document.createEvent("HTMLEvents");t.initEvent("select",!0,!1),this.dispatchEvent(t)}),e.addEventListener("paste",t._handleContentPaste),e.addEventListener("submit",t._handleContentPaste)})}}},function(t,e,n){"use strict";var i=n(2)["default"],r=n(34),o=n(68),s=n(29),a=n(78);t.exports={mixinName:"Uploadable",uploadsCount:0,requireInputs:!0,initializeUploadable:function(){s.log("Adding uploadable to block "+this.blockID),this.withMixin(n(129)),this.upload_options=i({},o.defaults.Block.upload_options,this.upload_options),this.inputs.insertAdjacentHTML("beforeend",r.template(this.upload_options.html,this)),Array.prototype.forEach.call(this.inputs.querySelectorAll("button"),function(t){t.addEventListener("click",function(t){t.preventDefault()})}),Array.prototype.forEach.call(this.inputs.querySelectorAll("input"),function(t){t.addEventListener("change",function(t){this.onDrop(t.currentTarget)}.bind(this))}.bind(this))},uploader:function(t,e,n){return a(this,t,e,n)}}},function(t,e,n){"use strict";var i=n(34),r=n(138);t.exports={mixinName:"MultiEditable",initializeMultiEditable:function(){this.editors={}},newTextEditor:function(t,e){var n,o,s;(o=t.tagName===undefined)?((s=document.createElement("div")).innerHTML=t,n=s.querySelector(".st-block__editor")):n=t;var a=i.uniqueId("editor-");n.setAttribute("data-editorId",a),n.addEventListener("keyup",this.getSelectionForFormatter),n.addEventListener("mouseup",this.getSelectionForFormatter);var u=i.isFunction(this.configureScribe)?this.configureScribe.bind(this):null,c=r.initScribeInstance(n,this.scribeOptions,u);c.setContent(e);var l={node:o?s.removeChild(s.firstChild):n,el:n,scribe:c,id:a};return this.editors[a]=l,l},getCurrentTextEditor:function(){var t=document.activeElement.getAttribute("data-editorId"),e=this.getTextEditor(t);return e&&(this.currentEditor=e),this.currentEditor},appendToTextEditor:function(t,e){var n=this.getTextEditor(t).scribe,i=new n.api.Selection,r=i.range.cloneRange(),o=n.el.lastChild;r.setStartAfter(o),r.collapse(!0),i.selection.removeAllRanges(),i.selection.addRange(r),e&&n.insertHTML(e)},getCurrentScribeInstance:function(){return this.getCurrentTextEditor().scribe},getTextEditor:function(t){return this.editors[t]},removeTextEditor:function(t){delete this.editors[t]},execTextBlockCommand:function(t){return r.execTextBlockCommand(this.getCurrentScribeInstance(),t)},queryTextBlockCommandState:function(t){return r.queryTextBlockCommandState(this.getCurrentScribeInstance(),t)}}},function(t,e,n){"use strict";var i=n(2)["default"],r=n(34),o=n(139),s=n(68),a=n(206),u=n(207),c=n(208),l={p:!0,a:{href:!0,target:"_blank",rel:!0},i:!0,b:!0,strong:!0,em:!0};t.exports={initScribeInstance:function(t,e,n){e=e||{};var h={debug:s.scribeDebug},f=l;r.isObject(e)&&(h=i(h,e));var d=new o(t,h);return e.hasOwnProperty("tags")&&(f=i(l,e.tags)),d.use(a()),d.use(u()),d.use(c({tags:f})),r.isFunction(n)&&n.call(this,d),d},execTextBlockCommand:function(t,e){if(r.isUndefined(t))throw"No Scribe instance found to query command";var n=t.getCommand(e);return t.el.focus(),n.execute()},queryTextBlockCommandState:function(t,e){if(r.isUndefined(t))throw"No Scribe instance found to query command";var n=t.getCommand(e);return(new t.api.Selection).range&&n.queryState()}}},function(t,e,n){var i,r;i=[n(162),n(192),n(171),n(176),n(179),n(187),n(140),n(200),n(201),n(167),n(165),n(202)],(r=function(t,e,n,i,r,o,s,a,u,c,l,h){"use strict";function f(c,f){u.call(this),this.el=c,this.commands={},this.options=h.checkOptions(f),this.commandPatches={},this._plainTextFormatterFactory=new d,this._htmlFormatterFactory=new p,this.api=new o(this),this.Immutable=l;var m=s(this);this.transactionManager=new m,this.undoManager=!1,this.options.undo.enabled&&(this.options.undo.manager?this.undoManager=this.options.undo.manager:this.undoManager=new a(this.options.undo.limit,this.el),this._merge=!1,this._forceMerge=!1,this._mergeTimer=0,this._lastItem={content:""}),this.setHTML(this.getHTML()),this.el.setAttribute("contenteditable",!0),this.el.addEventListener("input",function(){this.transactionManager.run()}.bind(this),!1);var g=l.OrderedSet(this.options.defaultPlugins).sort(h.sortByPlugin("setRootPElement")).filter(h.filterByBlockLevelMode(this.allowsBlockElements())).map(function(e){return t[e]}),v=l.List(this.options.defaultFormatters).filter(function(t){return!!n[t]}).map(function(t){return n[t]}),_=l.List.of(r.events),y=l.List(this.options.defaultCommandPatches).map(function(t){return r.commands[t]}),b=l.List.of("indent","insertList","outdent","redo","subscript","superscript","undo").map(function(t){return e[t]});l.List().concat(g,v,_,y,b).forEach(function(t){this.use(t())}.bind(this)),this.use(i())}function d(){this.formatters=l.List()}function p(){this.formatters={sanitize:l.List(),normalize:l.List(),"export":l.List()}}return f.prototype=Object.create(u.prototype),f.prototype.node=c,f.prototype.element=f.prototype.node,f.prototype.use=function(t){return t(this),this},f.prototype.setHTML=function(t,e){this._lastItem.content=t,e&&(this._skipFormatters=!0),this.el.innerHTML!==t&&(this.el.innerHTML=t)},f.prototype.getHTML=function(){return this.el.innerHTML},f.prototype.getContent=function(){return this._htmlFormatterFactory.formatForExport(this.getHTML().replace(/<br>$/,""))},f.prototype.getTextContent=function(){return this.el.textContent},f.prototype.pushHistory=function(){var t=this;if(t.options.undo.enabled){var e=t._lastItem.content.replace(/<em [^>]*class="scribe-marker"[^>]*>[^<]*?<\/em>/g,"");if(t.getHTML()!==e){var n=new t.api.Selection;n.placeMarkers();var i=t.getHTML();n.removeMarkers();var r=t.undoManager.item(t.undoManager.position);return(t._merge||t._forceMerge)&&r&&t._lastItem==r[0]?t._lastItem.content=i:(t._lastItem={previousItem:t._lastItem,content:i,scribe:t,execute:function(){},undo:function(){this.scribe.restoreFromHistory(this.previousItem)},redo:function(){this.scribe.restoreFromHistory(this)}},t.undoManager.transact(t._lastItem,!1)),clearTimeout(t._mergeTimer),t._merge=!0,t._mergeTimer=setTimeout(function(){t._merge=!1},t.options.undo.interval),!0}}return!1},f.prototype.getCommand=function(t){return this.commands[t]||this.commandPatches[t]||new this.api.Command(t)},f.prototype.restoreFromHistory=function(t){this._lastItem=t,this.setHTML(t.content,!0);(new this.api.Selection).selectMarkers(),this.trigger("content-changed")},f.prototype.allowsBlockElements=function(){return this.options.allowBlockElements},f.prototype.setContent=function(t){this.allowsBlockElements()||(t+="<br>"),this.setHTML(t),this.trigger("content-changed")},f.prototype.insertPlainText=function(t){this.insertHTML("<p>"+this._plainTextFormatterFactory.format(t)+"</p>")},f.prototype.insertHTML=function(t){this.getCommand("insertHTML").execute(this._htmlFormatterFactory.format(t))},f.prototype.isDebugModeEnabled=function(){return this.options.debug},f.prototype.registerHTMLFormatter=function(t,e){this._htmlFormatterFactory.formatters[t]=this._htmlFormatterFactory.formatters[t].push(e)},f.prototype.registerPlainTextFormatter=function(t){this._plainTextFormatterFactory.formatters=this._plainTextFormatterFactory.formatters.push(t)},d.prototype.format=function(t){return this.formatters.reduce(function(t,e){return e(t)},t)},p.prototype=Object.create(d.prototype),p.prototype.constructor=p,p.prototype.format=function(t){return this.formatters.sanitize.concat(this.formatters.normalize).reduce(function(t,e){return e(t)},t)},p.prototype.formatForExport=function(t){return this.formatters["export"].reduce(function(t,e){return e(t)},t)},f}.apply(e,i))===undefined||(t.exports=r)},function(t,e,n){var i,r;i=[n(141)],(r=function(t){"use strict";return function(e){function n(){this.history=[]}return t(n.prototype,{start:function(){this.history.push(1)},end:function(){this.history.pop(),0===this.history.length&&(e.pushHistory(),e.trigger("content-changed"))},run:function(t,n){this.start();try{t&&t()}finally{e._forceMerge=!0===n,this.end(),e._forceMerge=!1}}}),n}}.apply(e,i))===undefined||(t.exports=r)},function(t,e,n){var i,r;i=[n(142),n(158)],(r=function(t,e){return e(t)}.apply(e,i))===undefined||(t.exports=r)},function(t,e,n){var i,r;i=[n(143),n(144)],(r=function(t,e){function n(n,i,r){var o=e(i);if(!r)return t(i,n,o);for(var s=-1,a=o.length;++s<a;){var u=o[s],c=n[u],l=r(c,i[u],u,n,i);(l==l?l===c:c!=c)&&(void 0!==c||u in n)||(n[u]=l)}return n}return n}.apply(e,i))===undefined||(t.exports=r)},function(t,e){var n,i;n=[],(i=function(){function t(t,e,n){n||(n=e,e={});for(var i=-1,r=n.length;++i<r;){var o=n[i];e[o]=t[o]}return e}return t}.apply(e,n))===undefined||(t.exports=i)},function(t,e,n){var i,r;i=[n(145),n(146),n(150),n(151)],(r=function(t,e,n,i){var r=e(r=Object.keys)&&r;return r?function(e){if(e)var o=e.constructor,s=e.length;return"function"==typeof o&&o.prototype===e||"function"!=typeof e&&s&&t(s)?i(e):n(e)?r(e):[]}:i}.apply(e,i))===undefined||(t.exports=r)},function(t,e){var n,i;n=[],(i=function(){function t(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=e}var e=Math.pow(2,53)-1;return t}.apply(e,n))===undefined||(t.exports=i)},function(t,e,n){var i,r;i=[n(147),n(149)],(r=function(t,e){function n(t){return null!=t&&(a.call(t)==i?u.test(s.call(t)):e(t)&&r.test(t)||!1)}var i="[object Function]",r=/^\[object .+?Constructor\]$/,o=Object.prototype,s=Function.prototype.toString,a=o.toString,u=RegExp("^"+t(a).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");return n}.apply(e,i))===undefined||(t.exports=r)},function(t,e,n){var i,r;i=[n(148)],(r=function(t){function e(e){return(e=t(e))&&i.test(e)?e.replace(n,"\\$&"):e}var n=/[.*+?^${}()|[\]\/\\]/g,i=RegExp(n.source);return e}.apply(e,i))===undefined||(t.exports=r)},function(t,e){var n,i;n=[],(i=function(){function t(t){return"string"==typeof t?t:null==t?"":t+""}return t}.apply(e,n))===undefined||(t.exports=i)},function(t,e){var n,i;n=[],(i=function(){function t(t){return t&&"object"==typeof t||!1}return t}.apply(e,n))===undefined||(t.exports=i)},function(t,e){var n,i;n=[],(i=function(){function t(t){var e=typeof t;return"function"==e||t&&"object"==e||!1}return t}.apply(e,n))===undefined||(t.exports=i)},function(t,e,n){var i,r;i=[n(152),n(153),n(154),n(145),n(155),n(156)],(r=function(t,e,n,i,r,o){function s(s){for(var u=r(s),c=u.length,l=c&&s.length,h=l&&i(l)&&(e(s)||o.nonEnumArgs&&t(s)),f=-1,d=[];++f<c;){var p=u[f];(h&&n(p,l)||a.call(s,p))&&d.push(p)}return d}var a=Object.prototype.hasOwnProperty;return s}.apply(e,i))===undefined||(t.exports=r)},function(t,e,n){var i,r;i=[n(145),n(149)],(r=function(t,e){function n(n){var s=e(n)?n.length:i;return t(s)&&o.call(n)==r||!1}var i,r="[object Arguments]",o=Object.prototype.toString;return n}.apply(e,i))===undefined||(t.exports=r)},function(t,e,n){var i,r;i=[n(145),n(146),n(149)],(r=function(t,e,n){var i="[object Array]",r=Object.prototype.toString,o=e(o=Array.isArray)&&o;return o||function(e){return n(e)&&t(e.length)&&r.call(e)==i||!1}}.apply(e,i))===undefined||(t.exports=r)},function(t,e){var n,i;n=[],(i=function(){function t(t,n){return t=+t,n=null==n?e:n,t>-1&&t%1==0&&t<n}var e=Math.pow(2,53)-1;return t}.apply(e,n))===undefined||(t.exports=i)},function(t,e,n){var i,r;i=[n(152),n(153),n(154),n(145),n(150),n(156)],(r=function(t,e,n,i,r,o){function s(s){if(null==s)return[];r(s)||(s=Object(s));var u=s.length;u=u&&i(u)&&(e(s)||o.nonEnumArgs&&t(s))&&u||0;for(var c=s.constructor,l=-1,h="function"==typeof c&&c.prototype===s,f=Array(u),d=u>0;++l<u;)f[l]=l+"";for(var p in s)d&&n(p,u)||"constructor"==p&&(h||!a.call(s,p))||f.push(p);return f}var a=Object.prototype.hasOwnProperty;return s}.apply(e,i))===undefined||(t.exports=r)},function(t,e,n){var i,r;i=[n(146),n(157)],(r=function(t,e){var n=/\bthis\b/,i=Object.prototype,r=(r=e.window)&&r.document,o=i.propertyIsEnumerable,s={};return function(){s.funcDecomp=!t(e.WinRTError)&&n.test(function(){return this}),s.funcNames="string"==typeof Function.name;try{s.dom=11===r.createDocumentFragment().nodeType}catch(i){s.dom=!1}try{s.nonEnumArgs=!o.call(arguments,1)}catch(i){s.nonEnumArgs=!0}}(0,0),s}.apply(e,i))===undefined||(t.exports=r)},function(t,e,n){var i,r;(function(t,n){i=[],(r=function(){var i={"function":!0,object:!0},r=i[typeof e]&&e&&!e.nodeType&&e,o=i[typeof t]&&t&&!t.nodeType&&t,s=r&&o&&"object"==typeof n&&n,a=i[typeof window]&&window;return s||a!==(this&&this.window)&&a||this}.apply(e,i))===undefined||(t.exports=r)}).call(e,n(26)(t),function(){return this}())},function(t,e,n){var i,r;i=[n(159),n(161)],(r=function(t,e){function n(n){return function(){var i=arguments,r=i.length,o=i[0];if(r<2||null==o)return o;var s=i[r-2],a=i[r-1],u=i[3];r>3&&"function"==typeof s?(s=t(s,a,5),r-=2):r-=(s=r>2&&"function"==typeof a?a:null)?1:0,u&&e(i[1],i[2],u)&&(s=3==r?null:s,r=2);for(var c=0;++c<r;){var l=i[c];l&&n(o,l,s)}return o}}return n}.apply(e,i))===undefined||(t.exports=r)},function(t,e,n){var i,r;i=[n(160)],(r=function(t){function e(e,n,i){if("function"!=typeof e)return t;if(void 0===n)return e;switch(i){case 1:return function(t){return e.call(n,t)};case 3:return function(t,i,r){return e.call(n,t,i,r)};case 4:return function(t,i,r,o){return e.call(n,t,i,r,o)};case 5:return function(t,i,r,o,s){return e.call(n,t,i,r,o,s)}}return function(){return e.apply(n,arguments)}}return e}.apply(e,i))===undefined||(t.exports=r)},function(t,e){var n,i;n=[],(i=function(){function t(t){return t}return t}.apply(e,n))===undefined||(t.exports=i)},function(t,e,n){var i,r;i=[n(154),n(145),n(150)],(r=function(t,e,n){function i(i,r,o){if(!n(o))return!1;var s=typeof r;if("number"==s)var a=o.length,u=e(a)&&t(r,a);else u="string"==s&&r in o;if(u){var c=o[r];return i==i?i===c:c!=c}return!1}return i}.apply(e,i))===undefined||(t.exports=r)},function(t,e,n){var i,r;i=[n(163),n(164),n(166),n(170)],(r=function(t,e,n,i){"use strict";return{setRootPElement:t,enforcePElements:e,ensureSelectableContainers:n,inlineElementsMode:i}}.apply(e,i))===undefined||(t.exports=r)},function(t,e,n){var i;(i=function(){"use strict";return function(){return function(t){""===t.getHTML().trim()&&t.setContent("<p><br></p>")}}}.call(e,n,e,t))===undefined||(t.exports=i)},function(t,e,n){var i,r;i=[n(165)],(r=function(t){"use strict";return function(){return function(e){function n(e){var n=0;t.List(e.childNodes).filter(function(t){return t.nodeType===Node.TEXT_NODE||!r.isBlockElement(t)}).groupBy(function(t,e,i){return 0===e||t.previousSibling===i.get(e-1)?n:n+=1}).forEach(function(t){r.wrap(t.toArray(),document.createElement("p"))})}function i(t){for(var e,i=0;e=t.children[i++];)"BLOCKQUOTE"===e.tagName&&n(e)}var r=e.node;e.registerHTMLFormatter("normalize",function(t){var e=document.createElement("div");return e.innerHTML=t,n(e),i(e),e.innerHTML})}}}.apply(e,i))===undefined||(t.exports=r)},function(t){!function(e,n){t.exports=n()}(0,function(){"use strict";function t(t,e){e&&(t.prototype=Object.create(e.prototype)),t.prototype.constructor=t}function e(t){return o(t)?t:M(t)}function n(t){return s(t)?t:I(t)}function i(t){return a(t)?t:A(t)}function r(t){return o(t)&&!u(t)?t:P(t)}function o(t){return!(!t||!t[cn])}function s(t){return!(!t||!t[ln])}function a(t){return!(!t||!t[hn])}function u(t){return s(t)||a(t)}function c(t){return!(!t||!t[fn])}function l(t){return t.value=!1,t}function h(t){t&&(t.value=!0)}function f(){}function d(t,e){e=e||0;for(var n=Math.max(0,t.length-e),i=new Array(n),r=0;r<n;r++)i[r]=t[r+e];return i}function p(t){return t.size===undefined&&(t.size=t.__iterate(g)),t.size}function m(t,e){if("number"!=typeof e){var n=e>>>0;if(""+n!==e||4294967295===n)return NaN;e=n}return e<0?p(t)+e:e}function g(){return!0}function v(t,e,n){return(0===t||n!==undefined&&t<=-n)&&(e===undefined||n!==undefined&&e>=n)}function _(t,e){return b(t,e,0)}function y(t,e){return b(t,e,e)}function b(t,e,n){return t===undefined?n:t<0?Math.max(0,e+t):e===undefined?t:Math.min(e,t)}function x(t){this.next=t}function w(t,e,n,i){var r=0===t?e:1===t?n:[e,n];return i?i.value=r:i={value:r,done:!1},i}function k(){return{value:undefined,done:!0}}function E(t){return!!T(t)}function S(t){return t&&"function"==typeof t.next}function L(t){var e=T(t);return e&&e.call(t)}
function T(t){var e=t&&(kn&&t[kn]||t[En]);if("function"==typeof e)return e}function C(t){return t&&"number"==typeof t.length}function M(t){return null===t||t===undefined?j():o(t)?t.toSeq():$(t)}function I(t){return null===t||t===undefined?j().toKeyedSeq():o(t)?s(t)?t.toSeq():t.fromEntrySeq():R(t)}function A(t){return null===t||t===undefined?j():o(t)?s(t)?t.entrySeq():t.toIndexedSeq():F(t)}function P(t){return(null===t||t===undefined?j():o(t)?s(t)?t.entrySeq():t:F(t)).toSetSeq()}function O(t){this._array=t,this.size=t.length}function D(t){var e=Object.keys(t);this._object=t,this._keys=e,this.size=e.length}function N(t){this._iterable=t,this.size=t.length||t.size}function B(t){this._iterator=t,this._iteratorCache=[]}function z(t){return!(!t||!t[Ln])}function j(){return Tn||(Tn=new O([]))}function R(t){var e=Array.isArray(t)?new O(t).fromEntrySeq():S(t)?new B(t).fromEntrySeq():E(t)?new N(t).fromEntrySeq():"object"==typeof t?new D(t):undefined;if(!e)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+t);return e}function F(t){var e=U(t);if(!e)throw new TypeError("Expected Array or iterable object of values: "+t);return e}function $(t){var e=U(t)||"object"==typeof t&&new D(t);if(!e)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+t);return e}function U(t){return C(t)?new O(t):S(t)?new B(t):E(t)?new N(t):undefined}function H(t,e,n,i){var r=t._cache;if(r){for(var o=r.length-1,s=0;s<=o;s++){var a=r[n?o-s:s];if(!1===e(a[1],i?a[0]:s,t))return s+1}return s}return t.__iterateUncached(e,n)}function q(t,e,n,i){var r=t._cache;if(r){var o=r.length-1,s=0;return new x(function(){var t=r[n?o-s:s];return s++>o?k():w(e,i?t[0]:s-1,t[1])})}return t.__iteratorUncached(e,n)}function Z(t,e){return e?V(e,t,"",{"":t}):W(t)}function V(t,e,n,i){return Array.isArray(e)?t.call(i,n,A(e).map(function(n,i){return V(t,n,i,e)})):K(e)?t.call(i,n,I(e).map(function(n,i){return V(t,n,i,e)})):e}function W(t){return Array.isArray(t)?A(t).map(W).toList():K(t)?I(t).map(W).toMap():t}function K(t){return t&&(t.constructor===Object||t.constructor===undefined)}function G(t,e){if(t===e||t!=t&&e!=e)return!0;if(!t||!e)return!1;if("function"==typeof t.valueOf&&"function"==typeof e.valueOf){if(t=t.valueOf(),e=e.valueOf(),t===e||t!=t&&e!=e)return!0;if(!t||!e)return!1}return!("function"!=typeof t.equals||"function"!=typeof e.equals||!t.equals(e))}function Y(t,e){if(t===e)return!0;if(!o(e)||t.size!==undefined&&e.size!==undefined&&t.size!==e.size||t.__hash!==undefined&&e.__hash!==undefined&&t.__hash!==e.__hash||s(t)!==s(e)||a(t)!==a(e)||c(t)!==c(e))return!1;if(0===t.size&&0===e.size)return!0;var n=!u(t);if(c(t)){var i=t.entries();return e.every(function(t,e){var r=i.next().value;return r&&G(r[1],t)&&(n||G(r[0],e))})&&i.next().done}var r=!1;if(t.size===undefined)if(e.size===undefined)"function"==typeof t.cacheResult&&t.cacheResult();else{r=!0;var l=t;t=e,e=l}var h=!0,f=e.__iterate(function(e,i){if(n?!t.has(e):r?!G(e,t.get(i,vn)):!G(t.get(i,vn),e))return h=!1,!1});return h&&t.size===f}function X(t,e){if(!(this instanceof X))return new X(t,e);if(this._value=t,this.size=e===undefined?Infinity:Math.max(0,e),0===this.size){if(Cn)return Cn;Cn=this}}function Q(t,e){if(!t)throw new Error(e)}function J(t,e,n){if(!(this instanceof J))return new J(t,e,n);if(Q(0!==n,"Cannot step a Range by 0"),t=t||0,e===undefined&&(e=Infinity),n=n===undefined?1:Math.abs(n),e<t&&(n=-n),this._start=t,this._end=e,this._step=n,this.size=Math.max(0,Math.ceil((e-t)/n-1)+1),0===this.size){if(Mn)return Mn;Mn=this}}function tt(){throw TypeError("Abstract")}function et(){}function nt(){}function it(){}function rt(t){return t>>>1&1073741824|3221225471&t}function ot(t){if(!1===t||null===t||t===undefined)return 0;if("function"==typeof t.valueOf&&(!1===(t=t.valueOf())||null===t||t===undefined))return 0;if(!0===t)return 1;var e=typeof t;if("number"===e){var n=0|t;for(n!==t&&(n^=4294967295*t);t>4294967295;)n^=t/=4294967295;return rt(n)}if("string"===e)return t.length>zn?st(t):at(t);if("function"==typeof t.hashCode)return t.hashCode();if("object"===e)return ut(t);if("function"==typeof t.toString)return at(t.toString());throw new Error("Value type "+e+" cannot be hashed.")}function st(t){var e=Fn[t];return e===undefined&&(e=at(t),Rn===jn&&(Rn=0,Fn={}),Rn++,Fn[t]=e),e}function at(t){for(var e=0,n=0;n<t.length;n++)e=31*e+t.charCodeAt(n)|0;return rt(e)}function ut(t){var e;if(Dn&&(e=In.get(t))!==undefined)return e;if((e=t[Bn])!==undefined)return e;if(!On){if((e=t.propertyIsEnumerable&&t.propertyIsEnumerable[Bn])!==undefined)return e;if((e=ct(t))!==undefined)return e}if(e=++Nn,1073741824&Nn&&(Nn=0),Dn)In.set(t,e);else{if(Pn!==undefined&&!1===Pn(t))throw new Error("Non-extensible objects are not allowed as keys.");if(On)Object.defineProperty(t,Bn,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(t.propertyIsEnumerable!==undefined&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[Bn]=e;else{if(t.nodeType===undefined)throw new Error("Unable to set a non-enumerable property on object.");t[Bn]=e}}return e}function ct(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}function lt(t){Q(t!==Infinity,"Cannot perform this action with an infinite size.")}function ht(t){return null===t||t===undefined?wt():ft(t)&&!c(t)?t:wt().withMutations(function(e){var i=n(t);lt(i.size),i.forEach(function(t,n){return e.set(n,t)})})}function ft(t){return!(!t||!t[$n])}function dt(t,e){this.ownerID=t,this.entries=e}function pt(t,e,n){this.ownerID=t,this.bitmap=e,this.nodes=n}function mt(t,e,n){this.ownerID=t,this.count=e,this.nodes=n}function gt(t,e,n){this.ownerID=t,this.keyHash=e,this.entries=n}function vt(t,e,n){this.ownerID=t,this.keyHash=e,this.entry=n}function _t(t,e,n){this._type=e,this._reverse=n,this._stack=t._root&&bt(t._root)}function yt(t,e){return w(t,e[0],e[1])}function bt(t,e){return{node:t,index:0,__prev:e}}function xt(t,e,n,i){var r=Object.create(Un);return r.size=t,r._root=e,r.__ownerID=n,r.__hash=i,r.__altered=!1,r}function wt(){return Hn||(Hn=xt(0))}function kt(t,e,n){var i,r;if(t._root){var o=l(_n),s=l(yn);if(i=Et(t._root,t.__ownerID,0,undefined,e,n,o,s),!s.value)return t;r=t.size+(o.value?n===vn?-1:1:0)}else{if(n===vn)return t;r=1,i=new dt(t.__ownerID,[[e,n]])}return t.__ownerID?(t.size=r,t._root=i,t.__hash=undefined,t.__altered=!0,t):i?xt(r,i):wt()}function Et(t,e,n,i,r,o,s,a){return t?t.update(e,n,i,r,o,s,a):o===vn?t:(h(a),h(s),new vt(e,i,[r,o]))}function St(t){return t.constructor===vt||t.constructor===gt}function Lt(t,e,n,i,r){if(t.keyHash===i)return new gt(e,i,[t.entry,r]);var o,s=(0===n?t.keyHash:t.keyHash>>>n)&gn,a=(0===n?i:i>>>n)&gn;return new pt(e,1<<s|1<<a,s===a?[Lt(t,e,n+pn,i,r)]:(o=new vt(e,i,r),s<a?[t,o]:[o,t]))}function Tt(t,e,n,i){t||(t=new f);for(var r=new vt(t,ot(n),[n,i]),o=0;o<e.length;o++){var s=e[o];r=r.update(t,0,undefined,s[0],s[1])}return r}function Ct(t,e,n,i){for(var r=0,o=0,s=new Array(n),a=0,u=1,c=e.length;a<c;a++,u<<=1){var l=e[a];l!==undefined&&a!==i&&(r|=u,s[o++]=l)}return new pt(t,r,s)}function Mt(t,e,n,i,r){for(var o=0,s=new Array(mn),a=0;0!==n;a++,n>>>=1)s[a]=1&n?e[o++]:undefined;return s[i]=r,new mt(t,o+1,s)}function It(t,e,i){for(var r=[],s=0;s<i.length;s++){var a=i[s],u=n(a);o(a)||(u=u.map(function(t){return Z(t)})),r.push(u)}return Ot(t,e,r)}function At(t,e){return t&&t.mergeDeep&&o(e)?t.mergeDeep(e):G(t,e)?t:e}function Pt(t){return function(e,n,i){if(e&&e.mergeDeepWith&&o(n))return e.mergeDeepWith(t,n);var r=t(e,n,i);return G(e,r)?e:r}}function Ot(t,e,n){return 0===(n=n.filter(function(t){return 0!==t.size})).length?t:0!==t.size||t.__ownerID||1!==n.length?t.withMutations(function(t){for(var i=e?function(n,i){t.update(i,vn,function(t){return t===vn?n:e(t,n,i)})}:function(e,n){t.set(n,e)},r=0;r<n.length;r++)n[r].forEach(i)}):t.constructor(n[0])}function Dt(t,e,n,i){var r=t===vn,o=e.next();if(o.done){var s=r?n:t,a=i(s);return a===s?t:a}Q(r||t&&t.set,"invalid keyPath");var u=o.value,c=r?vn:t.get(u,vn),l=Dt(c,e,n,i);return l===c?t:l===vn?t.remove(u):(r?wt():t).set(u,l)}function Nt(t){return t-=t>>1&1431655765,t=(858993459&t)+(t>>2&858993459),t=t+(t>>4)&252645135,t+=t>>8,127&(t+=t>>16)}function Bt(t,e,n,i){var r=i?t:d(t);return r[e]=n,r}function zt(t,e,n,i){var r=t.length+1;if(i&&e+1===r)return t[e]=n,t;for(var o=new Array(r),s=0,a=0;a<r;a++)a===e?(o[a]=n,s=-1):o[a]=t[a+s];return o}function jt(t,e,n){var i=t.length-1;if(n&&e===i)return t.pop(),t;for(var r=new Array(i),o=0,s=0;s<i;s++)s===e&&(o=1),r[s]=t[s+o];return r}function Rt(t){var e=qt();if(null===t||t===undefined)return e;if(Ft(t))return t;var n=i(t),r=n.size;return 0===r?e:(lt(r),r>0&&r<mn?Ht(0,r,pn,null,new $t(n.toArray())):e.withMutations(function(t){t.setSize(r),n.forEach(function(e,n){return t.set(n,e)})}))}function Ft(t){return!(!t||!t[Wn])}function $t(t,e){this.array=t,this.ownerID=e}function Ut(t,e){function n(t,e,n){return 0===e?i(t,n):r(t,e,n)}function i(t,n){var i=n===a?u&&u.array:t&&t.array,r=n>o?0:o-n,c=s-n;return c>mn&&(c=mn),function(){if(r===c)return Yn;var t=e?--c:r++;return i&&i[t]}}function r(t,i,r){var a,u=t&&t.array,c=r>o?0:o-r>>i,l=1+(s-r>>i);return l>mn&&(l=mn),function(){for(;;){if(a){var t=a();if(t!==Yn)return t;a=null}if(c===l)return Yn;var o=e?--l:c++;a=n(u&&u[o],i-pn,r+(o<<i))}}}var o=t._origin,s=t._capacity,a=Xt(s),u=t._tail;return n(t._root,t._level,0)}function Ht(t,e,n,i,r,o,s){var a=Object.create(Kn);return a.size=e-t,a._origin=t,a._capacity=e,a._level=n,a._root=i,a._tail=r,a.__ownerID=o,a.__hash=s,a.__altered=!1,a}function qt(){return Gn||(Gn=Ht(0,0,pn))}function Zt(t,e,n){if((e=m(t,e))!=e)return t;if(e>=t.size||e<0)return t.withMutations(function(t){e<0?Gt(t,e).set(0,n):Gt(t,0,e+1).set(e,n)});e+=t._origin;var i=t._tail,r=t._root,o=l(yn);return e>=Xt(t._capacity)?i=Vt(i,t.__ownerID,0,e,n,o):r=Vt(r,t.__ownerID,t._level,e,n,o),o.value?t.__ownerID?(t._root=r,t._tail=i,t.__hash=undefined,t.__altered=!0,t):Ht(t._origin,t._capacity,t._level,r,i):t}function Vt(t,e,n,i,r,o){var s=i>>>n&gn,a=t&&s<t.array.length;if(!a&&r===undefined)return t;var u;if(n>0){var c=t&&t.array[s],l=Vt(c,e,n-pn,i,r,o);return l===c?t:(u=Wt(t,e),u.array[s]=l,u)}return a&&t.array[s]===r?t:(h(o),u=Wt(t,e),r===undefined&&s===u.array.length-1?u.array.pop():u.array[s]=r,u)}function Wt(t,e){return e&&t&&e===t.ownerID?t:new $t(t?t.array.slice():[],e)}function Kt(t,e){if(e>=Xt(t._capacity))return t._tail;if(e<1<<t._level+pn){for(var n=t._root,i=t._level;n&&i>0;)n=n.array[e>>>i&gn],i-=pn;return n}}function Gt(t,e,n){e!==undefined&&(e|=0),n!==undefined&&(n|=0);var i=t.__ownerID||new f,r=t._origin,o=t._capacity,s=r+e,a=n===undefined?o:n<0?o+n:r+n;if(s===r&&a===o)return t;if(s>=a)return t.clear();for(var u=t._level,c=t._root,l=0;s+l<0;)c=new $t(c&&c.array.length?[undefined,c]:[],i),l+=1<<(u+=pn);l&&(s+=l,r+=l,a+=l,o+=l);for(var h=Xt(o),d=Xt(a);d>=1<<u+pn;)c=new $t(c&&c.array.length?[c]:[],i),u+=pn;var p=t._tail,m=d<h?Kt(t,a-1):d>h?new $t([],i):p;if(p&&d>h&&s<o&&p.array.length){for(var g=c=Wt(c,i),v=u;v>pn;v-=pn){var _=h>>>v&gn;g=g.array[_]=Wt(g.array[_],i)}g.array[h>>>pn&gn]=p}if(a<o&&(m=m&&m.removeAfter(i,0,a)),s>=d)s-=d,a-=d,u=pn,c=null,m=m&&m.removeBefore(i,0,s);else if(s>r||d<h){for(l=0;c;){var y=s>>>u&gn;if(y!==d>>>u&gn)break;y&&(l+=(1<<u)*y),u-=pn,c=c.array[y]}c&&s>r&&(c=c.removeBefore(i,u,s-l)),c&&d<h&&(c=c.removeAfter(i,u,d-l)),l&&(s-=l,a-=l)}return t.__ownerID?(t.size=a-s,t._origin=s,t._capacity=a,t._level=u,t._root=c,t._tail=m,t.__hash=undefined,t.__altered=!0,t):Ht(s,a,u,c,m)}function Yt(t,e,n){for(var r=[],s=0,a=0;a<n.length;a++){var u=n[a],c=i(u);c.size>s&&(s=c.size),o(u)||(c=c.map(function(t){return Z(t)})),r.push(c)}return s>t.size&&(t=t.setSize(s)),Ot(t,e,r)}function Xt(t){return t<mn?0:t-1>>>pn<<pn}function Qt(t){return null===t||t===undefined?ee():Jt(t)?t:ee().withMutations(function(e){var i=n(t);lt(i.size),i.forEach(function(t,n){return e.set(n,t)})})}function Jt(t){return ft(t)&&c(t)}function te(t,e,n,i){var r=Object.create(Qt.prototype);return r.size=t?t.size:0,r._map=t,r._list=e,r.__ownerID=n,r.__hash=i,r}function ee(){return Xn||(Xn=te(wt(),qt()))}function ne(t,e,n){var i,r,o=t._map,s=t._list,a=o.get(e),u=a!==undefined;if(n===vn){if(!u)return t;s.size>=mn&&s.size>=2*o.size?(i=(r=s.filter(function(t,e){return t!==undefined&&a!==e})).toKeyedSeq().map(function(t){return t[0]}).flip().toMap(),t.__ownerID&&(i.__ownerID=r.__ownerID=t.__ownerID)):(i=o.remove(e),r=a===s.size-1?s.pop():s.set(a,undefined))}else if(u){if(n===s.get(a)[1])return t;i=o,r=s.set(a,[e,n])}else i=o.set(e,s.size),r=s.set(s.size,[e,n]);return t.__ownerID?(t.size=i.size,t._map=i,t._list=r,t.__hash=undefined,t):te(i,r)}function ie(t,e){this._iter=t,this._useKeys=e,this.size=t.size}function re(t){this._iter=t,this.size=t.size}function oe(t){this._iter=t,this.size=t.size}function se(t){this._iter=t,this.size=t.size}function ae(t){var e=Ce(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var e=t.reverse.apply(this);return e.flip=function(){return t.reverse()},e},e.has=function(e){return t.includes(e)},e.includes=function(e){return t.has(e)},e.cacheResult=Me,e.__iterateUncached=function(e,n){var i=this;return t.__iterate(function(t,n){return!1!==e(n,t,i)},n)},e.__iteratorUncached=function(e,n){if(e===wn){var i=t.__iterator(e,n);return new x(function(){var t=i.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t})}return t.__iterator(e===xn?bn:xn,n)},e}function ue(t,e,n){var i=Ce(t);return i.size=t.size,i.has=function(e){return t.has(e)},i.get=function(i,r){var o=t.get(i,vn);return o===vn?r:e.call(n,o,i,t)},i.__iterateUncached=function(i,r){var o=this;return t.__iterate(function(t,r,s){return!1!==i(e.call(n,t,r,s),r,o)},r)},i.__iteratorUncached=function(i,r){var o=t.__iterator(wn,r);return new x(function(){var r=o.next();if(r.done)return r;var s=r.value,a=s[0];return w(i,a,e.call(n,s[1],a,t),r)})},i}function ce(t,e){var n=Ce(t);return n._iter=t,n.size=t.size,n.reverse=function(){return t},t.flip&&(n.flip=function(){var e=ae(t);return e.reverse=function(){return t.flip()},e}),n.get=function(n,i){return t.get(e?n:-1-n,i)},n.has=function(n){return t.has(e?n:-1-n)},n.includes=function(e){return t.includes(e)},n.cacheResult=Me,n.__iterate=function(e,n){var i=this;return t.__iterate(function(t,n){return e(t,n,i)},!n)},n.__iterator=function(e,n){return t.__iterator(e,!n)},n}function le(t,e,n,i){var r=Ce(t);return i&&(r.has=function(i){var r=t.get(i,vn);return r!==vn&&!!e.call(n,r,i,t)},r.get=function(i,r){var o=t.get(i,vn);return o!==vn&&e.call(n,o,i,t)?o:r}),r.__iterateUncached=function(r,o){var s=this,a=0;return t.__iterate(function(t,o,u){if(e.call(n,t,o,u))return a++,r(t,i?o:a-1,s)},o),a},r.__iteratorUncached=function(r,o){var s=t.__iterator(wn,o),a=0;return new x(function(){for(;;){var o=s.next();if(o.done)return o;var u=o.value,c=u[0],l=u[1];if(e.call(n,l,c,t))return w(r,i?c:a++,l,o)}})},r}function he(t,e,n){var i=ht().asMutable();return t.__iterate(function(r,o){i.update(e.call(n,r,o,t),0,function(t){return t+1})}),i.asImmutable()}function fe(t,e,n){var i=s(t),r=(c(t)?Qt():ht()).asMutable();t.__iterate(function(o,s){r.update(e.call(n,o,s,t),function(t){return(t=t||[]).push(i?[s,o]:o),t})});var o=Te(t);return r.map(function(e){return Ee(t,o(e))})}function de(t,e,n,i){var r=t.size;if(e!==undefined&&(e|=0),n!==undefined&&(n|=0),v(e,n,r))return t;var o=_(e,r),s=y(n,r);if(o!=o||s!=s)return de(t.toSeq().cacheResult(),e,n,i);var a,u=s-o;u==u&&(a=u<0?0:u);var c=Ce(t);return c.size=0===a?a:t.size&&a||undefined,!i&&z(t)&&a>=0&&(c.get=function(e,n){return(e=m(this,e))>=0&&e<a?t.get(e+o,n):n}),c.__iterateUncached=function(e,n){var r=this;if(0===a)return 0;if(n)return this.cacheResult().__iterate(e,n);var s=0,u=!0,c=0;return t.__iterate(function(t,n){if(!u||!(u=s++<o))return c++,!1!==e(t,i?n:c-1,r)&&c!==a}),c},c.__iteratorUncached=function(e,n){if(0!==a&&n)return this.cacheResult().__iterator(e,n);var r=0!==a&&t.__iterator(e,n),s=0,u=0;return new x(function(){for(;s++<o;)r.next();if(++u>a)return k();var t=r.next();return i||e===xn?t:e===bn?w(e,u-1,undefined,t):w(e,u-1,t.value[1],t)})},c}function pe(t,e,n){var i=Ce(t);return i.__iterateUncached=function(i,r){var o=this;if(r)return this.cacheResult().__iterate(i,r);var s=0;return t.__iterate(function(t,r,a){return e.call(n,t,r,a)&&++s&&i(t,r,o)}),s},i.__iteratorUncached=function(i,r){var o=this;if(r)return this.cacheResult().__iterator(i,r);var s=t.__iterator(wn,r),a=!0;return new x(function(){if(!a)return k();var t=s.next();if(t.done)return t;var r=t.value,u=r[0],c=r[1];return e.call(n,c,u,o)?i===wn?t:w(i,u,c,t):(a=!1,k())})},i}function me(t,e,n,i){var r=Ce(t);return r.__iterateUncached=function(r,o){var s=this;if(o)return this.cacheResult().__iterate(r,o);var a=!0,u=0;return t.__iterate(function(t,o,c){if(!a||!(a=e.call(n,t,o,c)))return u++,r(t,i?o:u-1,s)}),u},r.__iteratorUncached=function(r,o){var s=this;if(o)return this.cacheResult().__iterator(r,o);var a=t.__iterator(wn,o),u=!0,c=0;return new x(function(){var t,o,l;do{if((t=a.next()).done)return i||r===xn?t:r===bn?w(r,c++,undefined,t):w(r,c++,t.value[1],t);var h=t.value;o=h[0],l=h[1],u&&(u=e.call(n,l,o,s))}while(u);return r===wn?t:w(r,o,l,t)})},r}function ge(t,e){var i=s(t),r=[t].concat(e).map(function(t){return o(t)?i&&(t=n(t)):t=i?R(t):F(Array.isArray(t)?t:[t]),t}).filter(function(t){return 0!==t.size});if(0===r.length)return t;if(1===r.length){var u=r[0];if(u===t||i&&s(u)||a(t)&&a(u))return u}var c=new O(r);return i?c=c.toKeyedSeq():a(t)||(c=c.toSetSeq()),c=c.flatten(!0),c.size=r.reduce(function(t,e){if(t!==undefined){var n=e.size;if(n!==undefined)return t+n}},0),c}function ve(t,e,n){var i=Ce(t);return i.__iterateUncached=function(i,r){function s(t,c){var l=this;t.__iterate(function(t,r){return(!e||c<e)&&o(t)?s(t,c+1):!1===i(t,n?r:a++,l)&&(u=!0),!u},r)}var a=0,u=!1;return s(t,0),a},i.__iteratorUncached=function(i,r){var s=t.__iterator(i,r),a=[],u=0;return new x(function(){for(;s;){var t=s.next();if(!1===t.done){var c=t.value;if(i===wn&&(c=c[1]),e&&!(a.length<e)||!o(c))return n?t:w(i,u++,c,t);a.push(s),s=c.__iterator(i,r)}else s=a.pop()}return k()})},i}function _e(t,e,n){var i=Te(t);return t.toSeq().map(function(r,o){return i(e.call(n,r,o,t))}).flatten(!0)}function ye(t,e){var n=Ce(t);return n.size=t.size&&2*t.size-1,n.__iterateUncached=function(n,i){var r=this,o=0;return t.__iterate(function(t){return(!o||!1!==n(e,o++,r))&&!1!==n(t,o++,r)},i),o},n.__iteratorUncached=function(n,i){var r,o=t.__iterator(xn,i),s=0;return new x(function(){return(!r||s%2)&&(r=o.next()).done?r:s%2?w(n,s++,e):w(n,s++,r.value,r)})},n}function be(t,e,n){e||(e=Ie);var i=s(t),r=0,o=t.toSeq().map(function(e,i){return[i,e,r++,n?n(e,i,t):e]}).toArray();return o.sort(function(t,n){return e(t[3],n[3])||t[2]-n[2]}).forEach(i?function(t,e){o[e].length=2}:function(t,e){o[e]=t[1]}),i?I(o):a(t)?A(o):P(o)}function xe(t,e,n){if(e||(e=Ie),n){var i=t.toSeq().map(function(e,i){return[e,n(e,i,t)]}).reduce(function(t,n){return we(e,t[1],n[1])?n:t});return i&&i[0]}return t.reduce(function(t,n){return we(e,t,n)?n:t})}function we(t,e,n){var i=t(n,e);return 0===i&&n!==e&&(n===undefined||null===n||n!=n)||i>0}function ke(t,n,i){var r=Ce(t);return r.size=new O(i).map(function(t){return t.size}).min(),r.__iterate=function(t,e){for(var n,i=this.__iterator(xn,e),r=0;!(n=i.next()).done&&!1!==t(n.value,r++,this););return r},r.__iteratorUncached=function(t,r){var o=i.map(function(t){return t=e(t),L(r?t.reverse():t)}),s=0,a=!1;return new x(function(){var e;return a||(e=o.map(function(t){return t.next()}),a=e.some(function(t){return t.done})),a?k():w(t,s++,n.apply(null,e.map(function(t){return t.value})))})},r}function Ee(t,e){return z(t)?e:t.constructor(e)}function Se(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function Le(t){return lt(t.size),p(t)}function Te(t){return s(t)?n:a(t)?i:r}function Ce(t){return Object.create((s(t)?I:a(t)?A:P).prototype)}function Me(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):M.prototype.cacheResult.call(this)}function Ie(t,e){return t>e?1:t<e?-1:0}function Ae(t){var n=L(t);if(!n){if(!C(t))throw new TypeError("Expected iterable or array-like: "+t);n=L(e(t))}return n}function Pe(t,e){var n,i=function(o){if(o instanceof i)return o;if(!(this instanceof i))return new i(o);if(!n){n=!0;var s=Object.keys(t);Ne(r,s),r.size=s.length,r._name=e,r._keys=s,r._defaultValues=t}this._map=ht(o)},r=i.prototype=Object.create(Qn);return r.constructor=i,i}function Oe(t,e,n){var i=Object.create(Object.getPrototypeOf(t));return i._map=e,i.__ownerID=n,i}function De(t){return t._name||t.constructor.name||"Record"}function Ne(t,e){try{e.forEach(Be.bind(undefined,t))}catch(n){}}function Be(t,e){Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(t){Q(this.__ownerID,"Cannot set on an immutable record."),this.set(e,t)}})}function ze(t){return null===t||t===undefined?$e():je(t)&&!c(t)?t:$e().withMutations(function(e){var n=r(t);lt(n.size),n.forEach(function(t){return e.add(t)})})}function je(t){return!(!t||!t[Jn])}function Re(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function Fe(t,e){var n=Object.create(ti);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function $e(){return ei||(ei=Fe(wt()))}function Ue(t){return null===t||t===undefined?Ze():He(t)?t:Ze().withMutations(function(e){var n=r(t);lt(n.size),n.forEach(function(t){return e.add(t)})})}function He(t){return je(t)&&c(t)}function qe(t,e){var n=Object.create(ni);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function Ze(){return ii||(ii=qe(ee()))}function Ve(t){return null===t||t===undefined?Ge():We(t)?t:Ge().unshiftAll(t)}function We(t){return!(!t||!t[ri])}function Ke(t,e,n,i){var r=Object.create(oi);return r.size=t,r._head=e,r.__ownerID=n,r.__hash=i,r.__altered=!1,r}function Ge(){return si||(si=Ke(0))}function Ye(t,e){var n=function(n){t.prototype[n]=e[n]};return Object.keys(e).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(n),t}function Xe(t,e){return e}function Qe(t,e){return[e,t]}function Je(t){return function(){return!t.apply(this,arguments)}}function tn(t){return function(){return-t.apply(this,arguments)}}function en(t){return"string"==typeof t?JSON.stringify(t):t}function nn(){return d(arguments)}function rn(t,e){return t<e?1:t>e?-1:0}function on(t){if(t.size===Infinity)return 0;var e=c(t),n=s(t),i=e?1:0;return sn(t.__iterate(n?e?function(t,e){i=31*i+an(ot(t),ot(e))|0}:function(t,e){i=i+an(ot(t),ot(e))|0}:e?function(t){i=31*i+ot(t)|0}:function(t){i=i+ot(t)|0}),i)}function sn(t,e){return e=An(e,3432918353),e=An(e<<15|e>>>-15,461845907),e=An(e<<13|e>>>-13,5),e=(e+3864292196|0)^t,e=An(e^e>>>16,2246822507),e=An(e^e>>>13,3266489909),e=rt(e^e>>>16)}function an(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}var un=Array.prototype.slice;t(n,e),t(i,e),t(r,e),e.isIterable=o,e.isKeyed=s,e.isIndexed=a,e.isAssociative=u,e.isOrdered=c,e.Keyed=n,e.Indexed=i,e.Set=r;var cn="@@__IMMUTABLE_ITERABLE__@@",ln="@@__IMMUTABLE_KEYED__@@",hn="@@__IMMUTABLE_INDEXED__@@",fn="@@__IMMUTABLE_ORDERED__@@",dn="delete",pn=5,mn=1<<pn,gn=mn-1,vn={},_n={value:!1},yn={value:!1},bn=0,xn=1,wn=2,kn="function"==typeof Symbol&&Symbol.iterator,En="@@iterator",Sn=kn||En;x.prototype.toString=function(){return"[Iterator]"},x.KEYS=bn,x.VALUES=xn,x.ENTRIES=wn,x.prototype.inspect=x.prototype.toSource=function(){return this.toString()},x.prototype[Sn]=function(){return this},t(M,e),M.of=function(){return M(arguments)},M.prototype.toSeq=function(){return this},M.prototype.toString=function(){return this.__toString("Seq {","}")},M.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},M.prototype.__iterate=function(t,e){return H(this,t,e,!0)},M.prototype.__iterator=function(t,e){return q(this,t,e,!0)},t(I,M),I.prototype.toKeyedSeq=function(){return this},t(A,M),A.of=function(){return A(arguments)},A.prototype.toIndexedSeq=function(){return this},A.prototype.toString=function(){return this.__toString("Seq [","]")},A.prototype.__iterate=function(t,e){return H(this,t,e,!1)},A.prototype.__iterator=function(t,e){return q(this,t,e,!1)},t(P,M),P.of=function(){return P(arguments)},P.prototype.toSetSeq=function(){return this},M.isSeq=z,M.Keyed=I,M.Set=P,M.Indexed=A;var Ln="@@__IMMUTABLE_SEQ__@@";M.prototype[Ln]=!0,t(O,A),O.prototype.get=function(t,e){return this.has(t)?this._array[m(this,t)]:e},O.prototype.__iterate=function(t,e){for(var n=this._array,i=n.length-1,r=0;r<=i;r++)if(!1===t(n[e?i-r:r],r,this))return r+1;return r},O.prototype.__iterator=function(t,e){var n=this._array,i=n.length-1,r=0;return new x(function(){return r>i?k():w(t,r,n[e?i-r++:r++])})},t(D,I),D.prototype.get=function(t,e){return e===undefined||this.has(t)?this._object[t]:e},D.prototype.has=function(t){return this._object.hasOwnProperty(t)},D.prototype.__iterate=function(t,e){for(var n=this._object,i=this._keys,r=i.length-1,o=0;o<=r;o++){var s=i[e?r-o:o];if(!1===t(n[s],s,this))return o+1}return o},D.prototype.__iterator=function(t,e){var n=this._object,i=this._keys,r=i.length-1,o=0;return new x(function(){var s=i[e?r-o:o];return o++>r?k():w(t,s,n[s])})},D.prototype[fn]=!0,t(N,A),N.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var n=L(this._iterable),i=0;if(S(n))for(var r;!(r=n.next()).done&&!1!==t(r.value,i++,this););return i},N.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var n=L(this._iterable);if(!S(n))return new x(k);var i=0;return new x(function(){var e=n.next();return e.done?e:w(t,i++,e.value)})},t(B,A),B.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);for(var n=this._iterator,i=this._iteratorCache,r=0;r<i.length;)if(!1===t(i[r],r++,this))return r;for(var o;!(o=n.next()).done;){var s=o.value;if(i[r]=s,!1===t(s,r++,this))break}return r},B.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var n=this._iterator,i=this._iteratorCache,r=0;return new x(function(){if(r>=i.length){var e=n.next();if(e.done)return e;i[r]=e.value}return w(t,r,i[r++])})};var Tn;t(X,A),X.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},X.prototype.get=function(t,e){return this.has(t)?this._value:e},X.prototype.includes=function(t){return G(this._value,t)},X.prototype.slice=function(t,e){var n=this.size;return v(t,e,n)?this:new X(this._value,y(e,n)-_(t,n))},X.prototype.reverse=function(){return this},X.prototype.indexOf=function(t){return G(this._value,t)?0:-1},X.prototype.lastIndexOf=function(t){return G(this._value,t)?this.size:-1},X.prototype.__iterate=function(t){for(var e=0;e<this.size;e++)if(!1===t(this._value,e,this))return e+1;return e},X.prototype.__iterator=function(t){var e=this,n=0;return new x(function(){return n<e.size?w(t,n++,e._value):k()})},X.prototype.equals=function(t){return t instanceof X?G(this._value,t._value):Y(t)};var Cn;t(J,A),J.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(this._step>1?" by "+this._step:"")+" ]"},J.prototype.get=function(t,e){return this.has(t)?this._start+m(this,t)*this._step:e},J.prototype.includes=function(t){var e=(t-this._start)/this._step;return e>=0&&e<this.size&&e===Math.floor(e)},J.prototype.slice=function(t,e){return v(t,e,this.size)?this:(t=_(t,this.size),(e=y(e,this.size))<=t?new J(0,0):new J(this.get(t,this._end),this.get(e,this._end),this._step))},J.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step==0){var n=e/this._step;if(n>=0&&n<this.size)return n}return-1},J.prototype.lastIndexOf=function(t){return this.indexOf(t)},J.prototype.__iterate=function(t,e){for(var n=this.size-1,i=this._step,r=e?this._start+n*i:this._start,o=0;o<=n;o++){if(!1===t(r,o,this))return o+1;r+=e?-i:i}return o},J.prototype.__iterator=function(t,e){var n=this.size-1,i=this._step,r=e?this._start+n*i:this._start,o=0;return new x(function(){var s=r;return r+=e?-i:i,o>n?k():w(t,o++,s)})},J.prototype.equals=function(t){return t instanceof J?this._start===t._start&&this._end===t._end&&this._step===t._step:Y(this,t)};var Mn;t(tt,e),t(et,tt),t(nt,tt),t(it,tt),tt.Keyed=et,tt.Indexed=nt,tt.Set=it;var In,An="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,e){var n=65535&(t|=0),i=65535&(e|=0);return n*i+((t>>>16)*i+n*(e>>>16)<<16>>>0)|0},Pn=Object.isExtensible,On=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}(),Dn="function"==typeof WeakMap;Dn&&(In=new WeakMap);var Nn=0,Bn="__immutablehash__";"function"==typeof Symbol&&(Bn=Symbol(Bn));var zn=16,jn=255,Rn=0,Fn={};t(ht,et),ht.prototype.toString=function(){return this.__toString("Map {","}")},ht.prototype.get=function(t,e){return this._root?this._root.get(0,undefined,t,e):e},ht.prototype.set=function(t,e){return kt(this,t,e)},ht.prototype.setIn=function(t,e){return this.updateIn(t,vn,function(){return e})},ht.prototype.remove=function(t){return kt(this,t,vn)},ht.prototype.deleteIn=function(t){return this.updateIn(t,function(){return vn})},ht.prototype.update=function(t,e,n){return 1===arguments.length?t(this):this.updateIn([t],e,n)},ht.prototype.updateIn=function(t,e,n){n||(n=e,e=undefined);var i=Dt(this,Ae(t),e,n);return i===vn?undefined:i},ht.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=undefined,this.__altered=!0,this):wt()},ht.prototype.merge=function(){return It(this,undefined,arguments)},ht.prototype.mergeWith=function(t){return It(this,t,un.call(arguments,1))},ht.prototype.mergeIn=function(t){var e=un.call(arguments,1);return this.updateIn(t,wt(),function(t){return"function"==typeof t.merge?t.merge.apply(t,e):e[e.length-1]})},ht.prototype.mergeDeep=function(){return It(this,At,arguments)},ht.prototype.mergeDeepWith=function(t){var e=un.call(arguments,1);return It(this,Pt(t),e)},ht.prototype.mergeDeepIn=function(t){var e=un.call(arguments,1);return this.updateIn(t,wt(),function(t){return"function"==typeof t.mergeDeep?t.mergeDeep.apply(t,e):e[e.length-1]})},ht.prototype.sort=function(t){return Qt(be(this,t))},ht.prototype.sortBy=function(t,e){return Qt(be(this,e,t))},ht.prototype.withMutations=function(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this},ht.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new f)},ht.prototype.asImmutable=function(){return this.__ensureOwner()},ht.prototype.wasAltered=function(){return this.__altered},ht.prototype.__iterator=function(t,e){return new _t(this,t,e)},ht.prototype.__iterate=function(t,e){var n=this,i=0;return this._root&&this._root.iterate(function(e){return i++,t(e[1],e[0],n)},e),i},ht.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?xt(this.size,this._root,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},ht.isMap=ft;var $n="@@__IMMUTABLE_MAP__@@",Un=ht.prototype;Un[$n]=!0,Un[dn]=Un.remove,Un.removeIn=Un.deleteIn,dt.prototype.get=function(t,e,n,i){for(var r=this.entries,o=0,s=r.length;o<s;o++)if(G(n,r[o][0]))return r[o][1];return i},dt.prototype.update=function(t,e,n,i,r,o,s){for(var a=r===vn,u=this.entries,c=0,l=u.length;c<l&&!G(i,u[c][0]);c++);var f=c<l;if(f?u[c][1]===r:a)return this;if(h(s),(a||!f)&&h(o),!a||1!==u.length){if(!f&&!a&&u.length>=qn)return Tt(t,u,i,r);var p=t&&t===this.ownerID,m=p?u:d(u);return f?a?c===l-1?m.pop():m[c]=m.pop():m[c]=[i,r]:m.push([i,r]),p?(this.entries=m,this):new dt(t,m)}},pt.prototype.get=function(t,e,n,i){e===undefined&&(e=ot(n));var r=1<<((0===t?e:e>>>t)&gn),o=this.bitmap;return 0==(o&r)?i:this.nodes[Nt(o&r-1)].get(t+pn,e,n,i)},pt.prototype.update=function(t,e,n,i,r,o,s){n===undefined&&(n=ot(i));var a=(0===e?n:n>>>e)&gn,u=1<<a,c=this.bitmap,l=0!=(c&u);if(!l&&r===vn)return this;var h=Nt(c&u-1),f=this.nodes,d=l?f[h]:undefined,p=Et(d,t,e+pn,n,i,r,o,s);if(p===d)return this;if(!l&&p&&f.length>=Zn)return Mt(t,f,c,a,p);if(l&&!p&&2===f.length&&St(f[1^h]))return f[1^h];if(l&&p&&1===f.length&&St(p))return p;var m=t&&t===this.ownerID,g=l?p?c:c^u:c|u,v=l?p?Bt(f,h,p,m):jt(f,h,m):zt(f,h,p,m);return m?(this.bitmap=g,this.nodes=v,this):new pt(t,g,v)},mt.prototype.get=function(t,e,n,i){e===undefined&&(e=ot(n));var r=(0===t?e:e>>>t)&gn,o=this.nodes[r];return o?o.get(t+pn,e,n,i):i},mt.prototype.update=function(t,e,n,i,r,o,s){n===undefined&&(n=ot(i));var a=(0===e?n:n>>>e)&gn,u=r===vn,c=this.nodes,l=c[a]
;if(u&&!l)return this;var h=Et(l,t,e+pn,n,i,r,o,s);if(h===l)return this;var f=this.count;if(l){if(!h&&--f<Vn)return Ct(t,c,f,a)}else f++;var d=t&&t===this.ownerID,p=Bt(c,a,h,d);return d?(this.count=f,this.nodes=p,this):new mt(t,f,p)},gt.prototype.get=function(t,e,n,i){for(var r=this.entries,o=0,s=r.length;o<s;o++)if(G(n,r[o][0]))return r[o][1];return i},gt.prototype.update=function(t,e,n,i,r,o,s){n===undefined&&(n=ot(i));var a=r===vn;if(n!==this.keyHash)return a?this:(h(s),h(o),Lt(this,t,e,n,[i,r]));for(var u=this.entries,c=0,l=u.length;c<l&&!G(i,u[c][0]);c++);var f=c<l;if(f?u[c][1]===r:a)return this;if(h(s),(a||!f)&&h(o),a&&2===l)return new vt(t,this.keyHash,u[1^c]);var p=t&&t===this.ownerID,m=p?u:d(u);return f?a?c===l-1?m.pop():m[c]=m.pop():m[c]=[i,r]:m.push([i,r]),p?(this.entries=m,this):new gt(t,this.keyHash,m)},vt.prototype.get=function(t,e,n,i){return G(n,this.entry[0])?this.entry[1]:i},vt.prototype.update=function(t,e,n,i,r,o,s){var a=r===vn,u=G(i,this.entry[0]);return(u?r===this.entry[1]:a)?this:(h(s),a?void h(o):u?t&&t===this.ownerID?(this.entry[1]=r,this):new vt(t,this.keyHash,[i,r]):(h(o),Lt(this,t,e,ot(i),[i,r])))},dt.prototype.iterate=gt.prototype.iterate=function(t,e){for(var n=this.entries,i=0,r=n.length-1;i<=r;i++)if(!1===t(n[e?r-i:i]))return!1},pt.prototype.iterate=mt.prototype.iterate=function(t,e){for(var n=this.nodes,i=0,r=n.length-1;i<=r;i++){var o=n[e?r-i:i];if(o&&!1===o.iterate(t,e))return!1}},vt.prototype.iterate=function(t){return t(this.entry)},t(_t,x),_t.prototype.next=function(){for(var t=this._type,e=this._stack;e;){var n,i=e.node,r=e.index++;if(i.entry){if(0===r)return yt(t,i.entry)}else if(i.entries){if(n=i.entries.length-1,r<=n)return yt(t,i.entries[this._reverse?n-r:r])}else if(n=i.nodes.length-1,r<=n){var o=i.nodes[this._reverse?n-r:r];if(o){if(o.entry)return yt(t,o.entry);e=this._stack=bt(o,e)}continue}e=this._stack=this._stack.__prev}return k()};var Hn,qn=mn/4,Zn=mn/2,Vn=mn/4;t(Rt,nt),Rt.of=function(){return this(arguments)},Rt.prototype.toString=function(){return this.__toString("List [","]")},Rt.prototype.get=function(t,e){if((t=m(this,t))>=0&&t<this.size){var n=Kt(this,t+=this._origin);return n&&n.array[t&gn]}return e},Rt.prototype.set=function(t,e){return Zt(this,t,e)},Rt.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},Rt.prototype.insert=function(t,e){return this.splice(t,0,e)},Rt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=pn,this._root=this._tail=null,this.__hash=undefined,this.__altered=!0,this):qt()},Rt.prototype.push=function(){var t=arguments,e=this.size;return this.withMutations(function(n){Gt(n,0,e+t.length);for(var i=0;i<t.length;i++)n.set(e+i,t[i])})},Rt.prototype.pop=function(){return Gt(this,0,-1)},Rt.prototype.unshift=function(){var t=arguments;return this.withMutations(function(e){Gt(e,-t.length);for(var n=0;n<t.length;n++)e.set(n,t[n])})},Rt.prototype.shift=function(){return Gt(this,1)},Rt.prototype.merge=function(){return Yt(this,undefined,arguments)},Rt.prototype.mergeWith=function(t){return Yt(this,t,un.call(arguments,1))},Rt.prototype.mergeDeep=function(){return Yt(this,At,arguments)},Rt.prototype.mergeDeepWith=function(t){var e=un.call(arguments,1);return Yt(this,Pt(t),e)},Rt.prototype.setSize=function(t){return Gt(this,0,t)},Rt.prototype.slice=function(t,e){var n=this.size;return v(t,e,n)?this:Gt(this,_(t,n),y(e,n))},Rt.prototype.__iterator=function(t,e){var n=0,i=Ut(this,e);return new x(function(){var e=i();return e===Yn?k():w(t,n++,e)})},Rt.prototype.__iterate=function(t,e){for(var n,i=0,r=Ut(this,e);(n=r())!==Yn&&!1!==t(n,i++,this););return i},Rt.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Ht(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):(this.__ownerID=t,this)},Rt.isList=Ft;var Wn="@@__IMMUTABLE_LIST__@@",Kn=Rt.prototype;Kn[Wn]=!0,Kn[dn]=Kn.remove,Kn.setIn=Un.setIn,Kn.deleteIn=Kn.removeIn=Un.removeIn,Kn.update=Un.update,Kn.updateIn=Un.updateIn,Kn.mergeIn=Un.mergeIn,Kn.mergeDeepIn=Un.mergeDeepIn,Kn.withMutations=Un.withMutations,Kn.asMutable=Un.asMutable,Kn.asImmutable=Un.asImmutable,Kn.wasAltered=Un.wasAltered,$t.prototype.removeBefore=function(t,e,n){if(n===e?1<<e:0===this.array.length)return this;var i=n>>>e&gn;if(i>=this.array.length)return new $t([],t);var r,o=0===i;if(e>0){var s=this.array[i];if((r=s&&s.removeBefore(t,e-pn,n))===s&&o)return this}if(o&&!r)return this;var a=Wt(this,t);if(!o)for(var u=0;u<i;u++)a.array[u]=undefined;return r&&(a.array[i]=r),a},$t.prototype.removeAfter=function(t,e,n){if(n===(e?1<<e:0)||0===this.array.length)return this;var i=n-1>>>e&gn;if(i>=this.array.length)return this;var r;if(e>0){var o=this.array[i];if((r=o&&o.removeAfter(t,e-pn,n))===o&&i===this.array.length-1)return this}var s=Wt(this,t);return s.array.splice(i+1),r&&(s.array[i]=r),s};var Gn,Yn={};t(Qt,ht),Qt.of=function(){return this(arguments)},Qt.prototype.toString=function(){return this.__toString("OrderedMap {","}")},Qt.prototype.get=function(t,e){var n=this._map.get(t);return n!==undefined?this._list.get(n)[1]:e},Qt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):ee()},Qt.prototype.set=function(t,e){return ne(this,t,e)},Qt.prototype.remove=function(t){return ne(this,t,vn)},Qt.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},Qt.prototype.__iterate=function(t,e){var n=this;return this._list.__iterate(function(e){return e&&t(e[1],e[0],n)},e)},Qt.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},Qt.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),n=this._list.__ensureOwner(t);return t?te(e,n,t,this.__hash):(this.__ownerID=t,this._map=e,this._list=n,this)},Qt.isOrderedMap=Jt,Qt.prototype[fn]=!0,Qt.prototype[dn]=Qt.prototype.remove;var Xn;t(ie,I),ie.prototype.get=function(t,e){return this._iter.get(t,e)},ie.prototype.has=function(t){return this._iter.has(t)},ie.prototype.valueSeq=function(){return this._iter.valueSeq()},ie.prototype.reverse=function(){var t=this,e=ce(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},ie.prototype.map=function(t,e){var n=this,i=ue(this,t,e);return this._useKeys||(i.valueSeq=function(){return n._iter.toSeq().map(t,e)}),i},ie.prototype.__iterate=function(t,e){var n,i=this;return this._iter.__iterate(this._useKeys?function(e,n){return t(e,n,i)}:(n=e?Le(this):0,function(r){return t(r,e?--n:n++,i)}),e)},ie.prototype.__iterator=function(t,e){if(this._useKeys)return this._iter.__iterator(t,e);var n=this._iter.__iterator(xn,e),i=e?Le(this):0;return new x(function(){var r=n.next();return r.done?r:w(t,e?--i:i++,r.value,r)})},ie.prototype[fn]=!0,t(re,A),re.prototype.includes=function(t){return this._iter.includes(t)},re.prototype.__iterate=function(t,e){var n=this,i=0;return this._iter.__iterate(function(e){return t(e,i++,n)},e)},re.prototype.__iterator=function(t,e){var n=this._iter.__iterator(xn,e),i=0;return new x(function(){var e=n.next();return e.done?e:w(t,i++,e.value,e)})},t(oe,P),oe.prototype.has=function(t){return this._iter.includes(t)},oe.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate(function(e){return t(e,e,n)},e)},oe.prototype.__iterator=function(t,e){var n=this._iter.__iterator(xn,e);return new x(function(){var e=n.next();return e.done?e:w(t,e.value,e.value,e)})},t(se,I),se.prototype.entrySeq=function(){return this._iter.toSeq()},se.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate(function(e){if(e){Se(e);var i=o(e);return t(i?e.get(1):e[1],i?e.get(0):e[0],n)}},e)},se.prototype.__iterator=function(t,e){var n=this._iter.__iterator(xn,e);return new x(function(){for(;;){var e=n.next();if(e.done)return e;var i=e.value;if(i){Se(i);var r=o(i);return w(t,r?i.get(0):i[0],r?i.get(1):i[1],e)}}})},re.prototype.cacheResult=ie.prototype.cacheResult=oe.prototype.cacheResult=se.prototype.cacheResult=Me,t(Pe,et),Pe.prototype.toString=function(){return this.__toString(De(this)+" {","}")},Pe.prototype.has=function(t){return this._defaultValues.hasOwnProperty(t)},Pe.prototype.get=function(t,e){if(!this.has(t))return e;var n=this._defaultValues[t];return this._map?this._map.get(t,n):n},Pe.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var t=this.constructor;return t._empty||(t._empty=Oe(this,wt()))},Pe.prototype.set=function(t,e){if(!this.has(t))throw new Error('Cannot set unknown key "'+t+'" on '+De(this));var n=this._map&&this._map.set(t,e);return this.__ownerID||n===this._map?this:Oe(this,n)},Pe.prototype.remove=function(t){if(!this.has(t))return this;var e=this._map&&this._map.remove(t);return this.__ownerID||e===this._map?this:Oe(this,e)},Pe.prototype.wasAltered=function(){return this._map.wasAltered()},Pe.prototype.__iterator=function(t,e){var i=this;return n(this._defaultValues).map(function(t,e){return i.get(e)}).__iterator(t,e)},Pe.prototype.__iterate=function(t,e){var i=this;return n(this._defaultValues).map(function(t,e){return i.get(e)}).__iterate(t,e)},Pe.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map&&this._map.__ensureOwner(t);return t?Oe(this,e,t):(this.__ownerID=t,this._map=e,this)};var Qn=Pe.prototype;Qn[dn]=Qn.remove,Qn.deleteIn=Qn.removeIn=Un.removeIn,Qn.merge=Un.merge,Qn.mergeWith=Un.mergeWith,Qn.mergeIn=Un.mergeIn,Qn.mergeDeep=Un.mergeDeep,Qn.mergeDeepWith=Un.mergeDeepWith,Qn.mergeDeepIn=Un.mergeDeepIn,Qn.setIn=Un.setIn,Qn.update=Un.update,Qn.updateIn=Un.updateIn,Qn.withMutations=Un.withMutations,Qn.asMutable=Un.asMutable,Qn.asImmutable=Un.asImmutable,t(ze,it),ze.of=function(){return this(arguments)},ze.fromKeys=function(t){return this(n(t).keySeq())},ze.prototype.toString=function(){return this.__toString("Set {","}")},ze.prototype.has=function(t){return this._map.has(t)},ze.prototype.add=function(t){return Re(this,this._map.set(t,!0))},ze.prototype.remove=function(t){return Re(this,this._map.remove(t))},ze.prototype.clear=function(){return Re(this,this._map.clear())},ze.prototype.union=function(){var t=un.call(arguments,0);return 0===(t=t.filter(function(t){return 0!==t.size})).length?this:0!==this.size||this.__ownerID||1!==t.length?this.withMutations(function(e){for(var n=0;n<t.length;n++)r(t[n]).forEach(function(t){return e.add(t)})}):this.constructor(t[0])},ze.prototype.intersect=function(){var t=un.call(arguments,0);if(0===t.length)return this;t=t.map(function(t){return r(t)});var e=this;return this.withMutations(function(n){e.forEach(function(e){t.every(function(t){return t.includes(e)})||n.remove(e)})})},ze.prototype.subtract=function(){var t=un.call(arguments,0);if(0===t.length)return this;t=t.map(function(t){return r(t)});var e=this;return this.withMutations(function(n){e.forEach(function(e){t.some(function(t){return t.includes(e)})&&n.remove(e)})})},ze.prototype.merge=function(){return this.union.apply(this,arguments)},ze.prototype.mergeWith=function(){var t=un.call(arguments,1);return this.union.apply(this,t)},ze.prototype.sort=function(t){return Ue(be(this,t))},ze.prototype.sortBy=function(t,e){return Ue(be(this,e,t))},ze.prototype.wasAltered=function(){return this._map.wasAltered()},ze.prototype.__iterate=function(t,e){var n=this;return this._map.__iterate(function(e,i){return t(i,i,n)},e)},ze.prototype.__iterator=function(t,e){return this._map.map(function(t,e){return e}).__iterator(t,e)},ze.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):(this.__ownerID=t,this._map=e,this)},ze.isSet=je;var Jn="@@__IMMUTABLE_SET__@@",ti=ze.prototype;ti[Jn]=!0,ti[dn]=ti.remove,ti.mergeDeep=ti.merge,ti.mergeDeepWith=ti.mergeWith,ti.withMutations=Un.withMutations,ti.asMutable=Un.asMutable,ti.asImmutable=Un.asImmutable,ti.__empty=$e,ti.__make=Fe;var ei;t(Ue,ze),Ue.of=function(){return this(arguments)},Ue.fromKeys=function(t){return this(n(t).keySeq())},Ue.prototype.toString=function(){return this.__toString("OrderedSet {","}")},Ue.isOrderedSet=He;var ni=Ue.prototype;ni[fn]=!0,ni.__empty=Ze,ni.__make=qe;var ii;t(Ve,nt),Ve.of=function(){return this(arguments)},Ve.prototype.toString=function(){return this.__toString("Stack [","]")},Ve.prototype.get=function(t,e){var n=this._head;for(t=m(this,t);n&&t--;)n=n.next;return n?n.value:e},Ve.prototype.peek=function(){return this._head&&this._head.value},Ve.prototype.push=function(){if(0===arguments.length)return this;for(var t=this.size+arguments.length,e=this._head,n=arguments.length-1;n>=0;n--)e={value:arguments[n],next:e};return this.__ownerID?(this.size=t,this._head=e,this.__hash=undefined,this.__altered=!0,this):Ke(t,e)},Ve.prototype.pushAll=function(t){if(0===(t=i(t)).size)return this;lt(t.size);var e=this.size,n=this._head;return t.reverse().forEach(function(t){e++,n={value:t,next:n}}),this.__ownerID?(this.size=e,this._head=n,this.__hash=undefined,this.__altered=!0,this):Ke(e,n)},Ve.prototype.pop=function(){return this.slice(1)},Ve.prototype.unshift=function(){return this.push.apply(this,arguments)},Ve.prototype.unshiftAll=function(t){return this.pushAll(t)},Ve.prototype.shift=function(){return this.pop.apply(this,arguments)},Ve.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=undefined,this.__hash=undefined,this.__altered=!0,this):Ge()},Ve.prototype.slice=function(t,e){if(v(t,e,this.size))return this;var n=_(t,this.size);if(y(e,this.size)!==this.size)return nt.prototype.slice.call(this,t,e);for(var i=this.size-n,r=this._head;n--;)r=r.next;return this.__ownerID?(this.size=i,this._head=r,this.__hash=undefined,this.__altered=!0,this):Ke(i,r)},Ve.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Ke(this.size,this._head,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},Ve.prototype.__iterate=function(t,e){if(e)return this.reverse().__iterate(t);for(var n=0,i=this._head;i&&!1!==t(i.value,n++,this);)i=i.next;return n},Ve.prototype.__iterator=function(t,e){if(e)return this.reverse().__iterator(t);var n=0,i=this._head;return new x(function(){if(i){var e=i.value;return i=i.next,w(t,n++,e)}return k()})},Ve.isStack=We;var ri="@@__IMMUTABLE_STACK__@@",oi=Ve.prototype;oi[ri]=!0,oi.withMutations=Un.withMutations,oi.asMutable=Un.asMutable,oi.asImmutable=Un.asImmutable,oi.wasAltered=Un.wasAltered;var si;e.Iterator=x,Ye(e,{toArray:function(){lt(this.size);var t=new Array(this.size||0);return this.valueSeq().__iterate(function(e,n){t[n]=e}),t},toIndexedSeq:function(){return new re(this)},toJS:function(){return this.toSeq().map(function(t){return t&&"function"==typeof t.toJS?t.toJS():t}).__toJS()},toJSON:function(){return this.toSeq().map(function(t){return t&&"function"==typeof t.toJSON?t.toJSON():t}).__toJS()},toKeyedSeq:function(){return new ie(this,!0)},toMap:function(){return ht(this.toKeyedSeq())},toObject:function(){lt(this.size);var t={};return this.__iterate(function(e,n){t[n]=e}),t},toOrderedMap:function(){return Qt(this.toKeyedSeq())},toOrderedSet:function(){return Ue(s(this)?this.valueSeq():this)},toSet:function(){return ze(s(this)?this.valueSeq():this)},toSetSeq:function(){return new oe(this)},toSeq:function(){return a(this)?this.toIndexedSeq():s(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Ve(s(this)?this.valueSeq():this)},toList:function(){return Rt(s(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){return Ee(this,ge(this,un.call(arguments,0)))},includes:function(t){return this.some(function(e){return G(e,t)})},entries:function(){return this.__iterator(wn)},every:function(t,e){lt(this.size);var n=!0;return this.__iterate(function(i,r,o){if(!t.call(e,i,r,o))return n=!1,!1}),n},filter:function(t,e){return Ee(this,le(this,t,e,!0))},find:function(t,e,n){var i=this.findEntry(t,e);return i?i[1]:n},findEntry:function(t,e){var n;return this.__iterate(function(i,r,o){if(t.call(e,i,r,o))return n=[r,i],!1}),n},findLastEntry:function(t,e){return this.toSeq().reverse().findEntry(t,e)},forEach:function(t,e){return lt(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){lt(this.size),t=t!==undefined?""+t:",";var e="",n=!0;return this.__iterate(function(i){n?n=!1:e+=t,e+=null!==i&&i!==undefined?i.toString():""}),e},keys:function(){return this.__iterator(bn)},map:function(t,e){return Ee(this,ue(this,t,e))},reduce:function(t,e,n){lt(this.size);var i,r;return arguments.length<2?r=!0:i=e,this.__iterate(function(e,o,s){r?(r=!1,i=e):i=t.call(n,i,e,o,s)}),i},reduceRight:function(){var t=this.toKeyedSeq().reverse();return t.reduce.apply(t,arguments)},reverse:function(){return Ee(this,ce(this,!0))},slice:function(t,e){return Ee(this,de(this,t,e,!0))},some:function(t,e){return!this.every(Je(t),e)},sort:function(t){return Ee(this,be(this,t))},values:function(){return this.__iterator(xn)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return this.size!==undefined?0===this.size:!this.some(function(){return!0})},count:function(t,e){return p(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return he(this,t,e)},equals:function(t){return Y(this,t)},entrySeq:function(){var t=this;if(t._cache)return new O(t._cache);var e=t.toSeq().map(Qe).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter(Je(t),e)},findLast:function(t,e,n){return this.toKeyedSeq().reverse().find(t,e,n)},first:function(){return this.find(g)},flatMap:function(t,e){return Ee(this,_e(this,t,e))},flatten:function(t){return Ee(this,ve(this,t,!0))},fromEntrySeq:function(){return new se(this)},get:function(t,e){return this.find(function(e,n){return G(n,t)},undefined,e)},getIn:function(t,e){for(var n,i=this,r=Ae(t);!(n=r.next()).done;){var o=n.value;if((i=i&&i.get?i.get(o,vn):vn)===vn)return e}return i},groupBy:function(t,e){return fe(this,t,e)},has:function(t){return this.get(t,vn)!==vn},hasIn:function(t){return this.getIn(t,vn)!==vn},isSubset:function(t){return t="function"==typeof t.includes?t:e(t),this.every(function(e){return t.includes(e)})},isSuperset:function(t){return(t="function"==typeof t.isSubset?t:e(t)).isSubset(this)},keySeq:function(){return this.toSeq().map(Xe).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},max:function(t){return xe(this,t)},maxBy:function(t,e){return xe(this,e,t)},min:function(t){return xe(this,t?tn(t):rn)},minBy:function(t,e){return xe(this,e?tn(e):rn,t)},rest:function(){return this.slice(1)},skip:function(t){return this.slice(Math.max(0,t))},skipLast:function(t){return Ee(this,this.toSeq().reverse().skip(t).reverse())},skipWhile:function(t,e){return Ee(this,me(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile(Je(t),e)},sortBy:function(t,e){return Ee(this,be(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return Ee(this,this.toSeq().reverse().take(t).reverse())},takeWhile:function(t,e){return Ee(this,pe(this,t,e))},takeUntil:function(t,e){return this.takeWhile(Je(t),e)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=on(this))}});var ai=e.prototype;ai[cn]=!0,ai[Sn]=ai.values,ai.__toJS=ai.toArray,ai.__toStringMapper=en,ai.inspect=ai.toSource=function(){return this.toString()},ai.chain=ai.flatMap,ai.contains=ai.includes,function(){try{Object.defineProperty(ai,"length",{get:function(){if(!e.noLengthWarning){var t;try{throw new Error}catch(n){t=n.stack}if(-1===t.indexOf("_wrapObject"))return console&&console.warn&&console.warn("iterable.length has been deprecated, use iterable.size or iterable.count(). This warning will become a silent error in a future version. "+t),this.size}}})}catch(t){}}(),Ye(n,{flip:function(){return Ee(this,ae(this))},findKey:function(t,e){var n=this.findEntry(t,e);return n&&n[0]},findLastKey:function(t,e){return this.toSeq().reverse().findKey(t,e)},keyOf:function(t){return this.findKey(function(e){return G(e,t)})},lastKeyOf:function(t){return this.findLastKey(function(e){return G(e,t)})},mapEntries:function(t,e){var n=this,i=0;return Ee(this,this.toSeq().map(function(r,o){return t.call(e,[o,r],i++,n)}).fromEntrySeq())},mapKeys:function(t,e){var n=this;return Ee(this,this.toSeq().flip().map(function(i,r){return t.call(e,i,r,n)}).flip())}});var ui=n.prototype;ui[ln]=!0,ui[Sn]=ai.entries,ui.__toJS=ai.toObject,ui.__toStringMapper=function(t,e){return JSON.stringify(e)+": "+en(t)},Ye(i,{toKeyedSeq:function(){return new ie(this,!1)},filter:function(t,e){return Ee(this,le(this,t,e,!1))},findIndex:function(t,e){var n=this.findEntry(t,e);return n?n[0]:-1},indexOf:function(t){var e=this.toKeyedSeq().keyOf(t);return e===undefined?-1:e},lastIndexOf:function(t){var e=this.toKeyedSeq().reverse().keyOf(t);return e===undefined?-1:e},reverse:function(){return Ee(this,ce(this,!1))},slice:function(t,e){return Ee(this,de(this,t,e,!1))},splice:function(t,e){var n=arguments.length;if(e=Math.max(0|e,0),0===n||2===n&&!e)return this;t=_(t,t<0?this.count():this.size);var i=this.slice(0,t);return Ee(this,1===n?i:i.concat(d(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var n=this.toKeyedSeq().findLastKey(t,e);return n===undefined?-1:n},first:function(){return this.get(0)},flatten:function(t){return Ee(this,ve(this,t,!1))},get:function(t,e){return(t=m(this,t))<0||this.size===Infinity||this.size!==undefined&&t>this.size?e:this.find(function(e,n){return n===t},undefined,e)},has:function(t){return(t=m(this,t))>=0&&(this.size!==undefined?this.size===Infinity||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return Ee(this,ye(this,t))},interleave:function(){var t=[this].concat(d(arguments)),e=ke(this.toSeq(),A.of,t),n=e.flatten(!0);return e.size&&(n.size=e.size*t.length),Ee(this,n)},last:function(){return this.get(-1)},skipWhile:function(t,e){return Ee(this,me(this,t,e,!1))},zip:function(){return Ee(this,ke(this,nn,[this].concat(d(arguments))))},zipWith:function(t){var e=d(arguments);return e[0]=this,Ee(this,ke(this,t,e))}}),i.prototype[hn]=!0,i.prototype[fn]=!0,Ye(r,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),r.prototype.has=ai.includes,Ye(I,n.prototype),Ye(A,i.prototype),Ye(P,r.prototype),Ye(et,n.prototype),Ye(nt,i.prototype),Ye(it,r.prototype);return{Iterable:e,Seq:M,Collection:tt,Map:ht,OrderedMap:Qt,List:Rt,Stack:Ve,Set:ze,OrderedSet:Ue,Record:Pe,Range:J,Repeat:X,is:G,fromJS:Z}})},function(t,e,n){var i,r;i=[n(167),n(165)],(r=function(t,e){"use strict";function n(e){return!!t.isCaretPositionNode(e)||""===e.parentNode.textContent.trim()}function i(e){function o(e){return!!(0===e.children.length&&t.isBlockElement(e)||1===e.children.length&&t.isSelectionMarkerNode(e.children[0]))||!t.isBlockElement(e)&&0===e.children.length&&n(e)}for(var s=e.firstElementChild;s;)t.isSelectionMarkerNode(s)||(o(s)&&""===s.textContent.trim()&&!r.includes(s.nodeName)?s.appendChild(document.createElement("br")):s.children.length>0&&i(s)),s=s.nextElementSibling}var r=e.Set.of("AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR");return function(){return function(t){t.registerHTMLFormatter("normalize",function(t){var e=document.createElement("div");return e.innerHTML=t,i(e),e.innerHTML})}}}.apply(e,i))===undefined||(t.exports=r)},function(t,e,n){var i,r;i=[n(168),n(169),n(165)],(r=function(t,e,n){"use strict";function i(t){return e.includes(t.nodeName)}function r(e){return t.includes(e.nodeName)}function o(t){return!(t.children.length>1)&&((1!==t.children.length||""===t.textContent.trim())&&(0===t.children.length?""===t.textContent.trim():o(t.children[0])))}function s(t){return t.nodeType===Node.TEXT_NODE}function a(t){return s(t)&&""===t.data}function u(t){return t.nodeType===Node.DOCUMENT_FRAGMENT_NODE}function c(t,e){return t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING}function l(t,e){return function(n){return n.nodeType===t.ELEMENT_NODE&&n.className===e}}function h(t){return l(Node,"scribe-marker")(t)}function f(t){return l(Node,"caret-position")(t)}function d(t){var e=t.firstChild;return e&&"BR"!==e.nodeName?d(e):t}function p(t,e){return e.parentNode.insertBefore(t,e.nextSibling)}function m(t){return t.parentNode.removeChild(t)}function g(t,e,n){function i(t){return e===t}if(!i(t))for(var r=t.parentNode;r&&!i(r);){if(n(r))return r;r=r.parentNode}}function v(t){for(var e=n.List();t=t.nextSibling;)e=e.push(t);return e}function _(t,e){return t[0].parentNode.insertBefore(e,t[0]),t.forEach(function(t){e.appendChild(t)}),e}function y(t,e){for(;e.childNodes.length>0;)t.insertBefore(e.childNodes[0],e);t.removeChild(e)}function b(e){function i(t,e){return window.getComputedStyle(e).lineHeight===t.lineHeight}var r=n.List(e.querySelectorAll(t.map(function(t){return t+'[style*="line-height"]'}).join(",")));r=r.filter(i.bind(null,window.getComputedStyle(e)));var o=n.List();r.forEach(function(t){t.style.lineHeight=null,t.getAttribute("style")||t.removeAttribute("style"),"SPAN"===t.nodeName&&0===t.attributes.length&&(o=o.push(t))}),o.forEach(function(t){y(t.parentNode,t)})}return{isInlineElement:r,isBlockElement:i,isEmptyInlineElement:o,isText:s,isEmptyTextNode:a,isFragment:u,isBefore:c,isSelectionMarkerNode:h,isCaretPositionNode:f,firstDeepestChild:d,insertAfter:p,removeNode:m,getAncestor:g,nextSiblings:v,wrap:_,unwrap:y,removeChromeArtifacts:b,elementHasClass:l}}.apply(e,i))===undefined||(t.exports=r)},function(t,e,n){var i,r;i=[n(165)],(r=function(t){return t.Set.of("B","BIG","I","SMALL","TT","ABBR","ACRONYM","CITE","CODE","DFN","EM","KBD","STRONG","SAMP","VAR","A","BDO","BR","IMG","MAP","OBJECT","Q","SCRIPT","SPAN","SUB","SUP","BUTTON","INPUT","LABEL","SELECT","TEXTAREA")}.apply(e,i))===undefined||(t.exports=r)},function(t,e,n){var i,r;i=[n(165)],(r=function(t){return t.Set.of("ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","CANVAS","DD","DIV","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","LI","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TD","TH","TFOOT","UL","VIDEO")}.apply(e,i))===undefined||(t.exports=r)},function(t,e,n){var i;(i=function(){"use strict";function t(t){for(var e=document.createTreeWalker(t,NodeFilter.SHOW_ALL,null,!1);e.nextNode();)if(e.currentNode&&(~["br"].indexOf(e.currentNode.nodeName.toLowerCase())||e.currentNode.length>0))return!0;return!1}return function(){return function(e){e.el.addEventListener("keydown",function(n){if(13===n.keyCode){var i=new e.api.Selection,r=i.range;i.getContaining(function(t){return"LI"===t.nodeName||/^(H[1-6])$/.test(t.nodeName)})||(n.preventDefault(),e.transactionManager.run(function(){"BR"===e.el.lastChild.nodeName&&e.el.removeChild(e.el.lastChild);var n=document.createElement("br");r.insertNode(n),r.collapse(!1);var o=r.cloneRange();o.setEndAfter(e.el.lastChild,0);if(!t(o.cloneContents())){var s=document.createElement("br");r.insertNode(s)}var a=r.cloneRange();a.setStartAfter(n,0),a.setEndAfter(n,0),i.selection.removeAllRanges(),i.selection.addRange(a)}))}}.bind(this)),""===e.getHTML().trim()&&e.setContent("")}}}.call(e,n,e,t))===undefined||(t.exports=i)},function(t,e,n){var i,r;i=[n(172),n(173)],(r=function(t,e){"use strict";return{replaceNbspCharsFormatter:t,escapeHtmlCharactersFormatter:e}}.apply(e,i))===undefined||(t.exports=r)},function(t,e,n){var i;(i=function(){"use strict";return function(){return function(t){var e=/(\s|&nbsp;)+/g;t.registerHTMLFormatter("export",function(t){return t.replace(e," ")})}}}.call(e,n,e,t))===undefined||(t.exports=i)},function(t,e,n){var i,r;i=[n(174)],(r=function(t){"use strict";return function(){return function(e){e.registerPlainTextFormatter(t)}}}.apply(e,i))===undefined||(t.exports=r)},function(t,e,n){var i,r;i=[n(148),n(175)],(r=function(t,e){function n(n){return(n=t(n))&&r.test(n)?n.replace(i,e):n}var i=/[&<>"'`]/g,r=RegExp(i.source);return n}.apply(e,i))===undefined||(t.exports=r)},function(t,e){var n,i;n=[],(i=function(){function t(t){return e[t]}var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"};return t}.apply(e,n))===undefined||(t.exports=i)},function(t,e,n){var i,r;i=[n(177),n(165)],(r=function(t,e){"use strict";return function(){return function(n){var i=n.node;n.el.addEventListener("focus",function(){var t=new n.api.Selection;if(t.range){if(n.allowsBlockElements()&&t.range.startContainer===n.el){var e=i.firstDeepestChild(n.el),r=t.range;r.setStart(e,0),r.setEnd(e,0),t.selection.removeAllRanges(),t.selection.addRange(r)}}}.bind(n));var r=function(){if(!n._skipFormatters){var t=new n.api.Selection,e=t.range,i=function(){e&&t.placeMarkers(),n.setHTML(n._htmlFormatterFactory.format(n.getHTML())),t.selectMarkers()}.bind(n);n.transactionManager.run(i)}delete n._skipFormatters}.bind(n);t(n.el,r),n.allowsBlockElements()&&n.el.addEventListener("keydown",function(t){if(13===t.keyCode){var e=new n.api.Selection,i=e.range,r=e.getContaining(function(t){return/^(H[1-6])$/.test(t.nodeName)});if(r&&i.collapsed){var o=i.cloneRange();o.setEndAfter(r,0);""===o.cloneContents().firstChild.textContent&&(t.preventDefault(),n.transactionManager.run(function(){var t=document.createElement("p"),n=document.createElement("br");t.appendChild(n),r.parentNode.insertBefore(t,r.nextElementSibling),i.setStart(t,0),i.setEnd(t,0),e.selection.removeAllRanges(),e.selection.addRange(i)}))}}}),n.allowsBlockElements()&&n.el.addEventListener("keydown",function(t){if(13===t.keyCode||8===t.keyCode){var e=new n.api.Selection;if(e.range.collapsed){var i=e.getContaining(function(t){return"LI"===t.nodeName});if(i&&""===i.textContent.trim()){t.preventDefault();var r=e.getContaining(function(t){return"UL"===t.nodeName||"OL"===t.nodeName}),o=n.getCommand("OL"===r.nodeName?"insertOrderedList":"insertUnorderedList");o.event=t,o.execute()}}}}),n.el.addEventListener("paste",function(t){if(t.clipboardData&&t.clipboardData.types.length>0)t.preventDefault(),e.List(t.clipboardData.types).includes("text/html")?n.insertHTML(t.clipboardData.getData("text/html")):n.insertPlainText(t.clipboardData.getData("text/plain"));else{var i=new n.api.Selection;i.placeMarkers();var r=document.createElement("div");document.body.appendChild(r),r.setAttribute("contenteditable",!0),r.focus(),setTimeout(function(){var t=r.innerHTML;r.parentNode.removeChild(r),i.selectMarkers(),n.el.focus(),n.insertHTML(t)},1)}})}}}.apply(e,i))===undefined||(t.exports=r)},function(t,e,n){var i,r;i=[n(167),n(178)],(r=function(t,e){function n(e){return!t.isEmptyTextNode(e)&&!t.isSelectionMarkerNode(e)}function i(t){return t.some(function(t){return Array.prototype.some.call(t.addedNodes,n)||Array.prototype.some.call(t.removedNodes,n)})}function r(t,e){var n=!1,r=new s(function(t){if(!n&&i(t)){n=!0;try{e()}catch(r){throw r}finally{setTimeout(function(){n=!1},0)}}});return r.observe(t,{childList:!0,subtree:!0}),r}var o="object"==typeof window?window:undefined,s=e.determineMutationObserver(o);return r}.apply(e,i))===undefined||(t.exports=r)},function(t,e){var n,i;n=[],(i=function(){function t(t){return void 0===t?function(){return{observe:function(){}}}:t.MutationObserver||t.WebKitMutationObserver||t.MozMutationObserver}return{determineMutationObserver:t}}.apply(e,n))===undefined||(t.exports=i)},function(t,e,n){var i,r;i=[n(180),n(181),n(182),n(183),n(184),n(185),n(186)],(r=function(t,e,n,i,r,o,s){"use strict";return{commands:{bold:t,indent:e,insertHTML:n,insertList:i,outdent:r,createLink:o},events:s}}.apply(e,i))===undefined||(t.exports=r)},function(t,e,n){var i;(i=function(){"use strict";return function(){return function(t){var e=new t.api.CommandPatch("bold");e.queryEnabled=function(){var e=(new t.api.Selection).getContaining(function(t){return/^(H[1-6])$/.test(t.nodeName)});return t.api.CommandPatch.prototype.queryEnabled.apply(this,arguments)&&!e},t.commandPatches.bold=e}}}.call(e,n,e,t))===undefined||(t.exports=i)},function(t,e,n){var i;(i=function(){"use strict";var t="\ufeff";return function(){return function(e){var n=new e.api.CommandPatch("indent");n.execute=function(n){e.transactionManager.run(function(){var i=new e.api.Selection,r=i.range;if("P"===r.commonAncestorContainer.nodeName&&"<br>"===r.commonAncestorContainer.innerHTML){var o=document.createTextNode(t);r.insertNode(o),r.setStart(o,0),r.setEnd(o,0),i.selection.removeAllRanges(),i.selection.addRange(r)}e.api.CommandPatch.prototype.execute.call(this,n);var s=(i=new e.api.Selection).getContaining(function(t){return"BLOCKQUOTE"===t.nodeName})
;s&&s.removeAttribute("style")}.bind(this))},e.commandPatches.indent=n}}}.call(e,n,e,t))===undefined||(t.exports=i)},function(t,e){var n,i;n=[],(i=function(){"use strict";return function(){return function(t){var e=new t.api.CommandPatch("insertHTML"),n=t.node;e.execute=function(e){t.transactionManager.run(function(){t.api.CommandPatch.prototype.execute.call(this,e),n.removeChromeArtifacts(t.el)}.bind(this))},t.commandPatches.insertHTML=e}}}.apply(e,n))===undefined||(t.exports=i)},function(t,e){var n,i;n=[],(i=function(){"use strict";return function(){return function(t){var e=t.node,n=function(e){t.api.CommandPatch.call(this,e)};n.prototype=Object.create(t.api.CommandPatch.prototype),n.prototype.constructor=n,n.prototype.execute=function(n){t.transactionManager.run(function(){if(t.api.CommandPatch.prototype.execute.call(this,n),this.queryState()){var i=new t.api.Selection,r=i.getContaining(function(t){return"OL"===t.nodeName||"UL"===t.nodeName});if(r.nextElementSibling&&0===r.nextElementSibling.childNodes.length&&e.removeNode(r.nextElementSibling),r){var o=r.parentNode;o&&/^(H[1-6]|P)$/.test(o.nodeName)&&(i.placeMarkers(),e.insertAfter(r,o),i.selectMarkers(),2===o.childNodes.length&&e.isEmptyTextNode(o.firstChild)&&e.removeNode(o),0===o.childNodes.length&&e.removeNode(o))}e.removeChromeArtifacts(r)}}.bind(this))},n.prototype.queryState=function(){try{return t.api.CommandPatch.prototype.queryState.apply(this,arguments)}catch(e){if("NS_ERROR_UNEXPECTED"==e.name)return!1;throw e}},t.commandPatches.insertOrderedList=new n("insertOrderedList"),t.commandPatches.insertUnorderedList=new n("insertUnorderedList")}}}.apply(e,n))===undefined||(t.exports=i)},function(t,e,n){var i;(i=function(){"use strict";return function(){return function(t){var e=t.node,n=new t.api.CommandPatch("outdent");n.execute=function(){t.transactionManager.run(function(){var n=new t.api.Selection,i=n.range,r=n.getContaining(function(t){return"BLOCKQUOTE"===t.nodeName});if("BLOCKQUOTE"===i.commonAncestorContainer.nodeName){n.placeMarkers(),n.selectMarkers(!0);var o=i.cloneContents();r.parentNode.insertBefore(o,r),i.deleteContents(),n.selectMarkers(),""===r.textContent&&r.parentNode.removeChild(r)}else{var s=n.getContaining(function(t){return"P"===t.nodeName});if(s){var a=e.nextSiblings(s);if(a.size){for(var u=document.createElement(r.nodeName);a.size;)u.appendChild(a.first()),a=a.shift();r.parentNode.insertBefore(u,r.nextElementSibling)}n.placeMarkers(),r.parentNode.insertBefore(s,r.nextElementSibling),n.selectMarkers(),""===r.innerHTML&&r.parentNode.removeChild(r)}else t.api.CommandPatch.prototype.execute.call(this)}}.bind(this))},t.commandPatches.outdent=n}}}.call(e,n,e,t))===undefined||(t.exports=i)},function(t,e,n){var i;(i=function(){"use strict";return function(){return function(t){var e=new t.api.CommandPatch("createLink");t.commandPatches.createLink=e,e.execute=function(e){var n=new t.api.Selection;if(n.range.collapsed){var i=document.createElement("a");i.setAttribute("href",e),i.textContent=e,n.range.insertNode(i);var r=document.createRange();r.setStartBefore(i),r.setEndAfter(i),n.selection.removeAllRanges(),n.selection.addRange(r)}else t.api.CommandPatch.prototype.execute.call(this,e)}}}}.call(e,n,e,t))===undefined||(t.exports=i)},function(t,e){var n,i;n=[],(i=function(){"use strict";return function(){return function(t){var e=t.node;t.allowsBlockElements()&&t.el.addEventListener("keyup",function(n){if(8===n.keyCode||46===n.keyCode){var i=new t.api.Selection,r=i.getContaining(function(t){return"P"===t.nodeName});r&&t.transactionManager.run(function(){i.placeMarkers(),e.removeChromeArtifacts(r),i.selectMarkers()},!0)}})}}}.apply(e,n))===undefined||(t.exports=i)},function(t,e,n){var i,r;i=[n(188),n(189),n(190),n(191)],(r=function(t,e,n,i){"use strict";return function(r){this.CommandPatch=t(r),this.Command=e(r),this.Selection=n(r),this.SimpleCommand=i(this,r)}}.apply(e,i))===undefined||(t.exports=r)},function(t,e,n){var i;(i=function(){"use strict";return function(t){function e(t){this.commandName=t}return e.prototype.execute=function(e){t.transactionManager.run(function(){document.execCommand(this.commandName,!1,e||null)}.bind(this))},e.prototype.queryState=function(){return document.queryCommandState(this.commandName)},e.prototype.queryEnabled=function(){return document.queryCommandEnabled(this.commandName)},e}}.call(e,n,e,t))===undefined||(t.exports=i)},function(t,e,n){var i;(i=function(){"use strict";return function(t){function e(e){this.commandName=e,this.patch=t.commandPatches[this.commandName]}return e.prototype.execute=function(e){this.patch?this.patch.execute(e):t.transactionManager.run(function(){document.execCommand(this.commandName,!1,e||null)}.bind(this))},e.prototype.queryState=function(){return this.patch?this.patch.queryState():document.queryCommandState(this.commandName)},e.prototype.queryEnabled=function(){return this.patch?this.patch.queryEnabled():document.queryCommandEnabled(this.commandName)},e}}.call(e,n,e,t))===undefined||(t.exports=i)},function(t,e,n){var i;(i=function(){"use strict";return function(t){function e(){var t=document.createElement("em");return t.style.display="none",t.classList.add("scribe-marker"),t}function n(t,e){t.insertNode(e),e.nextSibling&&o.isEmptyTextNode(e.nextSibling)&&o.removeNode(e.nextSibling),e.previousSibling&&o.isEmptyTextNode(e.previousSibling)&&o.removeNode(e.previousSibling)}function i(){if(this.selection=r.getSelection(),this.selection.rangeCount&&this.selection.anchorNode){var t=this.selection.anchorNode,e=this.selection.anchorOffset,n=this.selection.focusNode,i=this.selection.focusOffset;if(t===n&&i<e){var s=e;e=i,i=s}else if(o.isBefore(n,t)){var a=t,u=e;t=n,e=i,n=a,i=u}this.range=document.createRange(),this.range.setStart(t,e),this.range.setEnd(n,i)}}var r=t.el.ownerDocument,o=t.node;if(r.compareDocumentPosition(t.el)&Node.DOCUMENT_POSITION_DISCONNECTED){for(var s=t.el.parentNode;s&&o.isFragment(s);)s=s.parentNode;s&&s.getSelection&&(r=s)}return i.prototype.getContaining=function(e){if(this.range){var n=this.range.commonAncestorContainer;return n&&t.el===n||!e(n)?o.getAncestor(n,t.el,e):n}},i.prototype.placeMarkers=function(){var i=this.range;if(i&&document.contains(t.el)&&t.el.contains(i.startContainer)&&t.el.contains(i.endContainer)){if(n(i.cloneRange(),e()),!i.collapsed){var r=i.cloneRange();r.collapse(!1),n(r,e())}this.selection.removeAllRanges(),this.selection.addRange(i)}},i.prototype.getMarkers=function(){return t.el.querySelectorAll("em.scribe-marker")},i.prototype.removeMarkers=function(){Array.prototype.forEach.call(this.getMarkers(),function(t){var e=t.parentNode;o.removeNode(t),e.normalize()})},i.prototype.selectMarkers=function(t){var e=this.getMarkers();if(e.length){var n=document.createRange();n.setStartBefore(e[0]),n.setEndAfter(e.length>=2?e[1]:e[0]),t||this.removeMarkers(),this.selection.removeAllRanges(),this.selection.addRange(n)}},i.prototype.isCaretOnNewLine=function(){var t=this.getContaining(function(t){return"P"===t.nodeName});return!!t&&o.isEmptyInlineElement(t)},i}}.call(e,n,e,t))===undefined||(t.exports=i)},function(t,e,n){var i;(i=function(){"use strict";return function(t,e){function n(t,n){e.api.Command.call(this,t),this._nodeName=n}return n.prototype=Object.create(t.Command.prototype),n.prototype.constructor=n,n.prototype.queryState=function(){var t=new e.api.Selection;return e.api.Command.prototype.queryState.call(this)&&!!t.getContaining(function(t){return t.nodeName===this._nodeName}.bind(this))},n}}.call(e,n,e,t))===undefined||(t.exports=i)},function(t,e,n){var i,r;i=[n(193),n(194),n(195),n(196),n(197),n(198),n(199)],(r=function(t,e,n,i,r,o,s){"use strict";return{indent:t,insertList:e,outdent:n,redo:i,subscript:r,superscript:o,undo:s}}.apply(e,i))===undefined||(t.exports=r)},function(t,e,n){var i;(i=function(){"use strict";return function(){return function(t){var e=new t.api.Command("indent");e.queryEnabled=function(){var e=(new t.api.Selection).getContaining(function(t){return"UL"===t.nodeName||"OL"===t.nodeName});return t.api.Command.prototype.queryEnabled.call(this)&&t.allowsBlockElements()&&!e},t.commands.indent=e}}}.call(e,n,e,t))===undefined||(t.exports=i)},function(t,e,n){var i,r;i=[n(165)],(r=function(t){"use strict";return function(){return function(e){var n=e.node,i=function(t){e.api.Command.call(this,t)};i.prototype=Object.create(e.api.Command.prototype),i.prototype.constructor=i,i.prototype.execute=function(i){function r(t){if(t.size){for(var e=document.createElement(a.nodeName);t.size;)e.appendChild(t.first()),t=t.shift();a.parentNode.insertBefore(e,a.nextElementSibling)}}if(this.queryState()){var o=new e.api.Selection,s=o.range,a=o.getContaining(function(t){return"OL"===t.nodeName||"UL"===t.nodeName}),u=o.getContaining(function(t){return"LI"===t.nodeName});e.transactionManager.run(function(){if(u){r(n.nextSiblings(u)),o.placeMarkers();var e=document.createElement("p");e.innerHTML=u.innerHTML,a.parentNode.insertBefore(e,a.nextElementSibling),u.parentNode.removeChild(u)}else{var i=t.List(a.querySelectorAll("li")).filter(function(t){return s.intersectsNode(t)}),c=i.last();r(n.nextSiblings(c)),o.placeMarkers();var l=document.createDocumentFragment();i.forEach(function(t){var e=document.createElement("p");e.innerHTML=t.innerHTML,l.appendChild(e)}),a.parentNode.insertBefore(l,a.nextElementSibling),i.forEach(function(t){t.parentNode.removeChild(t)})}0===a.childNodes.length&&a.parentNode.removeChild(a),o.selectMarkers()}.bind(this))}else e.api.Command.prototype.execute.call(this,i)},i.prototype.queryEnabled=function(){return e.api.Command.prototype.queryEnabled.call(this)&&e.allowsBlockElements()},e.commands.insertOrderedList=new i("insertOrderedList"),e.commands.insertUnorderedList=new i("insertUnorderedList")}}}.apply(e,i))===undefined||(t.exports=r)},function(t,e,n){var i;(i=function(){"use strict";return function(){return function(t){var e=new t.api.Command("outdent");e.queryEnabled=function(){var e=(new t.api.Selection).getContaining(function(t){return"UL"===t.nodeName||"OL"===t.nodeName});return t.api.Command.prototype.queryEnabled.call(this)&&t.allowsBlockElements()&&!e},t.commands.outdent=e}}}.call(e,n,e,t))===undefined||(t.exports=i)},function(t,e,n){var i;(i=function(){"use strict";return function(){return function(t){var e=new t.api.Command("redo");e.execute=function(){t.undoManager.redo()},e.queryEnabled=function(){return t.undoManager.position>0},t.commands.redo=e,t.options.undo.enabled&&t.el.addEventListener("keydown",function(t){t.shiftKey&&(t.metaKey||t.ctrlKey)&&90===t.keyCode&&(t.preventDefault(),e.execute())})}}}.call(e,n,e,t))===undefined||(t.exports=i)},function(t,e,n){var i;(i=function(){"use strict";return function(){return function(t){var e=new t.api.Command("subscript");t.commands.subscript=e}}}.call(e,n,e,t))===undefined||(t.exports=i)},function(t,e,n){var i;(i=function(){"use strict";return function(){return function(t){var e=new t.api.Command("superscript");t.commands.superscript=e}}}.call(e,n,e,t))===undefined||(t.exports=i)},function(t,e,n){var i;(i=function(){"use strict";return function(){return function(t){var e=new t.api.Command("undo");e.execute=function(){t.undoManager.undo()},e.queryEnabled=function(){return t.undoManager.position<t.undoManager.length},t.commands.undo=e,t.options.undo.enabled&&t.el.addEventListener("keydown",function(t){t.shiftKey||!t.metaKey&&!t.ctrlKey||90!==t.keyCode||(t.preventDefault(),e.execute())})}}}.call(e,n,e,t))===undefined||(t.exports=i)},function(t,e,n){var i,r;i=[n(165)],(r=function(t){"use strict";function e(e,n){this._stack=t.List(),this._limit=e,this._fireEvent="undefined"!=typeof CustomEvent&&n&&n.dispatchEvent,this._ush=n,this.position=0,this.length=0}return e.prototype.transact=function(e,n){if(arguments.length<2)throw new TypeError("Not enough arguments to UndoManager.transact.");e.execute(),this.position>0&&this.clearRedo();var i;n&&this.length?(i=this._stack.first().push(e),this._stack=this._stack.shift().unshift(i)):(i=t.List.of(e),this._stack=this._stack.unshift(i),this.length++,this._limit&&this.length>this._limit&&this.clearUndo(this._limit)),this._dispatch("DOMTransaction",i)},e.prototype.undo=function(){if(!(this.position>=this.length)){for(var t=this._stack.get(this.position),e=t.size;e--;)t.get(e).undo();this.position++,this._dispatch("undo",t)}},e.prototype.redo=function(){if(0!==this.position){this.position--;for(var t=this._stack.get(this.position),e=0;e<t.size;e++)t.get(e).redo();this._dispatch("redo",t)}},e.prototype.item=function(t){return t>=0&&t<this.length?this._stack.get(t).toArray():null},e.prototype.clearUndo=function(t){this._stack=this._stack.take(t!==undefined?t:this.position),this.length=this._stack.size},e.prototype.clearRedo=function(){this._stack=this._stack.skip(this.position),this.length=this._stack.size,this.position=0},e.prototype._dispatch=function(t,e){this._fireEvent&&this._ush.dispatchEvent(new CustomEvent(t,{detail:{transactions:e.toArray()},bubbles:!0,cancelable:!1}))},e}.apply(e,i))===undefined||(t.exports=r)},function(t,e,n){var i,r;i=[n(165)],(r=function(t){"use strict";function e(){this._listeners={}}return e.prototype.on=function(e,n){var i=this._listeners[e]||t.Set();this._listeners[e]=i.add(n)},e.prototype.off=function(e,n){var i=this._listeners[e]||t.Set();this._listeners[e]=n?i["delete"](n):i.clear()},e.prototype.trigger=function(e,n){for(var i=e.split(":");i.length;){var r=i.join(":");(this._listeners[r]||t.Set()).forEach(function(t){t.apply(null,n)}),i.splice(i.length-1,1)}},e}.apply(e,i))===undefined||(t.exports=r)},function(t,e,n){var i,r;i=[n(203)],(r=function(t){function e(e){var n=e||{};return n.defaultPlugins&&(n.defaultPlugins=n.defaultPlugins.filter(r(a.defaultPlugins))),n.defaultFormatters&&(n.defaultFormatters=n.defaultFormatters.filter(r(a.defaultFormatters))),Object.freeze(t(n,a))}function n(t){return function(e,n){return e===t?-1:n===t?1:0}}function i(t){return function(e){return-1!==(t?o:s).indexOf(e)}}function r(t){return function(e){return-1!==t.indexOf(e)}}var o=["setRootPElement","enforcePElements","ensureSelectableContainers"],s=["inlineElementsMode"],a={allowBlockElements:!0,debug:!1,undo:{manager:!1,enabled:!0,limit:100,interval:250},defaultCommandPatches:["bold","indent","insertHTML","insertList","outdent","createLink"],defaultPlugins:o.concat(s),defaultFormatters:["escapeHtmlCharactersFormatter","replaceNbspCharsFormatter"]};return{defaultOptions:a,checkOptions:e,sortByPlugin:n,filterByBlockLevelMode:i,filterByPluginExists:r}}.apply(e,i))===undefined||(t.exports=r)},function(t,e,n){var i,r;i=[n(204),n(141),n(205)],(r=function(t,e,n){function i(i){if(null==i)return i;var o=t(arguments);return o.push(n),e.apply(r,o)}var r;return i}.apply(e,i))===undefined||(t.exports=r)},function(t,e){var n,i;n=[],(i=function(){function t(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}return t}.apply(e,n))===undefined||(t.exports=i)},function(t,e){var n,i;n=[],(i=function(){function t(t,e){return void 0===t?e:t}return t}.apply(e,n))===undefined||(t.exports=i)},function(t,e,n){var i;(i=function(){"use strict";return function(){return function(t){t.registerPlainTextFormatter(function(t){return t.replace(/\n([ \t]*\n)+/g,"</p><p>").replace(/\n/g,"<br>")})}}}.call(e,n,e,t))===undefined||(t.exports=i)},function(t,e,n){var i;(i=function(){"use strict";return function(){return function(t){var e=new t.api.Command("createLink");e.nodeName="A",e.execute=function(){var e=new t.api.Selection,n=e.range,i=e.getContaining(function(t){return t.nodeName===this.nodeName}.bind(this)),r=i?i.href:"",o=window.prompt("Enter a link.",r);if(i&&(n.selectNode(i),e.selection.removeAllRanges(),e.selection.addRange(n)),o){var s=/^mailto\:/;if(!/^https?\:\/\//.test(o)&&!s.test(o))if(/@/.test(o)){window.confirm("The URL you entered appears to be an email address. Do you want to add the required \u201cmailto:\u201d prefix?")&&(o="mailto:"+o)}else{window.confirm("The URL you entered appears to be a link. Do you want to add the required \u201chttp://\u201d prefix?")&&(o="http://"+o)}t.api.SimpleCommand.prototype.execute.call(this,o)}},e.queryState=function(){return!!(new t.api.Selection).getContaining(function(t){return t.nodeName===this.nodeName}.bind(this))},t.commands.linkPrompt=e}}}.call(e,n,e,t))===undefined||(t.exports=i)},function(t,e,n){var i,r;i=[n(209),n(210),n(222)],(r=function(t,e,n){"use strict";return function(i){var r=e(n(i),{tags:{em:{"class":"scribe-marker"},br:{}}});return function(e){var n=new t(r);e.registerHTMLFormatter("sanitize",n.clean.bind(n))}}}.apply(e,i))===undefined||(t.exports=r)},function(t,e,n){var i,r;!function(o,s){(r="function"==typeof(i=s)?i.call(e,n,e,t):i)===undefined||(t.exports=r)}(0,function(){function t(t){var e=t.tags;if(!Object.keys(e).map(function(t){return typeof e[t]}).every(function(t){return"object"===t||"boolean"===t||"function"===t}))throw new Error("The configuration was invalid");this.config=t}function e(t){return-1!==a.indexOf(t.nodeName)}function n(t){return-1!==u.indexOf(t.nodeName)}function i(t){return document.createTreeWalker(t,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT,null,!1)}function r(t,e,n){return"function"==typeof t.tags[e]?t.tags[e](n):t.tags[e]}function o(t,e){return void 0===e||"boolean"==typeof e&&!e}function s(t,e,n){var i=t.name.toLowerCase();return!0!==e&&("function"==typeof e[i]?!e[i](t.value,n):"undefined"==typeof e[i]||(!1===e[i]||"string"==typeof e[i]&&e[i]!==t.value))}var a=["P","LI","TD","TH","DIV","H1","H2","H3","H4","H5","H6","PRE"],u=["A","B","STRONG","I","EM","SUB","SUP","U","STRIKE"];return t.prototype.clean=function(t){var e=document.createElement("div");return e.innerHTML=t,this._sanitize(e),e.innerHTML},t.prototype._sanitize=function(t){var a=i(t),u=a.firstChild();if(u)do{if(!u._sanitized)if(u.nodeType!==Node.TEXT_NODE){if(u.nodeType===Node.COMMENT_NODE){t.removeChild(u),this._sanitize(t);break}var c,l=n(u);l&&(c=Array.prototype.some.call(u.childNodes,e));var h=!!t.parentNode,f=e(t)&&e(u)&&h,d=u.nodeName.toLowerCase(),p=r(this.config,d,u);if(l&&c||o(u,p)||!this.config.keepNestedBlockElements&&f){if("SCRIPT"!==u.nodeName&&"STYLE"!==u.nodeName)for(;u.childNodes.length>0;)t.insertBefore(u.childNodes[0],u);t.removeChild(u),this._sanitize(t);break}for(var m=0;m<u.attributes.length;m+=1){var g=u.attributes[m];s(g,p,u)&&(u.removeAttribute(g.name),m-=1)}this._sanitize(u),u._sanitized=!0}else if(""===u.data.trim()&&(u.previousElementSibling&&e(u.previousElementSibling)||u.nextElementSibling&&e(u.nextElementSibling))){t.removeChild(u),this._sanitize(t);break}}while(u=a.nextSibling())},t})},function(t,e,n){var i,r;i=[n(211),n(158)],(r=function(t,e){return e(t)}.apply(e,i))===undefined||(t.exports=r)},function(t,e,n){var i,r;i=[n(212),n(213),n(216),n(153),n(145),n(150),n(149),n(220)],(r=function(t,e,n,i,r,o,s,a){function u(l,h,f,d,p){if(!o(l))return l;var m=r(h.length)&&(i(h)||a(h));return(m?t:e)(h,function(t,e,i){if(s(t))return d||(d=[]),p||(p=[]),n(l,i,e,u,f,d,p);var r=l[e],o=f?f(r,t,e,l,i):c,a=void 0===o;a&&(o=t),!m&&void 0===o||!a&&(o==o?o===r:r!=r)||(l[e]=o)}),l}var c;return u}.apply(e,i))===undefined||(t.exports=r)},function(t,e){var n,i;n=[],(i=function(){function t(t,e){for(var n=-1,i=t.length;++n<i&&!1!==e(t[n],n,t););return t}return t}.apply(e,n))===undefined||(t.exports=i)},function(t,e,n){var i,r;i=[n(214),n(144)],(r=function(t,e){function n(n,i){return t(n,i,e)}return n}.apply(e,i))===undefined||(t.exports=r)},function(t,e,n){var i,r;i=[n(215)],(r=function(t){function e(e,n,i){for(var r=-1,o=t(e),s=i(e),a=s.length;++r<a;){var u=s[r];if(!1===n(o[u],u,o))break}return e}return e}.apply(e,i))===undefined||(t.exports=r)},function(t,e,n){var i,r;i=[n(150)],(r=function(t){function e(e){return t(e)?e:Object(e)}return e}.apply(e,i))===undefined||(t.exports=r)},function(t,e,n){var i,r;i=[n(204),n(152),n(153),n(145),n(217),n(220),n(221)],(r=function(t,e,n,i,r,o,s){function a(a,c,l,h,f,d,p){for(var m=d.length,g=c[l];m--;)if(d[m]==g)return void(a[l]=p[m]);var v=a[l],_=f?f(v,g,l,a,c):u,y=void 0===_;y&&(_=g,i(g.length)&&(n(g)||o(g))?_=n(v)?v:v?t(v):[]:r(g)||e(g)?_=e(v)?s(v):r(v)?v:{}:y=!1),d.push(g),p.push(_),y?a[l]=h(_,g,f,d,p):(_==_?_!==v:v==v)&&(a[l]=_)}var u;return a}.apply(e,i))===undefined||(t.exports=r)},function(t,e,n){var i,r;i=[n(146),n(218)],(r=function(t,e){var n="[object Object]",i=Object.prototype.toString,r=t(r=Object.getPrototypeOf)&&r;return r?function(o){if(!o||i.call(o)!=n)return!1;var s=o.valueOf,a=t(s)&&(a=r(s))&&r(a);return a?o==a||r(o)==a:e(o)}:e}.apply(e,i))===undefined||(t.exports=r)},function(t,e,n){var i,r;i=[n(219),n(149)],(r=function(t,e){function n(n){var r;if(!e(n)||s.call(n)!=i||!o.call(n,"constructor")&&"function"==typeof(r=n.constructor)&&!(r instanceof r))return!1;var a;return t(n,function(t,e){a=e}),void 0===a||o.call(n,a)}var i="[object Object]",r=Object.prototype,o=r.hasOwnProperty,s=r.toString;return n}.apply(e,i))===undefined||(t.exports=r)},function(t,e,n){var i,r;i=[n(214),n(155)],(r=function(t,e){function n(n,i){return t(n,i,e)}return n}.apply(e,i))===undefined||(t.exports=r)},function(t,e,n){var i,r;i=[n(145),n(149)],(r=function(t,e){function n(n){return e(n)&&t(n.length)&&S[L.call(n)]||!1}var i="[object Arguments]",r="[object Array]",o="[object Boolean]",s="[object Date]",a="[object Error]",u="[object Function]",c="[object Map]",l="[object Number]",h="[object Object]",f="[object RegExp]",d="[object Set]",p="[object String]",m="[object WeakMap]",g="[object ArrayBuffer]",v="[object Float64Array]",_="[object Int8Array]",y="[object Int16Array]",b="[object Int32Array]",x="[object Uint8Array]",w="[object Uint8ClampedArray]",k="[object Uint16Array]",E="[object Uint32Array]",S={};S["[object Float32Array]"]=S[v]=S[_]=S[y]=S[b]=S[x]=S[w]=S[k]=S[E]=!0,S[i]=S[r]=S[g]=S[o]=S[s]=S[a]=S[u]=S[c]=S[l]=S[h]=S[f]=S[d]=S[p]=S[m]=!1;var L=Object.prototype.toString;return n}.apply(e,i))===undefined||(t.exports=r)},function(t,e,n){var i,r;i=[n(143),n(155)],(r=function(t,e){function n(n){return t(n,e(n))}return n}.apply(e,i))===undefined||(t.exports=r)},function(t,e,n){var i,r;i=[n(223),n(159)],(r=function(t,e){function n(n,i,r){return i="function"==typeof i&&e(i,r,1),t(n,!0,i)}return n}.apply(e,i))===undefined||(t.exports=r)},function(t,e,n){var i,r;i=[n(204),n(212),n(143),n(213),n(227),n(224),n(228),n(153),n(150),n(144)],(r=function(t,e,n,i,r,o,s,a,u,c){function l(f,d,p,m,v,_,b){var x;if(p&&(x=v?p(f,m,v):p(f)),void 0!==x)return x;if(!u(f))return f;var w=a(f);if(w){if(x=r(f),!d)return t(f,x)}else{var k=N.call(f),E=k==g;if(k!=y&&k!=h&&(!E||v))return D[k]?o(f,k,d):v?f:{};if(x=s(E?{}:f),!d)return n(f,x,c(f))}_||(_=[]),b||(b=[]);for(var S=_.length;S--;)if(_[S]==f)return b[S];return _.push(f),b.push(x),(w?e:i)(f,function(t,e){x[e]=l(t,d,p,e,f,_,b)}),x}var h="[object Arguments]",f="[object Array]",d="[object Boolean]",p="[object Date]",m="[object Error]",g="[object Function]",v="[object Map]",_="[object Number]",y="[object Object]",b="[object RegExp]",x="[object Set]",w="[object String]",k="[object WeakMap]",E="[object ArrayBuffer]",S="[object Float32Array]",L="[object Float64Array]",T="[object Int8Array]",C="[object Int16Array]",M="[object Int32Array]",I="[object Uint8Array]",A="[object Uint8ClampedArray]",P="[object Uint16Array]",O="[object Uint32Array]",D={};D[h]=D[f]=D[E]=D[d]=D[p]=D[S]=D[L]=D[T]=D[C]=D[M]=D[_]=D[y]=D[b]=D[w]=D[I]=D[A]=D[P]=D[O]=!0,D[m]=D[g]=D[v]=D[x]=D[k]=!1;var N=Object.prototype.toString;return l}.apply(e,i))===undefined||(t.exports=r)},function(t,e,n){var i,r;i=[n(225)],(r=function(t){function e(e,_,y){var b=e.constructor;switch(_){case a:return t(e);case n:case i:return new b(+e);case u:case c:case l:case h:case f:case d:case p:case m:case g:var x=e.buffer;return new b(y?t(x):x,e.byteOffset,e.length);case r:case s:return new b(e);case o:var w=new b(e.source,v.exec(e));w.lastIndex=e.lastIndex}return w}var n="[object Boolean]",i="[object Date]",r="[object Number]",o="[object RegExp]",s="[object String]",a="[object ArrayBuffer]",u="[object Float32Array]",c="[object Float64Array]",l="[object Int8Array]",h="[object Int16Array]",f="[object Int32Array]",d="[object Uint8Array]",p="[object Uint8ClampedArray]",m="[object Uint16Array]",g="[object Uint32Array]",v=/\w*$/;return e}.apply(e,i))===undefined||(t.exports=r)},function(t,e,n){var i,r;i=[n(226),n(146),n(157)],(r=function(t,e,n){function i(t){return o.call(t,0)}var r=e(r=n.ArrayBuffer)&&r,o=e(o=r&&new r(0).slice)&&o,s=Math.floor,a=e(a=n.Uint8Array)&&a,u=function(){try{var t=e(t=n.Float64Array)&&t,i=new t(new r(10),0,1)&&t}catch(o){}return i}(),c=u?u.BYTES_PER_ELEMENT:0;return o||(i=r&&a?function(t){var e=t.byteLength,n=u?s(e/c):0,i=n*c,o=new r(e);if(n){var l=new u(o,0,n);l.set(new u(t,0,n))}return e!=i&&(l=new a(o,i)).set(new a(t,i)),o}:t(null)),i}.apply(e,i))===undefined||(t.exports=r)},function(t,e){var n,i;n=[],(i=function(){function t(t){return function(){return t}}return t}.apply(e,n))===undefined||(t.exports=i)},function(t,e){var n,i;n=[],(i=function(){function t(t){var n=t.length,i=new t.constructor(n);return n&&"string"==typeof t[0]&&e.call(t,"index")&&(i.index=t.index,i.input=t.input),i}var e=Object.prototype.hasOwnProperty;return t}.apply(e,n))===undefined||(t.exports=i)},function(t,e){var n,i;n=[],(i=function(){function t(t){var e=t.constructor;return"function"==typeof e&&e instanceof e||(e=Object),new e}return t}.apply(e,n))===undefined||(t.exports=i)},function(t,e,n){"use strict";var i=n(230);t.exports={mixinName:"Textable",initializeTextable:function(){this.el.classList.add("st-block--textable")},focusAtEnd:function(){this.focus(),this.selectText()},selectText:function(){var t=document.createRange();this._scribe.allowsBlockElements()?t.setStartAfter(this._scribe.el.firstChild,0):t.selectNodeContents(this._scribe.el),t.collapse(!1);var e=new this._scribe.api.Selection;e.selection.removeAllRanges(),e.selection.addRange(t)},getScribeInnerContent:function(){var t="";if(""!==this._scribe.getTextContent()){var e=document.createElement("div");return e.innerHTML=this.getTextBlockHTML(),(t=e.children&&Array.prototype.slice.call(e.children).reduce(function(t,e){return t+e.innerHTML},"")||e.innerHTML).replace(/^[\s\uFEFF\xA0]+|$/g,"")}return t},getCaretPositionAtEnd:function(){return this.selectText(),i(this._scribe.el)},appendContent:function(t,e){e=e||{};var n=this.getCaretPositionAtEnd(),r=this.getScribeInnerContent();""!==r&&(t=r+t),""===t&&(t="<br>"),this.setTextBlockHTML(t),this.focus(),e.keepCaretPosition&&0!==n.start&&0!==n.end&&i(this._scribe.el,{start:n.start,end:n.end})}}},function(t,e,n){function i(t,e){if(1==arguments.length){if(!s.rangeCount)return;var n={},i=(h=s.getRangeAt(0)).cloneRange();return i.selectNodeContents(t),i.setEnd(h.endContainer,h.endOffset),n.end=i.toString().length,i.setStart(h.startContainer,h.startOffset),n.start=n.end-i.toString().length,n.atStart=0===i.startOffset,n}for(var a,u,c=e.end&&e.end!==e.start,l=0,h=document.createRange(),f=o(t).select(Node.TEXT_NODE).revisit(!1),d=e.start>t.textContent.length?t.textContent.length:e.start,p=e.end>t.textContent.length?t.textContent.length:e.end,m=e.atStart;a=f.next();){var g=l;l+=a.textContent.length;if(!u&&(m?l>d:l>=d)&&(u=!0,h.setStart(a,d-g),!c)){h.collapse(!0),r(t,h);break}if(c&&l>=p){h.setEnd(a,p-g),r(t,h);break}}}function r(t,e){t.focus(),s.removeAllRanges(),s.addRange(e)}var o=n(231),s=window.getSelection();t.exports=i},function(t,e,n){function i(t,e){if(!(this instanceof i))return new i(t,e);if(this.node=this.start=this.peeked=t,this.root=e,this.closingTag=!1,this._revisit=!0,this._selects=[],this._rejects=[],t&&this.higher(t))throw new Error("root must be a parent or ancestor to node")}function r(t,e){var n="nextSibling"==t;return function(i,r,s){i=this.compile(i),r=r&&r>0?r:1;for(var a=this.node,u=this.closingTag,c=this._revisit;a;){if(o(n,u)&&a[e])a=a[e],u=!n;else if(1==a.nodeType&&!a[e]&&o(n,u)){if(u=n,!c)continue}else if(a[t])a=a[t],u=!n;else if(a=a.parentNode,u=n,!c)continue;if(!a||this.higher(a,this.root))break;if(i(a)&&this.selects(a,s)&&this.rejects(a,s)){if(--r)continue;return s||(this.node=a),this.closingTag=u,a}}return null}}var o,s;try{o=n(232)}catch(a){o=n(232)}try{s=n(233)}catch(a){s=n(233)}t.exports=i,i.prototype.reset=function(t){return this.node=t||this.start,this},i.prototype.revisit=function(t){return this._revisit=undefined==t||t,this},i.prototype.opening=function(){return 1==this.node.nodeType&&(this.closingTag=!1),this},i.prototype.atOpening=function(){return!this.closingTag},i.prototype.closing=function(){return 1==this.node.nodeType&&(this.closingTag=!0),this},i.prototype.atClosing=function(){return this.closingTag},i.prototype.next=r("nextSibling","firstChild"),i.prototype.previous=i.prototype.prev=r("previousSibling","lastChild"),i.prototype.select=function(t){return t=this.compile(t),this._selects.push(t),this},i.prototype.selects=function(t,e){var n=this._selects,i=n.length;if(!i)return!0;for(var r=0;r<i;r++)if(n[r].call(this,t,e))return!0;return!1},i.prototype.reject=function(t){return t=this.compile(t),this._rejects.push(t),this},i.prototype.rejects=function(t,e){var n=this._rejects,i=n.length;if(!i)return!0;for(var r=0;r<i;r++)if(n[r].call(this,t,e))return!1;return!0},i.prototype.higher=function(t){var e=this.root;if(!e)return!1;for(t=t.parentNode;t&&t!=e;)t=t.parentNode;return t!=e},i.prototype.compile=function(t){switch(typeof t){case"number":return function(e){return t==e.nodeType};case"string":return new Function("node","return "+s(t,"node."));case"function":return t;default:return function(){return!0}}},i.prototype.peak=i.prototype.peek=function(t,e){return 1==arguments.length&&(e=t,t=!0),(e=undefined==e?1:e)?e>0?this.next(t,e,!0):this.prev(t,Math.abs(e),!0):this.node},i.prototype.use=function(t){return t(this),this}},function(t){function e(t,e){return!t!=!e}t.exports=e},function(t){function e(t){return t.replace(/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^/]+)\//g,"").replace(o,"").match(/[a-zA-Z_]\w*/g)||[]}function n(t,e,n){var i=/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^/]+)\/|[a-zA-Z_]\w*/g;return t.replace(i,function(t){return"("==t[t.length-1]?n(t):~e.indexOf(t)?n(t):t})}function i(t){for(var e=[],n=0;n<t.length;n++)~e.indexOf(t[n])||e.push(t[n]);return e}function r(t){return function(e){return t+e}}var o=/\b(Array|Date|Object|Math|JSON)\b/g;t.exports=function(t,o){var s=i(e(t));return o&&"string"==typeof o&&(o=r(o)),o?n(t,s,o):s}},function(t,e,n){"use strict";var i=n(2)["default"],r=["<div class='st-block-positioner__inner'>","<span class='st-block-positioner__selected-value'></span>","<select class='st-block-positioner__select'></select>","</div>"].join("\n"),o=function(t,e){this.mediator=e,this.block=t,this._ensureElement(),this._bindFunctions(),this.initialize()};i(o.prototype,n(235),n(236),{total_blocks:0,bound:["onBlockCountChange","onSelectChange","toggle","show","hide"],className:"st-block-positioner",visibleClass:"active",initialize:function(){this.el.insertAdjacentHTML("beforeend",r),this.select=this.$(".st-block-positioner__select")[0],this.select.addEventListener("change",this.onSelectChange),this.mediator.on("block:countUpdate",this.onBlockCountChange)},onBlockCountChange:function(t){t!==this.total_blocks&&(this.total_blocks=t,this.renderPositionList())},onSelectChange:function(){var t=this.select.value;0!==t&&(this.mediator.trigger("block:changePosition",this.block,t,1===t?"before":"after"),this.toggle())},renderPositionList:function(){for(var t="<option value='0'>"+i18n.t("general:position")+"</option>",e=1;e<=this.total_blocks;e++)t+="<option value="+e+">"+e+"</option>";this.select.innerHTML=t},toggle:function(){this.select.value=0,this.el.classList.toggle(this.visibleClass)},show:function(){this.el.classList.add(this.visibleClass)},hide:function(){this.el.classList.remove(this.visibleClass)}}),t.exports=o},function(t){"use strict";t.exports={bound:[],_bindFunctions:function(){this.bound.forEach(function(t){this[t]=this[t].bind(this)},this)}}},function(t,e,n){"use strict";var i=n(2)["default"],r=n(34),o=n(69);t.exports={tagName:"div",className:"sir-trevor__view",attributes:{},$:function(t){return this.el.querySelectorAll(t)},render:function(){return this},destroy:function(){r.isUndefined(this.stopListening)||this.stopListening(),o.remove(this.el)},_ensureElement:function(){if(this.el)this._setElement(this.el);else{var t=i({},r.result(this,"attributes"));this.id&&(t.id=this.id),this.className&&(t["class"]=this.className);var e=o.createElement(this.tagName,t);this._setElement(e)}},_setElement:function(t){return this.el=t,this}}},function(t,e,n){"use strict";var i=n(2)["default"],r=n(133),o=n(75),s=n(69),a=n(68),u=function(t,e){this.block=t,this.blockID=this.block.getAttribute("id"),this.mediator=e,this._ensureElement(),
this._bindFunctions(),this.initialize()};i(u.prototype,n(235),n(236),{bound:["onMouseDown","onDragStart","onDragEnd","onDrop"],className:"st-block-ui-btn__reorder",tagName:"a",attributes:function(){return{html:'<svg role="img" class="st-icon">\n                 <use xlink:href="'+a.defaults.iconUrl+'#move"/>\n               </svg>',draggable:"true","data-icon":"move"}},initialize:function(){this.el.addEventListener("mousedown",this.onMouseDown),this.el.addEventListener("dragstart",this.onDragStart),this.el.addEventListener("dragend",this.onDragEnd),r.dropArea(this.block),this.block.addEventListener("drop",this.onDrop)},blockId:function(){return this.block.getAttribute("id")},onMouseDown:function(){o.trigger("block:reorder:down")},onDrop:function(t){t.preventDefault();var e=this.block,n=t.dataTransfer.getData("text/plain"),i=document.querySelector("#"+n);e.id!==n&&s.insertAfter(i,e),this.mediator.trigger("block:rerender",n),o.trigger("block:reorder:dropped",n)},onDragStart:function(t){var e=this.block;this.dragEl=e.cloneNode(!0),this.dragEl.classList.add("st-drag-element"),this.dragEl.style.top=e.offsetTop+"px",this.dragEl.style.left=e.offsetLeft+"px",e.parentNode.appendChild(this.dragEl),t.dataTransfer.setDragImage(this.dragEl,0,0),t.dataTransfer.setData("text/plain",this.blockId()),this.mediator.trigger("block-controls:hide"),o.trigger("block:reorder:dragstart"),e.classList.add("st-block--dragging")},onDragEnd:function(){o.trigger("block:reorder:dragend"),this.block.classList.remove("st-block--dragging"),this.dragEl.parentNode.removeChild(this.dragEl)},render:function(){return this}}),t.exports=u},function(t,e,n){"use strict";var i=n(2)["default"],r=n(68),o=function(){this._ensureElement(),this._bindFunctions()};i(o.prototype,n(235),n(236),{tagName:"a",className:"st-block-ui-btn__delete",attributes:{html:function(){return'<svg role="img" class="st-icon">\n                   <use xlink:href="'+r.defaults.iconUrl+'#cross"/>\n                 </svg>'},"data-icon":"close"}}),t.exports=o},function(t,e,n){"use strict";var i=n(34),r=n(29),o=function(t){var e=t.getAttribute("data-st-name")||t.getAttribute("name");return e||(e="Field"),r.capitalize(e)};t.exports={errors:[],valid:function(){return this.performValidations(),0===this.errors.length},performValidations:function(){this.resetErrors();var t=this.$(".st-required");Array.prototype.forEach.call(t,function(t){this.validateField(t)}.bind(this)),this.validations.forEach(this.runValidator,this),this.el.classList.toggle("st-block--with-errors",this.errors.length>0)},validations:[],validateField:function(t){0===(t.getAttribute("contenteditable")?t.textContent:t.value).length&&this.setError(t,i18n.t("errors:block_empty",{name:o(t)}))},runValidator:function(t){i.isUndefined(this[t])||this[t].call(this)},setError:function(t,e){var n=this.addMessage(e,"st-msg--error");t.classList.add("st-error"),this.errors.push({field:t,reason:e,msg:n})},resetErrors:function(){this.errors.forEach(function(t){t.field.classList.remove("st-error"),t.msg.remove()}),this.messages.classList.remove("st-block__messages--is-visible"),this.errors=[]}}},function(t,e,n){"use strict";var i=n(2)["default"],r=n(34),o=n(29),s=n(75);t.exports={blockStorage:{},createStore:function(t){this.blockStorage={type:o.underscored(this.type),data:t||{}}},save:function(){var t=this._serializeData();r.isEmpty(t)||this.setData(t)},getData:function(){return this.save(),this.blockStorage},getBlockData:function(){return this.save(),this.blockStorage.data},_getData:function(){return this.blockStorage.data},setData:function(t){o.log("Setting data for block "+this.blockID),i(this.blockStorage.data,t||{})},setAndLoadData:function(t){this.setData(t),this.beforeLoadingData()},_serializeData:function(){},loadData:function(){},beforeLoadingData:function(){o.log("loadData for "+this.blockID),s.trigger("editor/block/loadData"),this.loadData(this._getData())},_loadData:function(){o.log("_loadData is deprecated and will be removed in the future. Please use beforeLoadingData instead."),this.beforeLoadingData()},checkAndLoadData:function(){r.isEmpty(this._getData())||this.beforeLoadingData()}}},function(t,e,n){"use strict";var i=n(2)["default"],r=n(30)["default"],o=n(34),s=n(29),a=n(68),u=n(75),c=n(242),l=n(69),h=["convertToMarkdown","convertFromMarkdown","formatBar"],f=function(t){this.options=t.options,this.blockOptions=h.reduce(function(e,n){return e[n]=t.options[n],e},{}),this.instance_scope=t.ID,this.mediator=t.mediator,this.wrapper=t.wrapper,this.blocks=[],this.blockCounts={},this.blockTypes=[],this._setBlocksTypes(),this._setRequired(),this._bindMediatedEvents(),this.initialize()};i(f.prototype,n(235),n(268),n(73),{eventNamespace:"block",mediatedEvents:{create:"createBlock",remove:"removeBlock",rerender:"rerenderBlock",replace:"replaceBlock",focusPrevious:"focusPreviousBlock",focusNext:"focusNextBlock"},initialize:function(){},createBlock:function(t,e,n){if(t=s.classify(t),this.canCreateBlock(t)){var i=new c[t](e,this.instance_scope,this.mediator,this.blockOptions);this.blocks.push(i),this._incrementBlockTypeCount(t),this.renderBlock(i,n),this.triggerBlockCountUpdate(),this.mediator.trigger("block:limitReached",this.blockLimitReached()),u.trigger(e?"block:create:existing":"block:create:new",i),s.log("Block created of type "+t)}},removeBlock:function(t,e){e=i({transposeContent:!1,focusOnPrevious:!1},e);var n=this.findBlockById(t),r=s.classify(n.type),o=this.getPreviousBlock(n),a=this.getNextBlock(n);if(e.transposeContent&&n.textable){if(!o&&1===this.blocks.length)return;if(o&&o.textable)o.appendContent(n.getScribeInnerContent(),{keepCaretPosition:!0});else{if(""!==n.getScribeInnerContent())return;o?o.focusAtEnd():a&&a.focus()}}this.mediator.trigger("block-controls:reset"),this.blocks=this.blocks.filter(function(t){return t.blockID!==n.blockID}),n.remove(),e.focusOnPrevious&&o&&o.focusAtEnd(),this._decrementBlockTypeCount(r),this.triggerBlockCountUpdate(),this.mediator.trigger("block:limitReached",this.blockLimitReached()),u.trigger("block:remove",t)},replaceBlock:function(t,e,n){var i=this.findBlockById(t.id);this.createBlock(e,n||null,t),this.removeBlock(t.id),i.remove()},renderBlock:function(t,e){e?l.insertAfter(t.render().el,e):this.wrapper.appendChild(t.render().el),t.trigger("onRender")},rerenderBlock:function(t){var e=this.findBlockById(t);o.isUndefined(e)||e.isEmpty()||!e.drop_options.re_render_on_reorder||e.beforeLoadingData()},getPreviousBlock:function(t){var e=this.getBlockPosition(t.el);if(!(e<1)){var n=this.wrapper.querySelectorAll(".st-block")[e-1];return this.findBlockById(n.getAttribute("id"))}},getNextBlock:function(t){var e=this.getBlockPosition(t.el);if(!(e<0||e>=this.blocks.length-1))return this.findBlockById(this.wrapper.querySelectorAll(".st-block")[e+1].getAttribute("id"))},getBlockPosition:function(t){return Array.prototype.indexOf.call(this.wrapper.querySelectorAll(".st-block"),t)},focusPreviousBlock:function(t){var e=this.findBlockById(t);if(e.textable){var n=this.getPreviousBlock(e);n&&n.textable&&n.focusAtEnd()}},focusNextBlock:function(t){var e=this.findBlockById(t);if(e&&e.textable){var n=this.getNextBlock(e);n&&n.textable&&n.focus()}},triggerBlockCountUpdate:function(){this.mediator.trigger("block:countUpdate",this.blocks.length)},canCreateBlock:function(t){return this.blockLimitReached()?(s.log("Cannot add any more blocks. Limit reached."),!1):this.isBlockTypeAvailable(t)?!!this.canAddBlockType(t)||(s.log("Block Limit reached for type "+t),!1):(s.log("Block type not available "+t),!1)},validateBlockTypesExist:function(t){if(a.skipValidation||!t)return!1;(this.required||[]).forEach(function(t){if(this.isBlockTypeAvailable(t))if(0===this._getBlockTypeCount(t))s.log("Failed validation on required block type "+t),this.mediator.trigger("errors:add",{text:i18n.t("errors:type_missing",{type:t})});else{if(this.getBlocksByType(t).filter(function(t){return!t.isEmpty()}).length>0)return!1;this.mediator.trigger("errors:add",{text:i18n.t("errors:required_type_empty",{type:t})}),s.log("A required block type "+t+" is empty")}},this)},findBlockById:function(t){return this.blocks.find(function(e){return e.blockID===t})},getBlocksByType:function(t){return this.blocks.filter(function(e){return s.classify(e.type)===t})},getBlocksByIDs:function(t){return this.blocks.filter(function(e){return t.includes(e.blockID)})},blockLimitReached:function(){return 0!==this.options.blockLimit&&this.blocks.length>=this.options.blockLimit},isBlockTypeAvailable:function(t){return this.blockTypes.includes(t)},canAddBlockType:function(t){var e=this._getBlockTypeLimit(t);return!(0!==e&&this._getBlockTypeCount(t)>=e)},_setBlocksTypes:function(){this.blockTypes=this.options.blockTypes||r(c)},_setRequired:function(){this.required=!1,Array.isArray(this.options.required)&&!o.isEmpty(this.options.required)&&(this.required=this.options.required)},_incrementBlockTypeCount:function(t){this.blockCounts[t]=o.isUndefined(this.blockCounts[t])?1:this.blockCounts[t]+1},_decrementBlockTypeCount:function(t){this.blockCounts[t]=o.isUndefined(this.blockCounts[t])?1:this.blockCounts[t]-1},_getBlockTypeCount:function(t){return o.isUndefined(this.blockCounts[t])?0:this.blockCounts[t]},_blockLimitReached:function(){return 0!==this.options.blockLimit&&this.blocks.length>=this.options.blockLimit},_getBlockTypeLimit:function(t){return this.isBlockTypeAvailable(t)?parseInt(o.isUndefined(this.options.blockTypeLimits[t])?0:this.options.blockTypeLimits[t],10):0}}),t.exports=f},function(t,e,n){"use strict";t.exports={Text:n(243),Quote:n(261),Image:n(262),Heading:n(263),List:n(264),Tweet:n(266),Video:n(267)}},function(t,e,n){"use strict";var i=n(244),r=n(253),o=n(254),s=n(258),a=n(259),u=n(260);t.exports=i.extend({type:"text",editorHTML:'<div class="st-text-block" contenteditable="true"></div>',icon_name:"text",textable:!0,toolbarEnabled:!1,configureScribe:function(t){t.use(new o(this)),t.use(new s(this)),t.use(new a(this)),t.use(new u(this)),t.on("content-changed",this.toggleEmptyClass.bind(this))},scribeOptions:{allowBlockElements:!0,tags:{p:!0}},loadData:function(t){this.options.convertFromMarkdown&&"html"!==t.format?this.setTextBlockHTML(r(t.text,this.type)):this.setTextBlockHTML(t.text)},onBlockRender:function(){this.focus(),this.toggleEmptyClass()},toggleEmptyClass:function(){this.el.classList.toggle("st-block--empty",this.isEmpty())},isEmpty:function(){return""===this._scribe.getTextContent()}})},function(t,e,n){"use strict";var i=n(70)["default"],r=n(2)["default"],o=n(34),s=n(138),a=n(68),u=n(29),c=n(69),l=n(131),h=n(128),f=n(245),d=n(237),p=n(238),m=n(234),g=n(75),v=n(251),_=n(252),y=function(){f.apply(this,arguments)};y.prototype=i(f.prototype),y.prototype.constructor=y,r(y.prototype,f.fn,n(239),{bound:["_handleContentPaste","_onFocus","_onBlur","onDrop","onDeleteClick","clearInsertedStyles","getSelectionForFormatter","onBlockRender","onDeleteConfirm","onPositionerClick"],className:"st-block",attributes:function(){return r(f.fn.attributes.call(this))},icon_name:"default",validationFailMsg:function(){return i18n.t("errors:validation_fail",{type:o.isFunction(this.title)?this.title():this.title})},editorHTML:'<div class="st-block__editor"></div>',toolbarEnabled:!0,availableMixins:["droppable","pastable","uploadable","fetchable","ajaxable","controllable","multi_editable","textable"],droppable:!1,pastable:!1,uploadable:!1,fetchable:!1,ajaxable:!1,multi_editable:!1,textable:!1,drop_options:{},paste_options:{},upload_options:{},formattable:!0,supressKeyListeners:!1,_previousSelection:"",initialize:function(){},toMarkdown:function(t){return t},toHTML:function(t){return t},withMixin:function(t){if(o.isObject(t)){var e="initialize"+t.mixinName;o.isUndefined(this[e])&&(r(this,t),this[e]())}},render:function(){if(this.beforeBlockRender(),this._setBlockInner(),this.editor=this.inner.children[0],this.mixinsRequireInputs=!1,this.availableMixins.forEach(function(t){if(this[t]){var e=h[u.classify(t)];!o.isUndefined(e.requireInputs)&&e.requireInputs&&(this.mixinsRequireInputs=!0)}},this),this.mixinsRequireInputs){var t=document.createElement("div");t.classList.add("st-block__inputs"),this.inner.appendChild(t),this.inputs=t}return this.hasTextBlock()&&this._initTextBlocks(),this.availableMixins.forEach(function(t){this[t]&&this.withMixin(h[u.classify(t)])},this),this.formattable&&this._initFormatting(),this._blockPrepare(),this},remove:function(){this.ajaxable&&this.resolveAllInQueue(),c.remove(this.el)},loading:function(){o.isUndefined(this.spinner)||this.ready(),this.spinner=new v(a.defaults.spinner),this.spinner.spin(this.el),this.el.classList.add("st--is-loading")},ready:function(){this.el.classList.remove("st--is-loading"),o.isUndefined(this.spinner)||(this.spinner.stop(),delete this.spinner)},_serializeData:function(){u.log("toData for "+this.blockID);var t={};this.hasTextBlock()&&(t.text=this.getTextBlockHTML(),t.format="html");var e=['input:not([class="st-paste-block"])','textarea:not([class="st-paste-block"])','select:not([class="st-paste-block"])','button:not([class="st-paste-block"])'].join(",");return this.$(e).length>0&&Array.prototype.forEach.call(this.$("input, textarea, select, button"),function(e){var n=e.getAttribute("data-name")||e.getAttribute("name");if(n)if("number"===e.getAttribute("type"))t[n]=parseInt(e.value);else if("checkbox"===e.getAttribute("type")){var i="";e.getAttribute("data-toggle")?(i="off",!0===e.checked&&(i="on")):!0===e.checked&&(i=e.value),t[n]=i}else"radio"===e.getAttribute("type")?!0===e.checked&&(t[n]=e.value):t[n]=e.value}),t},focus:function(){Array.prototype.forEach.call(this.getTextBlock(),function(t){t.focus()})},focusAtEnd:function(){this.focus()},blur:function(){Array.prototype.forEach.call(this.getTextBlock(),function(t){t.blur()})},onFocus:function(){var t=this;Array.prototype.forEach.call(this.getTextBlock(),function(e){e.addEventListener("focus",t._onFocus)})},onBlur:function(){var t=this;Array.prototype.forEach.call(this.getTextBlock(),function(e){e.addEventListener("blur",t._onBlur)})},_onFocus:function(){this.trigger("blockFocus",this.el)},_onBlur:function(){},onBlockRender:function(){this.focus()},onDrop:function(){},onDeleteConfirm:function(t){t.preventDefault(),this.mediator.trigger("block:remove",this.blockID,{focusOnPrevious:!0})},addDeleteControls:function(){var t=this,e=function(e){e.preventDefault(),t.deleteEl.classList.remove("active")};this.ui.insertAdjacentHTML("beforeend",_()),l.delegate(this.el,".js-st-block-confirm-delete","click",this.onDeleteConfirm),l.delegate(this.el,".js-st-block-deny-delete","click",e)},onDeleteClick:function(t){t.preventDefault(),t.stopPropagation(),this.isEmpty()?this.onDeleteConfirm.call(this,new CustomEvent("click")):(this.deleteEl=this.el.querySelector(".st-block__ui-delete-controls"),this.deleteEl.classList.toggle("active"))},onPositionerClick:function(t){t.preventDefault(),this.positioner.toggle()},beforeLoadingData:function(){this.loading(),this.mixinsRequireInputs&&(c.show(this.editor),c.hide(this.inputs)),f.fn.beforeLoadingData.call(this),this.ready()},execTextBlockCommand:function(t){if(o.isUndefined(this._scribe))throw"No Scribe instance found to send a command to";return s.execTextBlockCommand(this._scribe,t)},queryTextBlockCommandState:function(t){if(o.isUndefined(this._scribe))throw"No Scribe instance found to query command";return s.queryTextBlockCommandState(this._scribe,t)},_handleContentPaste:function(t){setTimeout(this.onContentPasted.bind(this,t,t.currentTarget),0)},_getBlockClass:function(){return"st-block--"+this.className},_initUIComponents:function(){this.addDeleteControls(),this.positioner=new m(this.el,this.mediator),this._withUIComponent(this.positioner,".st-block-ui-btn__reorder",this.onPositionerClick),this._withUIComponent(new d(this.el,this.mediator)),this._withUIComponent(new p,".st-block-ui-btn__delete",this.onDeleteClick),this.onFocus(),this.onBlur()},_initFormatting:function(){var t=this;this.options.formatBar&&this.options.formatBar.commands.forEach(function(e){o.isUndefined(e.keyCode)||l.delegate(t.el,".st-text-block","keydown",function(n){(n.metaKey||n.ctrlKey)&&n.keyCode===e.keyCode&&(n.preventDefault(),t.execTextBlockCommand(e.cmd))})})},_initTextBlocks:function(){var t=this;Array.prototype.forEach.call(this.getTextBlock(),function(e){e.addEventListener("keyup",t.getSelectionForFormatter),e.addEventListener("mouseup",t.getSelectionForFormatter),e.addEventListener("DOMNodeInserted",t.clearInsertedStyles)});var e=this.getTextBlock()[0];if(!o.isUndefined(e)&&o.isUndefined(this._scribe)){var n=o.isFunction(this.configureScribe)?this.configureScribe.bind(this):null;this._scribe=s.initScribeInstance(e,this.scribeOptions,n)}},getSelectionForFormatter:function(){var t=this;setTimeout(function(){var e="formatter:"+(""===window.getSelection().toString().trim()?"hide":"position");t.mediator.trigger(e,t),g.trigger(e,t)},1)},clearInsertedStyles:function(t){var e=t.target;o.isUndefined(e.tagName)&&(e=e.parentNode),e.removeAttribute("style")},hasTextBlock:function(){return this.getTextBlock().length>0},getTextBlock:function(){return o.isUndefined(this.text_block)&&(this.text_block=this.$(".st-text-block")),this.text_block},getTextBlockHTML:function(){return this._scribe.getContent()},setTextBlockHTML:function(t){var e=this._scribe.setContent(t),n=this._scribe.node.firstDeepestChild(this._scribe.el);for("#text"===n.nodeName&&(n.textContent=u.leftTrim(n.textContent));this._scribe.el.firstChild&&""===this._scribe.el.firstChild.textContent;)this._scribe.el.removeChild(this._scribe.el.firstChild);for(;this._scribe.el.lastChild&&"BR"===this._scribe.el.lastChild.nodeName;)this._scribe.el.removeChild(this._scribe.el.lastChild);return e},isEmpty:function(){return o.isEmpty(this.getBlockData())}}),y.extend=n(250),t.exports=y},function(t,e,n){"use strict";var i=n(2)["default"],r=n(34),o=n(29),s=n(69),a=n(131),u=n(237),c=n(246),l=function(t,e,n,i){this.createStore(t),this.blockID=r.uniqueId("st-block-"),this.instanceID=e,this.mediator=n,this.options=i||{},this._ensureElement(),this._bindFunctions(),this.initialize.apply(this,arguments)};i(l.prototype,n(235),n(73),n(236),n(240),{focus:function(){},valid:function(){return!0},className:"st-block",block_template:c,attributes:function(){return{id:this.blockID,"data-type":this.type,"data-instance":this.instanceID}},title:function(){return i18n.t("blocks:"+this.type+":title")||o.titleize(this.type.replace(/[\W_]/g," "))},blockCSSClass:function(){return this.blockCSSClass=o.toSlug(this.type),this.blockCSSClass},type:"","class":function(){return o.classify(this.type)},editorHTML:"",initialize:function(){},onBlockRender:function(){},beforeBlockRender:function(){},_setBlockInner:function(){var t=r.result(this,"editorHTML");this.el.insertAdjacentHTML("beforeend",this.block_template(t)),this.inner=this.el.querySelector(".st-block__inner")},render:function(){return this.beforeBlockRender(),this._setBlockInner(),this._blockPrepare(),this},_blockPrepare:function(){this._initUI(),this._initMessages(),this.checkAndLoadData(),this.el.classList.add("st-item-ready"),this.on("onRender",this.onBlockRender),this.save()},_withUIComponent:function(t,e,n){this.ui.appendChild(t.render().el),e&&n&&a.delegate(this.ui,e,"click",n)},_initUI:function(){var t=s.createElement("div",{"class":"st-block__ui"});this.el.appendChild(t),this.ui=t,this._initUIComponents()},_initMessages:function(){var t=s.createElement("div",{"class":"st-block__messages"});this.inner.insertBefore(t,this.inner.firstChild),this.messages=t},addMessage:function(t,e){return t=s.createElement("span",{html:t,"class":"st-msg "+e}),this.messages.appendChild(t),this.messages.classList.add("st-block__messages--is-visible"),t},resetMessages:function(){this.messages.innerHTML="",this.messages.classList.remove("st-block__messages--is-visible")},_initUIComponents:function(){this._withUIComponent(new u(this.el))}}),l.fn=l.prototype,l.extend=n(250),t.exports=l},function(t,e,n){"use strict";var i=n(247),r=n(248),o=n(249);t.exports=function(t){return"\n    <div class='st-block__inner'>\n      "+t+"\n    </div>\n    "+o()+"\n    "+i()+"\n    "+r()+"\n  "}},function(t,e,n){"use strict";var i=n(68);t.exports=function(){return'\n    <div class="st-block-addition-top">\n      <div class="st-block-addition-top__button" type="button"></div>\n      <div class="st-block-addition-top__icon">\n        <svg role="img" class="st-icon">\n          <use xlink:href="'+i.defaults.iconUrl+'#add-block"/>\n        </svg>\n      </div>\n    </div>\n  '}},function(t,e,n){"use strict";var i=n(68);t.exports=function(){return'\n    <button class="st-block-addition" type="button">\n      <span class="st-block-addition__button">\n        <svg role="img" class="st-icon">\n          <use xlink:href="'+i.defaults.iconUrl+'#plus"/>\n        </svg>\n      </span>\n    </button>\n  '}},function(t,e,n){"use strict";var i=n(68);t.exports=function(){return'\n    <button class="st-block-replacer" type="button">\n      <span class="st-block-replacer__button">\n        <svg role="img" class="st-icon">\n          <use xlink:href="'+i.defaults.iconUrl+'#add-block"/>\n        </svg>\n      </span>\n    </button>\n  '}},function(t,e,n){"use strict";var i=n(2)["default"];t.exports=function(t,e){var n,r=this;n=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return r.apply(this,arguments)},i(n,r,e);var o=function(){this.constructor=n};return o.prototype=r.prototype,n.prototype=new o,t&&i(n.prototype,t),n.__super__=r.prototype,n}},function(t,e,n){var i,r;!function(o,s){"object"==typeof t&&t.exports?t.exports=s():(r="function"==typeof(i=s)?i.call(e,n,e,t):i)===undefined||(t.exports=r)}(0,function(){"use strict";function t(t,e){var n,i=document.createElement(t||"div");for(n in e)i[n]=e[n];return i}function e(t){for(var e=1,n=arguments.length;e<n;e++)t.appendChild(arguments[e]);return t}function n(t,e,n,i){var r=["opacity",e,~~(100*t),n,i].join("-"),o=.01+n/i*100,s=Math.max(1-(1-t)/e*(100-o),t),a=c.substring(0,c.indexOf("Animation")).toLowerCase(),u=a&&"-"+a+"-"||"";return f[r]||(l.insertRule("@"+u+"keyframes "+r+"{0%{opacity:"+s+"}"+o+"%{opacity:"+t+"}"+(o+.01)+"%{opacity:1}"+(o+e)%100+"%{opacity:"+t+"}100%{opacity:"+s+"}}",l.cssRules.length),f[r]=1),r}function i(t,e){var n,i,r=t.style;if(e=e.charAt(0).toUpperCase()+e.slice(1),r[e]!==undefined)return e;for(i=0;i<h.length;i++)if(n=h[i]+e,r[n]!==undefined)return n}function r(t,e){for(var n in e)t.style[i(t,n)||n]=e[n];return t}function o(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]===undefined&&(t[i]=n[i])}return t}function s(t,e){return"string"==typeof t?t:t[e%t.length]}function a(t){this.opts=o(t||{},a.defaults,d)}function u(){function n(e,n){return t("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',n)}l.addRule(".spin-vml","behavior:url(#default#VML)"),a.prototype.lines=function(t,i){function o(){return r(n("group",{coordsize:l+" "+l,coordorigin:-c+" "+-c}),{width:l,height:l})}function a(t,a,u){e(f,e(r(o(),{rotation:360/i.lines*t+"deg",left:~~a}),e(r(n("roundrect",{arcsize:i.corners}),{width:c,height:i.scale*i.width,left:i.scale*i.radius,top:-i.scale*i.width>>1,filter:u}),n("fill",{color:s(i.color,t),opacity:i.opacity}),n("stroke",{opacity:0}))))}var u,c=i.scale*(i.length+i.width),l=2*i.scale*c,h=-(i.width+i.length)*i.scale*2+"px",f=r(o(),{position:"absolute",top:h,left:h});if(i.shadow)for(u=1;u<=i.lines;u++)a(u,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(u=1;u<=i.lines;u++)a(u);return e(t,f)},a.prototype.opacity=function(t,e,n,i){var r=t.firstChild;i=i.shadow&&i.lines||0,r&&e+i<r.childNodes.length&&(r=(r=(r=r.childNodes[e+i])&&r.firstChild)&&r.firstChild)&&(r.opacity=n)}}var c,l,h=["webkit","Moz","ms","O"],f={},d={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:100,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"};if(a.defaults={},o(a.prototype,{spin:function(e){this.stop();var n=this,i=n.opts,o=n.el=t(null,{className:i.className});if(r(o,{position:i.position,width:0,zIndex:i.zIndex,left:i.left,top:i.top}),e&&e.insertBefore(o,e.firstChild||null),o.setAttribute("role","progressbar"),n.lines(o,n.opts),!c){var s,a=0,u=(i.lines-1)*(1-i.direction)/2,l=i.fps,h=l/i.speed,f=(1-i.opacity)/(h*i.trail/100),d=h/i.lines;!function p(){a++;for(var t=0;t<i.lines;t++)s=Math.max(1-(a+(i.lines-t)*d)%h*f,i.opacity),n.opacity(o,t*i.direction+u,s,i);n.timeout=n.el&&setTimeout(p,~~(1e3/l))}()}return n},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=undefined),this},lines:function(i,o){function a(e,n){return r(t(),{position:"absolute",width:o.scale*(o.length+o.width)+"px",height:o.scale*o.width+"px",background:e,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/o.lines*l+o.rotate)+"deg) translate("+o.scale*o.radius+"px,0)",borderRadius:(o.corners*o.scale*o.width>>1)+"px"})}for(var u,l=0,h=(o.lines-1)*(1-o.direction)/2;l<o.lines;l++)u=r(t(),{position:"absolute",top:1+~(o.scale*o.width/2)+"px",transform:o.hwaccel?"translate3d(0,0,0)":"",opacity:o.opacity,animation:c&&n(o.opacity,o.trail,h+l*o.direction,o.lines)+" "+1/o.speed+"s linear infinite"}),o.shadow&&e(u,r(a("#000","0 0 4px #000"),{top:"2px"})),e(i,e(u,a(s(o.color,l),"0 0 1px rgba(0,0,0,.1)")));return i},opacity:function(t,e,n){e<t.childNodes.length&&(t.childNodes[e].style.opacity=n)}}),"undefined"!=typeof document){l=function(){var n=t("style",{type:"text/css"});return e(document.getElementsByTagName("head")[0],n),n.sheet||n.styleSheet}();var p=r(t("group"),{behavior:"url(#default#VML)"});!i(p,"transform")&&p.adj?u():c=i(p,"animation")}return a})},function(t){"use strict";t.exports=function(){return'\n    <div class="st-block__ui-delete-controls">\n      <label class="st-block__delete-label">\n        '+i18n.t("general:delete")+"\n      </label>\n      <button class='st-block-ui__confirm js-st-block-confirm-delete' type=\"button\">\n        "+i18n.t("general:yes")+"\n      </button>\n      <button class='st-block-ui__confirm js-st-block-deny-delete' type=\"button\">\n        "+i18n.t("general:no")+"\n      </button>\n    </div>\n  "}},function(t,e,n){"use strict";var i=n(34),r=n(29);t.exports=function(t,e){var o=n(242),s=t,a="Text"===(e=r.classify(e));i.isUndefined(a)&&(a=!1),a&&(s="<p>"+s),s=s.replace(/\[([^\]]+)\]\(([^\)]+)\)/gm,function(t,e,n){return"<a href='"+n+"'>"+e.replace(/\n/g,"")+"</a>"}),s=(s=r.reverse(r.reverse(s).replace(/_(?!\\)((_\\|[^_])*)_(?=$|[^\\])/gm,function(t,e){return">i/<"+e.replace(/\n/g,"").replace(/[\s]+$/,"")+">i<"}).replace(/\*\*(?!\\)((\*\*\\|[^\*\*])*)\*\*(?=$|[^\\])/gm,function(t,e){return">b/<"+e.replace(/\n/g,"").replace(/[\s]+$/,"")+">b<"}))).replace(/^\> (.+)$/gm,"$1");var u;return o.hasOwnProperty(e)&&(u=o[e],!i.isUndefined(u.prototype.toHTML)&&i.isFunction(u.prototype.toHTML)&&(s=u.prototype.toHTML(s))),a&&(s=(s=s.replace(/\n\s*\n/gm,"</p><p>")).replace(/\n/gm,"<br>")),s=s.replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/\n/g,"<br>").replace(/\*\*/,"").replace(/__/,""),s=s.replace(/\\\*/g,"*").replace(/\\\[/g,"[").replace(/\\\]/g,"]").replace(/\\\_/g,"_").replace(/\\\(/g,"(").replace(/\\\)/g,")").replace(/\\\-/g,"-"),a&&(s+="</p>"),s}},function(t,e,n){"use strict";var i=n(255)["default"],r=n(230),o=function(t){return function(e){var n=function(t){if(null!==t.firstChild){var e=t.firstChild.childNodes[0];e&&"#text"!==e.nodeName&&""===e.innerText&&t.firstChild.removeChild(e)}},o=function(t,e){var i=document.createElement("div");return e?i.appendChild(t.extractContents()):i.appendChild(t.cloneContents()),n(i),i.firstChild&&"#text"!==i.firstChild.nodeName&&(i=i.lastChild),i.innerHTML.trim()},s=function(){var t=(new e.api.Selection).range.cloneRange();return t.setEndAfter(e.el.lastChild,0),t},a=function(){if(""===e.getTextContent())return!0;var t=(new e.api.Selection).range.cloneRange();t.setStartBefore(e.el.firstChild,0);var n=3===t.endContainer.nodeType?t.endContainer.parentNode:t.endContainer;return e.el.firstChild===n&&""===o(t,!1)},u=function(){var t=(new e.api.Selection).range.cloneRange();return t.selectNodeContents(e.el),t.toString().length},c=function(){var t=r(e.el);return u()===t.end&&t.start===t.end},l=function(){var r=document.createElement("div");if(r.appendChild(s().extractContents()),n(r),!e.allowsBlockElements()){var o=document.createElement("div");o.appendChild(r),r=o}if(r.childNodes.length>=1){var a;i(r.childNodes).reverse().forEach(function(e){""!==e.innerText&&(a={format:"html",text:e.innerHTML.trim()},t.mediator.trigger("block:create","Text",a,t.el))})}},h=!1;e.el.addEventListener("keydown",function(n){t.supressKeyListeners||(13!==n.keyCode||n.shiftKey?37!==n.keyCode&&38!==n.keyCode||!a()?8===n.keyCode&&a()?(n.preventDefault(),h=!0):39!==n.keyCode&&40!==n.keyCode||!c()||(n.preventDefault(),t.mediator.trigger("block:focusNext",t.blockID)):(n.preventDefault(),t.mediator.trigger("block:focusPrevious",t.blockID)):(n.preventDefault(),c()?(s().extractContents(),t.mediator.trigger("block:create","Text",null,t.el)):l(),e.allowsBlockElements()&&""===e.getTextContent()&&e.setContent("<p><br></p>")))}),e.el.addEventListener("keyup",function(e){t.supressKeyListeners||8===e.keyCode&&h&&(e.preventDefault(),t.mediator.trigger("block:remove",t.blockID,{transposeContent:!0}),h=!1)})}};t.exports=o},function(t,e,n){t.exports={"default":n(256),__esModule:!0}},function(t,e,n){n(86),n(257),t.exports=n(7).Array.from},function(t,e,n){"use strict";var i=n(8),r=n(5),o=n(12),s=n(113),a=n(114),u=n(115),c=n(116);r(r.S+r.F*!n(127)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,r,l,h=o(t),f="function"==typeof this?this:Array,d=arguments,p=d.length,m=p>1?d[1]:undefined,g=m!==undefined,v=0,_=c(h);if(g&&(m=i(m,p>2?d[2]:undefined,2)),_==undefined||f==Array&&a(_))for(n=new f(e=u(h.length));e>v;v++)n[v]=g?m(h[v],v):h[v];else for(l=_.call(h),n=new f;!(r=l.next()).done;v++)n[v]=g?s(l,m,[r.value,v],!0):r.value;return n.length=v,n}})},function(t,e,n){"use strict";var i=n(255)["default"],r=function(t){return function(e){var n=new e.api.CommandPatch("insertHTML");n.execute=function(n){var r=this;e.transactionManager.run(function(){e.api.CommandPatch.prototype.execute.call(r,n);var o=document.createElement("div");if(o.innerHTML=e.getContent(),o.childNodes.length>1){var s=i(o.childNodes);e.setContent(s.shift().innerHTML),s.reverse().forEach(function(e){var n={format:"html",text:e.innerHTML};t.mediator.trigger("block:create","Text",n,t.el)}),e.el.focus()}})},e.commandPatches.insertHTML=n}};t.exports=r},function(t){"use strict";var e=function(t){return function(e){var n=new e.api.Command("heading");n.queryEnabled=function(){return t.inline_editable},n.queryState=function(){return"heading"===t.type};var i=function(){return n.queryState()?"Text":"Heading"};n.execute=function(){var e={format:"html",text:t.getScribeInnerContent()};t.mediator.trigger("block:replace",t.el,i(),e)},e.commands.heading=n}};t.exports=e},function(t){"use strict";var e=function(t){return function(e){var n=new e.api.Command("quote");n.queryEnabled=function(){return t.inline_editable},n.queryState=function(){return"quote"===t.type};var i=function(){return n.queryState()?"Text":"Quote"};n.execute=function(){var e={format:"html",text:t.getScribeInnerContent()};t.mediator.trigger("block:replace",t.el,i(),e)},e.commands.quote=n}};t.exports=e},function(t,e,n){"use strict";var i=n(34),r=n(244),o=n(253),s=n(259),a=n(260),u=i.template(['<blockquote class="st-required st-text-block st-text-block--quote" contenteditable="true"></blockquote>','<label class="st-input-label"> <%= i18n.t("blocks:quote:credit_field") %></label>','<input maxlength="140" name="cite" placeholder="<%= i18n.t("blocks:quote:credit_field") %>"',' class="st-input-string js-cite-input" type="text" />'].join("\n"));t.exports=r.extend({type:"quote",icon_name:"quote",textable:!0,toolbarEnabled:!1,editorHTML:function(){return u(this)},configureScribe:function(t){t.use(new s(this)),t.use(new a(this))},loadData:function(t){this.options.convertFromMarkdown&&"html"!==t.format?this.setTextBlockHTML(o(t.text,this.type)):this.setTextBlockHTML(t.text),t.cite&&(this.$(".js-cite-input")[0].value=t.cite)}})},function(t,e,n){"use strict";var i=n(69),r=n(244);t.exports=r.extend({type:"image",droppable:!0,uploadable:!0,icon_name:"image",loadData:function(t){this.editor.innerHTML="",this.editor.appendChild(i.createElement("img",{src:t.file.url}))},onDrop:function(t){var e=t.files[0],n="undefined"!=typeof URL?URL:"undefined"!=typeof webkitURL?webkitURL:null;/image/.test(e.type)&&(this.loading(),i.hide(this.inputs),this.editor.innerHTML="",
this.editor.appendChild(i.createElement("img",{src:n.createObjectURL(e)})),i.show(this.editor),this.uploader(e,function(t){this.setData(t),this.ready()},function(){this.addMessage(i18n.t("blocks:image:upload_error")),this.ready()}))}})},function(t,e,n){"use strict";var i=n(244),r=n(253),o=n(254),s=n(259),a=n(260);t.exports=i.extend({type:"heading",editorHTML:'<h2 class="st-required st-text-block st-text-block--heading" contenteditable="true"></h2>',configureScribe:function(t){t.use(new o(this)),t.use(new s(this)),t.use(new a(this)),t.on("content-changed",this.toggleEmptyClass.bind(this))},textable:!0,toolbarEnabled:!1,scribeOptions:{allowBlockElements:!1,tags:{p:!1}},icon_name:"heading",loadData:function(t){this.options.convertFromMarkdown&&"html"!==t.format?this.setTextBlockHTML(r(t.text,this.type)):this.setTextBlockHTML(t.text)},onBlockRender:function(){this.focus(),this.toggleEmptyClass()},toggleEmptyClass:function(){this.el.classList.toggle("st-block--empty",0===this._scribe.getTextContent().length)}})},function(t,e,n){"use strict";var i=n(244),r=n(253),o=n(265);t.exports=i.extend({type:"list",icon_name:"list",multi_editable:!0,scribeOptions:{allowBlockElements:!1,tags:{p:!1}},configureScribe:function(t){t.use(new o(this))},editorHTML:'<ul class="st-list-block__list"></ul>',listItemEditorHTML:'<li class="st-list-block__item"><div class="st-list-block__editor st-block__editor"></div></li>',initialize:function(){this.editorIds=[]},beforeLoadingData:function(){this.setupListVariables(),this.loadData(this._getData())},onBlockRender:function(){this.ul||this.setupListVariables(),this.editorIds.length<1&&this.addListItem()},setupListVariables:function(){this.ul=this.inner.querySelector("ul")},loadData:function(t){var e=this;this.options.convertFromMarkdown&&"html"!==t.format&&(t=this.parseFromMarkdown(t.text)),t.listItems.length?t.listItems.forEach(function(t){e.addListItem(t.content)}):e.addListItem()},parseFromMarkdown:function(t){var e=t.replace(/^ - (.+)$/gm,"$1").split("\n");return e=e.filter(function(t){return t.length}).map(function(t){return{content:r(t,this.type)}}.bind(this)),{listItems:e,format:"html"}},_serializeData:function(){var t={format:"html",listItems:[]};return this.editorIds.forEach(function(e){var n={content:this.getTextEditor(e).scribe.getContent()};t.listItems.push(n)}.bind(this)),t},addListItemAfterCurrent:function(t){this.addListItem(t,this.getCurrentTextEditor())},addListItem:function(t,e){"<br>"===(t=t||"").trim()&&(t="");var n=this.newTextEditor(this.listItemEditorHTML,t);if(e&&this.ul.lastchild!==e.node){var i=e.node.nextSibling;this.ul.insertBefore(n.node,i);var r=this.editorIds.indexOf(e.id)+1;this.editorIds.splice(r,0,n.id)}else this.ul.appendChild(n.node),this.editorIds.push(n.id);!t&&this.focusOn(n)},focusOnNeighbor:function(){var t=this.previousListItem()||this.nextListItem();t&&this.focusOn(t)},focusOn:function(t){var e,n=t.scribe,i=new n.api.Selection,r=n.el.lastChild;i.range&&(e=i.range.cloneRange()),t.el.focus(),e&&(e.setStartAfter(r,1),e.collapse(!1))},focusAtEnd:function(){var t=this.editorIds[this.editorIds.length-1];this.appendToTextEditor(t)},removeCurrentListItem:function(){if(1!==this.editorIds.length){var t=this.getCurrentTextEditor(),e=this.editorIds.indexOf(t.id);this.focusOnNeighbor(t),this.editorIds.splice(e,1),this.ul.removeChild(t.node),this.removeTextEditor(t.id)}},appendToCurrentItem:function(t){this.appendToTextEditor(this.getCurrentTextEditor().id,t)},isLastListItem:function(){return 1===this.editorIds.length},nextListItem:function(){var t=this.editorIds.indexOf(this.getCurrentTextEditor().id),e=this.editorIds[t+1];return e!==undefined?this.getTextEditor(e):null},previousListItem:function(){var t=this.editorIds.indexOf(this.getCurrentTextEditor().id),e=this.editorIds[t-1];return e!==undefined?this.getTextEditor(e):null}})},function(t){"use strict";var e=function(t){return function(e){e.el.addEventListener("keydown",function(n){if(!t.supressKeyListeners){var i,r=function(t){var e=document.createElement("div");return e.appendChild(t.extractContents()),e.innerHTML},o=function(){var t=(new e.api.Selection).range.cloneRange();return t.setEndAfter(e.el.lastChild,0),t},s=function(){return(new e.api.Selection).range.startOffset};13!==n.keyCode||n.shiftKey?8===n.keyCode&&0===s()?(n.preventDefault(),t.isLastListItem()?t.mediator.trigger("block:remove",t.blockID):(i=e.getContent(),t.removeCurrentListItem(),t.appendToCurrentItem(i))):n.keyCode:(n.preventDefault(),0===e.getTextContent().length?(t.removeCurrentListItem(),t.mediator.trigger("block:create","Text",null,t.el)):(i=r(o()),t.addListItemAfterCurrent(i)))}})}};t.exports=e},function(t,e,n){"use strict";var i=n(34),r=n(29),o=n(69),s=n(244),a=i.template(["<blockquote class='twitter-tweet' align='center'>","<p><%= text %></p>","&mdash; <%= user.name %> (@<%= user.screen_name %>)","<a href='<%= status_url %>' data-datetime='<%= created_at %>'><%= created_at %></a>","</blockquote>"].join("\n"));t.exports=s.extend({type:"tweet",icon_name:"tweet",droppable:!0,pastable:!0,fetchable:!0,drop_options:{re_render_on_reorder:!0},fetchUrl:function(t){return"/tweets/?tweet_id="+t},loadData:function(t){i.isUndefined(t.status_url)&&(t.status_url="");var e=this.inner.querySelector("twitterwidget");o.remove(e),this.inner.insertAdjacentHTML("afterbegin",a(t));var n=o.createElement("script",{src:"//platform.twitter.com/widgets.js"});this.inner.appendChild(n)},onContentPasted:function(t){var e=t.target.value;this.handleTwitterDropPaste(e)},handleTwitterDropPaste:function(t){if(this.validTweetUrl(t)){var e=t.match(/[^\/]+$/);i.isEmpty(e)||(this.loading(),e=e[0],this.fetch(this.fetchUrl(e),{dataType:"json"},this.onTweetSuccess,this.onTweetFail))}else r.log("Invalid Tweet URL")},validTweetUrl:function(t){return r.isURI(t)&&-1!==t.indexOf("twitter")&&-1!==t.indexOf("status")},onTweetSuccess:function(t){var e={user:{profile_image_url:t.user.profile_image_url,profile_image_url_https:t.user.profile_image_url_https,screen_name:t.user.screen_name,name:t.user.name},id:t.id_str,text:t.text,created_at:t.created_at,entities:t.entities,status_url:"https://twitter.com/"+t.user.screen_name+"/status/"+t.id_str};this.setAndLoadData(e),this.ready()},onTweetFail:function(){this.addMessage(i18n.t("blocks:tweet:fetch_error")),this.ready()},onDrop:function(t){var e=t.getData("text/plain");this.handleTwitterDropPaste(e)}})},function(t,e,n){"use strict";var i=n(34),r=n(29),o=n(244);t.exports=o.extend({providers:{vimeo:{regex:/(?:http[s]?:\/\/)?(?:www.)?vimeo\.co(?:.+(?:\/)([^\/].*)+$)/,html:'<iframe src="<%= protocol %>//player.vimeo.com/video/<%= remote_id %>?title=0&byline=0" width="580" height="320" frameborder="0"></iframe>'},youtube:{regex:/^.*(?:(?:youtu\.be\/)|(?:youtube\.com)\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*)/,html:'<iframe src="<%= protocol %>//www.youtube.com/embed/<%= remote_id %>" width="580" height="320" frameborder="0" allowfullscreen></iframe>'}},type:"video",droppable:!0,pastable:!0,icon_name:"video",loadData:function(t){if(this.providers.hasOwnProperty(t.source)){var e=this.providers[t.source],n="file:"===window.location.protocol?"http:":window.location.protocol,r=e.square?"with-square-media":"with-sixteen-by-nine-media";this.editor.classList.add("st-block__editor--"+r),this.editor.innerHTML=i.template(e.html,{protocol:n,remote_id:t.remote_id,width:this.editor.style.width})}},onContentPasted:function(t){this.handleDropPaste(t.target.value)},matchVideoProvider:function(t,e,n){var r=t.regex.exec(n);return null==r||i.isUndefined(r[1])?{}:{source:e,remote_id:r[1]}},handleDropPaste:function(t){if(r.isURI(t))for(var e in this.providers)this.providers.hasOwnProperty(e)&&this.setAndLoadData(this.matchVideoProvider(this.providers[e],e,t))},onDrop:function(t){var e=t.getData("text/plain");this.handleDropPaste(e)}})},function(t,e,n){"use strict";var i=n(30)["default"];t.exports={mediatedEvents:{},eventNamespace:null,_bindMediatedEvents:function(){i(this.mediatedEvents).forEach(function(t){var e=this.mediatedEvents[t];t=this.eventNamespace?this.eventNamespace+":"+t:t,this.mediator.on(t,this[e].bind(this))},this)}}},function(t,e,n){"use strict";var i=n(2)["default"],r=n(34),o=n(68),s=n(69),a=n(131),u=n(270),c=function(t,e,n){this.editor=n,this.options=i({},o.defaults.formatBar,t||{}),this.commands=this.options.commands,this.mediator=e,this.isShown=!1,this._ensureElement(),this._bindFunctions(),this._bindMediatedEvents(),this.initialize.apply(this,arguments)};i(c.prototype,n(235),n(268),n(73),n(236),{className:"st-format-bar",bound:["onFormatButtonClick","renderBySelection","hide"],eventNamespace:"formatter",mediatedEvents:{position:"renderBySelection",show:"show",hide:"hide"},initialize:function(){var t=this.commands.reduce(function(t,e){return t+=u(e)},"");this.el.insertAdjacentHTML("beforeend",t),a.delegate(this.el,".st-format-btn","mousedown",this.onFormatButtonClick)},hide:function(){this.block=undefined,this.isShown=!1,this.el.classList.remove("st-format-bar--is-ready"),s.remove(this.el)},show:function(){this.isShown||(this.isShown=!0,this.editor.outer.appendChild(this.el),this.el.classList.add("st-format-bar--is-ready"))},remove:function(){s.remove(this.el)},renderBySelection:function(t){this.block=t,this.highlightSelectedButtons(),this.show(),this.calculatePosition()},calculatePosition:function(){var t=window.getSelection().getRangeAt(0).getBoundingClientRect(),e={},n=this.editor.outer.getBoundingClientRect();e.top=t.top-n.top+"px",e.left=(t.left+t.right)/2-this.el.offsetWidth/2-n.left+"px",this.el.style.top=e.top,this.el.style.left=e.left},highlightSelectedButtons:function(){var t=this;[].forEach.call(this.el.querySelectorAll(".st-format-btn"),function(e){var n=e.getAttribute("data-cmd");e.classList.toggle("st-format-btn--is-active",t.block.queryTextBlockCommandState(n)),e=null})},onFormatButtonClick:function(t){if(t.preventDefault(),t.stopPropagation(),r.isUndefined(this.block))throw"Associated block not found";var e=t.currentTarget.getAttribute("data-cmd");return!r.isUndefined(e)&&(this.block.execTextBlockCommand(e),this.highlightSelectedButtons(),document.activeElement.focus(),!1)}}),t.exports=c},function(t,e,n){"use strict";var i=n(68);t.exports=function(t){var e=t.name,n=(t.text,t.cmd),r=t.iconName;return'\n    <button type="button" class="st-format-btn st-format-btn--'+e+'" data-cmd="'+n+'">\n      <svg role="img" class="st-icon">\n        <use xlink:href="'+i.defaults.iconUrl+"#"+r+'"/>\n      </svg>\n    </button>\n  '}},function(t,e,n){"use strict";var i=n(2)["default"],r=n(30)["default"],o=n(34),s=n(68),a=n(29),u=n(69),c=n(73),l=n(75),h=n(272),f=n(273),d=n(275),p=n(277),m=n(241),g=n(269),v=n(76),_=n(278),y=function(t){this.initialize(t)};i(y.prototype,n(235),n(73),{bound:["onFormSubmit","hideAllTheThings","changeBlockPosition","removeBlockDragOver","blockLimitReached","blockOrderUpdated"],events:{"block:reorder:dragend":"removeBlockDragOver","block:reorder:dropped":"removeBlockDragOver","block:content:dropped":"removeBlockDragOver"},initialize:function(t){if(a.log("Init SirTrevor.Editor"),this.options=i({},s.defaults,t||{}),this.ID=o.uniqueId("st-editor-"),!this._ensureAndSetElements())return!1;!o.isUndefined(this.options.onEditorRender)&&o.isFunction(this.options.onEditorRender)&&(this.onEditorRender=this.options.onEditorRender),this.mediator=i({},c),this._bindFunctions(),s.instances.push(this),this.build(),h.bindFormSubmit(this.form)},build:function(){u.hide(this.el),this.errorHandler=new _(this.outer,this.mediator,this.options.errorsContainer),this.store=new v(this.el.value,this.mediator),this.blockManager=new m(this),this.blockAddition=d.create(this),this.BlockAdditionTop=p.create(this),this.blockControls=f.create(this),this.formatBar=new g(this.options.formatBar,this.mediator,this),this.mediator.on("block:changePosition",this.changeBlockPosition),this.mediator.on("block:limitReached",this.blockLimitReached),this.mediator.on("block:rerender",this.blockOrderUpdated),this.mediator.on("block:create",this.blockOrderUpdated),this.mediator.on("block:remove",this.blockOrderUpdated),this.mediator.on("block:replace",this.blockOrderUpdated),this.dataStore="Please use store.retrieve();",this._setEvents(),window.addEventListener("click",this.hideAllTheThings),document.body.addEventListener("keydown",this.disableBackButton),this.createBlocks(),this.wrapper.classList.add("st-ready"),o.isUndefined(this.onEditorRender)||this.onEditorRender()},createBlocks:function(){var t=this.store.retrieve();t.data.length>0?t.data.forEach(function(t){this.mediator.trigger("block:create",t.type,t.data)},this):!1!==this.options.defaultType&&this.mediator.trigger("block:create",this.options.defaultType,{})},destroy:function(){this.formatBar.destroy(),this.blockAddition.destroy(),this.blockControls.destroy(),this.blockManager.blocks.forEach(function(t){this.mediator.trigger("block:remove",t.blockID)},this),this.mediator.stopListening(),this.stopListening(),s.instances=s.instances.filter(function(t){return t.ID!==this.ID},this),window.removeEventListener("click",this.hideAllTheThings),document.body.removeEventListener("keydown",this.disableBackButton),this.store.reset(),u.replaceWith(this.outer,this.el)},reinitialize:function(t){this.destroy(),this.initialize(t||this.options)},blockLimitReached:function(t){this.wrapper.classList.toggle("st--block-limit-reached",t)},blockOrderUpdated:function(){var t=this.wrapper.querySelectorAll(".st-block")[0],e=!1;if(t){var n=this.blockManager.findBlockById(t.getAttribute("id"));e=n&&n.textable}this._toggleHideTopControls(e)},_toggleHideTopControls:function(t){this.wrapper.classList.toggle("st--hide-top-controls",t)},_setEvents:function(){r(this.events).forEach(function(t){l.on(t,this[this.events[t]],this)},this)},hideAllTheThings:function(){this.blockControls.hide(),this.blockAddition.hide(),null===document.activeElement.getAttribute("contenteditable")&&this.formatBar.hide();var t=".st-block__ui-delete-controls";Array.prototype.forEach.call(this.wrapper.querySelectorAll(t),function(t){t.classList.remove("active")})},store:function(t,e){return a.log("The store method has been removed, please call store[methodName]"),this.store[t].call(this,e||{})},removeBlockDragOver:function(){var t=this.outer.querySelector(".st-drag-over");t&&t.classList.remove("st-drag-over")},changeBlockPosition:function(t,e){e-=1;var n=this.blockManager.getBlockPosition(t),i=this.wrapper.querySelectorAll(".st-block")[e];i&&i.getAttribute("id")!==t.getAttribute("id")&&(this.hideAllTheThings(),n>e?i.parentNode.insertBefore(t,i):u.insertAfter(t,i))},onFormSubmit:function(t){return t=!1!==t,a.log("Handling form submission for Editor "+this.ID),this.mediator.trigger("errors:reset"),this.store.reset(),this.validateBlocks(t),this.blockManager.validateBlockTypesExist(t),this.mediator.trigger("errors:render"),this.el.value=this.store.toString(),this.errorHandler.errors.length},validateBlocks:function(t){var e=this;Array.prototype.forEach.call(this.wrapper.querySelectorAll(".st-block"),function(n){var i=e.blockManager.findBlockById(n.getAttribute("id"));o.isUndefined(i)||e.validateAndSaveBlock(i,t)})},validateAndSaveBlock:function(t,e){if(!s.skipValidation&&e&&!t.valid())return this.mediator.trigger("errors:add",{text:o.result(t,"validationFailMsg")}),void a.log("Block "+t.blockID+" failed validation");if("text"!==t.type||!t.isEmpty()){var n=t.getData();a.log("Adding data for block "+t.blockID+" to block store:",n),this.store.addData(n)}},disableBackButton:function(t){var e=t.target||t.srcElement;if(8===t.keyCode){if(e.getAttribute("contenteditable")||"INPUT"===e.tagName||"TEXTAREA"===e.tagName)return;t.preventDefault()}},findBlockById:function(t){return this.blockManager.findBlockById(t)},getBlocksByType:function(t){return this.blockManager.getBlocksByType(t)},getBlocksByIDs:function(t){return this.blockManager.getBlocksByIDs(t)},getBlockPosition:function(t){return a.log("This method has been moved to blockManager.getBlockPosition()"),this.blockManager.getBlockPosition(t)},_ensureAndSetElements:function(){if(o.isUndefined(this.options.el))return a.log("You must provide an el"),!1;this.el=this.options.el,this.form=u.getClosest(this.el,"form");var t=u.createElement("div",{id:this.ID,"class":"st-outer notranslate",dropzone:"copy link move"}),e=u.createElement("div",{"class":"st-blocks"});return u.wrap(u.wrap(this.el,t),e),this.outer=this.form.querySelector("#"+this.ID),this.wrapper=this.outer.querySelector(".st-blocks"),!0}}),t.exports=y},function(t,e,n){"use strict";var i=n(68),r=n(29),o=n(75),s=n(77),a=!1,u={bindFormSubmit:function(t){a||(new s(t),t.addEventListener("submit",this.onFormSubmit),a=!0)},onBeforeSubmit:function(t){var e=0;return i.instances.forEach(function(n){e+=n.onFormSubmit(t)}),r.log("Total errors: "+e),e},onFormSubmit:function(t){u.onBeforeSubmit()>0&&(o.trigger("onError"),t.preventDefault())}};t.exports=u},function(t,e,n){"use strict";function i(t,e){return e.reduce(function(e,n){return t.hasOwnProperty(n)&&t[n].prototype.toolbarEnabled?e+=a(t[n].prototype):e},"")}function r(){var t=document.createElement("div");t.className="st-block-controls__buttons",t.innerHTML=i.apply(null,arguments);var e=document.createElement("div");return e.className="st-block-controls",e.appendChild(t),e}var o=n(242),s=n(131),a=n(274);t.exports.create=function(t){function e(){t.mediator.trigger("block:replace",u.parentNode,this.getAttribute("data-type"))}function n(t){t.stopPropagation();var e=this.parentNode;e&&i()!==e&&(e.appendChild(u),e.classList.toggle("st-block--controls-active"))}function i(){var t=u.parentNode;if(t)return t.removeChild(u),t.classList.remove("st-block--controls-active"),t}function a(){t=null,u=null}var u=r(o,t.blockManager.blockTypes);return s.delegate(t.wrapper,".st-block-replacer","click",n),s.delegate(t.wrapper,".st-block-controls__button","click",e),{el:u,hide:i,destroy:a}}},function(t,e,n){"use strict";var i=n(68);t.exports=function(t){return'\n    <button class="st-block-controls__button" data-type="'+t.type+'" type="button">\n      <svg role="img" class="st-icon">\n        <use xlink:href="'+i.defaults.iconUrl+"#"+t.icon_name+'"/>\n      </svg>\n      '+t.title()+"\n    </button>\n  "}},function(t,e,n){"use strict";var i=n(133),r=n(75),o=n(69),s=n(131),a=n(276);t.exports.create=function(t){function e(){t.mediator.trigger("block:create","Text",null,this.parentNode.parentNode.id?this.parentNode.parentNode:this.parentNode)}function n(){}function u(){t=null}function c(e){e.preventDefault();var n=l,i=e.dataTransfer.getData("text/plain"),s=document.querySelector("#"+i);n.id!==i&&o.insertAfter(s,n),t.mediator.trigger("block:rerender",i),r.trigger("block:reorder:dropped",i)}t.wrapper.insertAdjacentHTML("beforeend",a());var l=t.wrapper.querySelector(".st-top-controls");return i.dropArea(l),l.addEventListener("drop",c),s.delegate(t.wrapper,".st-block-addition","click",e),{destroy:u,hide:n}}},function(t,e,n){"use strict";var i=n(248);t.exports=function(){return'\n    <div id="st_top" class="st-top-controls">\n      '+i()+"\n    </div>\n  "}},function(t,e,n){"use strict";var i=n(131);t.exports.create=function(t){function e(){t.mediator.trigger("block:create","Text",null,this.parentNode.parentNode.previousSibling)}function n(){}function r(){t=null}return i.delegate(t.wrapper,".st-block-addition-top__button","click",e),i.delegate(t.wrapper,".st-block-addition-top__icon","click",e),{destroy:r,hide:n}}},function(t,e,n){"use strict";var i=n(2)["default"],r=n(34),o=n(69),s=function(t,e,n){this.wrapper=t,this.mediator=e,this.el=n,r.isUndefined(this.el)&&(this._ensureElement(),this.wrapper.insertBefore(this.el,this.wrapper.firstChild)),o.hide(this.el),this._bindFunctions(),this._bindMediatedEvents(),this.initialize()};i(s.prototype,n(235),n(268),n(236),{errors:[],className:"st-errors",eventNamespace:"errors",mediatedEvents:{reset:"reset",add:"addMessage",render:"render"},initialize:function(){var t=document.createElement("ul"),e=document.createElement("p");e.innerHTML=i18n.t("errors:title"),this.el.appendChild(e).appendChild(t),this.list=t},render:function(){if(0===this.errors.length)return!1;this.errors.forEach(this.createErrorItem,this),o.show(this.el)},createErrorItem:function(t){var e=document.createElement("li");e.classList.add("st-errors__msg"),e.innerHTML=t.text,this.list.appendChild(e)},addMessage:function(t){this.errors.push(t)},reset:function(){if(0===this.errors.length)return!1;this.errors=[],this.list.innerHTML="",o.hide(this.el)}}),t.exports=s},function(t,e,n){"use strict";var i=n(34),r=n(29);t.exports=function(t,e){function o(t,e,n){return i.isUndefined(n)&&(n=""),"**"+e.replace(/<(.)?br(.)?>/g,"")+"**"+n}function s(t,e,n){return i.isUndefined(n)&&(n=""),"_"+e.replace(/<(.)?br(.)?>/g,"")+"_"+n}var a=n(242);e=r.classify(e);var u=t;u=(u=u.replace(/&nbsp;/g," ")).replace(/( class=(")?Mso[a-zA-Z]+(")?)/g,"").replace(/<!--(.*?)-->/g,"").replace(/\/\*(.*?)\*\//g,"").replace(/<(\/)*(meta|link|span|\\?xml:|st1:|o:|font)(.*?)>/gi,"");var c,l,h=["style","script","applet","embed","noframes","noscript"];for(l=0;l<h.length;l++)c=new RegExp("<"+h[l]+".*?"+h[l]+"(.*?)>","gi"),u=u.replace(c,"");u=u.replace(/\*/g,"\\*").replace(/\[/g,"\\[").replace(/\]/g,"\\]").replace(/\_/g,"\\_").replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/\-/g,"\\-");var f=["em","i","strong","b"];for(l=0;l<f.length;l++)c=new RegExp("<"+f[l]+"><br></"+f[l]+">","gi"),u=u.replace(c,"<br>");u=(u=u.replace(/<(\w+)(?:\s+\w+="[^"]+(?:"\$[^"]+"[^"]+)?")*>\s*<\/\1>/gim,"").replace(/\n/gm,"").replace(/<a.*?href=[""'](.*?)[""'].*?>(.*?)<\/a>/gim,function(t,e,n){return"["+n.trim().replace(/<(.)?br(.)?>/g,"")+"]("+e+")"}).replace(/<strong>(?:\s*)(.*?)(\s)*?<\/strong>/gim,o).replace(/<b>(?:\s*)(.*?)(\s*)?<\/b>/gim,o).replace(/<em>(?:\s*)(.*?)(\s*)?<\/em>/gim,s).replace(/<i>(?:\s*)(.*?)(\s*)?<\/i>/gim,s)).replace(/([^<>]+)(<div>)/g,"$1\n$2").replace(/<div><div>/g,"\n<div>").replace(/(?:<div>)([^<>]+)(?:<div>)/g,"$1\n").replace(/(?:<div>)(?:<br>)?([^<>]+)(?:<br>)?(?:<\/div>)/g,"$1\n").replace(/<\/p>/g,"\n\n").replace(/<(.)?br(.)?>/g,"\n").replace(/&lt;/g,"<").replace(/&gt;/g,">");var d;return a.hasOwnProperty(e)&&(d=a[e],!i.isUndefined(d.prototype.toMarkdown)&&i.isFunction(d.prototype.toMarkdown)&&(u=d.prototype.toMarkdown(u))),u=u.replace(/<\/?[^>]+(>|$)/g,"")}},17]))}),function(t,e,n,i){function r(e,i){this.w=t(n),this.el=t(e),this.options=t.extend({},h,i),this.init()}var o="ontouchstart"in e,s=function(){var t=n.createElement("div"),i=n.documentElement;if(!("pointerEvents"in t.style))return!1;t.style.pointerEvents="auto",t.style.pointerEvents="x",i.appendChild(t);var r=e.getComputedStyle&&"auto"===e.getComputedStyle(t,"").pointerEvents;return i.removeChild(t),!!r}(),a=o?"touchstart":"mousedown",u=o?"touchmove":"mousemove",c=o?"touchend":"mouseup",l=o?"touchcancel":"mouseup",h={listNodeName:"ol",itemNodeName:"li",rootClass:"dd",listClass:"dd-list",itemClass:"dd-item",dragClass:"dd-dragel",handleClass:"dd-handle",collapsedClass:"dd-collapsed",placeClass:"dd-placeholder",noDragClass:"dd-nodrag",noChildrenClass:"dd-nochildren",emptyClass:"dd-empty",expandBtnHTML:'<button data-action="expand" type="button">Expand</button>',collapseBtnHTML:'<button data-action="collapse" type="button">Collapse</button>',group:0,maxDepth:5,threshold:20,reject:[],dropCallback:null,cloneNodeOnDrag:!1,dragOutsideToDelete:!1};r.prototype={init:function(){var n=this;n.reset(),n.el.data("nestable-group",this.options.group),n.placeEl=t('<div class="'+n.options.placeClass+'"/>'),t.each(this.el.find(n.options.itemNodeName),function(e,i){n.setParent(t(i))}),n.el.on("click","button",function(e){if(!n.dragEl&&(o||0===e.button)){var i=t(e.currentTarget),r=i.data("action"),s=i.parent(n.options.itemNodeName);"collapse"===r&&n.collapseItem(s),"expand"===r&&n.expandItem(s)}});var i=function(e){var i=t(e.target);if(n.nestableCopy=i.closest("."+n.options.rootClass).clone(!0),!i.hasClass(n.options.handleClass)){if(i.closest("."+n.options.noDragClass).length)return;i=i.closest("."+n.options.handleClass)}!i.length||n.dragEl||!o&&1!==e.which||o&&1!==e.touches.length||(e.preventDefault(),n.dragStart(o?e.touches[0]:e))},r=function(t){n.dragEl&&(t.preventDefault(),n.dragMove(o?t.touches[0]:t))},s=function(t){n.dragEl&&(t.preventDefault(),n.dragStop(o?t.touches[0]:t))};o?(n.el[0].addEventListener(a,i,!1),e.addEventListener(u,r,!1),e.addEventListener(c,s,!1),e.addEventListener(l,s,!1)):(n.el.on(a,i),n.w.on(u,r),n.w.on(c,s));var h=function(){o?(n.el[0].removeEventListener(a,i,!1),e.removeEventListener(u,r,!1),e.removeEventListener(c,s,!1),e.removeEventListener(l,s,!1)):(n.el.off(a,i),n.w.off(u,r),n.w.off(c,s)),n.el.off("click"),n.el.unbind("destroy-nestable"),n.el.data("nestable",null);var h=n.el[0].getElementsByTagName("button");t(h).remove()};n.el.bind("destroy-nestable",h)},destroy:function(){this.expandAll(),this.el.trigger("destroy-nestable")},serialize:function(){var e=0,n=this;step=function(e,i){var r=[];return e.children(n.options.itemNodeName).each(function(){var e=t(this),o=t.extend({},e.data()),s=e.children(n.options.listNodeName);s.length&&(o.children=step(s,i+1)),r.push(o)}),r};var i;return i=n.el.is(n.options.listNodeName)?n.el:n.el.find(n.options.listNodeName).first(),step(i,e)},reset:function(){this.mouse={offsetX:0,offsetY:0,startX:0,startY:0,lastX:0,lastY:0,nowX:0,nowY:0,distX:0,distY:0,dirAx:0,dirX:0,dirY:0,lastDirX:0,lastDirY:0,distAxX:0,distAxY:0},this.moving=!1,this.dragEl=null,this.dragRootEl=null,this.dragDepth=0,this.dragItem=null,this.hasNewRoot=!1,this.pointEl=null,this.sourceRoot=null,this.isOutsideRoot=!1},expandItem:function(t){t.removeClass(this.options.collapsedClass),t.children('[data-action="expand"]').hide(),t.children('[data-action="collapse"]').show(),t.children(this.options.listNodeName).show(),this.el.trigger("expand",[t]),t.trigger("expand")},collapseItem:function(t){t.children(this.options.listNodeName).length&&(t.addClass(this.options.collapsedClass),t.children('[data-action="collapse"]').hide(),t.children('[data-action="expand"]').show(),t.children(this.options.listNodeName).hide()),this.el.trigger("collapse",[t]),t.trigger("collapse")},expandAll:function(){var e=this;e.el.find(e.options.itemNodeName).each(function(){e.expandItem(t(this))})},collapseAll:function(){var e=this;e.el.find(e.options.itemNodeName).each(function(){e.collapseItem(t(this))})},setParent:function(e){e.children(this.options.listNodeName).length&&(e.prepend(t(this.options.expandBtnHTML)),e.prepend(t(this.options.collapseBtnHTML))),(" "+e[0].className+" ").indexOf(" "+h.collapsedClass+" ")>-1?e.children('[data-action="collapse"]').hide():e.children('[data-action="expand"]').hide()},unsetParent:function(t){t.removeClass(this.options.collapsedClass),t.children("[data-action]").remove(),t.children(this.options.listNodeName).remove()},dragStart:function(e){var r=this.mouse,o=t(e.target),s=o.closest("."+this.options.handleClass).closest(this.options.itemNodeName);this.sourceRoot=o.closest("."+this.options.rootClass),this.dragItem=s,this.placeEl.css("height",s.height()),r.offsetX=e.offsetX!==i?e.offsetX:e.pageX-o.offset().left,r.offsetY=e.offsetY!==i?e.offsetY:e.pageY-o.offset().top,r.startX=r.lastX=e.pageX,r.startY=r.lastY=e.pageY,this.dragRootEl=this.el,this.dragEl=t(n.createElement(this.options.listNodeName)).addClass(this.options.listClass+" "+this.options.dragClass),this.dragEl.css("width",s.width()),this.options.cloneNodeOnDrag?s.after(s.clone()):s.after(this.placeEl),s[0].parentNode.removeChild(s[0]),s.appendTo(this.dragEl),t(n.body).append(this.dragEl),this.dragEl.css({left:e.pageX-r.offsetX,top:e.pageY-r.offsetY});var a,u,c=this.dragEl.find(this.options.itemNodeName);for(a=0;a<c.length;a++)(u=t(c[a]).parents(this.options.listNodeName).length)>this.dragDepth&&(this.dragDepth=u)},dragStop:function(){var e=this.dragEl.children(this.options.itemNodeName).first();if(e[0].parentNode.removeChild(e[0]),this.isOutsideRoot&&this.options.dragOutsideToDelete){var n=this.placeEl.parent();this.placeEl.remove(),n.children().length||this.unsetParent(n.parent()),this.dragRootEl.find(this.options.itemNodeName).length||this.dragRootEl.append('<div class="'+this.options.emptyClass+'"/>')}else this.placeEl.replaceWith(e);this.moving||t(this.dragItem).trigger("click");var i,r=!1;for(i=0;i<this.options.reject.length;i++){var o=this.options.reject[i];if(o.rule.apply(this.dragRootEl)){var s=e.clone(!0);this.dragRootEl.html(this.nestableCopy.children().clone(!0)),o.action&&o.action.apply(this.dragRootEl,[s]),r=!0;break}}if(!r){this.dragEl.remove(),this.el.trigger("change");var a=e.parent().parent(),u=null;if(null===a||a.is("."+this.options.rootClass)||(u=a.data("id")),t.isFunction(this.options.dropCallback)){var c={sourceId:e.data("id"),destId:u,sourceEl:e,destParent:a,destRoot:e.closest("."+this.options.rootClass),sourceRoot:this.sourceRoot};this.options.dropCallback.call(this,c)}this.hasNewRoot&&this.dragRootEl.trigger("change"),this.reset()}},dragMove:function(i){var r,o,a,u=this.options,c=this.mouse;this.dragEl.css({left:i.pageX-c.offsetX,top:i.pageY-c.offsetY}),c.lastX=c.nowX,c.lastY=c.nowY,c.nowX=i.pageX,c.nowY=i.pageY,c.distX=c.nowX-c.lastX,c.distY=c.nowY-c.lastY,c.lastDirX=c.dirX,c.lastDirY=c.dirY,c.dirX=0===c.distX?0:c.distX>0?1:-1,c.dirY=0===c.distY?0:c.distY>0?1:-1;var l=Math.abs(c.distX)>Math.abs(c.distY)?1:0;if(!this.moving)return c.dirAx=l,void(this.moving=!0);c.dirAx!==l?(c.distAxX=0,c.distAxY=0):(c.distAxX+=Math.abs(c.distX),0!==c.dirX&&c.dirX!==c.lastDirX&&(c.distAxX=0),c.distAxY+=Math.abs(c.distY),0!==c.dirY&&c.dirY!==c.lastDirY&&(c.distAxY=0)),c.dirAx=l,c.dirAx&&c.distAxX>=u.threshold&&(c.distAxX=0,a=this.placeEl.prev(u.itemNodeName),c.distX>0&&a.length&&!a.hasClass(u.collapsedClass)&&!a.hasClass(u.noChildrenClass)&&(r=a.find(u.listNodeName).last(),this.placeEl.parents(u.listNodeName).length+this.dragDepth<=u.maxDepth&&(r.length?(r=a.children(u.listNodeName).last()).append(this.placeEl):((r=t("<"+u.listNodeName+"/>").addClass(u.listClass)).append(this.placeEl),a.append(r),this.setParent(a)))),c.distX<0&&(this.placeEl.next(u.itemNodeName).length||(o=this.placeEl.parent(),this.placeEl.closest(u.itemNodeName).after(this.placeEl),o.children().length||this.unsetParent(o.parent()))));var h=!1;s||(this.dragEl[0].style.visibility="hidden"),this.pointEl=t(n.elementFromPoint(i.pageX-n.documentElement.scrollLeft,i.pageY-(e.pageYOffset||n.documentElement.scrollTop))),this.dragRootEl.has(this.pointEl).length?(this.isOutsideRoot=!1,this.dragEl[0].style.opacity=1):(this.isOutsideRoot=!0,this.dragEl[0].style.opacity=.5);var f=this.pointEl.closest("."+u.rootClass),d=this.dragRootEl.data("nestable-id")!==f.data("nestable-id");if(this.isOutsideRoot=!f.length,s||(this.dragEl[0].style.visibility="visible"),this.pointEl.hasClass(u.handleClass)&&(this.pointEl=this.pointEl.closest(u.itemNodeName)),1!=u.maxDepth||this.pointEl.hasClass(u.itemClass)||(this.pointEl=this.pointEl.closest("."+u.itemClass)),this.pointEl.hasClass(u.emptyClass))h=!0;else if(!this.pointEl.length||!this.pointEl.hasClass(u.itemClass))return;if(!c.dirAx||d||h){if(d&&u.group!==f.data("nestable-group"))return;if(this.dragDepth-1+this.pointEl.parents(u.listNodeName).length>u.maxDepth)return;var p=i.pageY<this.pointEl.offset().top+this.pointEl.height()/2;o=this.placeEl.parent(),h?((r=t(n.createElement(u.listNodeName)).addClass(u.listClass)).append(this.placeEl),this.pointEl.replaceWith(r)):p?this.pointEl.before(this.placeEl):this.pointEl.after(this.placeEl),o.children().length||this.unsetParent(o.parent()),this.dragRootEl.find(u.itemNodeName).length||this.dragRootEl.append('<div class="'+u.emptyClass+'"/>'),this.dragRootEl=f,d&&(this.hasNewRoot=this.el[0]!==this.dragRootEl[0])}}},t.fn.nestable=function(e){var n=this,i=this,o=function(t){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}var n=t||"-";return e()+e()+n+e()+n+e()+n+e()+n+e()+e()+e()};return n.each(function(){var n=t(this).data("nestable");n?"string"==typeof e&&"function"==typeof n[e]&&(i=n[e]()):(t(this).data("nestable",new r(this,e)),t(this).data("nestable-id",o()))}),i||n}}(window.jQuery||window.Zepto,window,document);var LATIN_MAP={"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xc6":"AE","\xc7":"C","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xd0":"D","\xd1":"N","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\u0150":"O","\xd8":"O","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\u0170":"U","\xdd":"Y","\xde":"TH","\xdf":"ss","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xe6":"ae","\xe7":"c","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xf0":"d","\xf1":"n","\xf2":"o","\xf3":"o","\xf4":"o",
"\xf5":"o","\xf6":"o","\u0151":"o","\xf8":"o","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\u0171":"u","\xfd":"y","\xfe":"th","\xff":"y"},LATIN_SYMBOLS_MAP={"\xa9":"(c)"},GREEK_MAP={"\u03b1":"a","\u03b2":"b","\u03b3":"g","\u03b4":"d","\u03b5":"e","\u03b6":"z","\u03b7":"h","\u03b8":"8","\u03b9":"i","\u03ba":"k","\u03bb":"l","\u03bc":"m","\u03bd":"n","\u03be":"3","\u03bf":"o","\u03c0":"p","\u03c1":"r","\u03c3":"s","\u03c4":"t","\u03c5":"y","\u03c6":"f","\u03c7":"x","\u03c8":"ps","\u03c9":"w","\u03ac":"a","\u03ad":"e","\u03af":"i","\u03cc":"o","\u03cd":"y","\u03ae":"h","\u03ce":"w","\u03c2":"s","\u03ca":"i","\u03b0":"y","\u03cb":"y","\u0390":"i","\u0391":"A","\u0392":"B","\u0393":"G","\u0394":"D","\u0395":"E","\u0396":"Z","\u0397":"H","\u0398":"8","\u0399":"I","\u039a":"K","\u039b":"L","\u039c":"M","\u039d":"N","\u039e":"3","\u039f":"O","\u03a0":"P","\u03a1":"R","\u03a3":"S","\u03a4":"T","\u03a5":"Y","\u03a6":"F","\u03a7":"X","\u03a8":"PS","\u03a9":"W","\u0386":"A","\u0388":"E","\u038a":"I","\u038c":"O","\u038e":"Y","\u0389":"H","\u038f":"W","\u03aa":"I","\u03ab":"Y"},TURKISH_MAP={"\u015f":"s","\u015e":"S","\u0131":"i","\u0130":"I","\xe7":"c","\xc7":"C","\xfc":"u","\xdc":"U","\xf6":"o","\xd6":"O","\u011f":"g","\u011e":"G"},RUSSIAN_MAP={"\u0430":"a","\u0431":"b","\u0432":"v","\u0433":"g","\u0434":"d","\u0435":"e","\u0451":"yo","\u0436":"zh","\u0437":"z","\u0438":"i","\u0439":"j","\u043a":"k","\u043b":"l","\u043c":"m","\u043d":"n","\u043e":"o","\u043f":"p","\u0440":"r","\u0441":"s","\u0442":"t","\u0443":"u","\u0444":"f","\u0445":"h","\u0446":"c","\u0447":"ch","\u0448":"sh","\u0449":"sh","\u044a":"","\u044b":"y","\u044c":"","\u044d":"e","\u044e":"yu","\u044f":"ya","\u0410":"A","\u0411":"B","\u0412":"V","\u0413":"G","\u0414":"D","\u0415":"E","\u0401":"Yo","\u0416":"Zh","\u0417":"Z","\u0418":"I","\u0419":"J","\u041a":"K","\u041b":"L","\u041c":"M","\u041d":"N","\u041e":"O","\u041f":"P","\u0420":"R","\u0421":"S","\u0422":"T","\u0423":"U","\u0424":"F","\u0425":"H","\u0426":"C","\u0427":"Ch","\u0428":"Sh","\u0429":"Sh","\u042a":"","\u042b":"Y","\u042c":"","\u042d":"E","\u042e":"Yu","\u042f":"Ya"},UKRAINIAN_MAP={"\u0404":"Ye","\u0406":"I","\u0407":"Yi","\u0490":"G","\u0454":"ye","\u0456":"i","\u0457":"yi","\u0491":"g"},CZECH_MAP={"\u010d":"c","\u010f":"d","\u011b":"e","\u0148":"n","\u0159":"r","\u0161":"s","\u0165":"t","\u016f":"u","\u017e":"z","\u010c":"C","\u010e":"D","\u011a":"E","\u0147":"N","\u0158":"R","\u0160":"S","\u0164":"T","\u016e":"U","\u017d":"Z"},POLISH_MAP={"\u0105":"a","\u0107":"c","\u0119":"e","\u0142":"l","\u0144":"n","\xf3":"o","\u015b":"s","\u017a":"z","\u017c":"z","\u0104":"A","\u0106":"C","\u0118":"e","\u0141":"L","\u0143":"N","\xd3":"o","\u015a":"S","\u0179":"Z","\u017b":"Z"},LATVIAN_MAP={"\u0101":"a","\u010d":"c","\u0113":"e","\u0123":"g","\u012b":"i","\u0137":"k","\u013c":"l","\u0146":"n","\u0161":"s","\u016b":"u","\u017e":"z","\u0100":"A","\u010c":"C","\u0112":"E","\u0122":"G","\u012a":"i","\u0136":"k","\u013b":"L","\u0145":"N","\u0160":"S","\u016a":"u","\u017d":"Z"},ALL_DOWNCODE_MAPS=new Array;ALL_DOWNCODE_MAPS[0]=LATIN_MAP,ALL_DOWNCODE_MAPS[1]=LATIN_SYMBOLS_MAP,ALL_DOWNCODE_MAPS[2]=GREEK_MAP,ALL_DOWNCODE_MAPS[3]=TURKISH_MAP,ALL_DOWNCODE_MAPS[4]=RUSSIAN_MAP,ALL_DOWNCODE_MAPS[5]=UKRAINIAN_MAP,ALL_DOWNCODE_MAPS[6]=CZECH_MAP,ALL_DOWNCODE_MAPS[7]=POLISH_MAP,ALL_DOWNCODE_MAPS[8]=LATVIAN_MAP;var Downcoder=new Object;Downcoder.Initialize=function(){if(!Downcoder.map){Downcoder.map={},Downcoder.chars="";for(var t in ALL_DOWNCODE_MAPS){var e=ALL_DOWNCODE_MAPS[t];for(var n in e)Downcoder.map[n]=e[n],Downcoder.chars+=n}Downcoder.regex=new RegExp("["+Downcoder.chars+"]|[^"+Downcoder.chars+"]+","g")}},downcode=function(t){Downcoder.Initialize();var e="",n=t.match(Downcoder.regex);if(n)for(var i=0;i<n.length;i++){if(1==n[i].length){var r=Downcoder.map[n[i]];if(null!=r){e+=r;continue}}e+=n[i]}else e=t;return e},Spotlight=function(){var t=[];return{onLoad:function(e){t.push(e)},activate:function(){for(var e=0;e<t.length;e++)t[e].call()}}}(),Blacklight.onLoad(function(){Spotlight.activate()}),Spotlight.onLoad(function(){SpotlightNestable.init()}),function(t){"use strict";function e(e){return this.each(function(){var i=t(this),r=i.data("bs.tab");r||i.data("bs.tab",r=new n(this)),"string"==typeof e&&r[e]()})}var n=function(e){this.element=t(e)};n.VERSION="3.3.7",n.TRANSITION_DURATION=150,n.prototype.show=function(){var e=this.element,n=e.closest("ul:not(.dropdown-menu)"),i=e.data("target");if(i||(i=(i=e.attr("href"))&&i.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var r=n.find(".active:last a"),o=t.Event("hide.bs.tab",{relatedTarget:e[0]}),s=t.Event("show.bs.tab",{relatedTarget:r[0]});if(r.trigger(o),e.trigger(s),!s.isDefaultPrevented()&&!o.isDefaultPrevented()){var a=t(i);this.activate(e.closest("li"),n),this.activate(a,a.parent(),function(){r.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:r[0]})})}}},n.prototype.activate=function(e,i,r){function o(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),a?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu").length&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),r&&r()}var s=i.find("> .active"),a=r&&t.support.transition&&(s.length&&s.hasClass("fade")||!!i.find("> .fade").length);s.length&&a?s.one("bsTransitionEnd",o).emulateTransitionEnd(n.TRANSITION_DURATION):o(),s.removeClass("in")};var i=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=n,t.fn.tab.noConflict=function(){return t.fn.tab=i,this};var r=function(n){n.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',r).on("click.bs.tab.data-api",'[data-toggle="pill"]',r)}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var i=t(this),r=i.data("bs.tooltip"),o="object"==typeof e&&e;!r&&/destroy|hide/.test(e)||(r||i.data("bs.tooltip",r=new n(this,o)),"string"==typeof e&&r[e]())})}var n=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)};n.VERSION="3.3.7",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(e,n,i){if(this.enabled=!0,this.type=e,this.$element=t(n),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&t(t.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var r=this.options.trigger.split(" "),o=r.length;o--;){var s=r[o];if("click"==s)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=s){var a="hover"==s?"mouseenter":"focusin",u="hover"==s?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(u+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(e){return(e=t.extend({},this.getDefaults(),this.$element.data(),e)).delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},n.prototype.getDelegateOptions=function(){var e={},n=this.getDefaults();return this._options&&t.each(this._options,function(t,i){n[t]!=i&&(e[t]=i)}),e},n.prototype.enter=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),e instanceof t.Event&&(n.inState["focusin"==e.type?"focus":"hover"]=!0),n.tip().hasClass("in")||"in"==n.hoverState)n.hoverState="in";else{if(clearTimeout(n.timeout),n.hoverState="in",!n.options.delay||!n.options.delay.show)return n.show();n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)}},n.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},n.prototype.leave=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),e instanceof t.Event&&(n.inState["focusout"==e.type?"focus":"hover"]=!1),!n.isInStateTrue()){if(clearTimeout(n.timeout),n.hoverState="out",!n.options.delay||!n.options.delay.hide)return n.hide();n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)}},n.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var i=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!i)return;var r=this,o=this.tip(),s=this.getUID(this.type);this.setContent(),o.attr("id",s),this.$element.attr("aria-describedby",s),this.options.animation&&o.addClass("fade");var a="function"==typeof this.options.placement?this.options.placement.call(this,o[0],this.$element[0]):this.options.placement,u=/\s?auto?\s?/i,c=u.test(a);c&&(a=a.replace(u,"")||"top"),o.detach().css({top:0,left:0,display:"block"}).addClass(a).data("bs."+this.type,this),this.options.container?o.appendTo(this.options.container):o.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var l=this.getPosition(),h=o[0].offsetWidth,f=o[0].offsetHeight;if(c){var d=a,p=this.getPosition(this.$viewport);a="bottom"==a&&l.bottom+f>p.bottom?"top":"top"==a&&l.top-f<p.top?"bottom":"right"==a&&l.right+h>p.width?"left":"left"==a&&l.left-h<p.left?"right":a,o.removeClass(d).addClass(a)}var m=this.getCalculatedOffset(a,l,h,f);this.applyPlacement(m,a);var g=function(){var t=r.hoverState;r.$element.trigger("shown.bs."+r.type),r.hoverState=null,"out"==t&&r.leave(r)};t.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",g).emulateTransitionEnd(n.TRANSITION_DURATION):g()}},n.prototype.applyPlacement=function(e,n){var i=this.tip(),r=i[0].offsetWidth,o=i[0].offsetHeight,s=parseInt(i.css("margin-top"),10),a=parseInt(i.css("margin-left"),10);isNaN(s)&&(s=0),isNaN(a)&&(a=0),e.top+=s,e.left+=a,t.offset.setOffset(i[0],t.extend({using:function(t){i.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),i.addClass("in");var u=i[0].offsetWidth,c=i[0].offsetHeight;"top"==n&&c!=o&&(e.top=e.top+o-c);var l=this.getViewportAdjustedDelta(n,e,u,c);l.left?e.left+=l.left:e.top+=l.top;var h=/top|bottom/.test(n),f=h?2*l.left-r+u:2*l.top-o+c,d=h?"offsetWidth":"offsetHeight";i.offset(e),this.replaceArrow(f,i[0][d],h)},n.prototype.replaceArrow=function(t,e,n){this.arrow().css(n?"left":"top",50*(1-t/e)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},n.prototype.hide=function(e){function i(){"in"!=r.hoverState&&o.detach(),r.$element&&r.$element.removeAttr("aria-describedby").trigger("hidden.bs."+r.type),e&&e()}var r=this,o=t(this.$tip),s=t.Event("hide.bs."+this.type);if(this.$element.trigger(s),!s.isDefaultPrevented())return o.removeClass("in"),t.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i(),this.hoverState=null,this},n.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(e){var n=(e=e||this.$element)[0],i="BODY"==n.tagName,r=n.getBoundingClientRect();null==r.width&&(r=t.extend({},r,{width:r.right-r.left,height:r.bottom-r.top}));var o=window.SVGElement&&n instanceof window.SVGElement,s=i?{top:0,left:0}:o?null:e.offset(),a={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},u=i?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},r,a,u,s)},n.prototype.getCalculatedOffset=function(t,e,n,i){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"==t?{top:e.top-i,left:e.left+e.width/2-n/2}:"left"==t?{top:e.top+e.height/2-i/2,left:e.left-n}:{top:e.top+e.height/2-i/2,left:e.left+e.width}},n.prototype.getViewportAdjustedDelta=function(t,e,n,i){var r={top:0,left:0};if(!this.$viewport)return r;var o=this.options.viewport&&this.options.viewport.padding||0,s=this.getPosition(this.$viewport);if(/right|left/.test(t)){var a=e.top-o-s.scroll,u=e.top+o-s.scroll+i;a<s.top?r.top=s.top-a:u>s.top+s.height&&(r.top=s.top+s.height-u)}else{var c=e.left-o,l=e.left+o+n;c<s.left?r.left=s.left-c:l>s.right&&(r.left=s.left+s.width-l)}return r},n.prototype.getTitle=function(){var t=this.$element,e=this.options;return t.attr("data-original-title")||("function"==typeof e.title?e.title.call(t[0]):e.title)},n.prototype.getUID=function(t){do{t+=~~(1e6*Math.random())}while(document.getElementById(t));return t},n.prototype.tip=function(){if(!this.$tip&&(this.$tip=t(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(e){var n=this;e&&((n=t(e.currentTarget).data("bs."+this.type))||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n))),e?(n.inState.click=!n.inState.click,n.isInStateTrue()?n.enter(n):n.leave(n)):n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null,t.$element=null})};var i=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=n,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=i,this}}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var i=t(this),r=i.data("bs.popover"),o="object"==typeof e&&e;!r&&/destroy|hide/.test(e)||(r||i.data("bs.popover",r=new n(this,o)),"string"==typeof e&&r[e]())})}var n=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.3.7",n.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var i=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=n,t.fn.popover.noConflict=function(){return t.fn.popover=i,this}}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var i=t(this),r=i.data("bs.carousel"),o=t.extend({},n.DEFAULTS,i.data(),"object"==typeof e&&e),s="string"==typeof e?e:o.slide;r||i.data("bs.carousel",r=new n(this,o)),"number"==typeof e?r.to(e):s?r[s]():o.interval&&r.pause().cycle()})}var n=function(e,n){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};n.VERSION="3.3.7",n.TRANSITION_DURATION=600,n.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},n.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},n.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},n.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},n.prototype.getItemForDirection=function(t,e){var n=this.getItemIndex(e);if(("prev"==t&&0===n||"next"==t&&n==this.$items.length-1)&&!this.options.wrap)return e;var i=(n+("prev"==t?-1:1))%this.$items.length;return this.$items.eq(i)},n.prototype.to=function(t){var e=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(t>this.$items.length-1||t<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):n==t?this.pause().cycle():this.slide(t>n?"next":"prev",this.$items.eq(t))},n.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},n.prototype.next=function(){if(!this.sliding)return this.slide("next")},n.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},n.prototype.slide=function(e,i){var r=this.$element.find(".item.active"),o=i||this.getItemForDirection(e,r),s=this.interval,a="next"==e?"left":"right",u=this;if(o.hasClass("active"))return this.sliding=!1;var c=o[0],l=t.Event("slide.bs.carousel",{relatedTarget:c,direction:a});if(this.$element.trigger(l),!l.isDefaultPrevented()){if(this.sliding=!0,s&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var h=t(this.$indicators.children()[this.getItemIndex(o)]);h&&h.addClass("active")}var f=t.Event("slid.bs.carousel",{relatedTarget:c,direction:a});return t.support.transition&&this.$element.hasClass("slide")?(o.addClass(e),o[0].offsetWidth,r.addClass(a),o.addClass(a),r.one("bsTransitionEnd",function(){o.removeClass([e,a].join(" ")).addClass("active"),r.removeClass(["active",a].join(" ")),u.sliding=!1,setTimeout(function(){u.$element.trigger(f)},0)}).emulateTransitionEnd(n.TRANSITION_DURATION)):(r.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger(f)),s&&this.cycle(),this}};var i=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=n,t.fn.carousel.noConflict=function(){return t.fn.carousel=i,this};var r=function(n){var i,r=t(this),o=t(r.attr("data-target")||(i=r.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""));if(o.hasClass("carousel")){var s=t.extend({},o.data(),r.data()),a=r.attr("data-slide-to");a&&(s.interval=!1),e.call(o,s),a&&o.data("bs.carousel").to(a),n.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",r).on("click.bs.carousel.data-api","[data-slide-to]",r),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var n=t(this);e.call(n,n.data())})})}(jQuery),function(t){"use strict";function e(e,n){this.itemsArray=[],this.$element=t(e),this.$element.hide(),this.isSelect="SELECT"===e.tagName,this.multiple=this.isSelect&&e.hasAttribute("multiple"),this.objectItems=n&&n.itemValue,this.placeholderText=e.hasAttribute("placeholder")?this.$element.attr("placeholder"):"",this.inputSize=Math.max(1,this.placeholderText.length),this.$container=t('<div class="bootstrap-tagsinput"></div>'),this.$input=t('<input size="'+this.inputSize+'" type="text" placeholder="'+this.placeholderText+'"/>').appendTo(this.$container),this.$element.after(this.$container),this.build(n)}function n(t,e){if("function"!=typeof t[e]){var n=t[e];t[e]=function(t){return t[n]}}}function i(t,e){if("function"!=typeof t[e]){var n=t[e];t[e]=function(){return n}}}function r(t){return t?a.text(t).html():""}function o(t){var e=0;if(document.selection){t.focus();var n=document.selection.createRange();n.moveStart("character",-t.value.length),e=n.text.length}else(t.selectionStart||"0"==t.selectionStart)&&(e=t.selectionStart);return e}var s={tagClass:function(){return"label label-info"},itemValue:function(t){return t?t.toString():t},itemText:function(t){return this.itemValue(t)},freeInput:!0,maxTags:undefined,confirmKeys:[13],onTagExists:function(t,e){e.hide().fadeIn()}};e.prototype={constructor:e,add:function(e,n){var i=this;if(!(i.options.maxTags&&i.itemsArray.length>=i.options.maxTags)&&(!1===e||e)){if("object"==typeof e&&!i.objectItems)throw"Can't add objects when itemValue option is not set";if(!e.toString().match(/^\s*$/)){if(i.isSelect&&!i.multiple&&i.itemsArray.length>0&&i.remove(i.itemsArray[0]),"string"==typeof e&&"INPUT"===this.$element[0].tagName){var o=e.split(",");if(o.length>1){for(var s=0;s<o.length;s++)this.add(o[s],!0);return void(n||i.pushVal())}}var a=i.options.itemValue(e),u=i.options.itemText(e),c=i.options.tagClass(e),l=t.grep(i.itemsArray,function(t){return i.options.itemValue(t)===a})[0];if(l){if(i.options.onTagExists){var h=t(".tag",i.$container).filter(function(){return t(this).data("item")===l});i.options.onTagExists(e,h)}}else{i.itemsArray.push(e);var f=t('<span class="tag '+r(c)+'">'+r(u)+'<span data-role="remove"></span></span>');if(f.data("item",e),i.findInputWrapper().before(f),f.after(" "),i.isSelect&&!t('option[value="'+escape(a)+'"]',i.$element)[0]){var d=t("<option selected>"+r(u)+"</option>");d.data("item",e),d.attr("value",a),i.$element.append(d)}n||i.pushVal(),i.options.maxTags===i.itemsArray.length&&i.$container.addClass("bootstrap-tagsinput-max"),i.$element.trigger(t.Event("itemAdded",{item:e}))}}}},remove:function(e,n){var i=this;i.objectItems&&(e="object"==typeof e?t.grep(i.itemsArray,function(t){return i.options.itemValue(t)==i.options.itemValue(e)})[0]:t.grep(i.itemsArray,function(t){return i.options.itemValue(t)==e})[0]),e&&(t(".tag",i.$container).filter(function(){return t(this).data("item")===e}).remove(),t("option",i.$element).filter(function(){return t(this).data("item")===e}).remove(),i.itemsArray.splice(t.inArray(e,i.itemsArray),1)),n||i.pushVal(),i.options.maxTags>i.itemsArray.length&&i.$container.removeClass("bootstrap-tagsinput-max"),i.$element.trigger(t.Event("itemRemoved",{item:e}))},removeAll:function(){var e=this;for(t(".tag",e.$container).remove(),t("option",e.$element).remove();e.itemsArray.length>0;)e.itemsArray.pop();e.pushVal(),e.options.maxTags&&!this.isEnabled()&&this.enable()},refresh:function(){var e=this;t(".tag",e.$container).each(function(){var n=t(this),i=n.data("item"),o=e.options.itemValue(i),s=e.options.itemText(i),a=e.options.tagClass(i);if(n.attr("class",null),n.addClass("tag "+r(a)),n.contents().filter(function(){return 3==this.nodeType})[0].nodeValue=r(s),e.isSelect){t("option",e.$element).filter(function(){return t(this).data("item")===i}).attr("value",o)}})},items:function(){return this.itemsArray},pushVal:function(){var e=this,n=t.map(e.items(),function(t){return e.options.itemValue(t).toString()});e.$element.val(n,!0).trigger("change")},build:function(e){var r=this;r.options=t.extend({},s,e);var a=r.options.typeahead||{};r.objectItems&&(r.options.freeInput=!1),n(r.options,"itemValue"),n(r.options,"itemText"),n(r.options,"tagClass"),r.options.source&&(a.source=r.options.source),a.source&&t.fn.typeahead&&(i(a,"source"),r.$input.typeahead({source:function(e,n){function i(t){for(var e=[],i=0;i<t.length;i++){var s=r.options.itemText(t[i]);o[s]=t[i],e.push(s)}n(e)}this.map={};var o=this.map,s=a.source(e);t.isFunction(s.success)?s.success(i):t.when(s).then(i)},updater:function(t){r.add(this.map[t])},matcher:function(t){return-1!==t.toLowerCase().indexOf(this.query.trim().toLowerCase())},sorter:function(t){return t.sort()},highlighter:function(t){var e=new RegExp("("+this.query+")","gi");return t.replace(e,"<strong>$1</strong>")}})),r.$container.on("click",t.proxy(function(){r.$input.focus()},r)),r.$container.on("keydown","input",t.proxy(function(e){var n=t(e.target),i=r.findInputWrapper();switch(e.which){case 8:if(0===o(n[0])){var s=i.prev();s&&r.remove(s.data("item"))}break;case 46:if(0===o(n[0])){var a=i.next();a&&r.remove(a.data("item"))}break;case 37:var u=i.prev();0===n.val().length&&u[0]&&(u.before(i),n.focus());break;case 39:var c=i.next();0===n.val().length&&c[0]&&(c.after(i),n.focus());break;default:r.options.freeInput&&t.inArray(e.which,r.options.confirmKeys)>=0&&(r.add(n.val()),n.val(""),e.preventDefault())}n.attr("size",Math.max(this.inputSize,n.val().length))},r)),r.$container.on("click","[data-role=remove]",t.proxy(function(e){r.remove(t(e.target).closest(".tag").data("item"))},r)),r.options.itemValue===s.itemValue&&("INPUT"===r.$element[0].tagName?r.add(r.$element.val()):t("option",r.$element).each(function(){r.add(t(this).attr("value"),!0)}))},destroy:function(){var t=this;t.$container.off("keypress","input"),t.$container.off("click","[role=remove]"),t.$container.remove(),t.$element.removeData("tagsinput"),t.$element.show()},focus:function(){this.$input.focus()},input:function(){return this.$input},findInputWrapper:function(){for(var e=this.$input[0],n=this.$container[0];e&&e.parentNode!==n;)e=e.parentNode;return t(e)}},t.fn.tagsinput=function(n,i){var r=[];return this.each(function(){var o=t(this).data("tagsinput");if(o){var s=o[n](i);s!==undefined&&r.push(s)}else o=new e(this,n),t(this).data("tagsinput",o),r.push(o),"SELECT"===this.tagName&&t("option",t(this)).attr("selected","selected"),t(this).val(t(this).val())}),"string"==typeof n?r.length>1?r:r[0]:r},t.fn.tagsinput.Constructor=e;var a=t("<div />");t(function(){t("input[data-role=tagsinput], select[multiple][data-role=tagsinput]").tagsinput()})}(window.jQuery),function(t){"use strict";t.fn.serializeJSON=function(e){var n,i,r,o,s,a,u;return a=t.serializeJSON,u=a.optsWithDefaults(e),a.validateOptions(u),i=this.serializeArray(),a.readCheckboxUncheckedValues(i,this,u),n={},t.each(i,function(t,e){r=a.splitInputNameIntoKeysArray(e.name),"skip"!==(o=r.pop())&&(s=a.parseValue(e.value,o,u),u.parseWithFunction&&"_"===o&&(s=u.parseWithFunction(s,e.name)),a.deepSet(n,r,s,u))}),n},t.serializeJSON={defaultOptions:{parseNumbers:!1,parseBooleans:!1,parseNulls:!1,parseAll:!1,parseWithFunction:null,checkboxUncheckedValue:undefined,useIntKeysAsArrayIndex:!1},optsWithDefaults:function(e){var n,i;return null==e&&(e={}),n=t.serializeJSON,i=n.optWithDefaults("parseAll",e),{parseNumbers:i||n.optWithDefaults("parseNumbers",e),parseBooleans:i||n.optWithDefaults("parseBooleans",e),parseNulls:i||n.optWithDefaults("parseNulls",e),parseWithFunction:n.optWithDefaults("parseWithFunction",e),checkboxUncheckedValue:n.optWithDefaults("checkboxUncheckedValue",e),useIntKeysAsArrayIndex:n.optWithDefaults("useIntKeysAsArrayIndex",e)}},optWithDefaults:function(e,n){return!1!==n[e]&&""!==n[e]&&(n[e]||t.serializeJSON.defaultOptions[e])},validateOptions:function(t){var e,n;n=["parseNumbers","parseBooleans","parseNulls","parseAll","parseWithFunction","checkboxUncheckedValue","useIntKeysAsArrayIndex"];for(e in t)if(-1===n.indexOf(e))throw new Error("serializeJSON ERROR: invalid option '"+e+"'. Please use one of "+n.join(","))},parseValue:function(e,n,i){var r;return r=t.serializeJSON,"string"==n?e:"number"==n||i.parseNumbers&&r.isNumeric(e)?Number(e):"boolean"==n||i.parseBooleans&&("true"===e||"false"===e)?-1===["false","null","undefined","","0"].indexOf(e):"null"==n||i.parseNulls&&"null"==e?-1!==["false","null","undefined","","0"].indexOf(e)?null:e:"array"==n||"object"==n?JSON.parse(e):"auto"==n?r.parseValue(e,null,{parseNumbers:!0,parseBooleans:!0,parseNulls:!0}):e},isObject:function(t){return t===Object(t)},isUndefined:function(t){return void 0===t},isValidArrayIndex:function(t){return/^[0-9]+$/.test(String(t))},isNumeric:function(t){return t-parseFloat(t)>=0},splitInputNameIntoKeysArray:function(e){var n,i,r,o,s;return s=t.serializeJSON,o=s.extractTypeFromInputName(e),i=o[0],r=o[1],n=i.split("["),""===(n=t.map(n,function(t){return t.replace(/]/g,"")}))[0]&&n.shift(),n.push(r),n},extractTypeFromInputName:function(e){var n;if(t.serializeJSON,n=e.match(/(.*):([^:]+)$/)){var i=["string","number","boolean","null","array","object","skip","auto"];if(-1!==i.indexOf(n[2]))return[n[1],n[2]];throw new Error("serializeJSON ERROR: Invalid type "+n[2]+" found in input name '"+e+"', please use one of "+i.join(", "))}return[e,"_"]},deepSet:function(e,n,i,r){var o,s,a,u,c,l;if(null==r&&(r={}),(l=t.serializeJSON).isUndefined(e))throw new Error("ArgumentError: param 'o' expected to be an object or array, found undefined");if(!n||0===n.length)throw new Error("ArgumentError: param 'keys' expected to be an array with least one element");o=n[0],1===n.length?""===o?e.push(i):e[o]=i:(s=n[1],""===o&&(c=e[u=e.length-1],o=l.isObject(c)&&(l.isUndefined(c[s])||n.length>2)?u:u+1),l.isUndefined(e[o])&&(""===s?e[o]=[]:r.useIntKeysAsArrayIndex&&l.isValidArrayIndex(s)?e[o]=[]:e[o]={}),a=n.slice(1),l.deepSet(e[o],a,i,r))},readCheckboxUncheckedValues:function(e,n,i){var r,o,s,a;null==i&&(i={}),a=t.serializeJSON,r="input[type=checkbox][name]:not(:checked,[disabled])",n.find(r).add(n.filter(r)).each(function(n,r){o=t(r),(s=o.attr("data-unchecked-value"))?e.push({name:r.name,value:s}):a.isUndefined(i.checkboxUncheckedValue)||e.push({name:r.name,value:i.checkboxUncheckedValue})})}}}(window.jQuery||window.Zepto||window.$),function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Clipboard=t()}}(function(){var t;return function e(t,n,i){function r(s,a){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return r(n||e)},l,l.exports,e,t,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(t,e){function n(t,e){for(;t&&t.nodeType!==i;){if("function"==typeof t.matches&&t.matches(e))return t;t=t.parentNode}}var i=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var r=Element.prototype;r.matches=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector}e.exports=n},{}],2:[function(t,e){function n(t,e,n,r,o){var s=i.apply(this,arguments);return t.addEventListener(n,s,o),{destroy:function(){t.removeEventListener(n,s,o)}}}function i(t,e,n,i){return function(n){n.delegateTarget=r(n.target,e),n.delegateTarget&&i.call(t,n)}}var r=t("./closest");e.exports=n},{"./closest":1}],3:[function(t,e,n){n.node=function(t){return t!==undefined&&t instanceof HTMLElement&&1===t.nodeType},n.nodeList=function(t){var e=Object.prototype.toString.call(t);return t!==undefined&&("[object NodeList]"===e||"[object HTMLCollection]"===e)&&"length"in t&&(0===t.length||n.node(t[0]))},n.string=function(t){return"string"==typeof t||t instanceof String},n.fn=function(t){return"[object Function]"===Object.prototype.toString.call(t)}},{}],4:[function(t,e){function n(t,e,n){if(!t&&!e&&!n)throw new Error("Missing required arguments")
;if(!s.string(e))throw new TypeError("Second argument must be a String");if(!s.fn(n))throw new TypeError("Third argument must be a Function");if(s.node(t))return i(t,e,n);if(s.nodeList(t))return r(t,e,n);if(s.string(t))return o(t,e,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function i(t,e,n){return t.addEventListener(e,n),{destroy:function(){t.removeEventListener(e,n)}}}function r(t,e,n){return Array.prototype.forEach.call(t,function(t){t.addEventListener(e,n)}),{destroy:function(){Array.prototype.forEach.call(t,function(t){t.removeEventListener(e,n)})}}}function o(t,e,n){return a(document.body,t,e,n)}var s=t("./is"),a=t("delegate");e.exports=n},{"./is":3,delegate:2}],5:[function(t,e){function n(t){var e;if("SELECT"===t.nodeName)t.focus(),e=t.value;else if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName){var n=t.hasAttribute("readonly");n||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),n||t.removeAttribute("readonly"),e=t.value}else{t.hasAttribute("contenteditable")&&t.focus();var i=window.getSelection(),r=document.createRange();r.selectNodeContents(t),i.removeAllRanges(),i.addRange(r),e=i.toString()}return e}e.exports=n},{}],6:[function(t,e){function n(){}n.prototype={on:function(t,e,n){var i=this.e||(this.e={});return(i[t]||(i[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){function i(){r.off(t,i),e.apply(n,arguments)}var r=this;return i._=e,this.on(t,i,n)},emit:function(t){for(var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),i=0,r=n.length;i<r;i++)n[i].fn.apply(n[i].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),i=n[t],r=[];if(i&&e)for(var o=0,s=i.length;o<s;o++)i[o].fn!==e&&i[o].fn._!==e&&r.push(i[o]);return r.length?n[t]=r:delete n[t],this}},e.exports=n},{}],7:[function(e,n,i){!function(r,o){if("function"==typeof t&&t.amd)t(["module","select"],o);else if(void 0!==i)o(n,e("select"));else{var s={exports:{}};o(s,r.select),r.clipboardAction=s.exports}}(this,function(t,e){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=n(e),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(){function t(e){i(this,t),this.resolveOptions(e),this.initSelection()}return s(t,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};this.action=t.action,this.container=t.container,this.emitter=t.emitter,this.target=t.target,this.text=t.text,this.trigger=t.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var t=this,e="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return t.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[e?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=n+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,r["default"])(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,r["default"])(this.target),this.copyText()}},{key:"copyText",value:function(){var t=void 0;try{t=document.execCommand(this.action)}catch(e){t=!1}this.handleResult(t)}},{key:"handleResult",value:function(t){this.emitter.emit(t?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"copy";if(this._action=t,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(t){if(t!==undefined){if(!t||"object"!==(void 0===t?"undefined":o(t))||1!==t.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(t.hasAttribute("readonly")||t.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=t}},get:function(){return this._target}}]),t}();t.exports=a})},{select:5}],8:[function(e,n,i){!function(r,o){if("function"==typeof t&&t.amd)t(["module","./clipboard-action","tiny-emitter","good-listener"],o);else if(void 0!==i)o(n,e("./clipboard-action"),e("tiny-emitter"),e("good-listener"));else{var s={exports:{}};o(s,r.clipboardAction,r.tinyEmitter,r.goodListener),r.clipboard=s.exports}}(this,function(t,e,n,i){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function u(t,e){var n="data-clipboard-"+t;if(e.hasAttribute(n))return e.getAttribute(n)}var c=r(e),l=r(n),h=r(i),f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),p=function(){function t(e,n){o(this,t);var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.resolveOptions(n),i.listenClick(e),i}return a(t,l["default"]),d(t,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};this.action="function"==typeof t.action?t.action:this.defaultAction,this.target="function"==typeof t.target?t.target:this.defaultTarget,this.text="function"==typeof t.text?t.text:this.defaultText,this.container="object"===f(t.container)?t.container:document.body}},{key:"listenClick",value:function(t){var e=this;this.listener=(0,h["default"])(t,"click",function(t){return e.onClick(t)})}},{key:"onClick",value:function(t){var e=t.delegateTarget||t.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new c["default"]({action:this.action(e),target:this.target(e),text:this.text(e),container:this.container,trigger:e,emitter:this})}},{key:"defaultAction",value:function(t){return u("action",t)}},{key:"defaultTarget",value:function(t){var e=u("target",t);if(e)return document.querySelector(e)}},{key:"defaultText",value:function(t){return u("text",t)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:["copy","cut"],e="string"==typeof t?[t]:t,n=!!document.queryCommandSupported;return e.forEach(function(t){n=n&&!!document.queryCommandSupported(t)}),n}}]),t}();t.exports=p})},{"./clipboard-action":7,"good-listener":4,"tiny-emitter":6}]},{},[8])(8)}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.L={})}(this,function(t){"use strict";function e(t){var e,n,i,r;for(n=1,i=arguments.length;n<i;n++){r=arguments[n];for(e in r)t[e]=r[e]}return t}function n(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var i=n.call(arguments,2);return function(){return t.apply(e,i.length?i.concat(n.call(arguments)):arguments)}}function i(t){return t._leaflet_id=t._leaflet_id||++me,t._leaflet_id}function r(t,e,n){var i,r,o,s;return s=function(){i=!1,r&&(o.apply(n,r),r=!1)},o=function(){i?r=arguments:(t.apply(n,arguments),setTimeout(s,e),i=!0)}}function o(t,e,n){var i=e[1],r=e[0],o=i-r;return t===i&&n?t:((t-r)%o+o)%o+r}function s(){return!1}function a(t,e){var n=Math.pow(10,e||5);return Math.round(t*n)/n}function u(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function c(t){return u(t).split(/\s+/)}function l(t,e){t.hasOwnProperty("options")||(t.options=t.options?pe(t.options):{});for(var n in e)t.options[n]=e[n];return t.options}function h(t,e,n){var i=[];for(var r in t)i.push(encodeURIComponent(n?r.toUpperCase():r)+"="+encodeURIComponent(t[r]));return(e&&-1!==e.indexOf("?")?"&":"?")+i.join("&")}function f(t,e){return t.replace(ge,function(t,n){var i=e[n];if(i===undefined)throw new Error("No value provided for variable "+t);return"function"==typeof i&&(i=i(e)),i})}function d(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}function p(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}function m(t){var e=+new Date,n=Math.max(0,16-(e-ye));return ye=e+n,window.setTimeout(t,n)}function g(t,e,i){if(!i||be!==m)return be.call(window,n(t,e));t.call(e)}function v(t){t&&xe.call(window,t)}function _(){}function y(t){if(L&&L.Mixin){t=ve(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}function b(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e}function x(t,e,n){return t instanceof b?t:ve(t)?new b(t[0],t[1]):t===undefined||null===t?t:"object"==typeof t&&"x"in t&&"y"in t?new b(t.x,t.y):new b(t,e,n)}function w(t,e){if(t)for(var n=e?[t,e]:t,i=0,r=n.length;i<r;i++)this.extend(n[i])}function k(t,e){return!t||t instanceof w?t:new w(t,e)}function E(t,e){if(t)for(var n=e?[t,e]:t,i=0,r=n.length;i<r;i++)this.extend(n[i])}function S(t,e){return t instanceof E?t:new E(t,e)}function T(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,n!==undefined&&(this.alt=+n)}function C(t,e,n){return t instanceof T?t:ve(t)&&"object"!=typeof t[0]?3===t.length?new T(t[0],t[1],t[2]):2===t.length?new T(t[0],t[1]):null:t===undefined||null===t?t:"object"==typeof t&&"lat"in t?new T(t.lat,"lng"in t?t.lng:t.lon,t.alt):e===undefined?null:new T(t,e,n)}function M(t,e,n,i){if(ve(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=n,this._d=i}function I(t,e,n,i){return new M(t,e,n,i)}function A(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function P(t,e){var n,i,r,o,s,a,u="";for(n=0,r=t.length;n<r;n++){for(i=0,o=(s=t[n]).length;i<o;i++)a=s[i],u+=(i?"L":"M")+a.x+" "+a.y;u+=e?cn?"z":"x":""}return u||"M0 0"}function O(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}function D(t,e,n,i){return"touchstart"===e?B(t,n,i):"touchmove"===e?$(t,n,i):"touchend"===e&&U(t,n,i),this}function N(t,e,n){var i=t["_leaflet_"+e+n];return"touchstart"===e?t.removeEventListener(fn,i,!1):"touchmove"===e?t.removeEventListener(dn,i,!1):"touchend"===e&&(t.removeEventListener(pn,i,!1),t.removeEventListener(mn,i,!1)),this}function B(t,e,i){var r=n(function(t){if("mouse"!==t.pointerType&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE){if(!(gn.indexOf(t.target.tagName)<0))return;Q(t)}F(t,e)});t["_leaflet_touchstart"+i]=r,t.addEventListener(fn,r,!1),_n||(document.documentElement.addEventListener(fn,z,!0),document.documentElement.addEventListener(dn,j,!0),document.documentElement.addEventListener(pn,R,!0),document.documentElement.addEventListener(mn,R,!0),_n=!0)}function z(t){vn[t.pointerId]=t,yn++}function j(t){vn[t.pointerId]&&(vn[t.pointerId]=t)}function R(t){delete vn[t.pointerId],yn--}function F(t,e){t.touches=[];for(var n in vn)t.touches.push(vn[n]);t.changedTouches=[t],e(t)}function $(t,e,n){var i=function(t){(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons)&&F(t,e)};t["_leaflet_touchmove"+n]=i,t.addEventListener(dn,i,!1)}function U(t,e,n){var i=function(t){F(t,e)};t["_leaflet_touchend"+n]=i,t.addEventListener(pn,i,!1),t.addEventListener(mn,i,!1)}function H(t,e,n){function i(t){var e;if(nn){if(!ze||"mouse"===t.pointerType)return;e=yn}else e=t.touches.length;if(!(e>1)){var n=Date.now(),i=n-(o||n);s=t.touches?t.touches[0]:t,a=i>0&&i<=u,o=n}}function r(t){if(a&&!s.cancelBubble){if(nn){if(!ze||"mouse"===t.pointerType)return;var n,i,r={};for(i in s)n=s[i],r[i]=n&&n.bind?n.bind(s):n;s=r}s.type="dblclick",e(s),o=null}}var o,s,a=!1,u=250;return t[wn+bn+n]=i,t[wn+xn+n]=r,t[wn+"dblclick"+n]=e,t.addEventListener(bn,i,!1),t.addEventListener(xn,r,!1),t.addEventListener("dblclick",e,!1),this}function q(t,e){var n=t[wn+bn+e],i=t[wn+xn+e],r=t[wn+"dblclick"+e];return t.removeEventListener(bn,n,!1),t.removeEventListener(xn,i,!1),ze||t.removeEventListener("dblclick",r,!1),this}function Z(t,e,n,i){if("object"==typeof e)for(var r in e)W(t,r,e[r],n);else for(var o=0,s=(e=c(e)).length;o<s;o++)W(t,e[o],n,i);return this}function V(t,e,n,i){if("object"==typeof e)for(var r in e)K(t,r,e[r],n);else if(e)for(var o=0,s=(e=c(e)).length;o<s;o++)K(t,e[o],n,i);else{for(var a in t[kn])K(t,a,t[kn][a]);delete t[kn]}return this}function W(t,e,n,r){var o=e+i(n)+(r?"_"+i(r):"");if(t[kn]&&t[kn][o])return this;var s=function(e){return n.call(r||t,e||window.event)},a=s;nn&&0===e.indexOf("touch")?D(t,e,s,o):!rn||"dblclick"!==e||!H||nn&&Ue?"addEventListener"in t?"mousewheel"===e?t.addEventListener("onwheel"in t?"wheel":"mousewheel",s,!1):"mouseenter"===e||"mouseleave"===e?(s=function(e){e=e||window.event,rt(t,e)&&a(e)},t.addEventListener("mouseenter"===e?"mouseover":"mouseout",s,!1)):("click"===e&&Re&&(s=function(t){ot(t,a)}),t.addEventListener(e,s,!1)):"attachEvent"in t&&t.attachEvent("on"+e,s):H(t,s,o),t[kn]=t[kn]||{},t[kn][o]=s}function K(t,e,n,r){var o=e+i(n)+(r?"_"+i(r):""),s=t[kn]&&t[kn][o];if(!s)return this;nn&&0===e.indexOf("touch")?N(t,e,o):rn&&"dblclick"===e&&q?q(t,o):"removeEventListener"in t?"mousewheel"===e?t.removeEventListener("onwheel"in t?"wheel":"mousewheel",s,!1):t.removeEventListener("mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,s,!1):"detachEvent"in t&&t.detachEvent("on"+e,s),t[kn][o]=null}function G(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,it(t),this}function Y(t){return W(t,"mousewheel",G),this}function X(t){return Z(t,"mousedown touchstart dblclick",G),W(t,"click",nt),this}function Q(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function J(t){return Q(t),G(t),this}function tt(t,e){if(!e)return new b(t.clientX,t.clientY);var n=e.getBoundingClientRect();return new b(t.clientX-n.left-e.clientLeft,t.clientY-n.top-e.clientTop)}function et(t){return ze?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/En:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}function nt(t){Sn[t.type]=!0}function it(t){var e=Sn[t.type];return Sn[t.type]=!1,e}function rt(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(i){return!1}return n!==t}function ot(t,e){var n=t.timeStamp||t.originalEvent&&t.originalEvent.timeStamp,i=Ce&&n-Ce;i&&i>100&&i<500||t.target._simulatedClick&&!t._simulated?J(t):(Ce=n,e(t))}function st(t){return"string"==typeof t?document.getElementById(t):t}function at(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||"auto"===n)&&document.defaultView){var i=document.defaultView.getComputedStyle(t,null);n=i?i[e]:null}return"auto"===n?null:n}function ut(t,e,n){var i=document.createElement(t);return i.className=e||"",n&&n.appendChild(i),i}function ct(t){var e=t.parentNode;e&&e.removeChild(t)}function lt(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function ht(t){var e=t.parentNode;e.lastChild!==t&&e.appendChild(t)}function ft(t){var e=t.parentNode;e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function dt(t,e){if(t.classList!==undefined)return t.classList.contains(e);var n=vt(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function pt(t,e){if(t.classList!==undefined)for(var n=c(e),i=0,r=n.length;i<r;i++)t.classList.add(n[i]);else if(!dt(t,e)){var o=vt(t);gt(t,(o?o+" ":"")+e)}}function mt(t,e){t.classList!==undefined?t.classList.remove(e):gt(t,u((" "+vt(t)+" ").replace(" "+e+" "," ")))}function gt(t,e){t.className.baseVal===undefined?t.className=e:t.className.baseVal=e}function vt(t){return t.className.baseVal===undefined?t.className:t.className.baseVal}function _t(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&yt(t,e)}function yt(t,e){var n=!1,i="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(i)}catch(r){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+i+"(opacity="+e+")"}function bt(t){for(var e=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1}function xt(t,e,n){var i=e||new b(0,0);t.style[Tn]=(Ke?"translate("+i.x+"px,"+i.y+"px)":"translate3d("+i.x+"px,"+i.y+"px,0)")+(n?" scale("+n+")":"")}function wt(t,e){t._leaflet_pos=e,Xe?xt(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function kt(t){return t._leaflet_pos||new b(0,0)}function Et(){Z(window,"dragstart",Q)}function St(){V(window,"dragstart",Q)}function Lt(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(Tt(),An=t,Pn=t.style.outline,t.style.outline="none",Z(window,"keydown",Tt))}function Tt(){An&&(An.style.outline=Pn,An=undefined,Pn=undefined,V(window,"keydown",Tt))}function Ct(t,e){return new Nn(t,e)}function Mt(t,e){if(!e||!t.length)return t.slice();var n=e*e;return t=Dt(t,n),t=Pt(t,n)}function It(t,e,n){return Math.sqrt(Rt(t,e,n,!0))}function At(t,e,n){return Rt(t,e,n)}function Pt(t,e){var n=t.length,i=new(typeof Uint8Array!=undefined+""?Uint8Array:Array)(n);i[0]=i[n-1]=1,Ot(t,i,e,0,n-1);var r,o=[];for(r=0;r<n;r++)i[r]&&o.push(t[r]);return o}function Ot(t,e,n,i,r){var o,s,a,u=0;for(s=i+1;s<=r-1;s++)(a=Rt(t[s],t[i],t[r],!0))>u&&(o=s,u=a);u>n&&(e[o]=1,Ot(t,e,n,i,o),Ot(t,e,n,o,r))}function Dt(t,e){for(var n=[t[0]],i=1,r=0,o=t.length;i<o;i++)jt(t[i],t[r])>e&&(n.push(t[i]),r=i);return r<o-1&&n.push(t[o-1]),n}function Nt(t,e,n,i,r){var o,s,a,u=i?Vn:zt(t,n),c=zt(e,n);for(Vn=c;;){if(!(u|c))return[t,e];if(u&c)return!1;a=zt(s=Bt(t,e,o=u||c,n,r),n),o===u?(t=s,u=a):(e=s,c=a)}}function Bt(t,e,n,i,r){var o,s,a=e.x-t.x,u=e.y-t.y,c=i.min,l=i.max;return 8&n?(o=t.x+a*(l.y-t.y)/u,s=l.y):4&n?(o=t.x+a*(c.y-t.y)/u,s=c.y):2&n?(o=l.x,s=t.y+u*(l.x-t.x)/a):1&n&&(o=c.x,s=t.y+u*(c.x-t.x)/a),new b(o,s,r)}function zt(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n}function jt(t,e){var n=e.x-t.x,i=e.y-t.y;return n*n+i*i}function Rt(t,e,n,i){var r,o=e.x,s=e.y,a=n.x-o,u=n.y-s,c=a*a+u*u;return c>0&&((r=((t.x-o)*a+(t.y-s)*u)/c)>1?(o=n.x,s=n.y):r>0&&(o+=a*r,s+=u*r)),a=t.x-o,u=t.y-s,i?a*a+u*u:new b(o,s)}function Ft(t){return!ve(t[0])||"object"!=typeof t[0][0]&&"undefined"!=typeof t[0][0]}function $t(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ft(t)}function Ut(t,e,n){var i,r,o,s,a,u,c,l,h,f=[1,4,2,8];for(r=0,c=t.length;r<c;r++)t[r]._code=zt(t[r],e);for(s=0;s<4;s++){for(l=f[s],i=[],r=0,o=(c=t.length)-1;r<c;o=r++)a=t[r],u=t[o],a._code&l?u._code&l||((h=Bt(u,a,l,e,n))._code=zt(h,e),i.push(h)):(u._code&l&&((h=Bt(u,a,l,e,n))._code=zt(h,e),i.push(h)),i.push(a));t=i}return t}function Ht(t){return new fi(t)}function qt(t,e){return new mi(t,e)}function Zt(t,e){return new vi(t,e)}function Vt(t,e,n){return new _i(t,e,n)}function Wt(t,e){return new yi(t,e)}function Kt(t,e){return new bi(t,e)}function Gt(t,e){var n,i,r,o,s="Feature"===t.type?t.geometry:t,a=s?s.coordinates:null,u=[],c=e&&e.pointToLayer,l=e&&e.coordsToLatLng||Yt;if(!a&&!s)return null;switch(s.type){case"Point":return n=l(a),c?c(t,n):new mi(n);case"MultiPoint":for(r=0,o=a.length;r<o;r++)n=l(a[r]),u.push(c?c(t,n):new mi(n));return new li(u);case"LineString":case"MultiLineString":return i=Xt(a,"LineString"===s.type?0:1,l),new yi(i,e);case"Polygon":case"MultiPolygon":return i=Xt(a,"Polygon"===s.type?1:2,l),new bi(i,e);case"GeometryCollection":for(r=0,o=s.geometries.length;r<o;r++){var h=Gt({geometry:s.geometries[r],type:"Feature",properties:t.properties},e);h&&u.push(h)}return new li(u);default:throw new Error("Invalid GeoJSON object.")}}function Yt(t){return new T(t[1],t[0],t[2])}function Xt(t,e,n){for(var i,r=[],o=0,s=t.length;o<s;o++)i=e?Xt(t[o],e-1,n):(n||Yt)(t[o]),r.push(i);return r}function Qt(t,e){return e="number"==typeof e?e:6,t.alt!==undefined?[a(t.lng,e),a(t.lat,e),a(t.alt,e)]:[a(t.lng,e),a(t.lat,e)]}function Jt(t,e,n,i){for(var r=[],o=0,s=t.length;o<s;o++)r.push(e?Jt(t[o],e-1,n,i):Qt(t[o],i));return!e&&n&&r.push(r[0]),r}function te(t,n){return t.feature?e({},t.feature,{geometry:n}):ee(n)}function ee(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}function ne(t,e){return new xi(t,e)}function ie(t,e,n){return new Li(t,e,n)}function re(t){return new Pi(t)}function oe(t){return new Oi(t)}function se(t,e){return new Di(t,e)}function ae(t,e){return new Ni(t,e)}function ue(t){return un?new zi(t):null}function ce(t){return cn||ln?new $i(t):null}function le(t,e){return new Ui(t,e)}function he(){return window.L=Yi,this}var fe="1.2.0",de=Object.freeze;Object.freeze=function(t){return t};var pe=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}(),me=0,ge=/\{ *([\w_\-]+) *\}/g,ve=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},_e="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",ye=0,be=window.requestAnimationFrame||p("RequestAnimationFrame")||m,xe=window.cancelAnimationFrame||p("CancelAnimationFrame")||p("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)},we=(Object.freeze||Object)({freeze:de,extend:e,create:pe,bind:n,lastId:me,stamp:i,throttle:r,wrapNum:o,falseFn:s,formatNum:a,trim:u,splitWords:c,setOptions:l,getParamString:h,template:f,isArray:ve,indexOf:d,emptyImageUrl:_e,requestFn:be,cancelFn:xe,requestAnimFrame:g,cancelAnimFrame:v});_.extend=function(t){var n=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},i=n.__super__=this.prototype,r=pe(i);r.constructor=n,n.prototype=r;for(var o in this)this.hasOwnProperty(o)&&"prototype"!==o&&"__super__"!==o&&(n[o]=this[o]);return t.statics&&(e(n,t.statics),delete t.statics),t.includes&&(y(t.includes),e.apply(null,[r].concat(t.includes)),delete t.includes),r.options&&(t.options=e(pe(r.options),t.options)),e(r,t),r._initHooks=[],r.callInitHooks=function(){if(!this._initHooksCalled){i.callInitHooks&&i.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=r._initHooks.length;t<e;t++)r._initHooks[t].call(this)}},n},_.include=function(t){return e(this.prototype,t),this},_.mergeOptions=function(t){return e(this.prototype.options,t),this},_.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var ke={on:function(t,e,n){if("object"==typeof t)for(var i in t)this._on(i,t[i],e);else for(var r=0,o=(t=c(t)).length;r<o;r++)this._on(t[r],e,n);return this},off:function(t,e,n){if(t)if("object"==typeof t)for(var i in t)this._off(i,t[i],e);else for(var r=0,o=(t=c(t)).length;r<o;r++)this._off(t[r],e,n);else delete this._events;return this},_on:function(t,e,n){this._events=this._events||{};var i=this._events[t];i||(i=[],this._events[t]=i),n===this&&(n=undefined);for(var r={fn:e,ctx:n},o=i,s=0,a=o.length;s<a;s++)if(o[s].fn===e&&o[s].ctx===n)return;o.push(r)},_off:function(t,e,n){var i,r,o;if(this._events&&(i=this._events[t]))if(e){if(n===this&&(n=undefined),i)for(r=0,o=i.length;r<o;r++){var a=i[r];if(a.ctx===n&&a.fn===e)return a.fn=s,this._firingCount&&(this._events[t]=i=i.slice()),void i.splice(r,1)}}else{for(r=0,o=i.length;r<o;r++)i[r].fn=s;delete this._events[t]}},fire:function(t,n,i){if(!this.listens(t,i))return this;var r=e({},n,{type:t,target:this});if(this._events){var o=this._events[t];if(o){this._firingCount=this._firingCount+1||1;for(var s=0,a=o.length;s<a;s++){var u=o[s];u.fn.call(u.ctx||this,r)}this._firingCount--}}return i&&this._propagateEvent(r),this},listens:function(t,e){var n=this._events&&this._events[t];if(n&&n.length)return!0;if(e)for(var i in this._eventParents)if(this._eventParents[i].listens(t,e))return!0;return!1},once:function(t,e,i){if("object"==typeof t){for(var r in t)this.once(r,t[r],e);return this}var o=n(function(){this.off(t,e,i).off(t,o,i)},this);return this.on(t,e,i).on(t,o,i)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[i(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[i(t)],this},_propagateEvent:function(t){for(var n in this._eventParents)this._eventParents[n].fire(t.type,e({layer:t.target},t),!0)}};ke.addEventListener=ke.on,ke.removeEventListener=ke.clearAllEventListeners=ke.off,ke.addOneTimeEventListener=ke.once,ke.fireEvent=ke.fire,ke.hasEventListeners=ke.listens;var Ee=_.extend(ke);b.prototype={clone:function(){return new b(this.x,this.y)},add:function(t){return this.clone()._add(x(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(x(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new b(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new b(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},distanceTo:function(t){var e=(t=x(t)).x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return(t=x(t)).x===this.x&&t.y===this.y},contains:function(t){return t=x(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+a(this.x)+", "+a(this.y)+")"}},w.prototype={extend:function(t){return t=x(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new b((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new b(this.min.x,this.max.y)},getTopRight:function(){return new b(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return(t="number"==typeof t[0]||t instanceof b?x(t):k(t))instanceof w?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=k(t);var e=this.min,n=this.max,i=t.min,r=t.max,o=r.x>=e.x&&i.x<=n.x,s=r.y>=e.y&&i.y<=n.y;return o&&s},overlaps:function(t){t=k(t);var e=this.min,n=this.max,i=t.min,r=t.max,o=r.x>e.x&&i.x<n.x,s=r.y>e.y&&i.y<n.y;return o&&s},isValid:function(){return!(!this.min||!this.max)}},E.prototype={extend:function(t){var e,n,i=this._southWest,r=this._northEast;if(t instanceof T)e=t,n=t;else{if(!(t instanceof E))return t?this.extend(C(t)||S(t)):this;if(e=t._southWest,n=t._northEast,!e||!n)return this}return i||r?(i.lat=Math.min(e.lat,i.lat),i.lng=Math.min(e.lng,i.lng),r.lat=Math.max(n.lat,r.lat),r.lng=Math.max(n.lng,r.lng)):(this._southWest=new T(e.lat,e.lng),this._northEast=new T(n.lat,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,i=Math.abs(e.lat-n.lat)*t,r=Math.abs(e.lng-n.lng)*t;return new E(new T(e.lat-i,e.lng-r),new T(n.lat+i,n.lng+r))},getCenter:function(){return new T((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new T(this.getNorth(),this.getWest())},getSouthEast:function(){return new T(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof T||"lat"in t?C(t):S(t);var e,n,i=this._southWest,r=this._northEast;return t instanceof E?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=i.lat&&n.lat<=r.lat&&e.lng>=i.lng&&n.lng<=r.lng},intersects:function(t){t=S(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),r=t.getNorthEast(),o=r.lat>=e.lat&&i.lat<=n.lat,s=r.lng>=e.lng&&i.lng<=n.lng;return o&&s},overlaps:function(t){t=S(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),r=t.getNorthEast(),o=r.lat>e.lat&&i.lat<n.lat,s=r.lng>e.lng&&i.lng<n.lng;return o&&s},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=S(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}},T.prototype={equals:function(t,e){if(!t)return!1;t=C(t);return Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(e===undefined?1e-9:e)},toString:function(t){return"LatLng("+a(this.lat,t)+", "+a(this.lng,t)+")"},distanceTo:function(t){return Le.distance(this,C(t))},wrap:function(){return Le.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return S([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new T(this.lat,this.lng,this.alt)}};var Se={latLngToPoint:function(t,e){var n=this.projection.project(t),i=this.scale(e);return this.transformation._transform(n,i)},pointToLatLng:function(t,e){var n=this.scale(e),i=this.transformation.untransform(t,n);return this.projection.unproject(i)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t);return new w(this.transformation.transform(e.min,n),this.transformation.transform(e.max,n))},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?o(t.lng,this.wrapLng,!0):t.lng;return new T(this.wrapLat?o(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),i=e.lat-n.lat,r=e.lng-n.lng
;if(0===i&&0===r)return t;var o=t.getSouthWest(),s=t.getNorthEast();return new E(new T(o.lat-i,o.lng-r),new T(s.lat-i,s.lng-r))}},Le=e({},Se,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,i=t.lat*n,r=e.lat*n,o=Math.sin(i)*Math.sin(r)+Math.cos(i)*Math.cos(r)*Math.cos((e.lng-t.lng)*n);return this.R*Math.acos(Math.min(o,1))}}),Te={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,t.lat),-n),r=Math.sin(i*e);return new b(this.R*t.lng*e,this.R*Math.log((1+r)/(1-r))/2)},unproject:function(t){var e=180/Math.PI;return new T((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=6378137*Math.PI;return new w([-t,-t],[t,t])}()};M.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new b((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var Ce,Me,Ie,Ae,Pe=e({},Le,{code:"EPSG:3857",projection:Te,transformation:function(){var t=.5/(Math.PI*Te.R);return I(t,.5,-t,.5)}()}),Oe=e({},Pe,{code:"EPSG:900913"}),De=document.documentElement.style,Ne="ActiveXObject"in window,Be=Ne&&!document.addEventListener,ze="msLaunchUri"in navigator&&!("documentMode"in document),je=O("webkit"),Re=O("android"),Fe=O("android 2")||O("android 3"),$e=!!window.opera,Ue=O("chrome"),He=O("gecko")&&!je&&!$e&&!Ne,qe=!Ue&&O("safari"),Ze=O("phantom"),Ve="OTransition"in De,We=0===navigator.platform.indexOf("Win"),Ke=Ne&&"transition"in De,Ge="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Fe,Ye="MozPerspective"in De,Xe=!window.L_DISABLE_3D&&(Ke||Ge||Ye)&&!Ve&&!Ze,Qe="undefined"!=typeof orientation||O("mobile"),Je=Qe&&je,tn=Qe&&Ge,en=!window.PointerEvent&&window.MSPointerEvent,nn=!(!window.PointerEvent&&!en),rn=!window.L_NO_TOUCH&&(nn||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),on=Qe&&$e,sn=Qe&&He,an=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,un=!!document.createElement("canvas").getContext,cn=!(!document.createElementNS||!A("svg").createSVGRect),ln=!cn&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(n){return!1}}(),hn=(Object.freeze||Object)({ie:Ne,ielt9:Be,edge:ze,webkit:je,android:Re,android23:Fe,opera:$e,chrome:Ue,gecko:He,safari:qe,phantom:Ze,opera12:Ve,win:We,ie3d:Ke,webkit3d:Ge,gecko3d:Ye,any3d:Xe,mobile:Qe,mobileWebkit:Je,mobileWebkit3d:tn,msPointer:en,pointer:nn,touch:rn,mobileOpera:on,mobileGecko:sn,retina:an,canvas:un,svg:cn,vml:ln}),fn=en?"MSPointerDown":"pointerdown",dn=en?"MSPointerMove":"pointermove",pn=en?"MSPointerUp":"pointerup",mn=en?"MSPointerCancel":"pointercancel",gn=["INPUT","SELECT","OPTION"],vn={},_n=!1,yn=0,bn=en?"MSPointerDown":nn?"pointerdown":"touchstart",xn=en?"MSPointerUp":nn?"pointerup":"touchend",wn="_leaflet_",kn="_leaflet_events",En=We&&Ue?2*window.devicePixelRatio:He?window.devicePixelRatio:1,Sn={},Ln=(Object.freeze||Object)({on:Z,off:V,stopPropagation:G,disableScrollPropagation:Y,disableClickPropagation:X,preventDefault:Q,stop:J,getMousePosition:tt,getWheelDelta:et,fakeStop:nt,skipped:it,isExternalTarget:rt,addListener:Z,removeListener:V}),Tn=bt(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),Cn=bt(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Mn="webkitTransition"===Cn||"OTransition"===Cn?Cn+"End":"transitionend";if("onselectstart"in document)Me=function(){Z(window,"selectstart",Q)},Ie=function(){V(window,"selectstart",Q)};else{var In=bt(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Me=function(){if(In){var t=document.documentElement.style;Ae=t[In],t[In]="none"}},Ie=function(){In&&(document.documentElement.style[In]=Ae,Ae=undefined)}}var An,Pn,On=(Object.freeze||Object)({TRANSFORM:Tn,TRANSITION:Cn,TRANSITION_END:Mn,get:st,getStyle:at,create:ut,remove:ct,empty:lt,toFront:ht,toBack:ft,hasClass:dt,addClass:pt,removeClass:mt,setClass:gt,getClass:vt,setOpacity:_t,testProp:bt,setTransform:xt,setPosition:wt,getPosition:kt,disableTextSelection:Me,enableTextSelection:Ie,disableImageDrag:Et,enableImageDrag:St,preventOutline:Lt,restoreOutline:Tt}),Dn=Ee.extend({run:function(t,e,n,i){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(i||.5,.2),this._startPos=kt(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=g(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,n=1e3*this._duration;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),wt(this._el,n),this.fire("step")},_complete:function(){v(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Nn=Ee.extend({options:{crs:Pe,center:undefined,zoom:undefined,minZoom:undefined,maxZoom:undefined,layers:[],maxBounds:undefined,renderer:undefined,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=l(this,e),this._initContainer(t),this._initLayout(),this._onResize=n(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.zoom!==undefined&&(this._zoom=this._limitZoom(e.zoom)),e.center&&e.zoom!==undefined&&this.setView(C(e.center),e.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this.callInitHooks(),this._zoomAnimated=Cn&&Xe&&!on&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Z(this._proxy,Mn,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,n,i){if(n=n===undefined?this._zoom:this._limitZoom(n),t=this._limitCenter(C(t),n,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&!0!==i){i.animate!==undefined&&(i.zoom=e({animate:i.animate},i.zoom),i.pan=e({animate:i.animate,duration:i.duration},i.pan));if(this._zoom!==n?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,n,i.zoom):this._tryAnimatedPan(t,i.pan))return clearTimeout(this._sizeTimer),this}return this._resetView(t,n),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(Xe?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(Xe?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,n){var i=this.getZoomScale(e),r=this.getSize().divideBy(2),o=(t instanceof b?t:this.latLngToContainerPoint(t)).subtract(r).multiplyBy(1-1/i),s=this.containerPointToLatLng(r.add(o));return this.setView(s,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():S(t);var n=x(e.paddingTopLeft||e.padding||[0,0]),i=x(e.paddingBottomRight||e.padding||[0,0]),r=this.getBoundsZoom(t,!1,n.add(i));if((r="number"==typeof e.maxZoom?Math.min(e.maxZoom,r):r)===Infinity)return{center:t.getCenter(),zoom:r};var o=i.subtract(n).divideBy(2),s=this.project(t.getSouthWest(),r),a=this.project(t.getNorthEast(),r);return{center:this.unproject(s.add(a).divideBy(2).add(o),r),zoom:r}},fitBounds:function(t,e){if(!(t=S(t)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(t=x(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Dn,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){pt(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,n){function i(t){var e=(v*v-m*m+(t?-1:1)*b*b*_*_)/(2*(t?v:m)*b*_),n=Math.sqrt(e*e+1)-e;return n<1e-9?-18:Math.log(n)}function r(t){return(Math.exp(t)-Math.exp(-t))/2}function o(t){return(Math.exp(t)+Math.exp(-t))/2}function s(t){return r(t)/o(t)}function a(t){return m*(o(x)/o(x+y*t))}function u(t){return m*(o(x)*s(x+y*t)-r(x))/b}function c(t){return 1-Math.pow(1-t,1.5)}function l(){var n=(Date.now()-w)/E,i=c(n)*k;n<=1?(this._flyToFrame=g(l,this),this._move(this.unproject(h.add(f.subtract(h).multiplyBy(u(i)/_)),p),this.getScaleZoom(m/a(i),p),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}if(!1===(n=n||{}).animate||!Xe)return this.setView(t,e,n);this._stop();var h=this.project(this.getCenter()),f=this.project(t),d=this.getSize(),p=this._zoom;t=C(t),e=e===undefined?p:e;var m=Math.max(d.x,d.y),v=m*this.getZoomScale(p,e),_=f.distanceTo(h)||1,y=1.42,b=y*y,x=i(0),w=Date.now(),k=(i(1)-x)/y,E=n.duration?1e3*n.duration:1e3*k*.8;return this._moveStart(!0),l.call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)},setMaxBounds:function(t){return(t=S(t)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){return this.options.minZoom=t,this._loaded&&this.getZoom()<this.options.minZoom?this.setZoom(t):this},setMaxZoom:function(t){return this.options.maxZoom=t,this._loaded&&this.getZoom()>this.options.maxZoom?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),i=this._limitCenter(n,this._zoom,S(t));return n.equals(i)||this.panTo(i,e),this._enforcingBounds=!1,this},invalidateSize:function(t){if(!this._loaded)return this;t=e({animate:!1,pan:!0},!0===t?{animate:!0}:t);var i=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var r=this.getSize(),o=i.divideBy(2).round(),s=r.divideBy(2).round(),a=o.subtract(s);return a.x||a.y?(t.animate&&t.pan?this.panBy(a):(t.pan&&this._rawPanBy(a),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(n(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:i,newSize:r})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=e({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var i=n(this._handleGeolocationResponse,this),r=n(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(i,r,t):navigator.geolocation.getCurrentPosition(i,r,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(t){var e=new T(t.coords.latitude,t.coords.longitude),n=e.toBounds(t.coords.accuracy),i=this._locateOptions;if(i.setView){var r=this.getBoundsZoom(n);this.setView(e,i.maxZoom?Math.min(r,i.maxZoom):r)}var o={latlng:e,bounds:n,timestamp:t.timestamp};for(var s in t.coords)"number"==typeof t.coords[s]&&(o[s]=t.coords[s]);this.fire("locationfound",o)},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(e){this._container._leaflet_id=undefined,this._containerId=undefined}ct(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)ct(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var n=ut("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane);return t&&(this._panes[t]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new E(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return this.options.minZoom===undefined?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===undefined?this._layersMaxZoom===undefined?Infinity:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=S(t),n=x(n||[0,0]);var i=this.getZoom()||0,r=this.getMinZoom(),o=this.getMaxZoom(),s=t.getNorthWest(),a=t.getSouthEast(),u=this.getSize().subtract(n),c=k(this.project(a,i),this.project(s,i)).getSize(),l=Xe?this.options.zoomSnap:1,h=u.x/c.x,f=u.y/c.y,d=e?Math.max(h,f):Math.min(h,f);return i=this.getScaleZoom(d,i),l&&(i=Math.round(i/(l/100))*(l/100),i=e?Math.ceil(i/l)*l:Math.floor(i/l)*l),Math.max(r,Math.min(o,i))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new b(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new w(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===undefined?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=e===undefined?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;e=e===undefined?this._zoom:e;var i=n.zoom(t*n.scale(e));return isNaN(i)?Infinity:i},project:function(t,e){return e=e===undefined?this._zoom:e,this.options.crs.latLngToPoint(C(t),e)},unproject:function(t,e){return e=e===undefined?this._zoom:e,this.options.crs.pointToLatLng(x(t),e)},layerPointToLatLng:function(t){var e=x(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(C(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(C(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(S(t))},distance:function(t,e){return this.options.crs.distance(C(t),C(e))},containerPointToLayerPoint:function(t){return x(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return x(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(x(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(C(t)))},mouseEventToContainerPoint:function(t){return tt(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=st(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");Z(e,"scroll",this._onScroll,this),this._containerId=i(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&Xe,pt(t,"leaflet-container"+(rn?" leaflet-touch":"")+(an?" leaflet-retina":"")+(Be?" leaflet-oldie":"")+(qe?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=at(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),wt(this._mapPane,new b(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(pt(t.markerPane,"leaflet-zoom-hide"),pt(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){wt(this._mapPane,new b(0,0));var n=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var i=this._zoom!==e;this._moveStart(i)._move(t,e)._moveEnd(i),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(t){return t&&this.fire("zoomstart"),this.fire("movestart")},_move:function(t,e,n){e===undefined&&(e=this._zoom);var i=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(i||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return v(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){wt(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[i(this._container)]=this;var e=t?V:Z;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),Xe&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){v(this._resizeRequest),this._resizeRequest=g(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n,r=[],o="mouseout"===e||"mouseover"===e,s=t.target||t.srcElement,a=!1;s;){if((n=this._targets[i(s)])&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(n)){a=!0;break}if(n&&n.listens(e,!0)){if(o&&!rt(s,t))break;if(r.push(n),o)break}if(s===this._container)break;s=s.parentNode}return r.length||a||o||!rt(s,t)||(r=[this]),r},_handleDOMEvent:function(t){if(this._loaded&&!it(t)){var e=t.type;"mousedown"!==e&&"keypress"!==e||Lt(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,n,i){if("click"===t.type){var r=e({},t);r.type="preclick",this._fireDOMEvent(r,r.type,i)}if(!t._stopped&&(i=(i||[]).concat(this._findEventTargets(t,n))).length){var o=i[0];"contextmenu"===n&&o.listens(n,!0)&&Q(t);var s={originalEvent:t};if("keypress"!==t.type){var a=o.options&&"icon"in o.options;s.containerPoint=a?this.latLngToContainerPoint(o.getLatLng()):this.mouseEventToContainerPoint(t),s.layerPoint=this.containerPointToLayerPoint(s.containerPoint),s.latlng=a?o.getLatLng():this.layerPointToLatLng(s.layerPoint)}for(var u=0;u<i.length;u++)if(i[u].fire(n,s,!0),s.originalEvent._stopped||!1===i[u].options.bubblingMouseEvents&&-1!==d(this._mouseEvents,n))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return kt(this._mapPane)||new b(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&e!==undefined?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(i)},_latLngBoundsToNewLayerBounds:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return k([this.project(t.getSouthWest(),e)._subtract(i),this.project(t.getNorthWest(),e)._subtract(i),this.project(t.getSouthEast(),e)._subtract(i),this.project(t.getNorthEast(),e)._subtract(i)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var i=this.project(t,e),r=this.getSize().divideBy(2),o=new w(i.subtract(r),i.add(r)),s=this._getBoundsOffset(o,n,e);return s.round().equals([0,0])?t:this.unproject(i.add(s),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),i=new w(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(i,e))},_getBoundsOffset:function(t,e,n){var i=k(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),r=i.min.subtract(t.min),o=i.max.subtract(t.max);return new b(this._rebound(r.x,-o.x),this._rebound(r.y,-o.y))},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),i=Xe?this.options.zoomSnap:1;return i&&(t=Math.round(t/i)*i),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){mt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._floor();return!(!0!==(e&&e.animate)&&!this.getSize().contains(n))&&(this.panBy(n,e),!0)},_createAnimProxy:function(){var t=this._proxy=ut("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(t){var e=Tn,n=this._proxy.style[e];xt(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),n===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",function(){var t=this.getCenter(),e=this.getZoom();xt(this._proxy,this.project(t,e),this.getZoomScale(e,1))},this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ct(this._proxy),delete this._proxy},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var i=this.getZoomScale(e),r=this._getCenterOffset(t)._divideBy(1-1/i);return!(!0!==n.animate&&!this.getSize().contains(r))&&(g(function(){this._moveStart(!0)._animateZoom(t,e,!0)},this),!0)},_animateZoom:function(t,e,i,r){i&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,pt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:r}),setTimeout(n(this._onZoomTransitionEnd,this),250)},_onZoomTransitionEnd:function(){this._animatingZoom&&(mt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),g(function(){this._moveEnd(!0)},this))}}),Bn=_.extend({options:{position:"topright"},initialize:function(t){l(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),i=t._controlCorners[n];return pt(e,"leaflet-control"),-1!==n.indexOf("bottom")?i.insertBefore(e,i.firstChild):i.appendChild(e),this},remove:function(){return this._map?(ct(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),zn=function(t){return new Bn(t)};Nn.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){function t(t,r){var o=n+t+" "+n+r;e[t+r]=ut("div",o,i)}var e=this._controlCorners={},n="leaflet-",i=this._controlContainer=ut("div",n+"control-container",this._container);t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)ct(this._controlCorners[t]);ct(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var jn=Bn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,i){return n<i?-1:i<n?1:0}},initialize:function(t,e,n){l(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var i in t)this._addLayer(t[i],i);for(i in e)this._addLayer(e[i],i,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Bn.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(i(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){pt(this._container,"leaflet-control-layers-expanded"),this._form.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._form.clientHeight?(pt(this._form,"leaflet-control-layers-scrollbar"),this._form.style.height=t+"px"):mt(this._form,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return mt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=ut("div",t),n=this.options.collapsed;e.setAttribute("aria-haspopup",!0),X(e),Y(e);var i=this._form=ut("form",t+"-list");n&&(this._map.on("click",this.collapse,this),Re||Z(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var r=this._layersLink=ut("a",t+"-toggle",e);r.href="#",r.title="Layers",rn?(Z(r,"click",J),Z(r,"click",this.expand,this)):Z(r,"focus",this.expand,this),n||this.expand(),this._baseLayersList=ut("div",t+"-base",i),this._separator=ut("div",t+"-separator",i),this._overlaysList=ut("div",t+"-overlays",i),e.appendChild(i)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&i(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,i){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:i}),this.options.sortLayers&&this._layers.sort(n(function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;lt(this._baseLayersList),lt(this._overlaysList),this._layerControlInputs=[];var t,e,n,i,r=0;for(n=0;n<this._layers.length;n++)i=this._layers[n],this._addItem(i),e=e||i.overlay,t=t||!i.overlay,r+=i.overlay?0:1;return this.options.hideSingleBase&&(t=t&&r>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(i(t.target)),n=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",i=document.createElement("div");return i.innerHTML=n,i.firstChild},_addItem:function(t){var e,n=document.createElement("label"),r=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=r):e=this._createRadioElement("leaflet-base-layers",r),this._layerControlInputs.push(e),e.layerId=i(t.layer),Z(e,"click",this._onInputClick,this);var o=document.createElement("span");o.innerHTML=" "+t.name;var s=document.createElement("div");n.appendChild(s),s.appendChild(e),s.appendChild(o);return(t.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){var t,e,n=this._layerControlInputs,i=[],r=[];this._handlingClick=!0;for(var o=n.length-1;o>=0;o--)t=n[o],e=this._getLayer(t.layerId).layer,t.checked?i.push(e):t.checked||r.push(e);for(o=0;o<r.length;o++)this._map.hasLayer(r[o])&&this._map.removeLayer(r[o]);for(o=0;o<i.length;o++)this._map.hasLayer(i[o])||this._map.addLayer(i[o]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,n=this._layerControlInputs,i=this._map.getZoom(),r=n.length-1;r>=0;r--)t=n[r],e=this._getLayer(t.layerId).layer,t.disabled=e.options.minZoom!==undefined&&i<e.options.minZoom||e.options.maxZoom!==undefined&&i>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),Rn=function(t,e,n){return new jn(t,e,n)},Fn=Bn.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=ut("div",e+" leaflet-bar"),i=this.options;return this._zoomInButton=this._createButton(i.zoomInText,i.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(i.zoomOutText,i.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,i,r){var o=ut("a",n,i);return o.innerHTML=t,o.href="#",o.title=e,o.setAttribute("role","button"),o.setAttribute("aria-label",e),X(o),Z(o,"click",J),Z(o,"click",r,this),Z(o,"click",this._refocusOnMap,this),o},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";mt(this._zoomInButton,e),mt(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&pt(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&pt(this._zoomInButton,e)}});Nn.mergeOptions({zoomControl:!0}),Nn.addInitHook(function(){
this.options.zoomControl&&(this.zoomControl=new Fn,this.addControl(this.zoomControl))});var $n=function(t){return new Fn(t)},Un=Bn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",n=ut("div",e),i=this.options;return this._addScales(i,e+"-line",n),t.on(i.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=ut("div",e,n)),t.imperial&&(this._iScale=ut("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),n=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,n,e/t)},_updateImperial:function(t){var e,n,i,r=3.2808399*t;r>5280?(e=r/5280,n=this._getRoundNum(e),this._updateScale(this._iScale,n+" mi",n/e)):(i=this._getRoundNum(r),this._updateScale(this._iScale,i+" ft",i/r))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,e*n}}),Hn=function(t){return new Un(t)},qn=Bn.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){l(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=ut("div","leaflet-control-attribution"),X(this._container);for(var e in t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(" | ")}}});Nn.mergeOptions({attributionControl:!0}),Nn.addInitHook(function(){this.options.attributionControl&&(new qn).addTo(this)});var Zn=function(t){return new qn(t)};Bn.Layers=jn,Bn.Zoom=Fn,Bn.Scale=Un,Bn.Attribution=qn,zn.layers=Rn,zn.zoom=$n,zn.scale=Hn,zn.attribution=Zn;var Vn,Wn=_.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}}),Kn={Events:ke},Gn=rn?"touchstart mousedown":"mousedown",Yn={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},Xn={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},Qn=Ee.extend({options:{clickTolerance:3},initialize:function(t,e,n,i){l(this,i),this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(Z(this._dragStartTarget,Gn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Qn._dragging===this&&this.finishDrag(),V(this._dragStartTarget,Gn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!dt(this._element,"leaflet-zoom-anim")&&!(Qn._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(Qn._dragging=this,this._preventOutline&&Lt(this._element),Et(),Me(),this._moving)))){this.fire("down");var e=t.touches?t.touches[0]:t;this._startPoint=new b(e.clientX,e.clientY),Z(document,Xn[t.type],this._onMove,this),Z(document,Yn[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled)if(t.touches&&t.touches.length>1)this._moved=!0;else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=new b(e.clientX,e.clientY).subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(Q(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=kt(this._element).subtract(n),pt(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),pt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,v(this._animRequest),this._lastEvent=t,this._animRequest=g(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),wt(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){mt(document.body,"leaflet-dragging"),this._lastTarget&&(mt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var t in Xn)V(document,Xn[t],this._onMove,this),V(document,Yn[t],this._onUp,this);St(),Ie(),this._moved&&this._moving&&(v(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,Qn._dragging=!1}}),Jn=(Object.freeze||Object)({simplify:Mt,pointToSegmentDistance:It,closestPointOnSegment:At,clipSegment:Nt,_getEdgeIntersection:Bt,_getBitCode:zt,_sqClosestPointOnSegment:Rt,isFlat:Ft,_flat:$t}),ti=(Object.freeze||Object)({clipPolygon:Ut}),ei={project:function(t){return new b(t.lng,t.lat)},unproject:function(t){return new T(t.y,t.x)},bounds:new w([-180,-90],[180,90])},ni={R:6378137,R_MINOR:6356752.314245179,bounds:new w([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,n=this.R,i=t.lat*e,r=this.R_MINOR/n,o=Math.sqrt(1-r*r),s=o*Math.sin(i),a=Math.tan(Math.PI/4-i/2)/Math.pow((1-s)/(1+s),o/2);return i=-n*Math.log(Math.max(a,1e-10)),new b(t.lng*e*n,i)},unproject:function(t){for(var e,n=180/Math.PI,i=this.R,r=this.R_MINOR/i,o=Math.sqrt(1-r*r),s=Math.exp(-t.y/i),a=Math.PI/2-2*Math.atan(s),u=0,c=.1;u<15&&Math.abs(c)>1e-7;u++)e=o*Math.sin(a),e=Math.pow((1-e)/(1+e),o/2),a+=c=Math.PI/2-2*Math.atan(s*e)-a;return new T(a*n,t.x*n/i)}},ii=(Object.freeze||Object)({LonLat:ei,Mercator:ni,SphericalMercator:Te}),ri=e({},Le,{code:"EPSG:3395",projection:ni,transformation:function(){var t=.5/(Math.PI*ni.R);return I(t,.5,-t,.5)}()}),oi=e({},Le,{code:"EPSG:4326",projection:ei,transformation:I(1/180,1,-1/180,.5)}),si=e({},Se,{projection:ei,transformation:I(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,i=e.lat-t.lat;return Math.sqrt(n*n+i*i)},infinite:!0});Se.Earth=Le,Se.EPSG3395=ri,Se.EPSG3857=Pe,Se.EPSG900913=Oe,Se.EPSG4326=oi,Se.Simple=si;var ai=Ee.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[i(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[i(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",function(){e.off(n,this)},this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}});Nn.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=i(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=i(t);return this._layers[e]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&i(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){for(var e=0,n=(t=t?ve(t)?t:[t]:[]).length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[i(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=i(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=Infinity,e=-Infinity,n=this._getZoomSpan();for(var i in this._zoomBoundLayers){var r=this._zoomBoundLayers[i].options;t=r.minZoom===undefined?t:Math.min(t,r.minZoom),e=r.maxZoom===undefined?e:Math.max(e,r.maxZoom)}this._layersMaxZoom=e===-Infinity?undefined:e,this._layersMinZoom=t===Infinity?undefined:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===undefined&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===undefined&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ui=ai.extend({initialize:function(t){this._layers={};var e,n;if(t)for(e=0,n=t.length;e<n;e++)this.addLayer(t[e])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){for(var t in this._layers)this.removeLayer(this._layers[t]);return this},invoke:function(t){var e,n,i=Array.prototype.slice.call(arguments,1);for(e in this._layers)(n=this._layers[e])[t]&&n[t].apply(n,i);return this},onAdd:function(t){for(var e in this._layers)t.addLayer(this._layers[e])},onRemove:function(t){for(var e in this._layers)t.removeLayer(this._layers[e])},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];for(var e in this._layers)t.push(this._layers[e]);return t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return i(t)}}),ci=function(t){return new ui(t)},li=ui.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),ui.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),ui.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new E;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),hi=function(t){return new li(t)},fi=_.extend({initialize:function(t){l(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var i=this._createImg(n,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(i,t),i},_setIconStyles:function(t,e){var n=this.options,i=n[e+"Size"];"number"==typeof i&&(i=[i,i]);var r=x(i),o=x("shadow"===e&&n.shadowAnchor||n.iconAnchor||r&&r.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),o&&(t.style.marginLeft=-o.x+"px",t.style.marginTop=-o.y+"px"),r&&(t.style.width=r.x+"px",t.style.height=r.y+"px")},_createImg:function(t,e){return e=e||document.createElement("img"),e.src=t,e},_getIconUrl:function(t){return an&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),di=fi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return di.imagePath||(di.imagePath=this._detectIconPath()),(this.options.imagePath||di.imagePath)+fi.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=ut("div","leaflet-default-icon-path",document.body),e=at(t,"background-image")||at(t,"backgroundImage");return document.body.removeChild(t),e=null===e||0!==e.indexOf("url")?"":e.replace(/^url\([\"\']?/,"").replace(/marker-icon\.png[\"\']?\)$/,"")}}),pi=Wn.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new Qn(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),pt(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&mt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(t){var e=this._marker,n=e._shadow,i=kt(e._icon),r=e._map.layerPointToLatLng(i);n&&wt(n,i),e._latlng=r,t.latlng=r,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),mi=ai.extend({options:{icon:new di,interactive:!0,draggable:!1,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",bubblingMouseEvents:!1},initialize:function(t,e){l(this,e),this._latlng=C(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=C(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),i=!1;n!==this._icon&&(this._icon&&this._removeIcon(),i=!0,t.title&&(n.title=t.title),t.alt&&(n.alt=t.alt)),pt(n,e),t.keyboard&&(n.tabIndex="0"),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var r=t.icon.createShadow(this._shadow),o=!1;r!==this._shadow&&(this._removeShadow(),o=!0),r&&(pt(r,e),r.alt=""),this._shadow=r,t.opacity<1&&this._updateOpacity(),i&&this.getPane().appendChild(this._icon),this._initInteraction(),r&&o&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),ct(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ct(this._shadow),this._shadow=null},_setPos:function(t){wt(this._icon,t),this._shadow&&wt(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(pt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),pi)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new pi(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;_t(this._icon,t),this._shadow&&_t(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor||[0,0]},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor||[0,0]}}),gi=ai.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return l(this,t),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(rn?10:0)}}),vi=gi.extend({options:{fill:!0,radius:10},initialize:function(t,e){l(this,e),this._latlng=C(t),this._radius=this.options.radius},setLatLng:function(t){return this._latlng=C(t),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return gi.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),i=[t+n,e+n];this._pxBounds=new w(this._point.subtract(i),this._point.add(i))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),_i=vi.extend({initialize:function(t,n,i){if("number"==typeof n&&(n=e({},i,{radius:n})),l(this,n),this._latlng=C(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new E(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:gi.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,n=this._map,i=n.options.crs;if(i.distance===Le.distance){var r=Math.PI/180,o=this._mRadius/Le.R/r,s=n.project([e+o,t]),a=n.project([e-o,t]),u=s.add(a).divideBy(2),c=n.unproject(u).lat,l=Math.acos((Math.cos(o*r)-Math.sin(e*r)*Math.sin(c*r))/(Math.cos(e*r)*Math.cos(c*r)))/r;(isNaN(l)||0===l)&&(l=o/Math.cos(Math.PI/180*e)),this._point=u.subtract(n.getPixelOrigin()),this._radius=isNaN(l)?0:Math.max(Math.round(u.x-n.project([c,t-l]).x),1),this._radiusY=Math.max(Math.round(u.y-s.y),1)}else{var h=i.unproject(i.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(h).x}this._updateBounds()}}),yi=gi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){l(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,n,i=Infinity,r=null,o=Rt,s=0,a=this._parts.length;s<a;s++)for(var u=this._parts[s],c=1,l=u.length;c<l;c++){var h=o(t,e=u[c-1],n=u[c],!0);h<i&&(i=h,r=o(t,e,n))}return r&&(r.distance=Math.sqrt(i)),r},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,i,r,o,s,a=this._rings[0],u=a.length;if(!u)return null;for(t=0,e=0;t<u-1;t++)e+=a[t].distanceTo(a[t+1])/2;if(0===e)return this._map.layerPointToLatLng(a[0]);for(t=0,i=0;t<u-1;t++)if(r=a[t],o=a[t+1],n=r.distanceTo(o),(i+=n)>e)return s=(i-e)/n,this._map.layerPointToLatLng([o.x-s*(o.x-r.x),o.y-s*(o.y-r.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=C(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new E,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Ft(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=Ft(t),i=0,r=t.length;i<r;i++)n?(e[i]=C(t[i]),this._bounds.extend(e[i])):e[i]=this._convertLatLngs(t[i]);return e},_project:function(){var t=new w;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t);var e=this._clickTolerance(),n=new b(e,e);this._bounds.isValid()&&t.isValid()&&(t.min._subtract(n),t.max._add(n),this._pxBounds=t)},_projectLatlngs:function(t,e,n){var i,r,o=t[0]instanceof T,s=t.length;if(o){for(r=[],i=0;i<s;i++)r[i]=this._map.latLngToLayerPoint(t[i]),n.extend(r[i]);e.push(r)}else for(i=0;i<s;i++)this._projectLatlngs(t[i],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else{var e,n,i,r,o,s,a,u=this._parts;for(e=0,i=0,r=this._rings.length;e<r;e++)for(n=0,o=(a=this._rings[e]).length;n<o-1;n++)(s=Nt(a[n],a[n+1],t,n,!0))&&(u[i]=u[i]||[],u[i].push(s[0]),s[1]===a[n+1]&&n!==o-2||(u[i].push(s[1]),i++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,i=t.length;n<i;n++)t[n]=Mt(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var n,i,r,o,s,a,u=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(n=0,o=this._parts.length;n<o;n++)for(i=0,r=(s=(a=this._parts[n]).length)-1;i<s;r=i++)if((e||0!==i)&&It(t,a[r],a[i])<=u)return!0;return!1}});yi._flat=$t;var bi=yi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,i,r,o,s,a,u,c=this._rings[0],l=c.length;if(!l)return null;for(o=s=a=0,t=0,e=l-1;t<l;e=t++)n=c[t],i=c[e],r=n.y*i.x-i.y*n.x,s+=(n.x+i.x)*r,a+=(n.y+i.y)*r,o+=3*r;return u=0===o?c[0]:[s/o,a/o],this._map.layerPointToLatLng(u)},_convertLatLngs:function(t){var e=yi.prototype._convertLatLngs.call(this,t),n=e.length;return n>=2&&e[0]instanceof T&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){yi.prototype._setLatLngs.call(this,t),Ft(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ft(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new b(e,e);if(t=new w(t.min.subtract(n),t.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var i,r=0,o=this._rings.length;r<o;r++)(i=Ut(this._rings[r],t,!0)).length&&this._parts.push(i)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,n,i,r,o,s,a,u,c=!1;if(!this._pxBounds.contains(t))return!1;for(r=0,a=this._parts.length;r<a;r++)for(o=0,s=(u=(e=this._parts[r]).length)-1;o<u;s=o++)n=e[o],i=e[s],n.y>t.y!=i.y>t.y&&t.x<(i.x-n.x)*(t.y-n.y)/(i.y-n.y)+n.x&&(c=!c);return c||yi.prototype._containsPoint.call(this,t,!0)}}),xi=li.extend({initialize:function(t,e){l(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,i,r=ve(t)?t:t.features;if(r){for(e=0,n=r.length;e<n;e++)((i=r[e]).geometries||i.geometry||i.features||i.coordinates)&&this.addData(i);return this}var o=this.options;if(o.filter&&!o.filter(t))return this;var s=Gt(t,o);return s?(s.feature=ee(t),s.defaultOptions=s.options,this.resetStyle(s),o.onEachFeature&&o.onEachFeature(t,s),this.addLayer(s)):this},resetStyle:function(t){return t.options=e({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e)}}),wi={toGeoJSON:function(t){return te(this,{type:"Point",coordinates:Qt(this.getLatLng(),t)})}};mi.include(wi),_i.include(wi),vi.include(wi),yi.include({toGeoJSON:function(t){var e=!Ft(this._latlngs),n=Jt(this._latlngs,e?1:0,!1,t);return te(this,{type:(e?"Multi":"")+"LineString",coordinates:n})}}),bi.include({toGeoJSON:function(t){var e=!Ft(this._latlngs),n=e&&!Ft(this._latlngs[0]),i=Jt(this._latlngs,n?2:e?1:0,!0,t);return e||(i=[i]),te(this,{type:(n?"Multi":"")+"Polygon",coordinates:i})}}),ui.include({toMultiPoint:function(t){var e=[];return this.eachLayer(function(n){e.push(n.toGeoJSON(t).geometry.coordinates)}),te(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(t);var n="GeometryCollection"===e,i=[];return this.eachLayer(function(e){if(e.toGeoJSON){var r=e.toGeoJSON(t);if(n)i.push(r.geometry);else{var o=ee(r);"FeatureCollection"===o.type?i.push.apply(i,o.features):i.push(o)}}}),n?te(this,{geometries:i,type:"GeometryCollection"}):{type:"FeatureCollection",features:i}}});var ki=ne,Ei=ai.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,n){this._url=t,this._bounds=S(e),l(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(pt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ct(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&ht(this._image),this},bringToBack:function(){return this._map&&ft(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=S(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._image=ut("img","leaflet-image-layer "+(this._zoomAnimated?"leaflet-zoom-animated":"")+(this.options.className||""));t.onselectstart=s,t.onmousemove=s,t.onload=n(this.fire,this,"load"),t.onerror=n(this._overlayOnError,this,"error"),this.options.crossOrigin&&(t.crossOrigin=""),this.options.zIndex&&this._updateZIndex(),t.src=this._url,t.alt=this.options.alt},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;xt(this._image,n,e)},_reset:function(){var t=this._image,e=new w(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();wt(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){_t(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==undefined&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),Si=function(t,e,n){return new Ei(t,e,n)},Li=Ei.extend({options:{autoplay:!0,loop:!0},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:ut("video");if(e["class"]=e["class"]||"",e["class"]+="leaflet-image-layer "+(this._zoomAnimated?"leaflet-zoom-animated":""),e.onselectstart=s,e.onmousemove=s,e.onloadeddata=n(this.fire,this,"load"),!t){ve(this._url)||(this._url=[this._url]),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop;for(var i=0;i<this._url.length;i++){var r=ut("source");r.src=this._url[i],e.appendChild(r)}}}}),Ti=ai.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){l(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&_t(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&_t(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(_t(this._container,0),this._removeTimeout=setTimeout(n(ct,undefined,this._container),200)):ct(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=C(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ht(this._container),this},bringToBack:function(){return this._map&&ft(this._container),this},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=x(this.options.offset),n=this._getAnchor();this._zoomAnimated?wt(this._container,t.add(n)):e=e.add(t).add(n);var i=this._containerBottom=-e.y,r=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=i+"px",this._container.style.left=r+"px"}},_getAnchor:function(){return[0,0]}}),Ci=Ti.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){Ti.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof gi||this._source.on("preclick",G))},onRemove:function(t){Ti.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),
this._source instanceof gi||this._source.off("preclick",G))},getEvents:function(){var t=Ti.prototype.getEvents.call(this);return(this.options.closeOnClick!==undefined?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=ut("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=ut("div",t+"-content-wrapper",e);if(this._contentNode=ut("div",t+"-content",n),X(n),Y(this._contentNode),Z(n,"contextmenu",G),this._tipContainer=ut("div",t+"-tip-container",e),this._tip=ut("div",t+"-tip",this._tipContainer),this.options.closeButton){var i=this._closeButton=ut("a",t+"-close-button",e);i.href="#close",i.innerHTML="&#215;",Z(i,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var i=t.offsetHeight,r=this.options.maxHeight,o="leaflet-popup-scrolled";r&&i>r?(e.height=r+"px",pt(t,o)):mt(t,o),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();wt(this._container,e.add(n))},_adjustPan:function(){if(!(!this.options.autoPan||this._map._panAnim&&this._map._panAnim._inProgress)){var t=this._map,e=parseInt(at(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+e,i=this._containerWidth,r=new b(this._containerLeft,-n-this._containerBottom);r._add(kt(this._container));var o=t.layerPointToContainerPoint(r),s=x(this.options.autoPanPadding),a=x(this.options.autoPanPaddingTopLeft||s),u=x(this.options.autoPanPaddingBottomRight||s),c=t.getSize(),l=0,h=0;o.x+i+u.x>c.x&&(l=o.x+i-c.x+u.x),o.x-l-a.x<0&&(l=o.x-a.x),o.y+n+u.y>c.y&&(h=o.y+n-c.y+u.y),o.y-h-a.y<0&&(h=o.y-a.y),(l||h)&&t.fire("autopanstart").panBy([l,h])}},_onCloseButtonClick:function(t){this._close(),J(t)},_getAnchor:function(){return x(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Mi=function(t,e){return new Ci(t,e)};Nn.mergeOptions({closePopupOnClick:!0}),Nn.include({openPopup:function(t,e,n){return t instanceof Ci||(t=new Ci(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),ai.include({bindPopup:function(t,e){return t instanceof Ci?(l(t,e),this._popup=t,t._source=this):(this._popup&&!e||(this._popup=new Ci(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){if(t instanceof ai||(e=t,t=this),t instanceof li)for(var n in this._layers){t=this._layers[n];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._popup&&this._map&&(this._popup._source=t,this._popup.update(),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;this._popup&&this._map&&(J(t),e instanceof gi?this.openPopup(t.layer||t.target,t.latlng):this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var Ii=Ti.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){Ti.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){Ti.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=Ti.prototype.getEvents.call(this);return rn&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip"+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ut("div",t)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e=this._map,n=this._container,i=e.latLngToContainerPoint(e.getCenter()),r=e.layerPointToContainerPoint(t),o=this.options.direction,s=n.offsetWidth,a=n.offsetHeight,u=x(this.options.offset),c=this._getAnchor();"top"===o?t=t.add(x(-s/2+u.x,-a+u.y+c.y,!0)):"bottom"===o?t=t.subtract(x(s/2-u.x,-u.y,!0)):"center"===o?t=t.subtract(x(s/2+u.x,a/2-c.y+u.y,!0)):"right"===o||"auto"===o&&r.x<i.x?(o="right",t=t.add(x(u.x+c.x,c.y-a/2+u.y,!0))):(o="left",t=t.subtract(x(s+c.x-u.x,a/2-c.y-u.y,!0))),mt(n,"leaflet-tooltip-right"),mt(n,"leaflet-tooltip-left"),mt(n,"leaflet-tooltip-top"),mt(n,"leaflet-tooltip-bottom"),pt(n,"leaflet-tooltip-"+o),wt(n,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&_t(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return x(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Ai=function(t,e){return new Ii(t,e)};Nn.include({openTooltip:function(t,e,n){return t instanceof Ii||(t=new Ii(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),ai.include({bindTooltip:function(t,e){return t instanceof Ii?(l(t,e),this._tooltip=t,t._source=this):(this._tooltip&&!e||(this._tooltip=new Ii(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),rn&&(n.click=this._openTooltip)),this[e](n),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){if(t instanceof ai||(e=t,t=this),t instanceof li)for(var n in this._layers){t=this._layers[n];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._tooltip&&this._map&&(this._tooltip._source=t,this._tooltip.update(),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(pt(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(mt(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:undefined)},_moveTooltip:function(t){var e,n,i=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),n=this._map.containerPointToLayerPoint(e),i=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(i)}});var Pi=fi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),n=this.options;if(e.innerHTML=!1!==n.html?n.html:"",n.bgPos){var i=x(n.bgPos);e.style.backgroundPosition=-i.x+"px "+-i.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});fi.Default=di;var Oi=ai.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Qe,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:undefined,maxNativeZoom:undefined,minNativeZoom:undefined,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){l(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),ct(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=null},bringToFront:function(){return this._map&&(ht(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ft(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=r(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof b?t:new b(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==undefined&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,n=this.getPane().children,i=-t(-Infinity,Infinity),r=0,o=n.length;r<o;r++)e=n[r].style.zIndex,n[r]!==this._container&&e&&(i=t(i,+e));isFinite(i)&&(this.options.zIndex=i+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Be){_t(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var i in this._tiles){var r=this._tiles[i];if(r.current&&r.loaded){var o=Math.min(1,(t-r.loaded)/200);_t(r.el,o),o<1?e=!0:(r.active?n=!0:this._onOpaqueTile(r),r.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),e&&(v(this._fadeFrame),this._fadeFrame=g(this._updateOpacity,this))}},_onOpaqueTile:s,_initContainer:function(){this._container||(this._container=ut("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(t===undefined)return undefined;for(var n in this._levels)this._levels[n].el.children.length||n===t?(this._levels[n].el.style.zIndex=e-Math.abs(t-n),this._onUpdateLevel(n)):(ct(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var i=this._levels[t],r=this._map;return i||((i=this._levels[t]={}).el=ut("div","leaflet-tile-container leaflet-zoom-animated",this._container),i.el.style.zIndex=e,i.origin=r.project(r.unproject(r.getPixelOrigin()),t).round(),i.zoom=t,this._setZoomTransform(i,r.getCenter(),r.getZoom()),s(i.el.offsetWidth),this._onCreateLevel(i)),this._level=i,i},_onUpdateLevel:s,_onRemoveLevel:s,_onCreateLevel:s,_pruneTiles:function(){if(this._map){var t,e,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var i=e.coords;this._retainParent(i.x,i.y,i.z,i.z-5)||this._retainChildren(i.x,i.y,i.z,i.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)ct(this._levels[t].el),this._onRemoveLevel(t),delete this._levels[t];this._removeAllTiles(),this._tileZoom=null},_retainParent:function(t,e,n,i){var r=Math.floor(t/2),o=Math.floor(e/2),s=n-1,a=new b(+r,+o);a.z=+s;var u=this._tileCoordsToKey(a),c=this._tiles[u];return c&&c.active?(c.retain=!0,!0):(c&&c.loaded&&(c.retain=!0),s>i&&this._retainParent(r,o,s,i))},_retainChildren:function(t,e,n,i){for(var r=2*t;r<2*t+2;r++)for(var o=2*e;o<2*e+2;o++){var s=new b(r,o);s.z=n+1;var a=this._tileCoordsToKey(s),u=this._tiles[a];u&&u.active?u.retain=!0:(u&&u.loaded&&(u.retain=!0),n+1<i&&this._retainChildren(r,o,n+1,i))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return undefined!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:undefined!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,n,i){var r=this._clampZoom(Math.round(e));(this.options.maxZoom!==undefined&&r>this.options.maxZoom||this.options.minZoom!==undefined&&r<this.options.minZoom)&&(r=undefined);var o=this.options.updateWhenZooming&&r!==this._tileZoom;i&&!o||(this._tileZoom=r,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),r!==undefined&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var i=this._map.getZoomScale(n,t.zoom),r=t.origin.multiplyBy(i).subtract(this._map._getNewPixelOrigin(e,n)).round();Xe?xt(t.el,r,i):wt(t.el,r)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),i=this._tileZoom,r=this._map.getPixelWorldBounds(this._tileZoom);r&&(this._globalTileRange=this._pxBoundsToTileRange(r)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],i).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],i).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],i).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],i).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),i=e.getZoomScale(n,this._tileZoom),r=e.project(t,this._tileZoom).floor(),o=e.getSize().divideBy(2*i);return new w(r.subtract(o),r.add(o))},_update:function(t){var e=this._map;if(e){var n=this._clampZoom(e.getZoom());if(t===undefined&&(t=e.getCenter()),this._tileZoom!==undefined){var i=this._getTiledPixelBounds(t),r=this._pxBoundsToTileRange(i),o=r.getCenter(),s=[],a=this.options.keepBuffer,u=new w(r.getBottomLeft().subtract([a,-a]),r.getTopRight().add([a,-a]));if(!(isFinite(r.min.x)&&isFinite(r.min.y)&&isFinite(r.max.x)&&isFinite(r.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var c in this._tiles){var l=this._tiles[c].coords;l.z===this._tileZoom&&u.contains(new b(l.x,l.y))||(this._tiles[c].current=!1)}if(Math.abs(n-this._tileZoom)>1)this._setView(t,n);else{for(var h=r.min.y;h<=r.max.y;h++)for(var f=r.min.x;f<=r.max.x;f++){var d=new b(f,h);d.z=this._tileZoom,this._isValidTile(d)&&(this._tiles[this._tileCoordsToKey(d)]||s.push(d))}if(s.sort(function(t,e){return t.distanceTo(o)-e.distanceTo(o)}),0!==s.length){this._loading||(this._loading=!0,this.fire("loading"));var p=document.createDocumentFragment();for(f=0;f<s.length;f++)this._addTile(s[f],p);this._level.el.appendChild(p)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var i=this._tileCoordsToBounds(t);return S(this.options.bounds).overlaps(i)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToBounds:function(t){var e=this._map,n=this.getTileSize(),i=t.scaleBy(n),r=i.add(n),o=new E(e.unproject(i,t.z),e.unproject(r,t.z));return this.options.noWrap||e.wrapLatLngBounds(o),o},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new b(+e[0],+e[1]);return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];e&&(ct(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){pt(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=s,t.onmousemove=s,Be&&this.options.opacity<1&&_t(t,this.options.opacity),Re&&!Fe&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var i=this._getTilePos(t),r=this._tileCoordsToKey(t),o=this.createTile(this._wrapCoords(t),n(this._tileReady,this,t));this._initTile(o),this.createTile.length<2&&g(n(this._tileReady,this,t,null,o)),wt(o,i),this._tiles[r]={el:o,coords:t,current:!0},e.appendChild(o),this.fire("tileloadstart",{tile:o,coords:t})},_tileReady:function(t,e,i){if(this._map){e&&this.fire("tileerror",{error:e,tile:i,coords:t});var r=this._tileCoordsToKey(t);(i=this._tiles[r])&&(i.loaded=+new Date,this._map._fadeAnimated?(_t(i.el,0),v(this._fadeFrame),this._fadeFrame=g(this._updateOpacity,this)):(i.active=!0,this._pruneTiles()),e||(pt(i.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:i.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Be||!this._map._fadeAnimated?g(this._pruneTiles,this):setTimeout(n(this._pruneTiles,this),250)))}},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new b(this._wrapX?o(t.x,this._wrapX):t.x,this._wrapY?o(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new w(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}}),Di=Oi.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,(e=l(this,e)).detectRetina&&an&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),Re||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url=t,e||this.redraw(),this},createTile:function(t,e){var i=document.createElement("img");return Z(i,"load",n(this._tileOnLoad,this,e,i)),Z(i,"error",n(this._tileOnError,this,e,i)),this.options.crossOrigin&&(i.crossOrigin=""),i.alt="",i.setAttribute("role","presentation"),i.src=this.getTileUrl(t),i},getTileUrl:function(t){var n={r:an?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-t.y;this.options.tms&&(n.y=i),n["-y"]=i}return f(this._url,e(n,this.options))},_tileOnLoad:function(t,e){Be?setTimeout(n(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var i=this.options.errorTileUrl;i&&e.src!==i&&(e.src=i),t(n,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom,n=this.options.zoomReverse,i=this.options.zoomOffset;return n&&(t=e-t),t+i},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=s,e.onerror=s,e.complete||(e.src=_e,ct(e)))}}),Ni=Di.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,n){this._url=t;var i=e({},this.defaultWmsParams);for(var r in n)r in this.options||(i[r]=n[r]);n=l(this,n),i.width=i.height=n.tileSize*(n.detectRetina&&an?2:1),this.wmsParams=i},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,Di.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToBounds(t),n=this._crs.project(e.getNorthWest()),i=this._crs.project(e.getSouthEast()),r=(this._wmsVersion>=1.3&&this._crs===oi?[i.y,n.x,n.y,i.x]:[n.x,i.y,i.x,n.y]).join(","),o=Di.prototype.getTileUrl.call(this,t);return o+h(this.wmsParams,o,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+r},setParams:function(t,n){return e(this.wmsParams,t),n||this.redraw(),this}});Di.WMS=Ni,se.wms=ae;var Bi=ai.extend({options:{padding:.1},initialize:function(t){l(this,t),i(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&pt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),i=kt(this._container),r=this._map.getSize().multiplyBy(.5+this.options.padding),o=this._map.project(this._center,e),s=this._map.project(t,e).subtract(o),a=r.multiplyBy(-n).add(i).add(r).subtract(s);Xe?xt(this._container,a,n):wt(this._container,a)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new w(n,n.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),zi=Bi.extend({getEvents:function(){var t=Bi.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Bi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Z(t,"mousemove",r(this._onMouseMove,32,this),this),Z(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Z(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){delete this._ctx,ct(this._container),V(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){this._redrawBounds=null;for(var t in this._layers)this._layers[t]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){this._drawnLayers={},Bi.prototype._update.call(this);var t=this._bounds,e=this._container,n=t.getSize(),i=an?2:1;wt(e,t.min),e.width=i*n.x,e.height=i*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",an&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){Bi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[i(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,i=e.prev;n?n.prev=i:this._drawLast=i,i?i.next=n:this._drawFirst=n,delete t._order,delete this._layers[L.stamp(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(t.options.dashArray){var e,n=t.options.dashArray.split(","),i=[];for(e=0;e<n.length;e++)i.push(Number(n[e]));t.options._dashArray=i}},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||g(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new w,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var n=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var i=this._drawFirst;i;i=i.next)t=i.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,i,r,o,s=t._parts,a=s.length,u=this._ctx;if(a){for(this._drawnLayers[t._leaflet_id]=t,u.beginPath(),n=0;n<a;n++){for(i=0,r=s[n].length;i<r;i++)o=s[n][i],u[i?"lineTo":"moveTo"](o.x,o.y);e&&u.closePath()}this._fillStroke(u,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,n=this._ctx,i=t._radius,r=(t._radiusY||i)/i;this._drawnLayers[t._leaflet_id]=t,1!==r&&(n.save(),n.scale(1,r)),n.beginPath(),n.arc(e.x,e.y/r,i,0,2*Math.PI,!1),1!==r&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e,n,i=this._map.mouseEventToLayerPoint(t),r=this._drawFirst;r;r=r.next)(e=r.layer).options.interactive&&e._containsPoint(i)&&!this._map._draggableMoved(e)&&(n=e);n&&(nt(t),this._fireEvent([n],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(mt(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(t,e){for(var n,i,r=this._drawFirst;r;r=r.next)(n=r.layer).options.interactive&&n._containsPoint(e)&&(i=n);i!==this._hoveredLayer&&(this._handleMouseOut(t),i&&(pt(this._container,"leaflet-interactive"),this._fireEvent([i],t,"mouseover"),this._hoveredLayer=i)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t)},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e=t._order,n=e.next,i=e.prev;n&&(n.prev=i,i?i.next=n:n&&(this._drawFirst=n),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))},_bringToBack:function(t){var e=t._order,n=e.next,i=e.prev;i&&(i.next=n,n?n.prev=i:i&&(this._drawLast=i),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}),ji=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),Ri={_initContainer:function(){this._container=ut("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Bi.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=ji("shape");pt(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=ji("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[i(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;ct(e),t.removeInteractiveTarget(e),delete this._layers[i(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,i=t.options,r=t._container;r.stroked=!!i.stroke,r.filled=!!i.fill,i.stroke?(e||(e=t._stroke=ji("stroke")),r.appendChild(e),e.weight=i.weight+"px",e.color=i.color,e.opacity=i.opacity,i.dashArray?e.dashStyle=ve(i.dashArray)?i.dashArray.join(" "):i.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=i.lineCap.replace("butt","flat"),e.joinstyle=i.lineJoin):e&&(r.removeChild(e),t._stroke=null),i.fill?(n||(n=t._fill=ji("fill")),r.appendChild(n),n.color=i.fillColor||i.color,n.opacity=i.fillOpacity):n&&(r.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),i=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+i+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){ht(t._container)},_bringToBack:function(t){ft(t._container)}},Fi=ln?ji:A,$i=Bi.extend({getEvents:function(){var t=Bi.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=Fi("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Fi("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ct(this._container),V(this._container),delete this._container,delete this._rootGroup},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){Bi.prototype._update.call(this);var t=this._bounds,e=t.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),wt(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=Fi("path");t.options.className&&pt(e,t.options.className),t.options.interactive&&pt(e,"leaflet-interactive"),this._updateStyle(t),this._layers[i(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){ct(t._path),t.removeInteractiveTarget(t._path),delete this._layers[i(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;e&&(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},
_updatePoly:function(t,e){this._setPath(t,P(t._parts,e))},_updateCircle:function(t){var e=t._point,n=t._radius,i="a"+n+","+(t._radiusY||n)+" 0 1,0 ",r=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+i+2*n+",0 "+i+2*-n+",0 ";this._setPath(t,r)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){ht(t._path)},_bringToBack:function(t){ft(t._path)}});ln&&$i.include(Ri),Nn.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this.options.preferCanvas&&ue()||ce()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||t===undefined)return!1;var e=this._paneRenderers[t];return e===undefined&&(e=$i&&ce({pane:t})||zi&&ue({pane:t}),this._paneRenderers[t]=e),e}});var Ui=bi.extend({initialize:function(t,e){bi.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=S(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});$i.create=Fi,$i.pointsToPath=P,xi.geometryToLayer=Gt,xi.coordsToLatLng=Yt,xi.coordsToLatLngs=Xt,xi.latLngToCoords=Qt,xi.latLngsToCoords=Jt,xi.getFeature=te,xi.asFeature=ee,Nn.mergeOptions({boxZoom:!0});var Hi=Wn.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Z(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){V(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ct(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),Me(),Et(),this._startPoint=this._map.mouseEventToContainerPoint(t),Z(document,{contextmenu:J,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=ut("div","leaflet-zoom-box",this._container),pt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new w(this._point,this._startPoint),n=e.getSize();wt(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(ct(this._box),mt(this._container,"leaflet-crosshair")),Ie(),St(),V(document,{contextmenu:J,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(n(this._resetState,this),0);var e=new E(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}});Nn.addInitHook("addHandler","boxZoom",Hi),Nn.mergeOptions({doubleClickZoom:!0});var qi=Wn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),i=e.options.zoomDelta,r=t.originalEvent.shiftKey?n-i:n+i;"center"===e.options.doubleClickZoom?e.setZoom(r):e.setZoomAround(t.containerPoint,r)}});Nn.addInitHook("addHandler","doubleClickZoom",qi),Nn.mergeOptions({dragging:!0,inertia:!Fe,inertiaDeceleration:3400,inertiaMaxSpeed:Infinity,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Zi=Wn.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new Qn(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}pt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){mt(this._map._container,"leaflet-grab"),mt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=S(this._map.options.maxBounds);this._offsetLimit=k(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),e-this._times[0]>50&&(this._positions.shift(),this._times.shift())}this._map.fire("move",t).fire("drag",t)},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,i=this._draggable._newPos.x,r=(i-e+n)%t+e-n,o=(i+e+n)%t-e-n,s=Math.abs(r+n)<Math.abs(o+n)?r:o;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=s},_onDragEnd:function(t){var e=this._map,n=e.options,i=!n.inertia||this._times.length<2;if(e.fire("dragend",t),i)e.fire("moveend");else{var r=this._lastPos.subtract(this._positions[0]),o=(this._lastTime-this._times[0])/1e3,s=n.easeLinearity,a=r.multiplyBy(s/o),u=a.distanceTo([0,0]),c=Math.min(n.inertiaMaxSpeed,u),l=a.multiplyBy(c/u),h=c/(n.inertiaDeceleration*s),f=l.multiplyBy(-h/2).round();f.x||f.y?(f=e._limitOffset(f,e.options.maxBounds),g(function(){e.panBy(f,{duration:h,easeLinearity:s,noMoveStart:!0,animate:!0})})):e.fire("moveend")}}});Nn.addInitHook("addHandler","dragging",Zi),Nn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Vi=Wn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Z(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),V(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,n=t.scrollTop||e.scrollTop,i=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(i,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,n,i=this._panKeys={},r=this.keyCodes;for(e=0,n=r.left.length;e<n;e++)i[r.left[e]]=[-1*t,0];for(e=0,n=r.right.length;e<n;e++)i[r.right[e]]=[t,0];for(e=0,n=r.down.length;e<n;e++)i[r.down[e]]=[0,t];for(e=0,n=r.up.length;e<n;e++)i[r.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,n,i=this._zoomKeys={},r=this.keyCodes;for(e=0,n=r.zoomIn.length;e<n;e++)i[r.zoomIn[e]]=t;for(e=0,n=r.zoomOut.length;e<n;e++)i[r.zoomOut[e]]=-t},_addHooks:function(){Z(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){V(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,n=t.keyCode,i=this._map;if(n in this._panKeys){if(i._panAnim&&i._panAnim._inProgress)return;e=this._panKeys[n],t.shiftKey&&(e=x(e).multiplyBy(3)),i.panBy(e),i.options.maxBounds&&i.panInsideBounds(i.options.maxBounds)}else if(n in this._zoomKeys)i.setZoom(i.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!i._popup)return;i.closePopup()}J(t)}}});Nn.addInitHook("addHandler","keyboard",Vi),Nn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Wi=Wn.extend({addHooks:function(){Z(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){V(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=et(t),i=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var r=Math.max(i-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(n(this._performZoom,this),r),J(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var i=this._delta/(4*this._map.options.wheelPxPerZoomLevel),r=4*Math.log(2/(1+Math.exp(-Math.abs(i))))/Math.LN2,o=n?Math.ceil(r/n)*n:r,s=t._limitZoom(e+(this._delta>0?o:-o))-e;this._delta=0,this._startTime=null,s&&("center"===t.options.scrollWheelZoom?t.setZoom(e+s):t.setZoomAround(this._lastMousePos,e+s))}});Nn.addInitHook("addHandler","scrollWheelZoom",Wi),Nn.mergeOptions({tap:!0,tapTolerance:15});var Ki=Wn.extend({addHooks:function(){Z(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){V(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(Q(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],i=e.target;this._startPos=this._newPos=new b(e.clientX,e.clientY),i.tagName&&"a"===i.tagName.toLowerCase()&&pt(i,"leaflet-active"),this._holdTimeout=setTimeout(n(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))},this),1e3),this._simulateEvent("mousedown",e),Z(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),V(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],n=e.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&mt(n,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new b(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var n=document.createEvent("MouseEvents");n._simulated=!0,e.target._simulatedClick=!0,n.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}});rn&&!nn&&Nn.addInitHook("addHandler","tap",Ki),Nn.mergeOptions({touchZoom:rn&&!Fe,bounceAtZoomLimits:!0});var Gi=Wn.extend({addHooks:function(){pt(this._map._container,"leaflet-touch-zoom"),Z(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){mt(this._map._container,"leaflet-touch-zoom"),V(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var n=e.mouseEventToContainerPoint(t.touches[0]),i=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(i)._divideBy(2))),this._startDist=n.distanceTo(i),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),Z(document,"touchmove",this._onTouchMove,this),Z(document,"touchend",this._onTouchEnd,this),Q(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,i=e.mouseEventToContainerPoint(t.touches[0]),r=e.mouseEventToContainerPoint(t.touches[1]),o=i.distanceTo(r)/this._startDist;if(this._zoom=e.getScaleZoom(o,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&o<1||this._zoom>e.getMaxZoom()&&o>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===o)return}else{var s=i._add(r)._divideBy(2)._subtract(this._centerPoint);if(1===o&&0===s.x&&0===s.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(s),this._zoom)}this._moved||(e._moveStart(!0),this._moved=!0),v(this._animRequest);var a=n(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=g(a,this,!0),Q(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,v(this._animRequest),V(document,"touchmove",this._onTouchMove),V(document,"touchend",this._onTouchEnd),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});Nn.addInitHook("addHandler","touchZoom",Gi),Nn.BoxZoom=Hi,Nn.DoubleClickZoom=qi,Nn.Drag=Zi,Nn.Keyboard=Vi,Nn.ScrollWheelZoom=Wi,Nn.Tap=Ki,Nn.TouchZoom=Gi;var Yi=window.L;window.L=t,Object.freeze=de,t.version=fe,t.noConflict=he,t.Control=Bn,t.control=zn,t.Browser=hn,t.Evented=Ee,t.Mixin=Kn,t.Util=we,t.Class=_,t.Handler=Wn,t.extend=e,t.bind=n,t.stamp=i,t.setOptions=l,t.DomEvent=Ln,t.DomUtil=On,t.PosAnimation=Dn,t.Draggable=Qn,t.LineUtil=Jn,t.PolyUtil=ti,t.Point=b,t.point=x,t.Bounds=w,t.bounds=k,t.Transformation=M,t.transformation=I,t.Projection=ii,t.LatLng=T,t.latLng=C,t.LatLngBounds=E,t.latLngBounds=S,t.CRS=Se,t.GeoJSON=xi,t.geoJSON=ne,t.geoJson=ki,t.Layer=ai,t.LayerGroup=ui,t.layerGroup=ci,t.FeatureGroup=li,t.featureGroup=hi,t.ImageOverlay=Ei,t.imageOverlay=Si,t.VideoOverlay=Li,t.videoOverlay=ie,t.DivOverlay=Ti,t.Popup=Ci,t.popup=Mi,t.Tooltip=Ii,t.tooltip=Ai,t.Icon=fi,t.icon=Ht,t.DivIcon=Pi,t.divIcon=re,t.Marker=mi,t.marker=qt,t.TileLayer=Di,t.tileLayer=se,t.GridLayer=Oi,t.gridLayer=oe,t.SVG=$i,t.svg=ce,t.Renderer=Bi,t.Canvas=zi,t.canvas=ue,t.Path=gi,t.CircleMarker=vi,t.circleMarker=Zt,t.Circle=_i,t.circle=Vt,t.Polyline=yi,t.polyline=Wt,t.Polygon=bi,t.polygon=Kt,t.Rectangle=Ui,t.rectangle=le,t.Map=Nn,t.map=Ct}),L.Icon.Default=L.Icon.Default.extend({_getIconUrl:function(t){return{"icon-2x.png":"/assets/marker-icon-2x-2d77a2e4c2f08bbac41808324ef946b9a2fe61b6150480d011b72b379c3b238d.png","shadow.png":"/assets/marker-shadow-264f5c640339f042dd729062cfc04c17f8ea0f29882b538e3848ed8f10edb4da.png","icon.png":"/assets/marker-icon-574c3a5cca85f4114085b6841596d62f00d7c892c7b03f28cbfa301deb1dc437.png"}[t+".png"]},_detectIconPath:function(){return""}}),L.Marker=L.Marker.extend({options:{icon:new L.Icon.Default}}),L.marker=function(t,e){return new L.Marker(t,e)},L.TileLayer.Iiif=L.TileLayer.extend({options:{continuousWorld:!0,tileSize:256,updateWhenIdle:!0,tileFormat:"jpg",fitBounds:!0},initialize:function(t,e){(e=void 0!==e?e:{}).maxZoom&&(this._customMaxZoom=!0),e.tileSize&&(this._explicitTileSize=!0),e=L.setOptions(this,e),this._infoDeferred=new $.Deferred,this._infoUrl=t,this._baseUrl=this._templateUrl(),this._getInfo()},getTileUrl:function(t){var e=this,n=t.x,i=t.y,r=e._getZoomForUrl(),o=Math.pow(2,e.maxNativeZoom-r),s=e.options.tileSize*o,a=n*s,u=i*s,c=Math.min(a+s,e.x)-a,l=Math.min(u+s,e.y)-u;return L.Util.template(this._baseUrl,L.extend({format:e.options.tileFormat,quality:e.quality,region:[a,u,c,l].join(","),rotation:0,size:Math.ceil(c/o)+","},this.options))},onAdd:function(t){var e=this;$.when(e._infoDeferred).done(function(){t._layersMaxZoom=e.maxZoom,L.TileLayer.prototype.onAdd.call(e,t),e.options.fitBounds&&e._fitBounds(),e.on("tileload",function(t){var e=t.tile.naturalHeight,n=t.tile.naturalWidth;256===e&&256===n||(t.tile.style.width=n+"px",t.tile.style.height=e+"px")})})},_fitBounds:function(){var t=this,e=t._getInitialZoom(t._map.getSize()),n=t._imageSizes[e],i=t._map.options.crs.pointToLatLng(L.point(0,n.y),e),r=t._map.options.crs.pointToLatLng(L.point(n.x,0),e),o=L.latLngBounds(i,r);t._map.fitBounds(o,!0)},_getInfo:function(){var t=this;$.getJSON(t._infoUrl).done(function(e){t.y=e.height,t.x=e.width;var n,i,r,o,s,a=[],u=[];e.profile instanceof Array?t.profile=e.profile[0]:t.profile=e.profile,t._setQuality(),t._explicitTileSize||(t.options.tileSize=256,e.tiles?t.options.tileSize=e.tiles[0].width:e.tile_width&&(t.options.tileSize=e.tile_width)),ceilLog2=function(t){return Math.ceil(Math.log(t)/Math.LN2)},t.maxNativeZoom=Math.max(ceilLog2(t.x/t.options.tileSize),ceilLog2(t.y/t.options.tileSize)),t._customMaxZoom&&t.options.maxZoom>t.maxNativeZoom?t.maxZoom=t.options.maxZoom:t.maxZoom=t.maxNativeZoom;for(var c=0;c<=t.maxZoom;c++)n=Math.pow(2,t.maxNativeZoom-c),i=Math.ceil(t.x/n),r=Math.ceil(t.y/n),o=Math.ceil(i/t.options.tileSize),s=Math.ceil(r/t.options.tileSize),a.push([o,s]),u.push(L.point(i,r));t._tierSizes=a,t._imageSizes=u,t._infoDeferred.resolve()})},_setQuality:function(){var t=this;if(!t.options.quality)switch(!0){case/^http:\/\/library.stanford.edu\/iiif\/image-api\/1.1\/compliance.html.*$/.test(t.profile):t.options.quality="native";break;case/^http:\/\/iiif.io\/api\/image\/2.*$/.test(t.profile):t.options.quality="default"}},_infoToBaseUrl:function(){return this._infoUrl.replace("info.json","")},_templateUrl:function(){return this._infoToBaseUrl()+"{region}/{size}/{rotation}/{quality}.{format}"},_isValidTile:function(t){var e=this,n=e._getZoomForUrl(),i=e._tierSizes[n],r=t.x,o=t.y;return!!i&&!(r<0||i[0]<=r||o<0||i[1]<=o)},_getInitialZoom:function(t){for(var e,n=.8,i=this.maxNativeZoom;i>=0;i--)if((e=this._imageSizes[i]).x*n<t.x&&e.y*n<t.y)return i;return 2}}),L.tileLayer.iiif=function(t,e){return new L.TileLayer.Iiif(t,e)},function(t,e){"function"==typeof define&&define.amd?define(["leaflet"],t):"object"==typeof exports&&(module.exports=t(require("leaflet"))),void 0!==e&&e.L&&t(e.L)}(function(t){t.Editable=t.Evented.extend({statics:{FORWARD:1,BACKWARD:-1},options:{zIndex:1e3,polygonClass:t.Polygon,polylineClass:t.Polyline,markerClass:t.Marker,rectangleClass:t.Rectangle,circleClass:t.Circle,drawingCSSClass:"leaflet-editable-drawing",drawingCursor:"crosshair",editLayer:undefined,featuresLayer:undefined,polylineEditorClass:undefined,polygonEditorClass:undefined,markerEditorClass:undefined,rectangleEditorClass:undefined,circleEditorClass:undefined,lineGuideOptions:{},skipMiddleMarkers:!1},initialize:function(e,n){t.setOptions(this,n),this._lastZIndex=this.options.zIndex,this.map=e,this.editLayer=this.createEditLayer(),this.featuresLayer=this.createFeaturesLayer(),this.forwardLineGuide=this.createLineGuide(),this.backwardLineGuide=this.createLineGuide()},fireAndForward:function(t,e){(e=e||{}).editTools=this,this.fire(t,e),this.map.fire(t,e)},createLineGuide:function(){var e=t.extend({dashArray:"5,10",weight:1,interactive:!1},this.options.lineGuideOptions);return t.polyline([],e)},createVertexIcon:function(e){return t.Browser.touch?new t.Editable.TouchVertexIcon(e):new t.Editable.VertexIcon(e)},createEditLayer:function(){return this.options.editLayer||(new t.LayerGroup).addTo(this.map)},createFeaturesLayer:function(){return this.options.featuresLayer||(new t.LayerGroup).addTo(this.map)},moveForwardLineGuide:function(t){this.forwardLineGuide._latlngs.length&&(this.forwardLineGuide._latlngs[1]=t,this.forwardLineGuide._bounds.extend(t),this.forwardLineGuide.redraw())},moveBackwardLineGuide:function(t){this.backwardLineGuide._latlngs.length&&(this.backwardLineGuide._latlngs[1]=t,this.backwardLineGuide._bounds.extend(t),this.backwardLineGuide.redraw())},anchorForwardLineGuide:function(t){this.forwardLineGuide._latlngs[0]=t,this.forwardLineGuide._bounds.extend(t),this.forwardLineGuide.redraw()},anchorBackwardLineGuide:function(t){this.backwardLineGuide._latlngs[0]=t,this.backwardLineGuide._bounds.extend(t),this.backwardLineGuide.redraw()},attachForwardLineGuide:function(){this.editLayer.addLayer(this.forwardLineGuide)},attachBackwardLineGuide:function(){this.editLayer.addLayer(this.backwardLineGuide)},detachForwardLineGuide:function(){this.forwardLineGuide.setLatLngs([]),this.editLayer.removeLayer(this.forwardLineGuide)},detachBackwardLineGuide:function(){this.backwardLineGuide.setLatLngs([]),this.editLayer.removeLayer(this.backwardLineGuide)},blockEvents:function(){this._oldTargets||(this._oldTargets=this.map._targets,this.map._targets={})},unblockEvents:function(){this._oldTargets&&(this.map._targets=t.extend(this.map._targets,this._oldTargets),delete this._oldTargets)},registerForDrawing:function(e){this._drawingEditor&&this.unregisterForDrawing(this._drawingEditor),this.blockEvents(),e.reset(),this._drawingEditor=e,this.map.on("mousemove touchmove",e.onDrawingMouseMove,e),this.map.on("mousedown",this.onMousedown,this),this.map.on("mouseup",this.onMouseup,this),t.DomUtil.addClass(this.map._container,this.options.drawingCSSClass),this.defaultMapCursor=this.map._container.style.cursor,this.map._container.style.cursor=this.options.drawingCursor},unregisterForDrawing:function(e){this.unblockEvents(),t.DomUtil.removeClass(this.map._container,this.options.drawingCSSClass),this.map._container.style.cursor=this.defaultMapCursor,(e=e||this._drawingEditor)&&(this.map.off("mousemove touchmove",e.onDrawingMouseMove,e),this.map.off("mousedown",this.onMousedown,this),this.map.off("mouseup",this.onMouseup,this),e===this._drawingEditor&&(delete this._drawingEditor,e._drawing&&e.cancelDrawing()))},onMousedown:function(t){this._mouseDown=t,this._drawingEditor.onDrawingMouseDown(t)},onMouseup:function(e){if(this._mouseDown){var n=this._drawingEditor,i=this._mouseDown;if(this._mouseDown=null,n.onDrawingMouseUp(e),this._drawingEditor!==n)return;var r=t.point(i.originalEvent.clientX,i.originalEvent.clientY),o=t.point(e.originalEvent.clientX,e.originalEvent.clientY).distanceTo(r);Math.abs(o)<9*(window.devicePixelRatio||1)&&this._drawingEditor.onDrawingClick(e)}},drawing:function(){return this._drawingEditor&&this._drawingEditor.drawing()},stopDrawing:function(){this.unregisterForDrawing()},commitDrawing:function(t){this._drawingEditor&&this._drawingEditor.commitDrawing(t)},connectCreatedToMap:function(t){return this.featuresLayer.addLayer(t)},startPolyline:function(t,e){var n=this.createPolyline([],e);return n.enableEdit(this.map).newShape(t),n},startPolygon:function(t,e){var n=this.createPolygon([],e);return n.enableEdit(this.map).newShape(t),n},startMarker:function(t,e){t=t||this.map.getCenter().clone();var n=this.createMarker(t,e);return n.enableEdit(this.map).startDrawing(),n},startRectangle:function(e,n){var i=e||t.latLng([0,0]),r=new t.LatLngBounds(i,i),o=this.createRectangle(r,n);return o.enableEdit(this.map).startDrawing(),o},startCircle:function(t,e){t=t||this.map.getCenter().clone();var n=this.createCircle(t,e);return n.enableEdit(this.map).startDrawing(),n},startHole:function(t,e){t.newHole(e)},createLayer:function(e,n,i){var r=new e(n,i=t.Util.extend({editOptions:{editTools:this}},i));return this.fireAndForward("editable:created",{layer:r}),r},createPolyline:function(t,e){return this.createLayer(e&&e.polylineClass||this.options.polylineClass,t,e)},createPolygon:function(t,e){return this.createLayer(e&&e.polygonClass||this.options.polygonClass,t,e)},createMarker:function(t,e){return this.createLayer(e&&e.markerClass||this.options.markerClass,t,e)},createRectangle:function(t,e){return this.createLayer(e&&e.rectangleClass||this.options.rectangleClass,t,e)},createCircle:function(t,e){return this.createLayer(e&&e.circleClass||this.options.circleClass,t,e)}}),t.extend(t.Editable,{makeCancellable:function(t){t.cancel=function(){t._cancelled=!0}}}),t.Map.mergeOptions({editToolsClass:t.Editable,editable:!1,editOptions:{}}),t.Map.addInitHook(function(){this.whenReady(function(){this.options.editable&&(this.editTools=new this.options.editToolsClass(this,this.options.editOptions))})}),t.Editable.VertexIcon=t.DivIcon.extend({options:{iconSize:new t.Point(8,8)}}),t.Editable.TouchVertexIcon=t.Editable.VertexIcon.extend({options:{iconSize:new t.Point(20,20)}}),t.Editable.VertexMarker=t.Marker.extend({options:{draggable:!0,className:"leaflet-div-icon leaflet-vertex-icon"},initialize:function(e,n,i,r){this.latlng=e,this.latlngs=n,this.editor=i,t.Marker.prototype.initialize.call(this,e,r),this.options.icon=this.editor.tools.createVertexIcon({className:this.options.className}),this.latlng.__vertex=this,this.editor.editLayer.addLayer(this),this.setZIndexOffset(i.tools._lastZIndex+1)},onAdd:function(e){t.Marker.prototype.onAdd.call(this,e),this.on("drag",this.onDrag),this.on("dragstart",this.onDragStart),this.on("dragend",this.onDragEnd),this.on("mouseup",this.onMouseup),this.on("click",this.onClick),this.on("contextmenu",this.onContextMenu),this.on("mousedown touchstart",this.onMouseDown),this.addMiddleMarkers()},onRemove:function(e){this.middleMarker&&this.middleMarker["delete"](),delete this.latlng.__vertex,this.off("drag",this.onDrag),this.off("dragstart",this.onDragStart),this.off("dragend",this.onDragEnd),this.off("mouseup",this.onMouseup),this.off("click",this.onClick),this.off("contextmenu",this.onContextMenu),this.off("mousedown touchstart",this.onMouseDown),t.Marker.prototype.onRemove.call(this,e)},onDrag:function(e){e.vertex=this,this.editor.onVertexMarkerDrag(e);var n=t.DomUtil.getPosition(this._icon),i=this._map.layerPointToLatLng(n);this.latlng.update(i),this._latlng=this.latlng,this.editor.refresh(),this.middleMarker&&this.middleMarker.updateLatLng();var r=this.getNext();r&&r.middleMarker&&r.middleMarker.updateLatLng()},onDragStart:function(t){t.vertex=this,this.editor.onVertexMarkerDragStart(t)},onDragEnd:function(t){t.vertex=this,this.editor.onVertexMarkerDragEnd(t)},onClick:function(t){t.vertex=this,this.editor.onVertexMarkerClick(t)},onMouseup:function(e){t.DomEvent.stop(e),e.vertex=this,this.editor.map.fire("mouseup",e)},onContextMenu:function(t){t.vertex=this,this.editor.onVertexMarkerContextMenu(t)},onMouseDown:function(t){t.vertex=this,this.editor.onVertexMarkerMouseDown(t)},"delete":function(){var t=this.getNext();this.latlngs.splice(this.getIndex(),1),this.editor.editLayer.removeLayer(this),this.editor.onVertexDeleted({latlng:this.latlng,vertex:this}),this.latlngs.length||this.editor.deleteShape(this.latlngs),t&&t.resetMiddleMarker(),this.editor.refresh()},getIndex:function(){return this.latlngs.indexOf(this.latlng)},getLastIndex:function(){return this.latlngs.length-1},getPrevious:function(){if(!(this.latlngs.length<2)){var t=this.getIndex(),e=t-1;0===t&&this.editor.CLOSED&&(e=this.getLastIndex());var n=this.latlngs[e];return n?n.__vertex:void 0}},getNext:function(){if(!(this.latlngs.length<2)){var t=this.getIndex(),e=t+1;t===this.getLastIndex()&&this.editor.CLOSED&&(e=0);var n=this.latlngs[e];return n?n.__vertex:void 0}},addMiddleMarker:function(t){this.editor.hasMiddleMarkers()&&(t=t||this.getPrevious())&&!this.middleMarker&&(this.middleMarker=this.editor.addMiddleMarker(t,this,this.latlngs,this.editor))},addMiddleMarkers:function(){if(this.editor.hasMiddleMarkers()){var t=this.getPrevious();t&&this.addMiddleMarker(t);var e=this.getNext();e&&e.resetMiddleMarker()}},resetMiddleMarker:function(){this.middleMarker&&this.middleMarker["delete"](),this.addMiddleMarker()},split:function(){this.editor.splitShape&&this.editor.splitShape(this.latlngs,this.getIndex())},"continue":function(){if(this.editor.continueBackward){var t=this.getIndex();0===t?this.editor.continueBackward(this.latlngs):t===this.getLastIndex()&&this.editor.continueForward(this.latlngs)}}}),t.Editable.mergeOptions({vertexMarkerClass:t.Editable.VertexMarker}),t.Editable.MiddleMarker=t.Marker.extend({options:{opacity:.5,className:"leaflet-div-icon leaflet-middle-icon",draggable:!0},initialize:function(e,n,i,r,o){this.left=e,this.right=n,this.editor=r,this.latlngs=i,t.Marker.prototype.initialize.call(this,this.computeLatLng(),o),this._opacity=this.options.opacity,this.options.icon=this.editor.tools.createVertexIcon({className:this.options.className}),this.editor.editLayer.addLayer(this),this.setVisibility()},setVisibility:function(){var e=this._map.latLngToContainerPoint(this.left.latlng),n=this._map.latLngToContainerPoint(this.right.latlng),i=t.point(this.options.icon.options.iconSize);e.distanceTo(n)<3*i.x?this.hide():this.show()},show:function(){this.setOpacity(this._opacity)},hide:function(){this.setOpacity(0)},updateLatLng:function(){this.setLatLng(this.computeLatLng()),this.setVisibility()},computeLatLng:function(){var t=this.editor.map.latLngToContainerPoint(this.left.latlng),e=this.editor.map.latLngToContainerPoint(this.right.latlng),n=(t.y+e.y)/2,i=(t.x+e.x)/2;return this.editor.map.containerPointToLatLng([i,n])},onAdd:function(e){t.Marker.prototype.onAdd.call(this,e),t.DomEvent.on(this._icon,"mousedown touchstart",this.onMouseDown,this),e.on("zoomend",this.setVisibility,this)},onRemove:function(e){delete this.right.middleMarker,t.DomEvent.off(this._icon,"mousedown touchstart",this.onMouseDown,this),e.off("zoomend",this.setVisibility,this),t.Marker.prototype.onRemove.call(this,e)},onMouseDown:function(e){var n=t.DomUtil.getPosition(this._icon);if(e={originalEvent:e,latlng:this.editor.map.layerPointToLatLng(n)},0!==this.options.opacity&&(t.Editable.makeCancellable(e),this.editor.onMiddleMarkerMouseDown(e),!e._cancelled)){this.latlngs.splice(this.index(),0,e.latlng),this.editor.refresh();var i=this._icon,r=this.editor.addVertexMarker(e.latlng,this.latlngs),o=r._icon.parentNode;o.removeChild(r._icon),r._icon=i,o.appendChild(r._icon),r._initIcon(),r._initInteraction(),r.setOpacity(1),t.Draggable._dragging=!1,r.dragging._draggable._onDown(e.originalEvent),this["delete"]()}},"delete":function(){this.editor.editLayer.removeLayer(this)},index:function(){return this.latlngs.indexOf(this.right.latlng)}}),t.Editable.mergeOptions({middleMarkerClass:t.Editable.MiddleMarker}),t.Editable.BaseEditor=t.Handler.extend({initialize:function(e,n,i){t.setOptions(this,i),this.map=e,this.feature=n,this.feature.editor=this,this.editLayer=new t.LayerGroup,this.tools=this.options.editTools||e.editTools},addHooks:function(){this.isConnected()?this.onFeatureAdd():this.feature.once("add",this.onFeatureAdd,this),this.onEnable(),this.feature.on(this._getEvents(),this)},removeHooks:function(){this.feature.off(this._getEvents(),this),this.feature.dragging&&this.feature.dragging.disable(),this.editLayer.clearLayers(),this.tools.editLayer.removeLayer(this.editLayer),this.onDisable(),this._drawing&&this.cancelDrawing()},drawing:function(){return!!this._drawing},reset:function(){},onFeatureAdd:function(){this.tools.editLayer.addLayer(this.editLayer),this.feature.dragging&&this.feature.dragging.enable()},hasMiddleMarkers:function(){return!this.options.skipMiddleMarkers&&!this.tools.options.skipMiddleMarkers},fireAndForward:function(t,e){(e=e||{}).layer=this.feature,this.feature.fire(t,e),this.tools.fireAndForward(t,e)},onEnable:function(){this.fireAndForward("editable:enable")},onDisable:function(){this.fireAndForward("editable:disable")},onEditing:function(){this.fireAndForward("editable:editing")},onStartDrawing:function(){this.fireAndForward("editable:drawing:start")},onEndDrawing:function(){this.fireAndForward("editable:drawing:end")},onCancelDrawing:function(){this.fireAndForward("editable:drawing:cancel")},onCommitDrawing:function(t){this.fireAndForward("editable:drawing:commit",t)},onDrawingMouseDown:function(t){this.fireAndForward("editable:drawing:mousedown",t)},onDrawingMouseUp:function(t){this.fireAndForward("editable:drawing:mouseup",t)},startDrawing:function(){this._drawing||(this._drawing=t.Editable.FORWARD),this.tools.registerForDrawing(this),this.onStartDrawing()},commitDrawing:function(t){this.onCommitDrawing(t),this.endDrawing()},cancelDrawing:function(){
t.Draggable._dragging=!1,this.onCancelDrawing(),this.endDrawing()},endDrawing:function(){this._drawing=!1,this.tools.unregisterForDrawing(this),this.onEndDrawing()},onDrawingClick:function(e){this.drawing()&&(t.Editable.makeCancellable(e),this.fireAndForward("editable:drawing:click",e),e._cancelled||(this.isConnected()||this.connect(e),this.processDrawingClick(e)))},isConnected:function(){return this.map.hasLayer(this.feature)},connect:function(){this.tools.connectCreatedToMap(this.feature),this.tools.editLayer.addLayer(this.editLayer)},onMove:function(t){this.fireAndForward("editable:drawing:move",t)},onDrawingMouseMove:function(t){this.onMove(t)},_getEvents:function(){return{dragstart:this.onDragStart,drag:this.onDrag,dragend:this.onDragEnd,remove:this.disable}},onDragStart:function(t){this.onEditing(),this.fireAndForward("editable:dragstart",t)},onDrag:function(t){this.onMove(t),this.fireAndForward("editable:drag",t)},onDragEnd:function(t){this.fireAndForward("editable:dragend",t)}}),t.Editable.MarkerEditor=t.Editable.BaseEditor.extend({onDrawingMouseMove:function(e){t.Editable.BaseEditor.prototype.onDrawingMouseMove.call(this,e),this._drawing&&this.feature.setLatLng(e.latlng)},processDrawingClick:function(t){this.fireAndForward("editable:drawing:clicked",t),this.commitDrawing(t)},connect:function(e){e&&(this.feature._latlng=e.latlng),t.Editable.BaseEditor.prototype.connect.call(this,e)}}),t.Editable.PathEditor=t.Editable.BaseEditor.extend({CLOSED:!1,MIN_VERTEX:2,addHooks:function(){return t.Editable.BaseEditor.prototype.addHooks.call(this),this.feature&&this.initVertexMarkers(),this},initVertexMarkers:function(e){if(this.enabled())if(e=e||this.getLatLngs(),t.Polyline._flat(e))this.addVertexMarkers(e);else for(var n=0;n<e.length;n++)this.initVertexMarkers(e[n])},getLatLngs:function(){return this.feature.getLatLngs()},reset:function(){this.editLayer.clearLayers(),this.initVertexMarkers()},addVertexMarker:function(t,e){return new this.tools.options.vertexMarkerClass(t,e,this)},addVertexMarkers:function(t){for(var e=0;e<t.length;e++)this.addVertexMarker(t[e],t)},refreshVertexMarkers:function(t){t=t||this.getDefaultLatLngs();for(var e=0;e<t.length;e++)t[e].__vertex.update()},addMiddleMarker:function(t,e,n){return new this.tools.options.middleMarkerClass(t,e,n,this)},onVertexMarkerClick:function(e){if(t.Editable.makeCancellable(e),this.fireAndForward("editable:vertex:click",e),!(e._cancelled||this.tools.drawing()&&this.tools._drawingEditor!==this)){var n,i=e.vertex.getIndex();e.originalEvent.ctrlKey?this.onVertexMarkerCtrlClick(e):e.originalEvent.altKey?this.onVertexMarkerAltClick(e):e.originalEvent.shiftKey?this.onVertexMarkerShiftClick(e):e.originalEvent.metaKey?this.onVertexMarkerMetaKeyClick(e):i===e.vertex.getLastIndex()&&this._drawing===t.Editable.FORWARD?i>=this.MIN_VERTEX-1&&(n=!0):0===i&&this._drawing===t.Editable.BACKWARD&&this._drawnLatLngs.length>=this.MIN_VERTEX?n=!0:0===i&&this._drawing===t.Editable.FORWARD&&this._drawnLatLngs.length>=this.MIN_VERTEX&&this.CLOSED?n=!0:this.onVertexRawMarkerClick(e),this.fireAndForward("editable:vertex:clicked",e),n&&this.commitDrawing(e)}},onVertexRawMarkerClick:function(t){this.fireAndForward("editable:vertex:rawclick",t),t._cancelled||this.vertexCanBeDeleted(t.vertex)&&t.vertex["delete"]()},vertexCanBeDeleted:function(t){return t.latlngs.length>this.MIN_VERTEX},onVertexDeleted:function(t){this.fireAndForward("editable:vertex:deleted",t)},onVertexMarkerCtrlClick:function(t){this.fireAndForward("editable:vertex:ctrlclick",t)},onVertexMarkerShiftClick:function(t){this.fireAndForward("editable:vertex:shiftclick",t)},onVertexMarkerMetaKeyClick:function(t){this.fireAndForward("editable:vertex:metakeyclick",t)},onVertexMarkerAltClick:function(t){this.fireAndForward("editable:vertex:altclick",t)},onVertexMarkerContextMenu:function(t){this.fireAndForward("editable:vertex:contextmenu",t)},onVertexMarkerMouseDown:function(t){this.fireAndForward("editable:vertex:mousedown",t)},onMiddleMarkerMouseDown:function(t){this.fireAndForward("editable:middlemarker:mousedown",t)},onVertexMarkerDrag:function(t){this.onMove(t),this.feature._bounds&&this.extendBounds(t),this.fireAndForward("editable:vertex:drag",t)},onVertexMarkerDragStart:function(t){this.fireAndForward("editable:vertex:dragstart",t)},onVertexMarkerDragEnd:function(t){this.fireAndForward("editable:vertex:dragend",t)},setDrawnLatLngs:function(t){this._drawnLatLngs=t||this.getDefaultLatLngs()},startDrawing:function(){this._drawnLatLngs||this.setDrawnLatLngs(),t.Editable.BaseEditor.prototype.startDrawing.call(this)},startDrawingForward:function(){this.startDrawing()},endDrawing:function(){this.tools.detachForwardLineGuide(),this.tools.detachBackwardLineGuide(),this._drawnLatLngs&&this._drawnLatLngs.length<this.MIN_VERTEX&&this.deleteShape(this._drawnLatLngs),t.Editable.BaseEditor.prototype.endDrawing.call(this),delete this._drawnLatLngs},addLatLng:function(e){this._drawing===t.Editable.FORWARD?this._drawnLatLngs.push(e):this._drawnLatLngs.unshift(e),this.feature._bounds.extend(e),this.addVertexMarker(e,this._drawnLatLngs),this.refresh()},newPointForward:function(t){this.addLatLng(t),this.tools.attachForwardLineGuide(),this.tools.anchorForwardLineGuide(t)},newPointBackward:function(t){this.addLatLng(t),this.tools.anchorBackwardLineGuide(t)},push:function(e){if(!e)return console.error("L.Editable.PathEditor.push expect a vaild latlng as parameter");this._drawing===t.Editable.FORWARD?this.newPointForward(e):this.newPointBackward(e)},removeLatLng:function(t){t.__vertex["delete"](),this.refresh()},pop:function(){if(!(this._drawnLatLngs.length<=1)){var e;return e=this._drawing===t.Editable.FORWARD?this._drawnLatLngs[this._drawnLatLngs.length-1]:this._drawnLatLngs[0],this.removeLatLng(e),this._drawing===t.Editable.FORWARD?this.tools.anchorForwardLineGuide(this._drawnLatLngs[this._drawnLatLngs.length-1]):this.tools.anchorForwardLineGuide(this._drawnLatLngs[0]),e}},processDrawingClick:function(e){e.vertex&&e.vertex.editor===this||(this._drawing===t.Editable.FORWARD?this.newPointForward(e.latlng):this.newPointBackward(e.latlng),this.fireAndForward("editable:drawing:clicked",e))},onDrawingMouseMove:function(e){t.Editable.BaseEditor.prototype.onDrawingMouseMove.call(this,e),this._drawing&&(this.tools.moveForwardLineGuide(e.latlng),this.tools.moveBackwardLineGuide(e.latlng))},refresh:function(){this.feature.redraw(),this.onEditing()},newShape:function(t){var e=this.addNewEmptyShape();e&&(this.setDrawnLatLngs(e[0]||e),this.startDrawingForward(),this.fireAndForward("editable:shape:new",{shape:e}),t&&this.newPointForward(t))},deleteShape:function(e,n){var i={shape:e};if(t.Editable.makeCancellable(i),this.fireAndForward("editable:shape:delete",i),!i._cancelled)return e=this._deleteShape(e,n),this.ensureNotFlat&&this.ensureNotFlat(),this.feature.setLatLngs(this.getLatLngs()),this.refresh(),this.reset(),this.fireAndForward("editable:shape:deleted",{shape:e}),e},_deleteShape:function(t,e){if((e=e||this.getLatLngs()).length){var n=this,i=function(t,e){return t.splice(t.indexOf(e),1),t.length||n._deleteShape(t),e};if(e===t)return function(t){return t.splice(0,Number.MAX_VALUE)}(e,t);for(var r=0;r<e.length;r++){if(e[r]===t)return i(e,t);if(-1!==e[r].indexOf(t))return i(e[r],t)}}},deleteShapeAt:function(t){var e=this.feature.shapeAt(t);if(e)return this.deleteShape(e)},appendShape:function(t){this.insertShape(t)},prependShape:function(t){this.insertShape(t,0)},insertShape:function(t,e){this.ensureMulti(),t=this.formatShape(t),void 0===e&&(e=this.feature._latlngs.length),this.feature._latlngs.splice(e,0,t),this.feature.redraw(),this._enabled&&this.reset()},extendBounds:function(t){this.feature._bounds.extend(t.vertex.latlng)},onDragStart:function(e){this.editLayer.clearLayers(),t.Editable.BaseEditor.prototype.onDragStart.call(this,e)},onDragEnd:function(e){this.initVertexMarkers(),t.Editable.BaseEditor.prototype.onDragEnd.call(this,e)}}),t.Editable.PolylineEditor=t.Editable.PathEditor.extend({startDrawingBackward:function(){this._drawing=t.Editable.BACKWARD,this.startDrawing()},continueBackward:function(t){this.drawing()||(t=t||this.getDefaultLatLngs(),this.setDrawnLatLngs(t),t.length>0&&(this.tools.attachBackwardLineGuide(),this.tools.anchorBackwardLineGuide(t[0])),this.startDrawingBackward())},continueForward:function(t){this.drawing()||(t=t||this.getDefaultLatLngs(),this.setDrawnLatLngs(t),t.length>0&&(this.tools.attachForwardLineGuide(),this.tools.anchorForwardLineGuide(t[t.length-1])),this.startDrawingForward())},getDefaultLatLngs:function(e){return!(e=e||this.feature._latlngs).length||e[0]instanceof t.LatLng?e:this.getDefaultLatLngs(e[0])},ensureMulti:function(){this.feature._latlngs.length&&t.Polyline._flat(this.feature._latlngs)&&(this.feature._latlngs=[this.feature._latlngs])},addNewEmptyShape:function(){if(this.feature._latlngs.length){var t=[];return this.appendShape(t),t}return this.feature._latlngs},formatShape:function(e){return t.Polyline._flat(e)?e:e[0]?this.formatShape(e[0]):void 0},splitShape:function(e,n){if(n&&!(n>=e.length-1)){this.ensureMulti();var i=this.feature._latlngs.indexOf(e);if(-1!==i){var r=e.slice(0,n+1),o=e.slice(n);o[0]=t.latLng(o[0].lat,o[0].lng,o[0].alt),this.feature._latlngs.splice(i,1,r,o),this.refresh(),this.reset()}}}}),t.Editable.PolygonEditor=t.Editable.PathEditor.extend({CLOSED:!0,MIN_VERTEX:3,newPointForward:function(e){t.Editable.PathEditor.prototype.newPointForward.call(this,e),this.tools.backwardLineGuide._latlngs.length||this.tools.anchorBackwardLineGuide(e),2===this._drawnLatLngs.length&&this.tools.attachBackwardLineGuide()},addNewEmptyHole:function(t){this.ensureNotFlat();var e=this.feature.shapeAt(t);if(e){var n=[];return e.push(n),n}},newHole:function(t){var e=this.addNewEmptyHole(t);e&&(this.setDrawnLatLngs(e),this.startDrawingForward(),t&&this.newPointForward(t))},addNewEmptyShape:function(){if(this.feature._latlngs.length&&this.feature._latlngs[0].length){var t=[];return this.appendShape(t),t}return this.feature._latlngs},ensureMulti:function(){this.feature._latlngs.length&&t.Polyline._flat(this.feature._latlngs[0])&&(this.feature._latlngs=[this.feature._latlngs])},ensureNotFlat:function(){this.feature._latlngs.length&&!t.Polyline._flat(this.feature._latlngs)||(this.feature._latlngs=[this.feature._latlngs])},vertexCanBeDeleted:function(e){var n=this.feature.parentShape(e.latlngs);return t.Util.indexOf(n,e.latlngs)>0||t.Editable.PathEditor.prototype.vertexCanBeDeleted.call(this,e)},getDefaultLatLngs:function(){return this.feature._latlngs.length||this.feature._latlngs.push([]),this.feature._latlngs[0]},formatShape:function(e){return!t.Polyline._flat(e)||e[0]&&0===e[0].length?e:[e]}}),t.Editable.RectangleEditor=t.Editable.PathEditor.extend({CLOSED:!0,MIN_VERTEX:4,options:{skipMiddleMarkers:!0},extendBounds:function(e){var n=e.vertex.getIndex(),i=e.vertex.getNext(),r=e.vertex.getPrevious(),o=(n+2)%4,s=e.vertex.latlngs[o],a=new t.LatLngBounds(e.latlng,s);r.latlng.update([e.latlng.lat,s.lng]),i.latlng.update([s.lat,e.latlng.lng]),this.updateBounds(a),this.refreshVertexMarkers()},onDrawingMouseDown:function(e){t.Editable.PathEditor.prototype.onDrawingMouseDown.call(this,e),this.connect();var n=this.getDefaultLatLngs();3===n.length&&n.push(e.latlng);var i=new t.LatLngBounds(e.latlng,e.latlng);this.updateBounds(i),this.updateLatLngs(i),this.refresh(),this.reset(),e.originalEvent._simulated=!1,this.map.dragging._draggable._onUp(e.originalEvent),n[3].__vertex.dragging._draggable._onDown(e.originalEvent)},onDrawingMouseUp:function(e){this.commitDrawing(e),e.originalEvent._simulated=!1,t.Editable.PathEditor.prototype.onDrawingMouseUp.call(this,e)},onDrawingMouseMove:function(e){e.originalEvent._simulated=!1,t.Editable.PathEditor.prototype.onDrawingMouseMove.call(this,e)},getDefaultLatLngs:function(t){return t||this.feature._latlngs[0]},updateBounds:function(t){this.feature._bounds=t},updateLatLngs:function(t){for(var e=this.getDefaultLatLngs(),n=this.feature._boundsToLatLngs(t),i=0;i<e.length;i++)e[i].update(n[i])}}),t.Editable.CircleEditor=t.Editable.PathEditor.extend({MIN_VERTEX:2,options:{skipMiddleMarkers:!0},initialize:function(e,n,i){t.Editable.PathEditor.prototype.initialize.call(this,e,n,i),this._resizeLatLng=this.computeResizeLatLng()},computeResizeLatLng:function(){var t=(this.feature._radius||this.feature._mRadius)*Math.cos(Math.PI/4),e=this.map.project(this.feature._latlng);return this.map.unproject([e.x+t,e.y-t])},updateResizeLatLng:function(){this._resizeLatLng.update(this.computeResizeLatLng()),this._resizeLatLng.__vertex.update()},getLatLngs:function(){return[this.feature._latlng,this._resizeLatLng]},getDefaultLatLngs:function(){return this.getLatLngs()},onVertexMarkerDrag:function(e){1===e.vertex.getIndex()?this.resize(e):this.updateResizeLatLng(e),t.Editable.PathEditor.prototype.onVertexMarkerDrag.call(this,e)},resize:function(t){var e=this.feature._latlng.distanceTo(t.latlng);this.feature.setRadius(e)},onDrawingMouseDown:function(e){t.Editable.PathEditor.prototype.onDrawingMouseDown.call(this,e),this._resizeLatLng.update(e.latlng),this.feature._latlng.update(e.latlng),this.connect(),e.originalEvent._simulated=!1,this.map.dragging._draggable._onUp(e.originalEvent),this._resizeLatLng.__vertex.dragging._draggable._onDown(e.originalEvent)},onDrawingMouseUp:function(e){this.commitDrawing(e),e.originalEvent._simulated=!1,t.Editable.PathEditor.prototype.onDrawingMouseUp.call(this,e)},onDrawingMouseMove:function(e){e.originalEvent._simulated=!1,t.Editable.PathEditor.prototype.onDrawingMouseMove.call(this,e)},onDrag:function(e){t.Editable.PathEditor.prototype.onDrag.call(this,e),this.feature.dragging.updateLatLng(this._resizeLatLng)}});var e={createEditor:function(t){t=t||this._map;var e=(this.options.editOptions||{}).editTools||t.editTools;if(!e)throw Error("Unable to detect Editable instance.");return new(this.options.editorClass||this.getEditorClass(e))(t,this,this.options.editOptions)},enableEdit:function(t){return this.editor||this.createEditor(t),this.editor.enable(),this.editor},editEnabled:function(){return this.editor&&this.editor.enabled()},disableEdit:function(){this.editor&&(this.editor.disable(),delete this.editor)},toggleEdit:function(){this.editEnabled()?this.disableEdit():this.enableEdit()},_onEditableAdd:function(){this.editor&&this.enableEdit()}},n={getEditorClass:function(e){return e&&e.options.polylineEditorClass?e.options.polylineEditorClass:t.Editable.PolylineEditor},shapeAt:function(e,n){var i=null;if(!(n=n||this._latlngs).length)return i;if(t.Polyline._flat(n)&&this.isInLatLngs(e,n))i=n;else for(var r=0;r<n.length;r++)if(this.isInLatLngs(e,n[r]))return n[r];return i},isInLatLngs:function(e,n){if(!n)return!1;var i,r,o,s,a=[],u=this._clickTolerance();if(this._projectLatlngs(n,a,this._pxBounds),a=a[0],s=this._map.latLngToLayerPoint(e),!this._pxBounds.contains(s))return!1;for(i=1,o=a.length,r=0;i<o;r=i++)if(t.LineUtil.pointToSegmentDistance(s,a[r],a[i])<=u)return!0;return!1}},i={getEditorClass:function(e){return e&&e.options.polygonEditorClass?e.options.polygonEditorClass:t.Editable.PolygonEditor},shapeAt:function(e,n){var i=null;if(!(n=n||this._latlngs).length)return i;if(t.Polyline._flat(n)&&this.isInLatLngs(e,n))i=n;else if(t.Polyline._flat(n[0])&&this.isInLatLngs(e,n[0]))i=n;else for(var r=0;r<n.length;r++)if(this.isInLatLngs(e,n[r][0]))return n[r];return i},isInLatLngs:function(t,e){var n,i,r,o,s,a=!1;for(r=0,o=(s=e.length)-1;r<s;o=r++)n=e[r],i=e[o],n.lat>t.lat!=i.lat>t.lat&&t.lng<(i.lng-n.lng)*(t.lat-n.lat)/(i.lat-n.lat)+n.lng&&(a=!a);return a},parentShape:function(e,n){if(n=n||this._latlngs){var i=t.Util.indexOf(n,e);if(-1!==i)return n;for(var r=0;r<n.length;r++)if(-1!==(i=t.Util.indexOf(n[r],e)))return n[r]}}},r={getEditorClass:function(e){return e&&e.options.markerEditorClass?e.options.markerEditorClass:t.Editable.MarkerEditor}},o={getEditorClass:function(e){return e&&e.options.rectangleEditorClass?e.options.rectangleEditorClass:t.Editable.RectangleEditor}},s={getEditorClass:function(e){return e&&e.options.circleEditorClass?e.options.circleEditorClass:t.Editable.CircleEditor}},a=function(){this.on("add",this._onEditableAdd)};t.Polyline&&(t.Polyline.include(e),t.Polyline.include(n),t.Polyline.addInitHook(a)),t.Polygon&&(t.Polygon.include(e),t.Polygon.include(i)),t.Marker&&(t.Marker.include(e),t.Marker.include(r),t.Marker.addInitHook(a)),t.Rectangle&&(t.Rectangle.include(e),t.Rectangle.include(o)),t.Circle&&(t.Circle.include(e),t.Circle.include(s)),t.LatLng.prototype.update=function(e){e=t.latLng(e),this.lat=e.lat,this.lng=e.lng}},window),L.PathDraggable=L.Draggable.extend({initialize:function(t){this._path=t,this._canvas=t._map.getRenderer(t)instanceof L.Canvas;var e=this._canvas?this._path._map.getRenderer(this._path)._container:this._path._path;L.Draggable.prototype.initialize.call(this,e,e,!0)},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("drag",t)},_onDown:function(t){var e=t.touches?t.touches[0]:t;this._startPoint=new L.Point(e.clientX,e.clientY),this._canvas&&!this._path._containsPoint(this._path._map.mouseEventToLayerPoint(e))||L.Draggable.prototype._onDown.call(this,t)}}),L.Handler.PathDrag=L.Handler.extend({initialize:function(t){this._path=t},getEvents:function(){return{dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd}},addHooks:function(){this._draggable||(this._draggable=new L.PathDraggable(this._path)),this._draggable.on(this.getEvents(),this).enable(),L.DomUtil.addClass(this._draggable._element,"leaflet-path-draggable")},removeHooks:function(){this._draggable.off(this.getEvents(),this).disable(),L.DomUtil.removeClass(this._draggable._element,"leaflet-path-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._startPoint=this._draggable._startPoint,this._path.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(t){var e=this._path,n=t.originalEvent.touches&&1===t.originalEvent.touches.length?t.originalEvent.touches[0]:t.originalEvent,i=L.point(n.clientX,n.clientY),r=e._map.layerPointToLatLng(i);this._offset=i.subtract(this._startPoint),this._startPoint=i,this._path.eachLatLng(this.updateLatLng,this),e.redraw(),t.latlng=r,t.offset=this._offset,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){this._path._bounds&&this.resetBounds(),this._path.fire("moveend").fire("dragend",t)},latLngToLayerPoint:function(t){return this._path._map.project(L.latLng(t))._subtract(this._path._map.getPixelOrigin())},updateLatLng:function(t){var e=this.latLngToLayerPoint(t);e._add(this._offset);var n=this._path._map.layerPointToLatLng(e);t.lat=n.lat,t.lng=n.lng},resetBounds:function(){this._path._bounds=new L.LatLngBounds,this._path.eachLatLng(function(t){this._bounds.extend(t)})}}),L.Path.include({eachLatLng:function(t,e){e=e||this;var n=function(i){for(var r=0;r<i.length;r++)L.Util.isArray(i[r])?n(i[r]):t.call(e,i[r])};n(this.getLatLngs?this.getLatLngs():[this.getLatLng()])}}),L.Path.addInitHook(function(){this.dragging=new L.Handler.PathDrag(this),this.options.draggable&&this.once("add",function(){this.dragging.enable()})});var requirejs,require,define;!function(t){function e(t,e){return _.call(t,e)}function n(t,e){var n,i,r,o,s,a,u,c,l,h,f,d=e&&e.split("/"),p=g.map,m=p&&p["*"]||{};if(t){for(s=(t=t.split("/")).length-1,g.nodeIdCompat&&b.test(t[s])&&(t[s]=t[s].replace(b,"")),"."===t[0].charAt(0)&&d&&(t=d.slice(0,d.length-1).concat(t)),l=0;l<t.length;l++)if("."===(f=t[l]))t.splice(l,1),l-=1;else if(".."===f){if(0===l||1===l&&".."===t[2]||".."===t[l-1])continue;l>0&&(t.splice(l-1,2),l-=2)}t=t.join("/")}if((d||m)&&p){for(l=(n=t.split("/")).length;l>0;l-=1){if(i=n.slice(0,l).join("/"),d)for(h=d.length;h>0;h-=1)if((r=p[d.slice(0,h).join("/")])&&(r=r[i])){o=r,a=l;break}if(o)break;!u&&m&&m[i]&&(u=m[i],c=l)}!o&&u&&(o=u,a=c),o&&(n.splice(0,a,o),t=n.join("/"))}return t}function i(e,n){return function(){var i=y.call(arguments,0);return"string"!=typeof i[0]&&1===i.length&&i.push(null),h.apply(t,i.concat([e,n]))}}function r(t){return function(e){return n(e,t)}}function o(t){return function(e){p[t]=e}}function s(n){if(e(m,n)){var i=m[n];delete m[n],v[n]=!0,l.apply(t,i)}if(!e(p,n)&&!e(v,n))throw new Error("No "+n);return p[n]}function a(t){var e,n=t?t.indexOf("!"):-1;return n>-1&&(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function u(t){return t?a(t):[]}function c(t){return function(){return g&&g.config&&g.config[t]||{}}}var l,h,f,d,p={},m={},g={},v={},_=Object.prototype.hasOwnProperty,y=[].slice,b=/\.js$/;f=function(t,e){var i,o=a(t),u=o[0],c=e[1];return t=o[1],u&&(i=s(u=n(u,c))),u?t=i&&i.normalize?i.normalize(t,r(c)):n(t,c):(u=(o=a(t=n(t,c)))[0],t=o[1],u&&(i=s(u))),{f:u?u+"!"+t:t,n:t,pr:u,p:i}},d={require:function(t){return i(t)},exports:function(t){var e=p[t];return void 0!==e?e:p[t]={}},module:function(t){return{id:t,uri:"",exports:p[t],config:c(t)}}},l=function(n,r,a,c){var l,h,g,_,y,b,x,w=[],k=typeof a;if(c=c||n,b=u(c),"undefined"===k||"function"===k){for(r=!r.length&&a.length?["require","exports","module"]:r,y=0;y<r.length;y+=1)if(_=f(r[y],b),"require"===(h=_.f))w[y]=d.require(n);else if("exports"===h)w[y]=d.exports(n),x=!0;else if("module"===h)l=w[y]=d.module(n);else if(e(p,h)||e(m,h)||e(v,h))w[y]=s(h);else{if(!_.p)throw new Error(n+" missing "+h);_.p.load(_.n,i(c,!0),o(h),{}),w[y]=p[h]}g=a?a.apply(p[n],w):undefined,n&&(l&&l.exports!==t&&l.exports!==p[n]?p[n]=l.exports:g===t&&x||(p[n]=g))}else n&&(p[n]=a)},requirejs=require=h=function(e,n,i,r,o){if("string"==typeof e)return d[e]?d[e](n):s(f(e,u(n)).f);if(!e.splice){if((g=e).deps&&h(g.deps,g.callback),!n)return;n.splice?(e=n,n=i,i=null):e=t}return n=n||function(){},"function"==typeof i&&(i=r,r=o),r?l(t,e,n,i):setTimeout(function(){l(t,e,n,i)},4),h},h.config=function(t){return h(t)},requirejs._defined=p,(define=function(t,n,i){if("string"!=typeof t)throw new Error("See almond README: incorrect module build, no module name");n.splice||(i=n,n=[]),e(p,t)||e(m,t)||(m[t]=[t,n,i])}).amd={jQuery:!0}}(),function t(e,n,i){function r(s,a){if(!n[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return r(n||t)},l,l.exports,t,e,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(t){(function(e){"use strict";function n(t,e,n){t[e]||Object[i](t,e,{writable:!0,configurable:!0,value:n})}if(t(295),t(296),t(2),e._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");e._babelPolyfill=!0;var i="defineProperty";n(String.prototype,"padLeft","".padStart),n(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(t){[][t]&&n(Array,t,Function.call.bind([][t]))})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2,295:295,296:296}],2:[function(t,e){t(119),e.exports=t(23).RegExp.escape},{119:119,23:23}],3:[function(t,e){e.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},{}],4:[function(t,e){var n=t(18);e.exports=function(t,e){if("number"!=typeof t&&"Number"!=n(t))throw TypeError(e);return+t}},{18:18}],5:[function(t,e){var n=t(117)("unscopables"),i=Array.prototype;void 0==i[n]&&t(40)(i,n,{}),e.exports=function(t){i[n][t]=!0}},{117:117,40:40}],6:[function(t,e){e.exports=function(t,e,n,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(n+": incorrect invocation!");return t}},{}],7:[function(t,e){var n=t(49);e.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},{49:49}],8:[function(t,e){"use strict";var n=t(109),i=t(105),r=t(108);e.exports=[].copyWithin||function(t,e){var o=n(this),s=r(o.length),a=i(t,s),u=i(e,s),c=arguments.length>2?arguments[2]:void 0,l=Math.min((void 0===c?s:i(c,s))-u,s-a),h=1;for(u<a&&a<u+l&&(h=-1,u+=l-1,a+=l-1);l-- >0;)u in o?o[a]=o[u]:delete o[a],a+=h,u+=h;return o}},{105:105,108:108,109:109}],9:[function(t,e){"use strict";var n=t(109),i=t(105),r=t(108);e.exports=function(t){for(var e=n(this),o=r(e.length),s=arguments.length,a=i(s>1?arguments[1]:void 0,o),u=s>2?arguments[2]:void 0,c=void 0===u?o:i(u,o);c>a;)e[a++]=t;return e}},{105:105,108:108,109:109}],10:[function(t,e){var n=t(37);e.exports=function(t,e){var i=[];return n(t,!1,i.push,i,e),i}},{37:37}],11:[function(t,e){var n=t(107),i=t(108),r=t(105);e.exports=function(t){return function(e,o,s){var a,u=n(e),c=i(u.length),l=r(s,c);if(t&&o!=o){for(;c>l;)if((a=u[l++])!=a)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===o)return t||l||0;return!t&&-1}}},{105:105,107:107,108:108}],12:[function(t,e){var n=t(25),i=t(45),r=t(109),o=t(108),s=t(15);e.exports=function(t,e){var a=1==t,u=2==t,c=3==t,l=4==t,h=6==t,f=5==t||h,d=e||s;return function(e,s,p){for(var m,g,v=r(e),_=i(v),y=n(s,p,3),b=o(_.length),x=0,w=a?d(e,b):u?d(e,0):void 0;b>x;x++)if((f||x in _)&&(m=_[x],g=y(m,x,v),t))if(a)w[x]=g;else if(g)switch(t){case 3:return!0;case 5:return m;case 6:return x;case 2:w.push(m)}else if(l)return!1;return h?-1:c||l?l:w}}},{108:108,109:109,15:15,25:25,45:45}],13:[function(t,e){var n=t(3),i=t(109),r=t(45),o=t(108);e.exports=function(t,e,s,a,u){n(e);var c=i(t),l=r(c),h=o(c.length),f=u?h-1:0,d=u?-1:1;if(s<2)for(;;){if(f in l){a=l[f],f+=d;break}if(f+=d,u?f<0:h<=f)throw TypeError("Reduce of empty array with no initial value")}for(;u?f>=0:h>f;f+=d)f in l&&(a=e(a,l[f],f,c));return a}},{108:108,109:109,3:3,45:45}],14:[function(t,e){var n=t(49),i=t(47),r=t(117)("species");e.exports=function(t){var e;return i(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!i(e.prototype)||(e=void 0),n(e)&&null===(e=e[r])&&(e=void 0)),void 0===e?Array:e}},{117:117,47:47,49:49}],15:[function(t,e){var n=t(14);e.exports=function(t,e){return new(n(t))(e)}},{14:14}],16:[function(t,e){"use strict";var n=t(3),i=t(49),r=t(44),o=[].slice,s={},a=function(t,e,n){if(!(e in s)){for(var i=[],r=0;r<e;r++)i[r]="a["+r+"]";s[e]=Function("F,a","return new F("+i.join(",")+")")}return s[e](t,n)};e.exports=Function.bind||function(t){var e=n(this),s=o.call(arguments,1),u=function(){var n=s.concat(o.call(arguments));return this instanceof u?a(e,n.length,n):r(e,n,t)};return i(e.prototype)&&(u.prototype=e.prototype),u}},{3:3,44:44,49:49}],17:[function(t,e){var n=t(18),i=t(117)("toStringTag"),r="Arguments"==n(function(){return arguments}()),o=function(t,e){try{return t[e]}catch(t){}};e.exports=function(t){var e,s,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(s=o(e=Object(t),i))?s:r?n(e):"Object"==(a=n(e))&&"function"==typeof e.callee?"Arguments":a}},{117:117,18:18}],18:[function(t,e){var n={}.toString;e.exports=function(t){return n.call(t).slice(8,-1)}},{}],19:[function(t,e){"use strict";var n=t(67).f,i=t(66),r=t(86),o=t(25),s=t(6),a=t(27),u=t(37),c=t(53),l=t(55),h=t(91),f=t(28),d=t(62).fastKey,p=f?"_s":"size",m=function(t,e){var n,i=d(e);if("F"!==i)return t._i[i];for(n=t._f;n;n=n.n)if(n.k==e)return n};e.exports={getConstructor:function(t,e,c,l){var h=t(function(t,n){s(t,h,e,"_i"),t._i=i(null),t._f=void 0,t._l=void 0,t[p]=0,void 0!=n&&u(n,c,t[l],t)});return r(h.prototype,{clear:function(){for(var t=this,e=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete e[n.i];t._f=t._l=void 0,t[p]=0},"delete":function(t){var e=this,n=m(e,t);if(n){var i=n.n,r=n.p;delete e._i[n.i],n.r=!0,r&&(r.n=i),i&&(i.p=r),e._f==n&&(e._f=i),e._l==n&&(e._l=r),e[p]--}return!!n},forEach:function(t){s(this,h,"forEach");for(var e,n=o(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.n:this._f;)for(n(e.v,e.k,this);e&&e.r;)e=e.p},has:function(t){return!!m(this,t)}}),f&&n(h.prototype,"size",{get:function(){return a(this[p])}}),h},def:function(t,e,n){var i,r,o=m(t,e);return o?o.v=n:(t._l=o={i:r=d(e,!0),k:e,v:n,p:i=t._l,n:void 0,r:!1},t._f||(t._f=o),i&&(i.n=o),t[p]++,"F"!==r&&(t._i[r]=o)),t},getEntry:m,setStrong:function(t,e,n){c(t,e,function(t,e){this._t=t,this._k=e,this._l=void 0},function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?"keys"==e?l(0,n.k):"values"==e?l(0,n.v):l(0,[n.k,n.v]):(t._t=void 0,l(1))},n?"entries":"values",!n,!0),h(e)}}},{25:25,27:27,28:28,37:37,53:53,55:55,6:6,62:62,66:66,67:67,86:86,91:91}],20:[function(t,e){var n=t(17),i=t(10);e.exports=function(t){return function(){if(n(this)!=t)throw TypeError(t+"#toJSON isn't generic");return i(this)}}},{10:10,17:17}],21:[function(t,e){"use strict";var n=t(86),i=t(62).getWeak,r=t(7),o=t(49),s=t(6),a=t(37),u=t(12),c=t(39),l=u(5),h=u(6),f=0,d=function(t){return t._l||(t._l=new p)},p=function(){this.a=[]},m=function(t,e){return l(t.a,function(t){return t[0]===e})};p.prototype={get:function(t){var e=m(this,t);if(e)return e[1]},has:function(t){return!!m(this,t)},set:function(t,e){var n=m(this,t);n?n[1]=e:this.a.push([t,e])},"delete":function(t){var e=h(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}},e.exports={getConstructor:function(t,e,r,u){var l=t(function(t,n){s(t,l,e,"_i"),t._i=f++,t._l=void 0,void 0!=n&&a(n,r,t[u],t)});return n(l.prototype,{"delete":function(t){if(!o(t))return!1;var e=i(t);return!0===e?d(this)["delete"](t):e&&c(e,this._i)&&delete e[this._i]},has:function(t){if(!o(t))return!1;var e=i(t);return!0===e?d(this).has(t):e&&c(e,this._i)}}),l},def:function(t,e,n){var o=i(r(e),!0);return!0===o?d(t).set(e,n):o[t._i]=n,t},ufstore:d}},{12:12,37:37,39:39,49:49,6:6,62:62,7:7,86:86}],22:[function(t,e){"use strict";var n=t(38),i=t(32),r=t(87),o=t(86),s=t(62),a=t(37),u=t(6),c=t(49),l=t(34),h=t(54),f=t(92),d=t(43);e.exports=function(t,e,p,m,g,v){var _=n[t],y=_,b=g?"set":"add",x=y&&y.prototype,w={},k=function(t){var e=x[t];r(x,t,"delete"==t?function(t){return!(v&&!c(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(v&&!c(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return v&&!c(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof y&&(v||x.forEach&&!l(function(){(new y).entries().next()}))){var E=new y,S=E[b](v?{}:-0,1)!=E,L=l(function(){E.has(1)}),T=h(function(t){new y(t)}),C=!v&&l(function(){for(var t=new y,e=5;e--;)t[b](e,e);return!t.has(-0)});T||(y=e(function(e,n){u(e,y,t);var i=d(new _,e,y);return void 0!=n&&a(n,g,i[b],i),i}),y.prototype=x,x.constructor=y),(L||C)&&(k("delete"),k("has"),g&&k("get")),(C||S)&&k(b),v&&x.clear&&delete x.clear}else y=m.getConstructor(e,t,g,b),o(y.prototype,p),s.NEED=!0;return f(y,t),w[t]=y,i(i.G+i.W+i.F*(y!=_),w),v||m.setStrong(y,t,g),y}},{32:32,34:34,37:37,38:38,43:43,49:49,54:54,6:6,62:62,86:86,87:87,92:92}],23:[function(t,e){var n=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},{}],24:[function(t,e){"use strict";var n=t(67),i=t(85);e.exports=function(t,e,r){e in t?n.f(t,e,i(0,r)):t[e]=r}},{67:67,85:85}],25:[function(t,e){var n=t(3);e.exports=function(t,e,i){if(n(t),void 0===e)return t;switch(i){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}}},{3:3}],26:[function(t,e){"use strict";var n=t(7),i=t(110),r="number";e.exports=function(t){if("string"!==t&&t!==r&&"default"!==t)throw TypeError("Incorrect hint");return i(n(this),t!=r)}},{110:110,7:7}],27:[function(t,e){e.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},{}],28:[function(t,e){e.exports=!t(34)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{34:34}],29:[function(t,e){var n=t(49),i=t(38).document,r=n(i)&&n(i.createElement);e.exports=function(t){return r?i.createElement(t):{}}},{38:38,49:49}],30:[function(t,e){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],31:[function(t,e){var n=t(76),i=t(73),r=t(77);e.exports=function(t){var e=n(t),o=i.f;if(o)for(var s,a=o(t),u=r.f,c=0;a.length>c;)u.call(t,s=a[c++])&&e.push(s);return e}},{73:73,76:76,77:77}],32:[function(t,e){var n=t(38),i=t(23),r=t(40),o=t(87),s=t(25),a="prototype",u=function(t,e,c){var l,h,f,d,p=t&u.F,m=t&u.G,g=t&u.S,v=t&u.P,_=t&u.B,y=m?n:g?n[e]||(n[e]={}):(n[e]||{})[a],b=m?i:i[e]||(i[e]={}),x=b[a]||(b[a]={});m&&(c=e);for(l in c)h=!p&&y&&void 0!==y[l],f=(h?y:c)[l],d=_&&h?s(f,n):v&&"function"==typeof f?s(Function.call,f):f,y&&o(y,l,f,t&u.U),b[l]!=f&&r(b,l,d),v&&x[l]!=f&&(x[l]=f)};n.core=i,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,
u.R=128,e.exports=u},{23:23,25:25,38:38,40:40,87:87}],33:[function(t,e){var n=t(117)("match");e.exports=function(t){var e=/./;try{"/./"[t](e)}catch(i){try{return e[n]=!1,!"/./"[t](e)}catch(t){}}return!0}},{117:117}],34:[function(t,e){e.exports=function(t){try{return!!t()}catch(t){return!0}}},{}],35:[function(t,e){"use strict";var n=t(40),i=t(87),r=t(34),o=t(27),s=t(117);e.exports=function(t,e,a){var u=s(t),c=a(o,u,""[t]),l=c[0],h=c[1];r(function(){var e={};return e[u]=function(){return 7},7!=""[t](e)})&&(i(String.prototype,t,l),n(RegExp.prototype,u,2==e?function(t,e){return h.call(t,this,e)}:function(t){return h.call(t,this)}))}},{117:117,27:27,34:34,40:40,87:87}],36:[function(t,e){"use strict";var n=t(7);e.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},{7:7}],37:[function(t,e,n){var i=t(25),r=t(51),o=t(46),s=t(7),a=t(108),u=t(118),c={},l={};(n=e.exports=function(t,e,n,h,f){var d,p,m,g,v=f?function(){return t}:u(t),_=i(n,h,e?2:1),y=0;if("function"!=typeof v)throw TypeError(t+" is not iterable!");if(o(v)){for(d=a(t.length);d>y;y++)if((g=e?_(s(p=t[y])[0],p[1]):_(t[y]))===c||g===l)return g}else for(m=v.call(t);!(p=m.next()).done;)if((g=r(m,_,p.value,e))===c||g===l)return g}).BREAK=c,n.RETURN=l},{108:108,118:118,25:25,46:46,51:51,7:7}],38:[function(t,e){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},{}],39:[function(t,e){var n={}.hasOwnProperty;e.exports=function(t,e){return n.call(t,e)}},{}],40:[function(t,e){var n=t(67),i=t(85);e.exports=t(28)?function(t,e,r){return n.f(t,e,i(1,r))}:function(t,e,n){return t[e]=n,t}},{28:28,67:67,85:85}],41:[function(t,e){e.exports=t(38).document&&document.documentElement},{38:38}],42:[function(t,e){e.exports=!t(28)&&!t(34)(function(){return 7!=Object.defineProperty(t(29)("div"),"a",{get:function(){return 7}}).a})},{28:28,29:29,34:34}],43:[function(t,e){var n=t(49),i=t(90).set;e.exports=function(t,e,r){var o,s=e.constructor;return s!==r&&"function"==typeof s&&(o=s.prototype)!==r.prototype&&n(o)&&i&&i(t,o),t}},{49:49,90:90}],44:[function(t,e){e.exports=function(t,e,n){var i=void 0===n;switch(e.length){case 0:return i?t():t.call(n);case 1:return i?t(e[0]):t.call(n,e[0]);case 2:return i?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return i?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return i?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},{}],45:[function(t,e){var n=t(18);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},{18:18}],46:[function(t,e){var n=t(56),i=t(117)("iterator"),r=Array.prototype;e.exports=function(t){return void 0!==t&&(n.Array===t||r[i]===t)}},{117:117,56:56}],47:[function(t,e){var n=t(18);e.exports=Array.isArray||function(t){return"Array"==n(t)}},{18:18}],48:[function(t,e){var n=t(49),i=Math.floor;e.exports=function(t){return!n(t)&&isFinite(t)&&i(t)===t}},{49:49}],49:[function(t,e){e.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},{}],50:[function(t,e){var n=t(49),i=t(18),r=t(117)("match");e.exports=function(t){var e;return n(t)&&(void 0!==(e=t[r])?!!e:"RegExp"==i(t))}},{117:117,18:18,49:49}],51:[function(t,e){var n=t(7);e.exports=function(t,e,i,r){try{return r?e(n(i)[0],i[1]):e(i)}catch(e){var o=t["return"];throw void 0!==o&&n(o.call(t)),e}}},{7:7}],52:[function(t,e){"use strict";var n=t(66),i=t(85),r=t(92),o={};t(40)(o,t(117)("iterator"),function(){return this}),e.exports=function(t,e,s){t.prototype=n(o,{next:i(1,s)}),r(t,e+" Iterator")}},{117:117,40:40,66:66,85:85,92:92}],53:[function(t,e){"use strict";var n=t(58),i=t(32),r=t(87),o=t(40),s=t(39),a=t(56),u=t(52),c=t(92),l=t(74),h=t(117)("iterator"),f=!([].keys&&"next"in[].keys()),d="@@iterator",p="keys",m="values",g=function(){return this};e.exports=function(t,e,v,_,y,b,x){u(v,e,_);var w,k,E,S=function(t){if(!f&&t in M)return M[t];switch(t){case p:case m:return function(){return new v(this,t)}}return function(){return new v(this,t)}},L=e+" Iterator",T=y==m,C=!1,M=t.prototype,I=M[h]||M[d]||y&&M[y],A=I||S(y),P=y?T?S("entries"):A:void 0,O="Array"==e?M.entries||I:I;if(O&&(E=l(O.call(new t)))!==Object.prototype&&(c(E,L,!0),n||s(E,h)||o(E,h,g)),T&&I&&I.name!==m&&(C=!0,A=function(){return I.call(this)}),n&&!x||!f&&!C&&M[h]||o(M,h,A),a[e]=A,a[L]=g,y)if(w={values:T?A:S(m),keys:b?A:S(p),entries:P},x)for(k in w)k in M||r(M,k,w[k]);else i(i.P+i.F*(f||C),e,w);return w}},{117:117,32:32,39:39,40:40,52:52,56:56,58:58,74:74,87:87,92:92}],54:[function(t,e){var n=t(117)("iterator"),i=!1;try{var r=[7][n]();r["return"]=function(){i=!0},Array.from(r,function(){throw 2})}catch(t){}e.exports=function(t,e){if(!e&&!i)return!1;var r=!1;try{var o=[7],s=o[n]();s.next=function(){return{done:r=!0}},o[n]=function(){return s},t(o)}catch(t){}return r}},{117:117}],55:[function(t,e){e.exports=function(t,e){return{value:e,done:!!t}}},{}],56:[function(t,e){e.exports={}},{}],57:[function(t,e){var n=t(76),i=t(107);e.exports=function(t,e){for(var r,o=i(t),s=n(o),a=s.length,u=0;a>u;)if(o[r=s[u++]]===e)return r}},{107:107,76:76}],58:[function(t,e){e.exports=!1},{}],59:[function(t,e){var n=Math.expm1;e.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:n},{}],60:[function(t,e){e.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},{}],61:[function(t,e){e.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},{}],62:[function(t,e){var n=t(114)("meta"),i=t(49),r=t(39),o=t(67).f,s=0,a=Object.isExtensible||function(){return!0},u=!t(34)(function(){return a(Object.preventExtensions({}))}),c=function(t){o(t,n,{value:{i:"O"+ ++s,w:{}}})},l=function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!r(t,n)){if(!a(t))return"F";if(!e)return"E";c(t)}return t[n].i},h=function(t,e){if(!r(t,n)){if(!a(t))return!0;if(!e)return!1;c(t)}return t[n].w},f=function(t){return u&&d.NEED&&a(t)&&!r(t,n)&&c(t),t},d=e.exports={KEY:n,NEED:!1,fastKey:l,getWeak:h,onFreeze:f}},{114:114,34:34,39:39,49:49,67:67}],63:[function(t,e){var n=t(149),i=t(32),r=t(94)("metadata"),o=r.store||(r.store=new(t(255))),s=function(t,e,i){var r=o.get(t);if(!r){if(!i)return;o.set(t,r=new n)}var s=r.get(e);if(!s){if(!i)return;r.set(e,s=new n)}return s},a=function(t,e,n){var i=s(e,n,!1);return void 0!==i&&i.has(t)},u=function(t,e,n){var i=s(e,n,!1);return void 0===i?void 0:i.get(t)},c=function(t,e,n,i){s(n,i,!0).set(t,e)},l=function(t,e){var n=s(t,e,!1),i=[];return n&&n.forEach(function(t,e){i.push(e)}),i},h=function(t){return void 0===t||"symbol"==typeof t?t:String(t)},f=function(t){i(i.S,"Reflect",t)};e.exports={store:o,map:s,has:a,get:u,set:c,keys:l,key:h,exp:f}},{149:149,255:255,32:32,94:94}],64:[function(t,e){var n=t(38),i=t(104).set,r=n.MutationObserver||n.WebKitMutationObserver,o=n.process,s=n.Promise,a="process"==t(18)(o);e.exports=function(){var t,e,u,c=function(){var n,i;for(a&&(n=o.domain)&&n.exit();t;){i=t.fn,t=t.next;try{i()}catch(n){throw t?u():e=void 0,n}}e=void 0,n&&n.enter()};if(a)u=function(){o.nextTick(c)};else if(r){var l=!0,h=document.createTextNode("");new r(c).observe(h,{characterData:!0}),u=function(){h.data=l=!l}}else if(s&&s.resolve){var f=s.resolve();u=function(){f.then(c)}}else u=function(){i.call(n,c)};return function(n){var i={fn:n,next:void 0};e&&(e.next=i),t||(t=i,u()),e=i}}},{104:104,18:18,38:38}],65:[function(t,e){"use strict";var n=t(76),i=t(73),r=t(77),o=t(109),s=t(45),a=Object.assign;e.exports=!a||t(34)(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=a({},t)[n]||Object.keys(a({},e)).join("")!=i})?function(t){for(var e=o(t),a=arguments.length,u=1,c=i.f,l=r.f;a>u;)for(var h,f=s(arguments[u++]),d=c?n(f).concat(c(f)):n(f),p=d.length,m=0;p>m;)l.call(f,h=d[m++])&&(e[h]=f[h]);return e}:a},{109:109,34:34,45:45,73:73,76:76,77:77}],66:[function(t,e){var n=t(7),i=t(68),r=t(30),o=t(93)("IE_PROTO"),s=function(){},a="prototype",u=function(){var e,n=t(29)("iframe"),i=r.length,o="<",s=">";for(n.style.display="none",t(41).appendChild(n),n.src="javascript:",(e=n.contentWindow.document).open(),e.write(o+"script"+s+"document.F=Object"+o+"/script"+s),e.close(),u=e.F;i--;)delete u[a][r[i]];return u()};e.exports=Object.create||function(t,e){var r;return null!==t?(s[a]=n(t),r=new s,s[a]=null,r[o]=t):r=u(),void 0===e?r:i(r,e)}},{29:29,30:30,41:41,68:68,7:7,93:93}],67:[function(t,e,n){var i=t(7),r=t(42),o=t(110),s=Object.defineProperty;n.f=t(28)?Object.defineProperty:function(t,e,n){if(i(t),e=o(e,!0),i(n),r)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},{110:110,28:28,42:42,7:7}],68:[function(t,e){var n=t(67),i=t(7),r=t(76);e.exports=t(28)?Object.defineProperties:function(t,e){i(t);for(var o,s=r(e),a=s.length,u=0;a>u;)n.f(t,o=s[u++],e[o]);return t}},{28:28,67:67,7:7,76:76}],69:[function(t,e){e.exports=t(58)||!t(34)(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete t(38)[e]})},{34:34,38:38,58:58}],70:[function(t,e,n){var i=t(77),r=t(85),o=t(107),s=t(110),a=t(39),u=t(42),c=Object.getOwnPropertyDescriptor;n.f=t(28)?c:function(t,e){if(t=o(t),e=s(e,!0),u)try{return c(t,e)}catch(t){}if(a(t,e))return r(!i.f.call(t,e),t[e])}},{107:107,110:110,28:28,39:39,42:42,77:77,85:85}],71:[function(t,e){var n=t(107),i=t(72).f,r={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return i(t)}catch(t){return o.slice()}};e.exports.f=function(t){return o&&"[object Window]"==r.call(t)?s(t):i(n(t))}},{107:107,72:72}],72:[function(t,e,n){var i=t(75),r=t(30).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return i(t,r)}},{30:30,75:75}],73:[function(t,e,n){n.f=Object.getOwnPropertySymbols},{}],74:[function(t,e){var n=t(39),i=t(109),r=t(93)("IE_PROTO"),o=Object.prototype;e.exports=Object.getPrototypeOf||function(t){return t=i(t),n(t,r)?t[r]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?o:null}},{109:109,39:39,93:93}],75:[function(t,e){var n=t(39),i=t(107),r=t(11)(!1),o=t(93)("IE_PROTO");e.exports=function(t,e){var s,a=i(t),u=0,c=[];for(s in a)s!=o&&n(a,s)&&c.push(s);for(;e.length>u;)n(a,s=e[u++])&&(~r(c,s)||c.push(s));return c}},{107:107,11:11,39:39,93:93}],76:[function(t,e){var n=t(75),i=t(30);e.exports=Object.keys||function(t){return n(t,i)}},{30:30,75:75}],77:[function(t,e,n){n.f={}.propertyIsEnumerable},{}],78:[function(t,e){var n=t(32),i=t(23),r=t(34);e.exports=function(t,e){var o=(i.Object||{})[t]||Object[t],s={};s[t]=e(o),n(n.S+n.F*r(function(){o(1)}),"Object",s)}},{23:23,32:32,34:34}],79:[function(t,e){var n=t(76),i=t(107),r=t(77).f;e.exports=function(t){return function(e){for(var o,s=i(e),a=n(s),u=a.length,c=0,l=[];u>c;)r.call(s,o=a[c++])&&l.push(t?[o,s[o]]:s[o]);return l}}},{107:107,76:76,77:77}],80:[function(t,e){var n=t(72),i=t(73),r=t(7),o=t(38).Reflect;e.exports=o&&o.ownKeys||function(t){var e=n.f(r(t)),o=i.f;return o?e.concat(o(t)):e}},{38:38,7:7,72:72,73:73}],81:[function(t,e){var n=t(38).parseFloat,i=t(102).trim;e.exports=1/n(t(103)+"-0")!=-1/0?function(t){var e=i(String(t),3),r=n(e);return 0===r&&"-"==e.charAt(0)?-0:r}:n},{102:102,103:103,38:38}],82:[function(t,e){var n=t(38).parseInt,i=t(102).trim,r=t(103),o=/^[\-+]?0[xX]/;e.exports=8!==n(r+"08")||22!==n(r+"0x16")?function(t,e){var r=i(String(t),3);return n(r,e>>>0||(o.test(r)?16:10))}:n},{102:102,103:103,38:38}],83:[function(t,e){"use strict";var n=t(84),i=t(44),r=t(3);e.exports=function(){for(var t=r(this),e=arguments.length,o=Array(e),s=0,a=n._,u=!1;e>s;)(o[s]=arguments[s++])===a&&(u=!0);return function(){var n,r=this,s=arguments.length,c=0,l=0;if(!u&&!s)return i(t,o,r);if(n=o.slice(),u)for(;e>c;c++)n[c]===a&&(n[c]=arguments[l++]);for(;s>l;)n.push(arguments[l++]);return i(t,n,r)}}},{3:3,44:44,84:84}],84:[function(t,e){e.exports=t(38)},{38:38}],85:[function(t,e){e.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},{}],86:[function(t,e){var n=t(87);e.exports=function(t,e,i){for(var r in e)n(t,r,e[r],i);return t}},{87:87}],87:[function(t,e){var n=t(38),i=t(40),r=t(39),o=t(114)("src"),s="toString",a=Function[s],u=(""+a).split(s);t(23).inspectSource=function(t){return a.call(t)},(e.exports=function(t,e,s,a){var c="function"==typeof s;c&&(r(s,"name")||i(s,"name",e)),t[e]!==s&&(c&&(r(s,o)||i(s,o,t[e]?""+t[e]:u.join(String(e)))),t===n?t[e]=s:a?t[e]?t[e]=s:i(t,e,s):(delete t[e],i(t,e,s)))})(Function.prototype,s,function(){return"function"==typeof this&&this[o]||a.call(this)})},{114:114,23:23,38:38,39:39,40:40}],88:[function(t,e){e.exports=function(t,e){var n=e===Object(e)?function(t){return e[t]}:e;return function(e){return String(e).replace(t,n)}}},{}],89:[function(t,e){e.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},{}],90:[function(t,e){var n=t(49),i=t(7),r=function(t,e){if(i(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,n,i){try{(i=t(25)(Function.call,t(70).f(Object.prototype,"__proto__").set,2))(e,[]),n=!(e instanceof Array)}catch(t){n=!0}return function(t,e){return r(t,e),n?t.__proto__=e:i(t,e),t}}({},!1):void 0),check:r}},{25:25,49:49,7:7,70:70}],91:[function(t,e){"use strict";var n=t(38),i=t(67),r=t(28),o=t(117)("species");e.exports=function(t){var e=n[t];r&&e&&!e[o]&&i.f(e,o,{configurable:!0,get:function(){return this}})}},{117:117,28:28,38:38,67:67}],92:[function(t,e){var n=t(67).f,i=t(39),r=t(117)("toStringTag");e.exports=function(t,e,o){t&&!i(t=o?t:t.prototype,r)&&n(t,r,{configurable:!0,value:e})}},{117:117,39:39,67:67}],93:[function(t,e){var n=t(94)("keys"),i=t(114);e.exports=function(t){return n[t]||(n[t]=i(t))}},{114:114,94:94}],94:[function(t,e){var n=t(38),i="__core-js_shared__",r=n[i]||(n[i]={});e.exports=function(t){return r[t]||(r[t]={})}},{38:38}],95:[function(t,e){var n=t(7),i=t(3),r=t(117)("species");e.exports=function(t,e){var o,s=n(t).constructor;return void 0===s||void 0==(o=n(s)[r])?e:i(o)}},{117:117,3:3,7:7}],96:[function(t,e){var n=t(34);e.exports=function(t,e){return!!t&&n(function(){e?t.call(null,function(){},1):t.call(null)})}},{34:34}],97:[function(t,e){var n=t(106),i=t(27);e.exports=function(t){return function(e,r){var o,s,a=String(i(e)),u=n(r),c=a.length;return u<0||u>=c?t?"":void 0:(o=a.charCodeAt(u))<55296||o>56319||u+1===c||(s=a.charCodeAt(u+1))<56320||s>57343?t?a.charAt(u):o:t?a.slice(u,u+2):s-56320+(o-55296<<10)+65536}}},{106:106,27:27}],98:[function(t,e){var n=t(50),i=t(27);e.exports=function(t,e,r){if(n(e))throw TypeError("String#"+r+" doesn't accept regex!");return String(i(t))}},{27:27,50:50}],99:[function(t,e){var n=t(32),i=t(34),r=t(27),o=/"/g,s=function(t,e,n,i){var s=String(r(t)),a="<"+e;return""!==n&&(a+=" "+n+'="'+String(i).replace(o,"&quot;")+'"'),a+">"+s+"</"+e+">"};e.exports=function(t,e){var r={};r[t]=e(s),n(n.P+n.F*i(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}),"String",r)}},{27:27,32:32,34:34}],100:[function(t,e){var n=t(108),i=t(101),r=t(27);e.exports=function(t,e,o,s){var a=String(r(t)),u=a.length,c=void 0===o?" ":String(o),l=n(e);if(l<=u||""==c)return a;var h=l-u,f=i.call(c,Math.ceil(h/c.length));return f.length>h&&(f=f.slice(0,h)),s?f+a:a+f}},{101:101,108:108,27:27}],101:[function(t,e){"use strict";var n=t(106),i=t(27);e.exports=function(t){var e=String(i(this)),r="",o=n(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(r+=e);return r}},{106:106,27:27}],102:[function(t,e){var n=t(32),i=t(27),r=t(34),o=t(103),s="["+o+"]",a="\u200b\x85",u=RegExp("^"+s+s+"*"),c=RegExp(s+s+"*$"),l=function(t,e,i){var s={},u=r(function(){return!!o[t]()||a[t]()!=a}),c=s[t]=u?e(h):o[t];i&&(s[i]=c),n(n.P+n.F*u,"String",s)},h=l.trim=function(t,e){return t=String(i(t)),1&e&&(t=t.replace(u,"")),2&e&&(t=t.replace(c,"")),t};e.exports=l},{103:103,27:27,32:32,34:34}],103:[function(t,e){e.exports="\t\n\x0B\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},{}],104:[function(t,e){var n,i,r,o=t(25),s=t(44),a=t(41),u=t(29),c=t(38),l=c.process,h=c.setImmediate,f=c.clearImmediate,d=c.MessageChannel,p=0,m={},g="onreadystatechange",v=function(){var t=+this;if(m.hasOwnProperty(t)){var e=m[t];delete m[t],e()}},_=function(t){v.call(t.data)};h&&f||(h=function(t){for(var e=[],i=1;arguments.length>i;)e.push(arguments[i++]);return m[++p]=function(){s("function"==typeof t?t:Function(t),e)},n(p),p},f=function(t){delete m[t]},"process"==t(18)(l)?n=function(t){l.nextTick(o(v,t,1))}:d?(i=new d,r=i.port2,i.port1.onmessage=_,n=o(r.postMessage,r,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(n=function(t){c.postMessage(t+"","*")},c.addEventListener("message",_,!1)):n=g in u("script")?function(t){a.appendChild(u("script"))[g]=function(){a.removeChild(this),v.call(t)}}:function(t){setTimeout(o(v,t,1),0)}),e.exports={set:h,clear:f}},{18:18,25:25,29:29,38:38,41:41,44:44}],105:[function(t,e){var n=t(106),i=Math.max,r=Math.min;e.exports=function(t,e){return(t=n(t))<0?i(t+e,0):r(t,e)}},{106:106}],106:[function(t,e){var n=Math.ceil,i=Math.floor;e.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},{}],107:[function(t,e){var n=t(45),i=t(27);e.exports=function(t){return n(i(t))}},{27:27,45:45}],108:[function(t,e){var n=t(106),i=Math.min;e.exports=function(t){return t>0?i(n(t),9007199254740991):0}},{106:106}],109:[function(t,e){var n=t(27);e.exports=function(t){return Object(n(t))}},{27:27}],110:[function(t,e){var n=t(49);e.exports=function(t,e){if(!n(t))return t;var i,r;if(e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;if("function"==typeof(i=t.valueOf)&&!n(r=i.call(t)))return r;if(!e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},{49:49}],111:[function(t,e){"use strict";if(t(28)){var n=t(58),i=t(38),r=t(34),o=t(32),s=t(113),a=t(112),u=t(25),c=t(6),l=t(85),h=t(40),f=t(86),d=t(106),p=t(108),m=t(105),g=t(110),v=t(39),_=t(89),y=t(17),b=t(49),x=t(109),w=t(46),k=t(66),E=t(74),S=t(72).f,L=t(118),T=t(114),C=t(117),M=t(12),I=t(11),A=t(95),P=t(130),O=t(56),D=t(54),N=t(91),B=t(9),z=t(8),j=t(67),R=t(70),F=j.f,$=R.f,U=i.RangeError,H=i.TypeError,q=i.Uint8Array,Z="ArrayBuffer",V="Shared"+Z,W="BYTES_PER_ELEMENT",K="prototype",G=Array[K],Y=a.ArrayBuffer,X=a.DataView,Q=M(0),J=M(2),tt=M(3),et=M(4),nt=M(5),it=M(6),rt=I(!0),ot=I(!1),st=P.values,at=P.keys,ut=P.entries,ct=G.lastIndexOf,lt=G.reduce,ht=G.reduceRight,ft=G.join,dt=G.sort,pt=G.slice,mt=G.toString,gt=G.toLocaleString,vt=C("iterator"),_t=C("toStringTag"),yt=T("typed_constructor"),bt=T("def_constructor"),xt=s.CONSTR,wt=s.TYPED,kt=s.VIEW,Et="Wrong length!",St=M(1,function(t,e){return At(A(t,t[bt]),e)}),Lt=r(function(){return 1===new q(new Uint16Array([1]).buffer)[0]}),Tt=!!q&&!!q[K].set&&r(function(){new q(1).set({})}),Ct=function(t,e){if(void 0===t)throw H(Et);var n=+t,i=p(t);if(e&&!_(n,i))throw U(Et);return i},Mt=function(t,e){var n=d(t);if(n<0||n%e)throw U("Wrong offset!");return n},It=function(t){if(b(t)&&wt in t)return t;throw H(t+" is not a typed array!")},At=function(t,e){if(!(b(t)&&yt in t))throw H("It is not a typed array constructor!");return new t(e)},Pt=function(t,e){return Ot(A(t,t[bt]),e)},Ot=function(t,e){for(var n=0,i=e.length,r=At(t,i);i>n;)r[n]=e[n++];return r},Dt=function(t,e,n){F(t,e,{get:function(){return this._d[n]}})},Nt=function(t){var e,n,i,r,o,s,a=x(t),c=arguments.length,l=c>1?arguments[1]:void 0,h=void 0!==l,f=L(a);if(void 0!=f&&!w(f)){for(s=f.call(a),i=[],e=0;!(o=s.next()).done;e++)i.push(o.value);a=i}for(h&&c>2&&(l=u(l,arguments[2],2)),e=0,n=p(a.length),r=At(this,n);n>e;e++)r[e]=h?l(a[e],e):a[e];return r},Bt=function(){for(var t=0,e=arguments.length,n=At(this,e);e>t;)n[t]=arguments[t++];return n},zt=!!q&&r(function(){gt.call(new q(1))}),jt=function(){return gt.apply(zt?pt.call(It(this)):It(this),arguments)},Rt={copyWithin:function(t,e){return z.call(It(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return et(It(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(){return B.apply(It(this),arguments)},filter:function(t){return Pt(this,J(It(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return nt(It(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return it(It(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){Q(It(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return ot(It(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return rt(It(this),t,arguments.length>1?arguments[1]:void 0)},join:function(){return ft.apply(It(this),arguments)},lastIndexOf:function(){return ct.apply(It(this),arguments)},map:function(t){return St(It(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(){return lt.apply(It(this),arguments)},reduceRight:function(){return ht.apply(It(this),arguments)},reverse:function(){for(var t,e=this,n=It(e).length,i=Math.floor(n/2),r=0;r<i;)t=e[r],e[r++]=e[--n],e[n]=t;return e},some:function(t){return tt(It(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return dt.call(It(this),t)},subarray:function(t,e){var n=It(this),i=n.length,r=m(t,i);return new(A(n,n[bt]))(n.buffer,n.byteOffset+r*n.BYTES_PER_ELEMENT,p((void 0===e?i:m(e,i))-r))}},Ft=function(t,e){return Pt(this,pt.call(It(this),t,e))},$t=function(t){It(this);var e=Mt(arguments[1],1),n=this.length,i=x(t),r=p(i.length),o=0;if(r+e>n)throw U(Et);for(;o<r;)this[e+o]=i[o++]},Ut={entries:function(){return ut.call(It(this))},keys:function(){return at.call(It(this))},values:function(){return st.call(It(this))}},Ht=function(t,e){return b(t)&&t[wt]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},qt=function(t,e){return Ht(t,e=g(e,!0))?l(2,t[e]):$(t,e)},Zt=function(t,e,n){return!(Ht(t,e=g(e,!0))&&b(n)&&v(n,"value"))||v(n,"get")||v(n,"set")||n.configurable||v(n,"writable")&&!n.writable||v(n,"enumerable")&&!n.enumerable?F(t,e,n):(t[e]=n.value,t)};xt||(R.f=qt,j.f=Zt),o(o.S+o.F*!xt,"Object",{getOwnPropertyDescriptor:qt,defineProperty:Zt}),r(function(){mt.call({})})&&(mt=gt=function(){return ft.call(this)});var Vt=f({},Rt);f(Vt,Ut),h(Vt,vt,Ut.values),f(Vt,{slice:Ft,set:$t,constructor:function(){},toString:mt,toLocaleString:jt}),Dt(Vt,"buffer","b"),Dt(Vt,"byteOffset","o"),Dt(Vt,"byteLength","l"),Dt(Vt,"length","e"),F(Vt,_t,{get:function(){return this[wt]}}),e.exports=function(t,e,a,u){var l=t+((u=!!u)?"Clamped":"")+"Array",f="Uint8Array"!=l,d="get"+t,m="set"+t,g=i[l],v=g||{},_=g&&E(g),x=!g||!s.ABV,w={},L=g&&g[K],T=function(t,n){var i=t._d;return i.v[d](n*e+i.o,Lt)},C=function(t,n,i){var r=t._d;u&&(i=(i=Math.round(i))<0?0:i>255?255:255&i),r.v[m](n*e+r.o,i,Lt)},M=function(t,e){F(t,e,{get:function(){return T(this,e)},set:function(t){return C(this,e,t)},enumerable:!0})};x?(g=a(function(t,n,i,r){c(t,g,l,"_d");var o,s,a,u,f=0,d=0;if(b(n)){if(!(n instanceof Y||(u=y(n))==Z||u==V))return wt in n?Ot(g,n):Nt.call(g,n);o=n,d=Mt(i,e);var m=n.byteLength;if(void 0===r){if(m%e)throw U(Et);if((s=m-d)<0)throw U(Et)}else if((s=p(r)*e)+d>m)throw U(Et);a=s/e}else a=Ct(n,!0),s=a*e,o=new Y(s);for(h(t,"_d",{b:o,o:d,l:s,e:a,v:new X(o)});f<a;)M(t,f++)}),L=g[K]=k(Vt),h(L,"constructor",g)):D(function(t){new g(null),new g(t)},!0)||(g=a(function(t,n,i,r){c(t,g,l);var o;return b(n)?n instanceof Y||(o=y(n))==Z||o==V?void 0!==r?new v(n,Mt(i,e),r):void 0!==i?new v(n,Mt(i,e)):new v(n):wt in n?Ot(g,n):Nt.call(g,n):new v(Ct(n,f))}),Q(_!==Function.prototype?S(v).concat(S(_)):S(v),function(t){t in g||h(g,t,v[t])}),g[K]=L,n||(L.constructor=g));var I=L[vt],A=!!I&&("values"==I.name||void 0==I.name),P=Ut.values;h(g,yt,!0),h(L,wt,l),h(L,kt,!0),h(L,bt,g),(u?new g(1)[_t]==l:_t in L)||F(L,_t,{get:function(){return l}}),w[l]=g,o(o.G+o.W+o.F*(g!=v),w),o(o.S,l,{BYTES_PER_ELEMENT:e,from:Nt,of:Bt}),W in L||h(L,W,e),o(o.P,l,Rt),N(l),o(o.P+o.F*Tt,l,{set:$t}),o(o.P+o.F*!A,l,Ut),o(o.P+o.F*(L.toString!=mt),l,{toString:mt}),o(o.P+o.F*r(function(){new g(1).slice()}),l,{slice:Ft}),o(o.P+o.F*(r(function(){return[1,2].toLocaleString()!=new g([1,2]).toLocaleString()})||!r(function(){L.toLocaleString.call([1,2])})),l,{toLocaleString:jt}),O[l]=A?I:P,n||A||h(L,vt,P)}}else e.exports=function(){}},{105:105,106:106,108:108,109:109,11:11,110:110,112:112,113:113,114:114,117:117,118:118,12:12,130:130,17:17,25:25,28:28,32:32,34:34,38:38,39:39,40:40,46:46,49:49,54:54,56:56,58:58,6:6,66:66,67:67,70:70,72:72,74:74,8:8,85:85,86:86,89:89,9:9,91:91,95:95}],112:[function(t,e,n){"use strict";var i=t(38),r=t(28),o=t(58),s=t(113),a=t(40),u=t(86),c=t(34),l=t(6),h=t(106),f=t(108),d=t(72).f,p=t(67).f,m=t(9),g=t(92),v="ArrayBuffer",_="DataView",y="prototype",b="Wrong length!",x="Wrong index!",w=i[v],k=i[_],E=i.Math,S=i.RangeError,L=i.Infinity,T=w,C=E.abs,M=E.pow,I=E.floor,A=E.log,P=E.LN2,O="buffer",D="byteLength",N="byteOffset",B=r?"_b":O,z=r?"_l":D,j=r?"_o":N,R=function(t,e,n){var i,r,o,s=Array(n),a=8*n-e-1,u=(1<<a)-1,c=u>>1,l=23===e?M(2,-24)-M(2,-77):0,h=0,f=t<0||0===t&&1/t<0?1:0;for((t=C(t))!=t||t===L?(r=t!=t?1:0,i=u):(i=I(A(t)/P),t*(o=M(2,-i))<1&&(i--,o*=2),(t+=i+c>=1?l/o:l*M(2,1-c))*o>=2&&(i++,o/=2),i+c>=u?(r=0,i=u):i+c>=1?(r=(t*o-1)*M(2,e),i+=c):(r=t*M(2,c-1)*M(2,e),i=0));e>=8;s[h++]=255&r,r/=256,e-=8);for(i=i<<e|r,a+=e;a>0;s[h++]=255&i,i/=256,a-=8);return s[--h]|=128*f,s},F=function(t,e,n){var i,r=8*n-e-1,o=(1<<r)-1,s=o>>1,a=r-7,u=n-1,c=t[u--],l=127&c;for(c>>=7;a>0;l=256*l+t[u],u--,a-=8);for(i=l&(1<<-a)-1,l>>=-a,a+=e;a>0;i=256*i+t[u],u--,a-=8);if(0===l)l=1-s;else{if(l===o)return i?NaN:c?-L:L;i+=M(2,e),l-=s}return(c?-1:1)*i*M(2,l-e)},$=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},U=function(t){return[255&t]},H=function(t){return[255&t,t>>8&255]},q=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},Z=function(t){return R(t,52,8)},V=function(t){return R(t,23,4)},W=function(t,e,n){p(t[y],e,{get:function(){return this[n]}})},K=function(t,e,n,i){var r=+n,o=h(r);if(r!=o||o<0||o+e>t[z])throw S(x);var s=t[B]._b,a=o+t[j],u=s.slice(a,a+e);return i?u:u.reverse()},G=function(t,e,n,i,r,o){var s=+n,a=h(s);if(s!=a||a<0||a+e>t[z])throw S(x);for(var u=t[B]._b,c=a+t[j],l=i(+r),f=0;f<e;f++)u[c+f]=l[o?f:e-f-1]},Y=function(t,e){l(t,w,v);var n=+e,i=f(n);if(n!=i)throw S(b);return i};if(s.ABV){if(!c(function(){new w})||!c(function(){new w(.5)})){for(var X,Q=(w=function(t){return new T(Y(this,t))})[y]=T[y],J=d(T),tt=0;J.length>tt;)(X=J[tt++])in w||a(w,X,T[X]);o||(Q.constructor=w)}var et=new k(new w(2)),nt=k[y].setInt8;et.setInt8(0,2147483648),et.setInt8(1,2147483649),!et.getInt8(0)&&et.getInt8(1)||u(k[y],{setInt8:function(t,e){nt.call(this,t,e<<24>>24)},setUint8:function(t,e){nt.call(this,t,e<<24>>24)}},!0)}else w=function(t){var e=Y(this,t);this._b=m.call(Array(e),0),this[z]=e},k=function(t,e,n){l(this,k,_),l(t,w,_);var i=t[z],r=h(e);if(r<0||r>i)throw S("Wrong offset!");if(n=void 0===n?i-r:f(n),r+n>i)throw S(b);this[B]=t,this[j]=r,this[z]=n},r&&(W(w,D,"_l"),W(k,O,"_b"),W(k,D,"_l"),W(k,N,"_o")),u(k[y],{getInt8:function(t){return K(this,1,t)[0]<<24>>24},getUint8:function(t){return K(this,1,t)[0]},getInt16:function(t){var e=K(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=K(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return $(K(this,4,t,arguments[1]))},getUint32:function(t){return $(K(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return F(K(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return F(K(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){G(this,1,t,U,e)},setUint8:function(t,e){G(this,1,t,U,e)},setInt16:function(t,e){G(this,2,t,H,e,arguments[2])},setUint16:function(t,e){G(this,2,t,H,e,arguments[2])},setInt32:function(t,e){G(this,4,t,q,e,arguments[2])},setUint32:function(t,e){G(this,4,t,q,e,arguments[2])},setFloat32:function(t,e){G(this,4,t,V,e,arguments[2])},setFloat64:function(t,e){G(this,8,t,Z,e,arguments[2])}});g(w,v),g(k,_),a(k[y],s.VIEW,!0),n[v]=w,n[_]=k},{106:106,108:108,113:113,28:28,34:34,38:38,40:40,58:58,6:6,67:67,72:72,86:86,9:9,92:92}],113:[function(t,e){for(var n,i=t(38),r=t(40),o=t(114),s=o("typed_array"),a=o("view"),u=!(!i.ArrayBuffer||!i.DataView),c=u,l=0,h=9,f="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");l<h;)(n=i[f[l++]])?(r(n.prototype,s,!0),r(n.prototype,a,!0)):c=!1;e.exports={ABV:u,CONSTR:c,TYPED:s,VIEW:a}},{114:114,38:38,40:40}],114:[function(t,e){var n=0,i=Math.random();e.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}},{}],115:[function(t,e){var n=t(38),i=t(23),r=t(58),o=t(116),s=t(67).f;e.exports=function(t){var e=i.Symbol||(i.Symbol=r?{}:n.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:o.f(t)})}},{116:116,23:23,38:38,58:58,67:67}],116:[function(t,e,n){n.f=t(117)},{117:117}],117:[function(t,e){var n=t(94)("wks"),i=t(114),r=t(38).Symbol,o="function"==typeof r;(e.exports=function(t){return n[t]||(n[t]=o&&r[t]||(o?r:i)("Symbol."+t))}).store=n},{114:114,38:38,94:94}],118:[function(t,e){var n=t(17),i=t(117)("iterator"),r=t(56);e.exports=t(23).getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||r[n(t)]}},{117:117,17:17,23:23,56:56}],119:[function(t){var e=t(32),n=t(88)(/[\\^$*+?.()|[\]{}]/g,"\\$&");e(e.S,"RegExp",{escape:function(t){return n(t)}})},{32:32,88:88}],120:[function(t){var e=t(32);e(e.P,"Array",{copyWithin:t(8)}),t(5)("copyWithin")},{32:32,5:5,8:8}],121:[function(t){"use strict";var e=t(32),n=t(12)(4);e(e.P+e.F*!t(96)([].every,!0),"Array",{every:function(t){return n(this,t,arguments[1])}})},{12:12,32:32,96:96}],122:[function(t){var e=t(32);e(e.P,"Array",{fill:t(9)}),t(5)("fill")},{32:32,5:5,9:9}],123:[function(t){"use strict";var e=t(32),n=t(12)(2);e(e.P+e.F*!t(96)([].filter,!0),"Array",{filter:function(t){return n(this,t,arguments[1])}})},{12:12,32:32,96:96}],124:[function(t){"use strict";var e=t(32),n=t(12)(6),i="findIndex",r=!0;i in[]&&Array(1)[i](function(){r=!1}),e(e.P+e.F*r,"Array",{findIndex:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),t(5)(i)},{12:12,32:32,5:5}],125:[function(t){"use strict";var e=t(32),n=t(12)(5),i="find",r=!0;i in[]&&Array(1)[i](function(){r=!1}),e(e.P+e.F*r,"Array",{find:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),t(5)(i)},{12:12,32:32,5:5}],126:[function(t){"use strict";var e=t(32),n=t(12)(0),i=t(96)([].forEach,!0);e(e.P+e.F*!i,"Array",{forEach:function(t){return n(this,t,arguments[1])}})},{12:12,32:32,96:96}],127:[function(t){"use strict";var e=t(25),n=t(32),i=t(109),r=t(51),o=t(46),s=t(108),a=t(24),u=t(118);n(n.S+n.F*!t(54)(function(t){Array.from(t)}),"Array",{from:function(t){var n,c,l,h,f=i(t),d="function"==typeof this?this:Array,p=arguments.length,m=p>1?arguments[1]:void 0,g=void 0!==m,v=0,_=u(f);if(g&&(m=e(m,p>2?arguments[2]:void 0,2)),void 0==_||d==Array&&o(_))for(n=s(f.length),c=new d(n);n>v;v++)a(c,v,g?m(f[v],v):f[v]);else for(h=_.call(f),c=new d;!(l=h.next()).done;v++)a(c,v,g?r(h,m,[l.value,v],!0):l.value);return c.length=v,c}})},{108:108,109:109,118:118,24:24,25:25,32:32,46:46,51:51,54:54}],128:[function(t){"use strict";var e=t(32),n=t(11)(!1),i=[].indexOf,r=!!i&&1/[1].indexOf(1,-0)<0;e(e.P+e.F*(r||!t(96)(i)),"Array",{indexOf:function(t){return r?i.apply(this,arguments)||0:n(this,t,arguments[1])}})},{11:11,32:32,96:96}],129:[function(t){var e=t(32);e(e.S,"Array",{isArray:t(47)})},{32:32,47:47}],130:[function(t,e){"use strict";var n=t(5),i=t(55),r=t(56),o=t(107);e.exports=t(53)(Array,"Array",function(t,e){this._t=o(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):"keys"==e?i(0,n):"values"==e?i(0,t[n]):i(0,[n,t[n]])},"values"),r.Arguments=r.Array,n("keys"),n("values"),n("entries")},{107:107,5:5,53:53,55:55,56:56}],131:[function(t){"use strict";var e=t(32),n=t(107),i=[].join;e(e.P+e.F*(t(45)!=Object||!t(96)(i)),"Array",{join:function(t){return i.call(n(this),void 0===t?",":t)}})},{107:107,32:32,45:45,96:96}],132:[function(t){"use strict";var e=t(32),n=t(107),i=t(106),r=t(108),o=[].lastIndexOf,s=!!o&&1/[1].lastIndexOf(1,-0)<0;e(e.P+e.F*(s||!t(96)(o)),"Array",{lastIndexOf:function(t){if(s)return o.apply(this,arguments)||0;var e=n(this),a=r(e.length),u=a-1;for(arguments.length>1&&(u=Math.min(u,i(arguments[1]))),u<0&&(u=a+u);u>=0;u--)if(u in e&&e[u]===t)return u||0;return-1}})},{106:106,107:107,108:108,32:32,96:96}],133:[function(t){
"use strict";var e=t(32),n=t(12)(1);e(e.P+e.F*!t(96)([].map,!0),"Array",{map:function(t){return n(this,t,arguments[1])}})},{12:12,32:32,96:96}],134:[function(t){"use strict";var e=t(32),n=t(24);e(e.S+e.F*t(34)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,e=arguments.length,i=new("function"==typeof this?this:Array)(e);e>t;)n(i,t,arguments[t++]);return i.length=e,i}})},{24:24,32:32,34:34}],135:[function(t){"use strict";var e=t(32),n=t(13);e(e.P+e.F*!t(96)([].reduceRight,!0),"Array",{reduceRight:function(t){return n(this,t,arguments.length,arguments[1],!0)}})},{13:13,32:32,96:96}],136:[function(t){"use strict";var e=t(32),n=t(13);e(e.P+e.F*!t(96)([].reduce,!0),"Array",{reduce:function(t){return n(this,t,arguments.length,arguments[1],!1)}})},{13:13,32:32,96:96}],137:[function(t){"use strict";var e=t(32),n=t(41),i=t(18),r=t(105),o=t(108),s=[].slice;e(e.P+e.F*t(34)(function(){n&&s.call(n)}),"Array",{slice:function(t,e){var n=o(this.length),a=i(this);if(e=void 0===e?n:e,"Array"==a)return s.call(this,t,e);for(var u=r(t,n),c=r(e,n),l=o(c-u),h=Array(l),f=0;f<l;f++)h[f]="String"==a?this.charAt(u+f):this[u+f];return h}})},{105:105,108:108,18:18,32:32,34:34,41:41}],138:[function(t){"use strict";var e=t(32),n=t(12)(3);e(e.P+e.F*!t(96)([].some,!0),"Array",{some:function(t){return n(this,t,arguments[1])}})},{12:12,32:32,96:96}],139:[function(t){"use strict";var e=t(32),n=t(3),i=t(109),r=t(34),o=[].sort,s=[1,2,3];e(e.P+e.F*(r(function(){s.sort(void 0)})||!r(function(){s.sort(null)})||!t(96)(o)),"Array",{sort:function(t){return void 0===t?o.call(i(this)):o.call(i(this),n(t))}})},{109:109,3:3,32:32,34:34,96:96}],140:[function(t){t(91)("Array")},{91:91}],141:[function(t){var e=t(32);e(e.S,"Date",{now:function(){return(new Date).getTime()}})},{32:32}],142:[function(t){"use strict";var e=t(32),n=t(34),i=Date.prototype.getTime,r=function(t){return t>9?t:"0"+t};e(e.P+e.F*(n(function(){return"0385-07-25T07:06:39.999Z"!=new Date(-5e13-1).toISOString()})||!n(function(){new Date(NaN).toISOString()})),"Date",{toISOString:function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),n=t.getUTCMilliseconds(),o=e<0?"-":e>9999?"+":"";return o+("00000"+Math.abs(e)).slice(o?-6:-4)+"-"+r(t.getUTCMonth()+1)+"-"+r(t.getUTCDate())+"T"+r(t.getUTCHours())+":"+r(t.getUTCMinutes())+":"+r(t.getUTCSeconds())+"."+(n>99?n:"0"+r(n))+"Z"}})},{32:32,34:34}],143:[function(t){"use strict";var e=t(32),n=t(109),i=t(110);e(e.P+e.F*t(34)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(){var t=n(this),e=i(t);return"number"!=typeof e||isFinite(e)?t.toISOString():null}})},{109:109,110:110,32:32,34:34}],144:[function(t){var e=t(117)("toPrimitive"),n=Date.prototype;e in n||t(40)(n,e,t(26))},{117:117,26:26,40:40}],145:[function(t){var e=Date.prototype,n="Invalid Date",i="toString",r=e[i],o=e.getTime;new Date(NaN)+""!=n&&t(87)(e,i,function(){var t=o.call(this);return t==t?r.call(this):n})},{87:87}],146:[function(t){var e=t(32);e(e.P,"Function",{bind:t(16)})},{16:16,32:32}],147:[function(t){"use strict";var e=t(49),n=t(74),i=t(117)("hasInstance"),r=Function.prototype;i in r||t(67).f(r,i,{value:function(t){if("function"!=typeof this||!e(t))return!1;if(!e(this.prototype))return t instanceof this;for(;t=n(t);)if(this.prototype===t)return!0;return!1}})},{117:117,49:49,67:67,74:74}],148:[function(t){var e=t(67).f,n=t(85),i=t(39),r=Function.prototype,o=/^\s*function ([^ (]*)/,s="name",a=Object.isExtensible||function(){return!0};s in r||t(28)&&e(r,s,{configurable:!0,get:function(){try{var t=this,r=(""+t).match(o)[1];return i(t,s)||!a(t)||e(t,s,n(5,r)),r}catch(t){return""}}})},{28:28,39:39,67:67,85:85}],149:[function(t,e){"use strict";var n=t(19);e.exports=t(22)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=n.getEntry(this,t);return e&&e.v},set:function(t,e){return n.def(this,0===t?0:t,e)}},n,!0)},{19:19,22:22}],150:[function(t){var e=t(32),n=t(60),i=Math.sqrt,r=Math.acosh;e(e.S+e.F*!(r&&710==Math.floor(r(Number.MAX_VALUE))&&r(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:n(t-1+i(t-1)*i(t+1))}})},{32:32,60:60}],151:[function(t){function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):Math.log(t+Math.sqrt(t*t+1)):t}var n=t(32),i=Math.asinh;n(n.S+n.F*!(i&&1/i(0)>0),"Math",{asinh:e})},{32:32}],152:[function(t){var e=t(32),n=Math.atanh;e(e.S+e.F*!(n&&1/n(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},{32:32}],153:[function(t){var e=t(32),n=t(61);e(e.S,"Math",{cbrt:function(t){return n(t=+t)*Math.pow(Math.abs(t),1/3)}})},{32:32,61:61}],154:[function(t){var e=t(32);e(e.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},{32:32}],155:[function(t){var e=t(32),n=Math.exp;e(e.S,"Math",{cosh:function(t){return(n(t=+t)+n(-t))/2}})},{32:32}],156:[function(t){var e=t(32),n=t(59);e(e.S+e.F*(n!=Math.expm1),"Math",{expm1:n})},{32:32,59:59}],157:[function(t){var e=t(32),n=t(61),i=Math.pow,r=i(2,-52),o=i(2,-23),s=i(2,127)*(2-o),a=i(2,-126),u=function(t){return t+1/r-1/r};e(e.S,"Math",{fround:function(t){var e,i,c=Math.abs(t),l=n(t);return c<a?l*u(c/a/o)*a*o:(e=(1+o/r)*c,(i=e-(e-c))>s||i!=i?l*(1/0):l*i)}})},{32:32,61:61}],158:[function(t){var e=t(32),n=Math.abs;e(e.S,"Math",{hypot:function(){for(var t,e,i=0,r=0,o=arguments.length,s=0;r<o;)t=n(arguments[r++]),s<t?(e=s/t,i=i*e*e+1,s=t):t>0?(e=t/s,i+=e*e):i+=t;return s===1/0?1/0:s*Math.sqrt(i)}})},{32:32}],159:[function(t){var e=t(32),n=Math.imul;e(e.S+e.F*t(34)(function(){return-5!=n(4294967295,5)||2!=n.length}),"Math",{imul:function(t,e){var n=65535,i=+t,r=+e,o=n&i,s=n&r;return 0|o*s+((n&i>>>16)*s+o*(n&r>>>16)<<16>>>0)}})},{32:32,34:34}],160:[function(t){var e=t(32);e(e.S,"Math",{log10:function(t){return Math.log(t)/Math.LN10}})},{32:32}],161:[function(t){var e=t(32);e(e.S,"Math",{log1p:t(60)})},{32:32,60:60}],162:[function(t){var e=t(32);e(e.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},{32:32}],163:[function(t){var e=t(32);e(e.S,"Math",{sign:t(61)})},{32:32,61:61}],164:[function(t){var e=t(32),n=t(59),i=Math.exp;e(e.S+e.F*t(34)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(n(t)-n(-t))/2:(i(t-1)-i(-t-1))*(Math.E/2)}})},{32:32,34:34,59:59}],165:[function(t){var e=t(32),n=t(59),i=Math.exp;e(e.S,"Math",{tanh:function(t){var e=n(t=+t),r=n(-t);return e==1/0?1:r==1/0?-1:(e-r)/(i(t)+i(-t))}})},{32:32,59:59}],166:[function(t){var e=t(32);e(e.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},{32:32}],167:[function(t){"use strict";var e=t(38),n=t(39),i=t(18),r=t(43),o=t(110),s=t(34),a=t(72).f,u=t(70).f,c=t(67).f,l=t(102).trim,h="Number",f=e[h],d=f,p=f.prototype,m=i(t(66)(p))==h,g="trim"in String.prototype,v=function(t){var e=o(t,!1);if("string"==typeof e&&e.length>2){var n,i,r,s=(e=g?e.trim():l(e,3)).charCodeAt(0);if(43===s||45===s){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===s){switch(e.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+e}for(var a,u=e.slice(2),c=0,h=u.length;c<h;c++)if((a=u.charCodeAt(c))<48||a>r)return NaN;return parseInt(u,i)}}return+e};if(!f(" 0o1")||!f("0b1")||f("+0x1")){f=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof f&&(m?s(function(){p.valueOf.call(n)}):i(n)!=h)?r(new d(v(e)),n,f):v(e)};for(var _,y=t(28)?a(d):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),b=0;y.length>b;b++)n(d,_=y[b])&&!n(f,_)&&c(f,_,u(d,_));f.prototype=p,p.constructor=f,t(87)(e,h,f)}},{102:102,110:110,18:18,28:28,34:34,38:38,39:39,43:43,66:66,67:67,70:70,72:72,87:87}],168:[function(t){var e=t(32);e(e.S,"Number",{EPSILON:Math.pow(2,-52)})},{32:32}],169:[function(t){var e=t(32),n=t(38).isFinite;e(e.S,"Number",{isFinite:function(t){return"number"==typeof t&&n(t)}})},{32:32,38:38}],170:[function(t){var e=t(32);e(e.S,"Number",{isInteger:t(48)})},{32:32,48:48}],171:[function(t){var e=t(32);e(e.S,"Number",{isNaN:function(t){return t!=t}})},{32:32}],172:[function(t){var e=t(32),n=t(48),i=Math.abs;e(e.S,"Number",{isSafeInteger:function(t){return n(t)&&i(t)<=9007199254740991}})},{32:32,48:48}],173:[function(t){var e=t(32);e(e.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},{32:32}],174:[function(t){var e=t(32);e(e.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},{32:32}],175:[function(t){var e=t(32),n=t(81);e(e.S+e.F*(Number.parseFloat!=n),"Number",{parseFloat:n})},{32:32,81:81}],176:[function(t){var e=t(32),n=t(82);e(e.S+e.F*(Number.parseInt!=n),"Number",{parseInt:n})},{32:32,82:82}],177:[function(t){"use strict";var e=t(32),n=t(106),i=t(4),r=t(101),o=1..toFixed,s=Math.floor,a=[0,0,0,0,0,0],u="Number.toFixed: incorrect invocation!",c="0",l=function(t,e){for(var n=-1,i=e;++n<6;)i+=t*a[n],a[n]=i%1e7,i=s(i/1e7)},h=function(t){for(var e=6,n=0;--e>=0;)n+=a[e],a[e]=s(n/t),n=n%t*1e7},f=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==a[t]){var n=String(a[t]);e=""===e?n:e+r.call(c,7-n.length)+n}return e},d=function(t,e,n){return 0===e?n:e%2==1?d(t,e-1,n*t):d(t*t,e/2,n)},p=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e};e(e.P+e.F*(!!o&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!t(34)(function(){o.call({})})),"Number",{toFixed:function(t){var e,o,s,a,m=i(this,u),g=n(t),v="",_=c;if(g<0||g>20)throw RangeError(u);if(m!=m)return"NaN";if(m<=-1e21||m>=1e21)return String(m);if(m<0&&(v="-",m=-m),m>1e-21)if(e=p(m*d(2,69,1))-69,o=e<0?m*d(2,-e,1):m/d(2,e,1),o*=4503599627370496,(e=52-e)>0){for(l(0,o),s=g;s>=7;)l(1e7,0),s-=7;for(l(d(10,s,1),0),s=e-1;s>=23;)h(1<<23),s-=23;h(1<<s),l(1,1),h(2),_=f()}else l(0,o),l(1<<-e,0),_=f()+r.call(c,g);return g>0?(a=_.length,_=v+(a<=g?"0."+r.call(c,g-a)+_:_.slice(0,a-g)+"."+_.slice(a-g))):_=v+_,_}})},{101:101,106:106,32:32,34:34,4:4}],178:[function(t){"use strict";var e=t(32),n=t(34),i=t(4),r=1..toPrecision;e(e.P+e.F*(n(function(){return"1"!==r.call(1,void 0)})||!n(function(){r.call({})})),"Number",{toPrecision:function(t){var e=i(this,"Number#toPrecision: incorrect invocation!");return void 0===t?r.call(e):r.call(e,t)}})},{32:32,34:34,4:4}],179:[function(t){var e=t(32);e(e.S+e.F,"Object",{assign:t(65)})},{32:32,65:65}],180:[function(t){var e=t(32);e(e.S,"Object",{create:t(66)})},{32:32,66:66}],181:[function(t){var e=t(32);e(e.S+e.F*!t(28),"Object",{defineProperties:t(68)})},{28:28,32:32,68:68}],182:[function(t){var e=t(32);e(e.S+e.F*!t(28),"Object",{defineProperty:t(67).f})},{28:28,32:32,67:67}],183:[function(t){var e=t(49),n=t(62).onFreeze;t(78)("freeze",function(t){return function(i){return t&&e(i)?t(n(i)):i}})},{49:49,62:62,78:78}],184:[function(t){var e=t(107),n=t(70).f;t(78)("getOwnPropertyDescriptor",function(){return function(t,i){return n(e(t),i)}})},{107:107,70:70,78:78}],185:[function(t){t(78)("getOwnPropertyNames",function(){return t(71).f})},{71:71,78:78}],186:[function(t){var e=t(109),n=t(74);t(78)("getPrototypeOf",function(){return function(t){return n(e(t))}})},{109:109,74:74,78:78}],187:[function(t){var e=t(49);t(78)("isExtensible",function(t){return function(n){return!!e(n)&&(!t||t(n))}})},{49:49,78:78}],188:[function(t){var e=t(49);t(78)("isFrozen",function(t){return function(n){return!e(n)||!!t&&t(n)}})},{49:49,78:78}],189:[function(t){var e=t(49);t(78)("isSealed",function(t){return function(n){return!e(n)||!!t&&t(n)}})},{49:49,78:78}],190:[function(t){var e=t(32);e(e.S,"Object",{is:t(89)})},{32:32,89:89}],191:[function(t){var e=t(109),n=t(76);t(78)("keys",function(){return function(t){return n(e(t))}})},{109:109,76:76,78:78}],192:[function(t){var e=t(49),n=t(62).onFreeze;t(78)("preventExtensions",function(t){return function(i){return t&&e(i)?t(n(i)):i}})},{49:49,62:62,78:78}],193:[function(t){var e=t(49),n=t(62).onFreeze;t(78)("seal",function(t){return function(i){return t&&e(i)?t(n(i)):i}})},{49:49,62:62,78:78}],194:[function(t){var e=t(32);e(e.S,"Object",{setPrototypeOf:t(90).set})},{32:32,90:90}],195:[function(t){"use strict";var e=t(17),n={};n[t(117)("toStringTag")]="z",n+""!="[object z]"&&t(87)(Object.prototype,"toString",function(){return"[object "+e(this)+"]"},!0)},{117:117,17:17,87:87}],196:[function(t){var e=t(32),n=t(81);e(e.G+e.F*(parseFloat!=n),{parseFloat:n})},{32:32,81:81}],197:[function(t){var e=t(32),n=t(82);e(e.G+e.F*(parseInt!=n),{parseInt:n})},{32:32,82:82}],198:[function(t){"use strict";var e,n,i,r=t(58),o=t(38),s=t(25),a=t(17),u=t(32),c=t(49),l=t(3),h=t(6),f=t(37),d=t(95),p=t(104).set,m=t(64)(),g="Promise",v=o.TypeError,_=o.process,y=o[g],b="process"==a(_=o.process),x=function(){},w=!!function(){try{var e=y.resolve(1),n=(e.constructor={})[t(117)("species")]=function(t){t(x,x)};return(b||"function"==typeof PromiseRejectionEvent)&&e.then(x)instanceof n}catch(t){}}(),k=function(t,e){return t===e||t===y&&e===i},E=function(t){var e;return!(!c(t)||"function"!=typeof(e=t.then))&&e},S=function(t){return k(y,t)?new L(t):new n(t)},L=n=function(t){var e,n;this.promise=new t(function(t,i){if(void 0!==e||void 0!==n)throw v("Bad Promise constructor");e=t,n=i}),this.resolve=l(e),this.reject=l(n)},T=function(t){try{t()}catch(t){return{error:t}}},C=function(t,e){if(!t._n){t._n=!0;var n=t._c;m(function(){for(var i=t._v,r=1==t._s,o=0,s=function(e){var n,o,s=r?e.ok:e.fail,a=e.resolve,u=e.reject,c=e.domain;try{s?(r||(2==t._h&&A(t),t._h=1),!0===s?n=i:(c&&c.enter(),n=s(i),c&&c.exit()),n===e.promise?u(v("Promise-chain cycle")):(o=E(n))?o.call(n,a,u):a(n)):u(i)}catch(t){u(t)}};n.length>o;)s(n[o++]);t._c=[],t._n=!1,e&&!t._h&&M(t)})}},M=function(t){p.call(o,function(){var e,n,i,r=t._v;if(I(t)&&(e=T(function(){b?_.emit("unhandledRejection",r,t):(n=o.onunhandledrejection)?n({promise:t,reason:r}):(i=o.console)&&i.error&&i.error("Unhandled promise rejection",r)}),t._h=b||I(t)?2:1),t._a=void 0,e)throw e.error})},I=function(t){if(1==t._h)return!1;for(var e,n=t._a||t._c,i=0;n.length>i;)if((e=n[i++]).fail||!I(e.promise))return!1;return!0},A=function(t){p.call(o,function(){var e;b?_.emit("rejectionHandled",t):(e=o.onrejectionhandled)&&e({promise:t,reason:t._v})})},P=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),C(e,!0))},O=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw v("Promise can't be resolved itself");(e=E(t))?m(function(){var i={_w:n,_d:!1};try{e.call(t,s(O,i,1),s(P,i,1))}catch(t){P.call(i,t)}}):(n._v=t,n._s=1,C(n,!1))}catch(t){P.call({_w:n,_d:!1},t)}}};w||(y=function(t){h(this,y,g,"_h"),l(t),e.call(this);try{t(s(O,this,1),s(P,this,1))}catch(t){P.call(this,t)}},e=function(){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},e.prototype=t(86)(y.prototype,{then:function(t,e){var n=S(d(this,y));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=b?_.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&C(this,!1),n.promise},"catch":function(t){return this.then(void 0,t)}}),L=function(){var t=new e;this.promise=t,this.resolve=s(O,t,1),this.reject=s(P,t,1)}),u(u.G+u.W+u.F*!w,{Promise:y}),t(92)(y,g),t(91)(g),i=t(23)[g],u(u.S+u.F*!w,g,{reject:function(t){var e=S(this);return(0,e.reject)(t),e.promise}}),u(u.S+u.F*(r||!w),g,{resolve:function(t){if(t instanceof y&&k(t.constructor,this))return t;var e=S(this);return(0,e.resolve)(t),e.promise}}),u(u.S+u.F*!(w&&t(54)(function(t){y.all(t)["catch"](x)})),g,{all:function(t){var e=this,n=S(e),i=n.resolve,r=n.reject,o=T(function(){var n=[],o=0,s=1;f(t,!1,function(t){var a=o++,u=!1;n.push(void 0),s++,e.resolve(t).then(function(t){u||(u=!0,n[a]=t,--s||i(n))},r)}),--s||i(n)});return o&&r(o.error),n.promise},race:function(t){var e=this,n=S(e),i=n.reject,r=T(function(){f(t,!1,function(t){e.resolve(t).then(n.resolve,i)})});return r&&i(r.error),n.promise}})},{104:104,117:117,17:17,23:23,25:25,3:3,32:32,37:37,38:38,49:49,54:54,58:58,6:6,64:64,86:86,91:91,92:92,95:95}],199:[function(t){var e=t(32),n=t(3),i=t(7),r=(t(38).Reflect||{}).apply,o=Function.apply;e(e.S+e.F*!t(34)(function(){r(function(){})}),"Reflect",{apply:function(t,e,s){var a=n(t),u=i(s);return r?r(a,e,u):o.call(a,e,u)}})},{3:3,32:32,34:34,38:38,7:7}],200:[function(t){var e=t(32),n=t(66),i=t(3),r=t(7),o=t(49),s=t(34),a=t(16),u=(t(38).Reflect||{}).construct,c=s(function(){function t(){}return!(u(function(){},[],t)instanceof t)}),l=!s(function(){u(function(){})});e(e.S+e.F*(c||l),"Reflect",{construct:function(t,e){i(t),r(e);var s=arguments.length<3?t:i(arguments[2]);if(l&&!c)return u(t,e,s);if(t==s){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var h=[null];return h.push.apply(h,e),new(a.apply(t,h))}var f=s.prototype,d=n(o(f)?f:Object.prototype),p=Function.apply.call(t,d,e);return o(p)?p:d}})},{16:16,3:3,32:32,34:34,38:38,49:49,66:66,7:7}],201:[function(t){var e=t(67),n=t(32),i=t(7),r=t(110);n(n.S+n.F*t(34)(function(){Reflect.defineProperty(e.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,n,o){i(t),n=r(n,!0),i(o);try{return e.f(t,n,o),!0}catch(t){return!1}}})},{110:110,32:32,34:34,67:67,7:7}],202:[function(t){var e=t(32),n=t(70).f,i=t(7);e(e.S,"Reflect",{deleteProperty:function(t,e){var r=n(i(t),e);return!(r&&!r.configurable)&&delete t[e]}})},{32:32,7:7,70:70}],203:[function(t){"use strict";var e=t(32),n=t(7),i=function(t){this._t=n(t),this._i=0;var e,i=this._k=[];for(e in t)i.push(e)};t(52)(i,"Object",function(){var t,e=this,n=e._k;do{if(e._i>=n.length)return{value:void 0,done:!0}}while(!((t=n[e._i++])in e._t));return{value:t,done:!1}}),e(e.S,"Reflect",{enumerate:function(t){return new i(t)}})},{32:32,52:52,7:7}],204:[function(t){var e=t(70),n=t(32),i=t(7);n(n.S,"Reflect",{getOwnPropertyDescriptor:function(t,n){return e.f(i(t),n)}})},{32:32,7:7,70:70}],205:[function(t){var e=t(32),n=t(74),i=t(7);e(e.S,"Reflect",{getPrototypeOf:function(t){return n(i(t))}})},{32:32,7:7,74:74}],206:[function(t){function e(t,o){var u,c,l=arguments.length<3?t:arguments[2];return a(t)===l?t[o]:(u=n.f(t,o))?r(u,"value")?u.value:void 0!==u.get?u.get.call(l):void 0:s(c=i(t))?e(c,o,l):void 0}var n=t(70),i=t(74),r=t(39),o=t(32),s=t(49),a=t(7);o(o.S,"Reflect",{get:e})},{32:32,39:39,49:49,7:7,70:70,74:74}],207:[function(t){var e=t(32);e(e.S,"Reflect",{has:function(t,e){return e in t}})},{32:32}],208:[function(t){var e=t(32),n=t(7),i=Object.isExtensible;e(e.S,"Reflect",{isExtensible:function(t){return n(t),!i||i(t)}})},{32:32,7:7}],209:[function(t){var e=t(32);e(e.S,"Reflect",{ownKeys:t(80)})},{32:32,80:80}],210:[function(t){var e=t(32),n=t(7),i=Object.preventExtensions;e(e.S,"Reflect",{preventExtensions:function(t){n(t);try{return i&&i(t),!0}catch(t){return!1}}})},{32:32,7:7}],211:[function(t){var e=t(32),n=t(90);n&&e(e.S,"Reflect",{setPrototypeOf:function(t,e){n.check(t,e);try{return n.set(t,e),!0}catch(t){return!1}}})},{32:32,90:90}],212:[function(t){function e(t,s,l){var h,f,d=arguments.length<4?t:arguments[3],p=i.f(u(t),s);if(!p){if(c(f=r(t)))return e(f,s,l,d);p=a(0)}return o(p,"value")?!(!1===p.writable||!c(d)||(h=i.f(d,s)||a(0),h.value=l,n.f(d,s,h),0)):void 0!==p.set&&(p.set.call(d,l),!0)}var n=t(67),i=t(70),r=t(74),o=t(39),s=t(32),a=t(85),u=t(7),c=t(49);s(s.S,"Reflect",{set:e})},{32:32,39:39,49:49,67:67,7:7,70:70,74:74,85:85}],213:[function(t){var e=t(38),n=t(43),i=t(67).f,r=t(72).f,o=t(50),s=t(36),a=e.RegExp,u=a,c=a.prototype,l=/a/g,h=/a/g,f=new a(l)!==l;if(t(28)&&(!f||t(34)(function(){return h[t(117)("match")]=!1,a(l)!=l||a(h)==h||"/a/i"!=a(l,"i")}))){a=function(t,e){var i=this instanceof a,r=o(t),l=void 0===e;return!i&&r&&t.constructor===a&&l?t:n(f?new u(r&&!l?t.source:t,e):u((r=t instanceof a)?t.source:t,r&&l?s.call(t):e),i?this:c,a)};for(var d=function(t){t in a||i(a,t,{configurable:!0,get:function(){return u[t]},set:function(e){u[t]=e}})},p=r(u),m=0;p.length>m;)d(p[m++]);c.constructor=a,a.prototype=c,t(87)(e,"RegExp",a)}t(91)("RegExp")},{117:117,28:28,34:34,36:36,38:38,43:43,50:50,67:67,72:72,87:87,91:91}],214:[function(t){t(28)&&"g"!=/./g.flags&&t(67).f(RegExp.prototype,"flags",{configurable:!0,get:t(36)})},{28:28,36:36,67:67}],215:[function(t){t(35)("match",1,function(t,e,n){return[function(n){"use strict";var i=t(this),r=void 0==n?void 0:n[e];return void 0!==r?r.call(n,i):new RegExp(n)[e](String(i))},n]})},{35:35}],216:[function(t){t(35)("replace",2,function(t,e,n){return[function(i,r){"use strict";var o=t(this),s=void 0==i?void 0:i[e];return void 0!==s?s.call(i,o,r):n.call(String(o),i,r)},n]})},{35:35}],217:[function(t){t(35)("search",1,function(t,e,n){return[function(n){"use strict";var i=t(this),r=void 0==n?void 0:n[e];return void 0!==r?r.call(n,i):new RegExp(n)[e](String(i))},n]})},{35:35}],218:[function(t){t(35)("split",2,function(e,n,i){"use strict";var r=t(50),o=i,s=[].push,a="split",u="length",c="lastIndex";if("c"=="abbc"[a](/(b)*/)[1]||4!="test"[a](/(?:)/,-1)[u]||2!="ab"[a](/(?:ab)*/)[u]||4!="."[a](/(.?)(.?)/)[u]||"."[a](/()()/)[u]>1||""[a](/.?/)[u]){var l=void 0===/()??/.exec("")[1];i=function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!r(t))return o.call(n,t,e);var i,a,h,f,d,p=[],m=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),g=0,v=void 0===e?4294967295:e>>>0,_=new RegExp(t.source,m+"g");for(l||(i=new RegExp("^"+_.source+"$(?!\\s)",m));(a=_.exec(n))&&!((h=a.index+a[0][u])>g&&(p.push(n.slice(g,a.index)),!l&&a[u]>1&&a[0].replace(i,function(){for(d=1;d<arguments[u]-2;d++)void 0===arguments[d]&&(a[d]=void 0)}),a[u]>1&&a.index<n[u]&&s.apply(p,a.slice(1)),f=a[0][u],g=h,p[u]>=v));)_[c]===a.index&&_[c]++;return g===n[u]?!f&&_.test("")||p.push(""):p.push(n.slice(g)),p[u]>v?p.slice(0,v):p}}else"0"[a](void 0,0)[u]&&(i=function(t,e){return void 0===t&&0===e?[]:o.call(this,t,e)});return[function(t,r){var o=e(this),s=void 0==t?void 0:t[n];return void 0!==s?s.call(t,o,r):i.call(String(o),t,r)},i]})},{35:35,50:50}],219:[function(t){"use strict";t(214);var e=t(7),n=t(36),i=t(28),r="toString",o=/./[r],s=function(e){t(87)(RegExp.prototype,r,e,!0)};t(34)(function(){return"/a/b"!=o.call({source:"a",flags:"b"})})?s(function(){var t=e(this);return"/".concat(t.source,"/","flags"in t?t.flags:!i&&t instanceof RegExp?n.call(t):void 0)}):o.name!=r&&s(function(){return o.call(this)})},{214:214,28:28,34:34,36:36,7:7,87:87}],220:[function(t,e){"use strict";var n=t(19);e.exports=t(22)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return n.def(this,t=0===t?0:t,t)}},n)},{19:19,22:22}],221:[function(t){"use strict";t(99)("anchor",function(t){return function(e){return t(this,"a","name",e)}})},{99:99}],222:[function(t){"use strict";t(99)("big",function(t){return function(){return t(this,"big","","")}})},{99:99}],223:[function(t){"use strict";t(99)("blink",function(t){return function(){return t(this,"blink","","")}})},{99:99}],224:[function(t){"use strict";t(99)("bold",function(t){return function(){return t(this,"b","","")}})},{99:99}],225:[function(t){"use strict";var e=t(32),n=t(97)(!1);e(e.P,"String",{codePointAt:function(t){return n(this,t)}})},{32:32,97:97}],226:[function(t){"use strict";var e=t(32),n=t(108),i=t(98),r="endsWith",o=""[r];e(e.P+e.F*t(33)(r),"String",{endsWith:function(t){var e=i(this,t,r),s=arguments.length>1?arguments[1]:void 0,a=n(e.length),u=void 0===s?a:Math.min(n(s),a),c=String(t);return o?o.call(e,c,u):e.slice(u-c.length,u)===c}})},{108:108,32:32,33:33,98:98}],227:[function(t){"use strict";t(99)("fixed",function(t){return function(){return t(this,"tt","","")}})},{99:99}],228:[function(t){"use strict";t(99)("fontcolor",function(t){return function(e){return t(this,"font","color",e)}})},{99:99}],229:[function(t){"use strict";t(99)("fontsize",function(t){return function(e){return t(this,"font","size",e)}})},{99:99}],230:[function(t){var e=t(32),n=t(105),i=String.fromCharCode,r=String.fromCodePoint;e(e.S+e.F*(!!r&&1!=r.length),"String",{fromCodePoint:function(){for(var t,e=[],r=arguments.length,o=0;r>o;){if(t=+arguments[o++],n(t,1114111)!==t)throw RangeError(t+" is not a valid code point");e.push(t<65536?i(t):i(55296+((t-=65536)>>10),t%1024+56320))}return e.join("")}})},{105:105,32:32}],231:[function(t){"use strict";var e=t(32),n=t(98),i="includes";e(e.P+e.F*t(33)(i),"String",{includes:function(t){return!!~n(this,t,i).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},{32:32,33:33,98:98}],232:[function(t){"use strict";t(99)("italics",function(t){return function(){return t(this,"i","","")}})},{99:99}],233:[function(t){"use strict";var e=t(97)(!0);t(53)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,i=this._i;return i>=n.length?{value:void 0,done:!0}:(t=e(n,i),this._i+=t.length,{value:t,done:!1})})},{53:53,97:97}],234:[function(t){"use strict";t(99)("link",function(t){return function(e){return t(this,"a","href",e)}})},{99:99}],235:[function(t){var e=t(32),n=t(107),i=t(108);e(e.S,"String",{raw:function(t){for(var e=n(t.raw),r=i(e.length),o=arguments.length,s=[],a=0;r>a;)s.push(String(e[a++])),a<o&&s.push(String(arguments[a]));return s.join("")}})},{107:107,108:108,32:32}],236:[function(t){var e=t(32);e(e.P,"String",{repeat:t(101)})},{101:101,32:32}],237:[function(t){"use strict";t(99)("small",function(t){return function(){return t(this,"small","","")}})},{99:99}],238:[function(t){"use strict";var e=t(32),n=t(108),i=t(98),r="startsWith",o=""[r];e(e.P+e.F*t(33)(r),"String",{startsWith:function(t){var e=i(this,t,r),s=n(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),a=String(t);return o?o.call(e,a,s):e.slice(s,s+a.length)===a}})},{108:108,32:32,33:33,98:98}],239:[function(t){"use strict";t(99)("strike",function(t){return function(){return t(this,"strike","","")}})},{99:99}],240:[function(t){"use strict";t(99)("sub",function(t){return function(){return t(this,"sub","","")}})},{99:99}],241:[function(t){"use strict";t(99)("sup",function(t){return function(){return t(this,"sup","","")}})},{99:99}],242:[function(t){"use strict";t(102)("trim",function(t){return function(){return t(this,3)}})},{102:102}],243:[function(t){"use strict";var e=t(38),n=t(39),i=t(28),r=t(32),o=t(87),s=t(62).KEY,a=t(34),u=t(94),c=t(92),l=t(114),h=t(117),f=t(116),d=t(115),p=t(57),m=t(31),g=t(47),v=t(7),_=t(107),y=t(110),b=t(85),x=t(66),w=t(71),k=t(70),E=t(67),S=t(76),L=k.f,T=E.f,C=w.f,M=e.Symbol,I=e.JSON,A=I&&I.stringify,P="prototype",O=h("_hidden"),D=h("toPrimitive"),N={}.propertyIsEnumerable,B=u("symbol-registry"),z=u("symbols"),j=u("op-symbols"),R=Object[P],F="function"==typeof M,$=e.QObject,U=!$||!$[P]||!$[P].findChild,H=i&&a(function(){return 7!=x(T({},"a",{get:function(){return T(this,"a",{value:7}).a}})).a})?function(t,e,n){var i=L(R,e);i&&delete R[e],T(t,e,n),i&&t!==R&&T(R,e,i)}:T,q=function(t){var e=z[t]=x(M[P]);return e._k=t,e},Z=F&&"symbol"==typeof M.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof M},V=function(t,e,i){return t===R&&V(j,e,i),v(t),e=y(e,!0),v(i),n(z,e)?(i.enumerable?(n(t,O)&&t[O][e]&&(t[O][e]=!1),i=x(i,{enumerable:b(0,!1)})):(n(t,O)||T(t,O,b(1,{})),t[O][e]=!0),H(t,e,i)):T(t,e,i)},W=function(t,e){v(t);for(var n,i=m(e=_(e)),r=0,o=i.length;o>r;)V(t,n=i[r++],e[n]);return t},K=function(t,e){return void 0===e?x(t):W(x(t),e)},G=function(t){var e=N.call(this,t=y(t,!0));return!(this===R&&n(z,t)&&!n(j,t))&&(!(e||!n(this,t)||!n(z,t)||n(this,O)&&this[O][t])||e)},Y=function(t,e){if(t=_(t),e=y(e,!0),t!==R||!n(z,e)||n(j,e)){var i=L(t,e);return!i||!n(z,e)||n(t,O)&&t[O][e]||(i.enumerable=!0),i}},X=function(t){for(var e,i=C(_(t)),r=[],o=0;i.length>o;)n(z,e=i[o++])||e==O||e==s||r.push(e);return r},Q=function(t){for(var e,i=t===R,r=C(i?j:_(t)),o=[],s=0;r.length>s;)!n(z,e=r[s++])||i&&!n(R,e)||o.push(z[e]);return o};F||(M=function(){if(this instanceof M)throw TypeError("Symbol is not a constructor!");var t=l(arguments.length>0?arguments[0]:void 0),e=function(i){this===R&&e.call(j,i),n(this,O)&&n(this[O],t)&&(this[O][t]=!1),H(this,t,b(1,i))};return i&&U&&H(R,t,{configurable:!0,set:e}),q(t)},o(M[P],"toString",function(){return this._k}),k.f=Y,E.f=V,t(72).f=w.f=X,t(77).f=G,t(73).f=Q,i&&!t(58)&&o(R,"propertyIsEnumerable",G,!0),f.f=function(t){return q(h(t))}),r(r.G+r.W+r.F*!F,{Symbol:M});for(var J="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),tt=0;J.length>tt;)h(J[tt++]);for(J=S(h.store),tt=0;J.length>tt;)d(J[tt++]);r(r.S+r.F*!F,"Symbol",{"for":function(t){return n(B,t+="")?B[t]:B[t]=M(t)},keyFor:function(t){if(Z(t))return p(B,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){U=!0},useSimple:function(){U=!1}}),r(r.S+r.F*!F,"Object",{create:K,defineProperty:V,defineProperties:W,getOwnPropertyDescriptor:Y,getOwnPropertyNames:X,getOwnPropertySymbols:Q}),I&&r(r.S+r.F*(!F||a(function(){var t=M();return"[null]"!=A([t])||"{}"!=A({a:t})||"{}"!=A(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!Z(t)){for(var e,n,i=[t],r=1;arguments.length>r;)i.push(arguments[r++]);return"function"==typeof(e=i[1])&&(n=e),!n&&g(e)||(e=function(t,e){if(n&&(e=n.call(this,t,e)),!Z(e))return e}),i[1]=e,A.apply(I,i)}}}),M[P][D]||t(40)(M[P],D,M[P].valueOf),c(M,"Symbol"),c(Math,"Math",!0),c(e.JSON,"JSON",!0)},{107:107,110:110,114:114,115:115,116:116,117:117,28:28,31:31,32:32,34:34,38:38,39:39,40:40,47:47,57:57,58:58,62:62,66:66,67:67,7:7,70:70,71:71,72:72,73:73,76:76,77:77,85:85,87:87,92:92,94:94}],244:[function(t){"use strict";var e=t(32),n=t(113),i=t(112),r=t(7),o=t(105),s=t(108),a=t(49),u=t(38).ArrayBuffer,c=t(95),l=i.ArrayBuffer,h=i.DataView,f=n.ABV&&u.isView,d=l.prototype.slice,p=n.VIEW,m="ArrayBuffer";e(e.G+e.W+e.F*(u!==l),{ArrayBuffer:l}),e(e.S+e.F*!n.CONSTR,m,{isView:function(t){return f&&f(t)||a(t)&&p in t}}),e(e.P+e.U+e.F*t(34)(function(){return!new l(2).slice(1,void 0).byteLength}),m,{slice:function(t,e){if(void 0!==d&&void 0===e)return d.call(r(this),t);for(var n=r(this).byteLength,i=o(t,n),a=o(void 0===e?n:e,n),u=new(c(this,l))(s(a-i)),f=new h(this),p=new h(u),m=0;i<a;)p.setUint8(m++,f.getUint8(i++));return u}}),t(91)(m)},{105:105,108:108,112:112,113:113,32:32,34:34,38:38,49:49,7:7,91:91,95:95}],245:[function(t){var e=t(32);e(e.G+e.W+e.F*!t(113).ABV,{DataView:t(112).DataView})},{112:112,113:113,32:32}],246:[function(t){t(111)("Float32",4,function(t){return function(e,n,i){return t(this,e,n,i)}})},{111:111}],247:[function(t){t(111)("Float64",8,function(t){return function(e,n,i){return t(this,e,n,i)}})},{111:111}],248:[function(t){t(111)("Int16",2,function(t){return function(e,n,i){return t(this,e,n,i)}})},{111:111}],249:[function(t){t(111)("Int32",4,function(t){return function(e,n,i){return t(this,e,n,i)}})},{111:111}],250:[function(t){t(111)("Int8",1,function(t){return function(e,n,i){return t(this,e,n,i)}})},{111:111}],251:[function(t){t(111)("Uint16",2,function(t){return function(e,n,i){return t(this,e,n,i)}})},{111:111}],252:[function(t){t(111)("Uint32",4,function(t){return function(e,n,i){return t(this,e,n,i)}})},{111:111}],253:[function(t){t(111)("Uint8",1,function(t){return function(e,n,i){return t(this,e,n,i)}})},{111:111}],254:[function(t){t(111)("Uint8",1,function(t){return function(e,n,i){return t(this,e,n,i)}},!0)},{111:111}],255:[function(t,e){"use strict";var n,i=t(12)(0),r=t(87),o=t(62),s=t(65),a=t(21),u=t(49),c=o.getWeak,l=Object.isExtensible,h=a.ufstore,f={},d=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},p={get:function(t){if(u(t)){var e=c(t);return!0===e?h(this).get(t):e?e[this._i]:void 0}},set:function(t,e){return a.def(this,t,e)}},m=e.exports=t(22)("WeakMap",d,p,a,!0,!0);7!=(new m).set((Object.freeze||Object)(f),7).get(f)&&(n=a.getConstructor(d),s(n.prototype,p),o.NEED=!0,i(["delete","has","get","set"],function(t){var e=m.prototype,i=e[t];r(e,t,function(e,r){if(u(e)&&!l(e)){this._f||(this._f=new n);var o=this._f[t](e,r);return"set"==t?this:o}return i.call(this,e,r)})}))},{12:12,21:21,22:22,49:49,62:62,65:65,87:87}],256:[function(t){"use strict";var e=t(21);t(22)("WeakSet",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return e.def(this,t,!0)}},e,!1,!0)},{21:21,22:22}],257:[function(t){"use strict";var e=t(32),n=t(11)(!0);e(e.P,"Array",{includes:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),t(5)("includes")},{11:11,32:32,5:5}],258:[function(t){var e=t(32),n=t(64)(),i=t(38).process,r="process"==t(18)(i);e(e.G,{asap:function(t){var e=r&&i.domain
;n(e?e.bind(t):t)}})},{18:18,32:32,38:38,64:64}],259:[function(t){var e=t(32),n=t(18);e(e.S,"Error",{isError:function(t){return"Error"===n(t)}})},{18:18,32:32}],260:[function(t){var e=t(32);e(e.P+e.R,"Map",{toJSON:t(20)("Map")})},{20:20,32:32}],261:[function(t){var e=t(32);e(e.S,"Math",{iaddh:function(t,e,n,i){var r=t>>>0,o=n>>>0;return(e>>>0)+(i>>>0)+((r&o|(r|o)&~(r+o>>>0))>>>31)|0}})},{32:32}],262:[function(t){var e=t(32);e(e.S,"Math",{imulh:function(t,e){var n=65535,i=+t,r=+e,o=i&n,s=r&n,a=i>>16,u=r>>16,c=(a*s>>>0)+(o*s>>>16);return a*u+(c>>16)+((o*u>>>0)+(c&n)>>16)}})},{32:32}],263:[function(t){var e=t(32);e(e.S,"Math",{isubh:function(t,e,n,i){var r=t>>>0,o=n>>>0;return(e>>>0)-(i>>>0)-((~r&o|~(r^o)&r-o>>>0)>>>31)|0}})},{32:32}],264:[function(t){var e=t(32);e(e.S,"Math",{umulh:function(t,e){var n=65535,i=+t,r=+e,o=i&n,s=r&n,a=i>>>16,u=r>>>16,c=(a*s>>>0)+(o*s>>>16);return a*u+(c>>>16)+((o*u>>>0)+(c&n)>>>16)}})},{32:32}],265:[function(t){"use strict";var e=t(32),n=t(109),i=t(3),r=t(67);t(28)&&e(e.P+t(69),"Object",{__defineGetter__:function(t,e){r.f(n(this),t,{get:i(e),enumerable:!0,configurable:!0})}})},{109:109,28:28,3:3,32:32,67:67,69:69}],266:[function(t){"use strict";var e=t(32),n=t(109),i=t(3),r=t(67);t(28)&&e(e.P+t(69),"Object",{__defineSetter__:function(t,e){r.f(n(this),t,{set:i(e),enumerable:!0,configurable:!0})}})},{109:109,28:28,3:3,32:32,67:67,69:69}],267:[function(t){var e=t(32),n=t(79)(!0);e(e.S,"Object",{entries:function(t){return n(t)}})},{32:32,79:79}],268:[function(t){var e=t(32),n=t(80),i=t(107),r=t(70),o=t(24);e(e.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,s=i(t),a=r.f,u=n(s),c={},l=0;u.length>l;)o(c,e=u[l++],a(s,e));return c}})},{107:107,24:24,32:32,70:70,80:80}],269:[function(t){"use strict";var e=t(32),n=t(109),i=t(110),r=t(74),o=t(70).f;t(28)&&e(e.P+t(69),"Object",{__lookupGetter__:function(t){var e,s=n(this),a=i(t,!0);do{if(e=o(s,a))return e.get}while(s=r(s))}})},{109:109,110:110,28:28,32:32,69:69,70:70,74:74}],270:[function(t){"use strict";var e=t(32),n=t(109),i=t(110),r=t(74),o=t(70).f;t(28)&&e(e.P+t(69),"Object",{__lookupSetter__:function(t){var e,s=n(this),a=i(t,!0);do{if(e=o(s,a))return e.set}while(s=r(s))}})},{109:109,110:110,28:28,32:32,69:69,70:70,74:74}],271:[function(t){var e=t(32),n=t(79)(!1);e(e.S,"Object",{values:function(t){return n(t)}})},{32:32,79:79}],272:[function(t){"use strict";var e=t(32),n=t(38),i=t(23),r=t(64)(),o=t(117)("observable"),s=t(3),a=t(7),u=t(6),c=t(86),l=t(40),h=t(37),f=h.RETURN,d=function(t){return null==t?void 0:s(t)},p=function(t){var e=t._c;e&&(t._c=void 0,e())},m=function(t){return void 0===t._o},g=function(t){m(t)||(t._o=void 0,p(t))},v=function(t,e){a(t),this._c=void 0,this._o=t,t=new _(this);try{var n=e(t),i=n;null!=n&&("function"==typeof n.unsubscribe?n=function(){i.unsubscribe()}:s(n),this._c=n)}catch(e){return void t.error(e)}m(this)&&p(this)};v.prototype=c({},{unsubscribe:function(){g(this)}});var _=function(t){this._s=t};_.prototype=c({},{next:function(t){var e=this._s;if(!m(e)){var n=e._o;try{var i=d(n.next);if(i)return i.call(n,t)}catch(t){try{g(e)}finally{throw t}}}},error:function(t){var e=this._s;if(m(e))throw t;var n=e._o;e._o=void 0;try{var i=d(n.error);if(!i)throw t;t=i.call(n,t)}catch(t){try{p(e)}finally{throw t}}return p(e),t},complete:function(t){var e=this._s;if(!m(e)){var n=e._o;e._o=void 0;try{var i=d(n.complete);t=i?i.call(n,t):void 0}catch(t){try{p(e)}finally{throw t}}return p(e),t}}});var y=function(t){u(this,y,"Observable","_f")._f=s(t)};c(y.prototype,{subscribe:function(t){return new v(t,this._f)},forEach:function(t){var e=this;return new(i.Promise||n.Promise)(function(n,i){s(t);var r=e.subscribe({next:function(e){try{return t(e)}catch(t){i(t),r.unsubscribe()}},error:i,complete:n})})}}),c(y,{from:function(t){var e="function"==typeof this?this:y,n=d(a(t)[o]);if(n){var i=a(n.call(t));return i.constructor===e?i:new e(function(t){return i.subscribe(t)})}return new e(function(e){var n=!1;return r(function(){if(!n){try{if(h(t,!1,function(t){if(e.next(t),n)return f})===f)return}catch(t){if(n)throw t;return void e.error(t)}e.complete()}}),function(){n=!0}})},of:function(){for(var t=0,e=arguments.length,n=Array(e);t<e;)n[t]=arguments[t++];return new("function"==typeof this?this:y)(function(t){var e=!1;return r(function(){if(!e){for(var i=0;i<n.length;++i)if(t.next(n[i]),e)return;t.complete()}}),function(){e=!0}})}}),l(y.prototype,o,function(){return this}),e(e.G,{Observable:y}),t(91)("Observable")},{117:117,23:23,3:3,32:32,37:37,38:38,40:40,6:6,64:64,7:7,86:86,91:91}],273:[function(t){var e=t(63),n=t(7),i=e.key,r=e.set;e.exp({defineMetadata:function(t,e,o,s){r(t,e,n(o),i(s))}})},{63:63,7:7}],274:[function(t){var e=t(63),n=t(7),i=e.key,r=e.map,o=e.store;e.exp({deleteMetadata:function(t,e){var s=arguments.length<3?void 0:i(arguments[2]),a=r(n(e),s,!1);if(void 0===a||!a["delete"](t))return!1;if(a.size)return!0;var u=o.get(e);return u["delete"](s),!!u.size||o["delete"](e)}})},{63:63,7:7}],275:[function(t){var e=t(220),n=t(10),i=t(63),r=t(7),o=t(74),s=i.keys,a=i.key,u=function(t,i){var r=s(t,i),a=o(t);if(null===a)return r;var c=u(a,i);return c.length?r.length?n(new e(r.concat(c))):c:r};i.exp({getMetadataKeys:function(t){return u(r(t),arguments.length<2?void 0:a(arguments[1]))}})},{10:10,220:220,63:63,7:7,74:74}],276:[function(t){var e=t(63),n=t(7),i=t(74),r=e.has,o=e.get,s=e.key,a=function(t,e,n){if(r(t,e,n))return o(t,e,n);var s=i(e);return null!==s?a(t,s,n):void 0};e.exp({getMetadata:function(t,e){return a(t,n(e),arguments.length<3?void 0:s(arguments[2]))}})},{63:63,7:7,74:74}],277:[function(t){var e=t(63),n=t(7),i=e.keys,r=e.key;e.exp({getOwnMetadataKeys:function(t){return i(n(t),arguments.length<2?void 0:r(arguments[1]))}})},{63:63,7:7}],278:[function(t){var e=t(63),n=t(7),i=e.get,r=e.key;e.exp({getOwnMetadata:function(t,e){return i(t,n(e),arguments.length<3?void 0:r(arguments[2]))}})},{63:63,7:7}],279:[function(t){var e=t(63),n=t(7),i=t(74),r=e.has,o=e.key,s=function(t,e,n){if(r(t,e,n))return!0;var o=i(e);return null!==o&&s(t,o,n)};e.exp({hasMetadata:function(t,e){return s(t,n(e),arguments.length<3?void 0:o(arguments[2]))}})},{63:63,7:7,74:74}],280:[function(t){var e=t(63),n=t(7),i=e.has,r=e.key;e.exp({hasOwnMetadata:function(t,e){return i(t,n(e),arguments.length<3?void 0:r(arguments[2]))}})},{63:63,7:7}],281:[function(t){var e=t(63),n=t(7),i=t(3),r=e.key,o=e.set;e.exp({metadata:function(t,e){return function(s,a){o(t,e,(void 0!==a?n:i)(s),r(a))}}})},{3:3,63:63,7:7}],282:[function(t){var e=t(32);e(e.P+e.R,"Set",{toJSON:t(20)("Set")})},{20:20,32:32}],283:[function(t){"use strict";var e=t(32),n=t(97)(!0);e(e.P,"String",{at:function(t){return n(this,t)}})},{32:32,97:97}],284:[function(t){"use strict";var e=t(32),n=t(27),i=t(108),r=t(50),o=t(36),s=RegExp.prototype,a=function(t,e){this._r=t,this._s=e};t(52)(a,"RegExp String",function(){var t=this._r.exec(this._s);return{value:t,done:null===t}}),e(e.P,"String",{matchAll:function(t){if(n(this),!r(t))throw TypeError(t+" is not a regexp!");var e=String(this),u="flags"in s?String(t.flags):o.call(t),c=new RegExp(t.source,~u.indexOf("g")?u:"g"+u);return c.lastIndex=i(t.lastIndex),new a(c,e)}})},{108:108,27:27,32:32,36:36,50:50,52:52}],285:[function(t){"use strict";var e=t(32),n=t(100);e(e.P,"String",{padEnd:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},{100:100,32:32}],286:[function(t){"use strict";var e=t(32),n=t(100);e(e.P,"String",{padStart:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},{100:100,32:32}],287:[function(t){"use strict";t(102)("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},{102:102}],288:[function(t){"use strict";t(102)("trimRight",function(t){return function(){return t(this,2)}},"trimEnd")},{102:102}],289:[function(t){t(115)("asyncIterator")},{115:115}],290:[function(t){t(115)("observable")},{115:115}],291:[function(t){var e=t(32);e(e.S,"System",{global:t(38)})},{32:32,38:38}],292:[function(t){for(var e=t(130),n=t(87),i=t(38),r=t(40),o=t(56),s=t(117),a=s("iterator"),u=s("toStringTag"),c=o.Array,l=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],h=0;h<5;h++){var f,d=l[h],p=i[d],m=p&&p.prototype;if(m){m[a]||r(m,a,c),m[u]||r(m,u,d),o[d]=c;for(f in e)m[f]||n(m,f,e[f],!0)}}},{117:117,130:130,38:38,40:40,56:56,87:87}],293:[function(t){var e=t(32),n=t(104);e(e.G+e.B,{setImmediate:n.set,clearImmediate:n.clear})},{104:104,32:32}],294:[function(t){var e=t(38),n=t(32),i=t(44),r=t(83),o=e.navigator,s=!!o&&/MSIE .\./.test(o.userAgent),a=function(t){return s?function(e,n){return t(i(r,[].slice.call(arguments,2),"function"==typeof e?e:Function(e)),n)}:t};n(n.G+n.B+n.F*s,{setTimeout:a(e.setTimeout),setInterval:a(e.setInterval)})},{32:32,38:38,44:44,83:83}],295:[function(t,e){t(243),t(180),t(182),t(181),t(184),t(186),t(191),t(185),t(183),t(193),t(192),t(188),t(189),t(187),t(179),t(190),t(194),t(195),t(146),t(148),t(147),t(197),t(196),t(167),t(177),t(178),t(168),t(169),t(170),t(171),t(172),t(173),t(174),t(175),t(176),t(150),t(151),t(152),t(153),t(154),t(155),t(156),t(157),t(158),t(159),t(160),t(161),t(162),t(163),t(164),t(165),t(166),t(230),t(235),t(242),t(233),t(225),t(226),t(231),t(236),t(238),t(221),t(222),t(223),t(224),t(227),t(228),t(229),t(232),t(234),t(237),t(239),t(240),t(241),t(141),t(143),t(142),t(145),t(144),t(129),t(127),t(134),t(131),t(137),t(139),t(126),t(133),t(123),t(138),t(121),t(136),t(135),t(128),t(132),t(120),t(122),t(125),t(124),t(140),t(130),t(213),t(219),t(214),t(215),t(216),t(217),t(218),t(198),t(149),t(220),t(255),t(256),t(244),t(245),t(250),t(253),t(254),t(248),t(251),t(249),t(252),t(246),t(247),t(199),t(200),t(201),t(202),t(203),t(206),t(204),t(205),t(207),t(208),t(209),t(210),t(212),t(211),t(257),t(283),t(286),t(285),t(287),t(288),t(284),t(289),t(290),t(268),t(271),t(267),t(265),t(266),t(269),t(270),t(260),t(282),t(291),t(259),t(261),t(263),t(262),t(264),t(273),t(274),t(276),t(275),t(278),t(277),t(279),t(280),t(281),t(258),t(272),t(294),t(293),t(292),e.exports=t(23)},{120:120,121:121,122:122,123:123,124:124,125:125,126:126,127:127,128:128,129:129,130:130,131:131,132:132,133:133,134:134,135:135,136:136,137:137,138:138,139:139,140:140,141:141,142:142,143:143,144:144,145:145,146:146,147:147,148:148,149:149,150:150,151:151,152:152,153:153,154:154,155:155,156:156,157:157,158:158,159:159,160:160,161:161,162:162,163:163,164:164,165:165,166:166,167:167,168:168,169:169,170:170,171:171,172:172,173:173,174:174,175:175,176:176,177:177,178:178,179:179,180:180,181:181,182:182,183:183,184:184,185:185,186:186,187:187,188:188,189:189,190:190,191:191,192:192,193:193,194:194,195:195,196:196,197:197,198:198,199:199,200:200,201:201,202:202,203:203,204:204,205:205,206:206,207:207,208:208,209:209,210:210,211:211,212:212,213:213,214:214,215:215,216:216,217:217,218:218,219:219,220:220,221:221,222:222,223:223,224:224,225:225,226:226,227:227,228:228,229:229,23:23,230:230,231:231,232:232,233:233,234:234,235:235,236:236,237:237,238:238,239:239,240:240,241:241,242:242,243:243,244:244,245:245,246:246,247:247,248:248,249:249,250:250,251:251,252:252,253:253,254:254,255:255,256:256,257:257,258:258,259:259,260:260,261:261,262:262,263:263,264:264,265:265,266:266,267:267,268:268,269:269,270:270,271:271,272:272,273:273,274:274,275:275,276:276,277:277,278:278,279:279,280:280,281:281,282:282,283:283,284:284,285:285,286:286,287:287,288:288,289:289,290:290,291:291,292:292,293:293,294:294}],296:[function(t,e){(function(t){!function(t){"use strict";function n(t,e,n,i){var o=e&&e.prototype instanceof r?e:r,s=Object.create(o.prototype),a=new f(i||[]);return s._invoke=c(t,n,a),s}function i(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function r(){}function o(){}function s(){}function a(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function u(t){function e(n,r,o,s){var a=i(t[n],t,r);if("throw"!==a.type){var u=a.arg,c=u.value;return c&&"object"==typeof c&&v.call(c,"__await")?Promise.resolve(c.__await).then(function(t){e("next",t,o,s)},function(t){e("throw",t,o,s)}):Promise.resolve(c).then(function(t){u.value=t,o(u)},s)}s(a.arg)}function n(t,n){function i(){return new Promise(function(i,r){e(t,n,i,r)})}return r=r?r.then(i,i):i()}"object"==typeof process&&process.domain&&(e=process.domain.bind(e));var r;this._invoke=n}function c(t,e,n){var r=k;return function(o,s){if(r===S)throw new Error("Generator is already running");if(r===L){if("throw"===o)throw s;return p()}for(;;){var a=n.delegate;if(a){if("return"===o||"throw"===o&&a.iterator[o]===m){n.delegate=null;var u=a.iterator["return"];if(u){if("throw"===(c=i(u,a.iterator,s)).type){o="throw",s=c.arg;continue}}if("return"===o)continue}if("throw"===(c=i(a.iterator[o],a.iterator,s)).type){n.delegate=null,o="throw",s=c.arg;continue}o="next",s=m;if(!(l=c.arg).done)return r=E,l;n[a.resultName]=l.value,n.next=a.nextLoc,n.delegate=null}if("next"===o)n.sent=n._sent=s;else if("throw"===o){if(r===k)throw r=L,s;n.dispatchException(s)&&(o="next",s=m)}else"return"===o&&n.abrupt("return",s);r=S;var c;if("normal"===(c=i(t,e,n)).type){r=n.done?L:E;var l={value:c.arg,done:n.done};if(c.arg!==T)return l;n.delegate&&"next"===o&&(s=m)}else"throw"===c.type&&(r=L,o="throw",s=c.arg)}}}function l(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function h(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function f(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(l,this),this.reset(!0)}function d(t){if(t){var e=t[y];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function r(){for(;++n<t.length;)if(v.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=m,r.done=!0,r};return i.next=i}}return{next:p}}function p(){return{value:m,done:!0}}var m,g=Object.prototype,v=g.hasOwnProperty,_="function"==typeof Symbol?Symbol:{},y=_.iterator||"@@iterator",b=_.toStringTag||"@@toStringTag",x="object"==typeof e,w=t.regeneratorRuntime;if(w)x&&(e.exports=w);else{(w=t.regeneratorRuntime=x?e.exports:{}).wrap=n;var k="suspendedStart",E="suspendedYield",S="executing",L="completed",T={},C={};C[y]=function(){return this};var M=Object.getPrototypeOf,I=M&&M(M(d([])));I&&I!==g&&v.call(I,y)&&(C=I);var A=s.prototype=r.prototype=Object.create(C);o.prototype=A.constructor=s,s.constructor=o,s[b]=o.displayName="GeneratorFunction",w.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===o||"GeneratorFunction"===(e.displayName||e.name))},w.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,b in t||(t[b]="GeneratorFunction")),t.prototype=Object.create(A),t},w.awrap=function(t){return{__await:t}},a(u.prototype),w.AsyncIterator=u,w.async=function(t,e,i,r){var o=new u(n(t,e,i,r));return w.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},a(A),A[b]="Generator",A.toString=function(){return"[object Generator]"},w.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function i(){for(;e.length;){var n=e.pop();if(n in t)return i.value=n,i.done=!1,i}return i.done=!0,i}},w.values=d,f.prototype={constructor:f,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=m,this.done=!1,this.delegate=null,this.tryEntries.forEach(h),!t)for(var e in this)"t"===e.charAt(0)&&v.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=m)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){function e(e,i){return o.type="throw",o.arg=t,n.next=e,!!i}if(this.done)throw t;for(var n=this,i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i],o=r.completion;if("root"===r.tryLoc)return e("end");if(r.tryLoc<=this.prev){var s=v.call(r,"catchLoc"),a=v.call(r,"finallyLoc");if(s&&a){if(this.prev<r.catchLoc)return e(r.catchLoc,!0);if(this.prev<r.finallyLoc)return e(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return e(r.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return e(r.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&v.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=t,o.arg=e,r?this.next=r.finallyLoc:this.complete(o),T},complete:function(t,e){if("throw"===t.type)throw t.arg;"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=t.arg,this.next="end"):"normal"===t.type&&e&&(this.next=e)},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),h(n),T}},"catch":function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;h(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:d(t),resultName:e,nextLoc:n},T}}}}("object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1]),function(t){t.fn.addNewPageButton=function(e){function n(n){function i(){n.outerWidth()<=h+5&&n.animate({width:s.animate_width+"px"},s.speed,function(){a.show(0,function(){l.focus(),n.width("auto"),n.width(n.width())})})}function r(){a.hide(),n.animate({width:h+"px"},s.speed)}function o(){return""==t.trim(l.val())}var s=t.extend({speed:n.data("speed")||450,animate_width:n.data("animate_width")||425},e),a=t(n.data("field-target")),u=t("input[data-behavior='save']",a),c=t("input[data-behavior='cancel']",a),l=t("input[type='text']",a),h=n.outerWidth();n.on("mouseenter focus",function(){i()}),u.on("click",function(){if(o())return!1}),c.on("click",function(t){t.preventDefault(),l.val(""),r()}),l.on("blur",function(){o()&&r()})}t.each(this,function(){n(t(this))})}}(jQuery),Spotlight.onLoad(function(){$("[data-expanded-add-button]").addNewPageButton()}),jQuery,Spotlight.onLoad(function(){return null!=window._gaq?_gaq.push(["_trackPageview"]):null!=window.pageTracker?pageTracker._trackPageview():void 0}),Spotlight.onLoad(function(){addRestoreDefaultBehavior()}),Spotlight.onLoad(function(){addCheckboxToggleBehavior(),addEnableToggleBehavior()}),function(t){SirTrevor.BlockMixins.Autocompleteable={mixinName:"Autocompleteable",preload:!0,initializeAutocompleteable:function(){this.on("onRender",this.addAutocompletetoSirTrevorForm),_.isUndefined(this.autocomplete_url)&&(this.autocomplete_url=function(){return t("form[data-autocomplete-url]").data("autocomplete-url").replace("%25QUERY","%QUERY")}),_.isUndefined(this.autocomplete_template)&&(this.autocomplete_url=function(){return'<div class="autocomplete-item{{#if private}} blacklight-private{{/if}}">{{#if thumbnail}}<div class="document-thumbnail thumbnail"><img src="{{thumbnail}}" /></div>{{/if}}<span class="autocomplete-title">{{title}}</span><br/><small>&nbsp;&nbsp;{{description}}</small></div>'}),_.isUndefined(this.transform_autocomplete_results)&&(this.transform_autocomplete_results=_.identity),_.isUndefined(this.bloodhoundOptions)&&(this.bloodhoundOptions=function(){return{remote:{url:this.autocomplete_url(),filter:this.transform_autocomplete_results}}})},autocomplete_control:function(){return'<input type="text" class="st-input-string form-control item-input-field" data-twitter-typeahead="true" placeholder="<%= i18n.t("blocks:autocompleteable:placeholder")%>"/>'},addAutocompletetoSirTrevorForm:function(){t("[data-twitter-typeahead]",this.inner).spotlightSearchTypeAhead({bloodhound:this.bloodhound(),template:this.autocomplete_template()}).on("typeahead:selected typeahead:autocompleted",this.autocompletedHandler()).on("focus",function(){""===t(this).val()&&t(this).data().ttTypeahead.input.trigger("queryChanged","")})},autocompletedHandler:function(){var e=this;return function(n,i){t(this).typeahead("val",""),t(this).val(""),e.createItemPanel(t.extend(i,{display:"true"}))}},bloodhound:function(){var t=this,e=new Bloodhound(_.extend({datumTokenizer:function(t){return Bloodhound.tokenizers.whitespace(t.title)},queryTokenizer:Bloodhound.tokenizers.whitespace,limit:100},t.bloodhoundOptions()));return e.initialize(),e}},SirTrevor.Block.prototype.availableMixins.push("autocompleteable")}(jQuery),function(t){SirTrevor.BlockMixins.Formable={mixinName:"Formable",preload:!0,initializeFormable:function(){_.isUndefined(this.afterLoadData)&&(this.afterLoadData=function(){})},formId:function(t){return this.blockID+"_"+t},_serializeData:function(){var e=t(":input,textarea,select",this.inner).not(":input:radio").serializeJSON();return t(":input:radio:checked",this.inner).each(function(n,i){var r=t(i).data("key")||i.getAttribute("name");r.match("\\[")||(e[r]=t(i).val())}),this.hasTextBlock()&&(e.text=this.getTextBlockHTML(),e.text.length>0&&this.options.convertToMarkdown&&(e.text=stToMarkdown(e.text,this.type))),e},loadData:function(e){this.hasTextBlock()&&t(this.getTextBlock()).html(SirTrevor.toHTML(e.text,this.type)),this.loadFormDataByKey(e),this.afterLoadData(e)},loadFormDataByKey:function(e){t(":input",this.inner).not("button,:input[type=hidden]").each(function(n,i){var r=t(i).data("key")||i.getAttribute("name");if(r){r.match("\\[\\]$")&&(r=r.replace("[]",""));var o=e[r];o instanceof Array||(o=[o]),t(this).val(o)}})}},SirTrevor.Block.prototype.availableMixins.push("formable")}(jQuery),jQuery,SirTrevor.BlockMixins.Plustextable={mixinName:"Textable",preload:!0,initializeTextable:function(){_.isUndefined(this.formId)&&this.withMixin(SirTrevor.BlockMixins.Formable),_.isUndefined(this.show_heading)&&(this.show_heading=!0)},align_key:"text-align",text_key:"item-text",heading_key:"title",text_area:function(){return _.template(['<div class="row">','<div class="col-md-8">','<div class="form-group">',this.heading(),'<div class="field">','<label for="<%= formId(text_key) %>" class="control-label"><%= i18n.t("blocks:textable:text") %></label>','<div id="<%= formId(text_key) %>" class="st-text-block form-control" contenteditable="true"></div>',"</div>","</div>","</div>",'<div class="col-md-4">','<div class="text-align">','<p><%= i18n.t("blocks:textable:align:title") %></p>','<input data-key="<%= align_key %>" type="radio" name="<%= formId(align_key) %>" id="<%= formId(align_key + "-left") %>" value="left" checked="true">','<label for="<%= formId(align_key + "-left") %>"><%= i18n.t("blocks:textable:align:left") %></label>','<input data-key="<%= align_key %>" type="radio" name="<%= formId(align_key) %>" id="<%= formId(align_key + "-right") %>" value="right">','<label for="<%= formId(align_key + "-right") %>"><%= i18n.t("blocks:textable:align:right") %></label>',"</div>","</div>","</div>"].join("\n"))(this)},heading:function(){return this.show_heading?['<div class="field">','<label for="<%= formId(heading_key) %>" class="control-label"><%= i18n.t("blocks:textable:heading") %></label>','<input type="text" class="form-control" id="<%= formId(heading_key) %>" name="<%= heading_key %>" />',"</div>"].join("\n"):""}},SirTrevor.Block.prototype.availableMixins.push("plustextable"),function(t){Spotlight.Block=SirTrevor.Block.extend({formable:!0,editorHTML:function(){return _.template(this.template)(this)},beforeBlockRender:function(){this.availableMixins.forEach(function(t){this[t]&&SirTrevor.BlockMixins[this.capitalize(t)].preload&&this.withMixin(SirTrevor.BlockMixins[this.capitalize(t)])},this)},$instance:function(){return t("#"+this.instanceID)},capitalize:function(t){return t.charAt(0).toUpperCase()+t.substring(1).toLowerCase()}})}(jQuery),Spotlight.Block.Resources=Spotlight.Block.extend({type:"resources",formable:!0,autocompleteable:!0,show_heading:!0,title:function(){return i18n.t("blocks:"+this.type+":title")},description:function(){return i18n.t("blocks:"+this.type+":description")},icon_name:"resources",blockGroup:function(){return i18n.t("blocks:group:items")},primary_field_key:"primary-caption-field",show_primary_field_key:"show-primary-caption",secondary_field_key:"secondary-caption-field",show_secondary_field_key:"show-secondary-caption",display_checkbox:"display-checkbox",globalIndex:0,_itemPanelIiifFields:function(){return[]},_itemPanel:function(t){var e,n="item_"+this.globalIndex++;e="true"==t.display?"checked='checked'":"";var i=['<li class="field form-inline dd-item dd3-item" data-id="'+n+'" id="'+this.formId("item_"+t.id)+'">','<input type="hidden" name="item['+n+'][id]" value="'+(t.slug||t.id)+'" />','<input type="hidden" name="item['+n+'][title]" value="'+t.title+'" />',this._itemPanelIiifFields(n,t),'<input data-property="weight" type="hidden" name="item['+n+'][weight]" value="'+t.weight+'" />','<div class="dd-handle dd3-handle"><%= i18n.t("blocks:resources:panel:drag") %></div>','<div class="dd3-content panel panel-default">','<div class="panel-heading item-grid">','<div class="checkbox">','<input name="item['+n+'][display]" type="hidden" value="false" />','<input name="item['+n+'][display]" id="'+this.formId(this.display_checkbox+"_"+t.id)+'" type="checkbox" '+e+' class="item-grid-checkbox" value="true"  />','<label class="sr-only" for="'+this.formId(this.display_checkbox+"_"+t.id)+'"><%= i18n.t("blocks:resources:panel:display") %></label>',"</div>",'<div class="pic thumbnail">','<img src="'+(t.thumbnail_image_url||(t.iiif_tilesource||"").replace("/info.json","/full/!100,100/0/default.jpg"))+'" />',"</div>",'<div class="main">','<div class="title panel-title">'+t.title+"</div>","<div>"+(t.slug||t.id)+"</div>","</div>",'<div class="remove pull-right">','<a data-item-grid-panel-remove="true" href="#"><%= i18n.t("blocks:resources:panel:remove") %></a>',"</div>",'<div class="h5" data-panel-image-pagination="true"></div>',"</div>","</div>","</li>"].join("\n"),r=$(_.template(i)(this)),o=this;return $(".remove a",r).on("click",function(t){t.preventDefault(),$(this).closest(".field").remove(),o.afterPanelDelete()}),this.afterPanelRender(t,r),r},afterPanelRender:function(){},afterPanelDelete:function(){},createItemPanel:function(t){var e=this._itemPanel(t);$(e).appendTo($(".panels > ol",this.inner)),$('[data-behavior="nestable"]',this.inner).trigger("change")},item_options:function(){return""},content:function(){var t=[this.items_selector()];return this.plustextable&&t.push(this.text_area()),_.template(t.join("<hr />\n"))(this)},items_selector:function(){return['<div class="row">','<div class="col-md-8">','<div class="form-group">','<div class="panels dd nestable-item-grid" data-behavior="nestable" data-max-depth="1"><ol class="dd-list"></ol></div>',this.autocomplete_control(),"</div>","</div>",'<div class="col-md-4">',this.item_options(),"</div>","</div>"].join("\n")},template:['<div class="form resources-admin clearfix">','<div class="widget-header">',"<%= description() %>","</div>","<%= content() %>","</div>"].join("\n"),onBlockRender:function(){SpotlightNestable.init($('[data-behavior="nestable"]',this.inner)),$("[data-input-select-target]",this.inner).selectRelatedInput()},afterLoadData:function(t){var e=this;$.each(Object.keys(t.item||{}).map(function(e){return t.item[e]}).sort(function(t,e){return t.weight-e.weight}),function(t,n){e.createItemPanel(n)})}}),SirTrevor.Blocks.Browse=Spotlight.Block.Resources.extend({type:"browse",icon_name:"browse",autocomplete_url:function(){return $(this.inner).closest("form[data-autocomplete-exhibit-searches-path]").data("autocomplete-exhibit-searches-path").replace("%25QUERY","%QUERY")},autocomplete_template:function(){return'<div class="autocomplete-item{{#unless published}} blacklight-private{{/unless}}">{{#if thumbnail_image_url}}<div class="document-thumbnail thumbnail"><img src="{{thumbnail_image_url}}" /></div>{{/if}}<span class="autocomplete-title">{{title}}</span><br/><small>&nbsp;&nbsp;{{description}}</small></div>'},bloodhoundOptions:function(){return{prefetch:{url:this.autocomplete_url(),ttl:0}}},item_options:function(){return["<label>",'<input type="hidden" name="display-item-counts" value="false" />','<input type="checkbox" name="display-item-counts" value="true" checked />','<%= i18n.t("blocks:browse:item_counts") %>',"</label>"].join("\n")}}),SirTrevor.Blocks.Iframe=SirTrevor.Block.extend({type:"Iframe",formable:!0,title:function(){return i18n.t("blocks:iframe:title")},description:function(){return i18n.t("blocks:iframe:description")},icon_name:"iframe",editorHTML:function(){return _.template(this.template,this)(this)},template:['<div class="clearfix">','<div class="widget-header">',"<%= description() %>","</div>",'<textarea name="code" class="form-control" rows="5" placeholder="<%= i18n.t("blocks:iframe:placeholder") %>"></textarea>',"</div>"].join("\n")}),SirTrevor.Blocks.LinkToSearch=SirTrevor.Blocks.Browse.extend({type:"link_to_search",icon_name:"search_results",searches_key:"slug",view_key:"view",plustextable:!1}),SirTrevor.Blocks.Oembed=Spotlight.Block.extend({plustextable:!0,id_key:"url",type:"oembed",title:function(){return i18n.t("blocks:oembed:title")},description:function(){return i18n.t("blocks:oembed:description")},icon_name:"oembed",show_heading:!1,template:['<div class="form oembed-text-admin clearfix">','<div class="widget-header">',"<%= description() %>","</div>",'<div class="row">','<div class="form-group col-md-8">','<label for="<%= formId(id_key) %>"><%= i18n.t("blocks:oembed:url") %></label>','<input name="<%= id_key %>" class="form-control col-md-6" type="text" id="<%= formId(id_key) %>" />',"</div>","</div>","<%= text_area() %>","</div>"].join("\n")}),SirTrevor.Blocks.FeaturedPages=Spotlight.Block.Resources.extend({type:"featured_pages",icon_name:"pages",autocomplete_url:function(){return $(this.inner).closest("form[data-autocomplete-exhibit-pages-path]").data("autocomplete-exhibit-pages-path").replace("%25QUERY","%QUERY")},autocomplete_template:function(){return'<div class="autocomplete-item{{#unless published}} blacklight-private{{/unless}}">{{log "Look at me"}}{{log thumbnail_image_url}}{{#if thumbnail_image_url}}<div class="document-thumbnail thumbnail"><img src="{{thumbnail_image_url}}" /></div>{{/if}}<span class="autocomplete-title">{{title}}</span><br/><small>&nbsp;&nbsp;{{description}}</small></div>'},bloodhoundOptions:function(){return{prefetch:{url:this.autocomplete_url(),ttl:0}}}}),SirTrevor.Blocks.Rule=SirTrevor.Block.extend({type:"rule",title:function(){return i18n.t("blocks:rule:title")},icon_name:"rule",editorHTML:function(){return _.template(this.template,this)(this)},template:"<hr />"}),SirTrevor.Blocks.SearchResults=SirTrevor.Blocks.Browse.extend({type:"search_results",icon_name:"search_results",searches_key:"slug",view_key:"view",plustextable:!1,content:function(){return _.template([this.items_selector()].join("<hr />\n"))(this)},item_options:function(){var t=this,e=$("[data-blacklight-configuration-search-views]").data("blacklight-configuration-search-views");return $.map(e,function(e){return checkbox="",checkbox+="<div>",checkbox+="<label for='"+t.formId(t.view_key+e.key)+"'>",checkbox+="<input id='"+t.formId(t.view_key+e.key)+"' name='"+t.view_key+"[]' type='checkbox' value='"+e.key+"' /> ",checkbox+=e.label,checkbox+="</label>",checkbox+="</div>",checkbox}).join("\n")},afterPanelRender:function(){$(this.inner).find(".item-input-field").attr("disabled","disabled")},afterPanelDelete:function(){$(this.inner).find(".item-input-field").removeAttr("disabled")}}),SirTrevor.Blocks.SolrDocumentsBase=Spotlight.Block.Resources.extend({plustextable:!0,autocomplete_url:function(){return this.$instance().closest("form[data-autocomplete-exhibit-catalog-path]").data("autocomplete-exhibit-catalog-path").replace("%25QUERY","%QUERY")},autocomplete_template:function(){return'<div class="autocomplete-item{{#if private}} blacklight-private{{/if}}">{{#if thumbnail}}<div class="document-thumbnail thumbnail"><img src="{{thumbnail}}" /></div>{{/if}}<span class="autocomplete-title">{{title}}</span><br/><small>&nbsp;&nbsp;{{description}}</small></div>'},transform_autocomplete_results:function(t){return $.map(t.docs,function(t){return t})},caption_option_values:function(){var t=$("[data-blacklight-configuration-index-fields]").data("blacklight-configuration-index-fields");return $.map(t,function(t){return $("<option />").val(t.key).text(t.label)[0].outerHTML}).join("\n")},item_options:function(){return this.caption_options()},caption_options:function(){
return['<div class="field-select primary-caption" data-behavior="item-caption-admin">','<input name="<%= show_primary_field_key %>" type="hidden" value="false" />','<input data-input-select-target="#<%= formId(primary_field_key) %>" name="<%= show_primary_field_key %>" id="<%= formId(show_primary_field_key) %>" type="checkbox" value="true" />','<label for="<%= formId(show_primary_field_key) %>"><%= i18n.t("blocks:solr_documents:caption:primary") %></label>','<select data-input-select-target="#<%= formId(show_primary_field_key) %>" name="<%= primary_field_key %>" id="<%= formId(primary_field_key) %>">','<option value=""><%= i18n.t("blocks:solr_documents:caption:placeholder") %></option>',"<%= caption_option_values() %>","</select>","</div>",'<div class="field-select secondary-caption" data-behavior="item-caption-admin">','<input name="<%= show_secondary_field_key %>" type="hidden" value="false" />','<input data-input-select-target="#<%= formId(secondary_field_key) %>" name="<%= show_secondary_field_key %>" id="<%= formId(show_secondary_field_key) %>" type="checkbox" value="true" />','<label for="<%= formId(show_secondary_field_key) %>"><%= i18n.t("blocks:solr_documents:caption:secondary") %></label>','<select data-input-select-target="#<%= formId(show_secondary_field_key) %>" name="<%= secondary_field_key %>" id="<%= formId(secondary_field_key) %>">','<option value=""><%= i18n.t("blocks:solr_documents:caption:placeholder") %></option>',"<%= caption_option_values() %>","</select>","</div>"].join("\n")},_itemPanelIiifFields:function(t,e){return['<input type="hidden" name="item['+t+'][thumbnail_image_url]" value="'+(e.thumbnail_image_url||e.thumbnail||"")+'"/>','<input type="hidden" name="item['+t+'][full_image_url]" value="'+(e.full_image_url||e.thumbnail_image_url||e.thumbnail||"")+'"/>','<input type="hidden" name="item['+t+'][iiif_tilesource]" value="'+e.iiif_tilesource+'"/>','<input type="hidden" name="item['+t+'][iiif_manifest_url]" value="'+e.iiif_manifest_url+'"/>','<input type="hidden" name="item['+t+'][iiif_canvas_id]" value="'+e.iiif_canvas_id+'"/>','<input type="hidden" name="item['+t+'][iiif_image_id]" value="'+e.iiif_image_id+'"/>'].join("\n")},setIiifFields:function(t,e,n){var i=$(t).find('[name$="[thumbnail_image_url]"]'),r=$(t).find('[name$="[full_image_url]"]');n&&i.val().length>0||(i.val(""),r.val(""),$(t).find('[name$="[iiif_image_id]"]').val(e.imageId),$(t).find('[name$="[iiif_tilesource]"]').val(e.tilesource),$(t).find('[name$="[iiif_manifest_url]"]').val(e.manifest),$(t).find('[name$="[iiif_canvas_id]"]').val(e.canvasId),$(t).find(".thumbnail img").attr("src",e.thumbnail_image_url||e.tilesource.replace("/info.json","/full/100,100/0/default.jpg")))},afterPanelRender:function(t,e){var n=this,i=t.iiif_manifest||t.iiif_manifest_url;if(!i)return $(e).find('[name$="[thumbnail_image_url]"]').val(t.thumbnail),void $(e).find('[name$="[full_image_url]"]').val(t.full_image_url);$.ajax(i).success(function(r){var o=new(require("spotlight/iiif"))(i,r).imagesArray();t.iiif_image_id||n.setIiifFields(e,o[0],!!t.iiif_manifest_url),o.length>1&&e.multiImageSelector(o,function(t){n.setIiifFields(e,t,!1)},t.iiif_image_id)})}}),SirTrevor.Blocks.SolrDocuments=SirTrevor.Blocks.SolrDocumentsBase.extend({type:"solr_documents",icon_name:"items",item_options:function(){return this.caption_options()+this.zpr_option()},zpr_option:function(){return["<div>",'<input name="<%= zpr_key %>" type="hidden" value="false" />','<input name="<%= zpr_key %>" id="<%= formId(zpr_key) %>" data-key="<%= zpr_key %>" type="checkbox" value="true" />','<label for="<%= formId(zpr_key) %>"><%= i18n.t("blocks:solr_documents:zpr:title") %></label>',"</div>"].join("\n")},zpr_key:"zpr_link"}),SirTrevor.Blocks.SolrDocumentsCarousel=SirTrevor.Blocks.SolrDocumentsBase.extend({plustextable:!1,type:"solr_documents_carousel",icon_name:"item_carousel",auto_play_images_key:"auto-play-images",auto_play_images_interval_key:"auto-play-images-interval",max_height_key:"max-height",item_options:function(){return""},carouselCycleTimesInSeconds:{values:[3,5,8,12,20],selected:5},carouselMaxHeights:{values:{Small:"small",Medium:"medium",Large:"large"},selected:"Medium"},item_options:function(){return[this.caption_options(),'<div class="field-select auto-cycle-images" data-behavior="auto-cycle-images">','<input name="<%= auto_play_images_key %>" type="hidden" value="false" />','<input name="<%= auto_play_images_key %>" id="<%= formId(auto_play_images_key) %>" data-key="<%= auto_play_images_key %>" type="checkbox" value="true" checked/>','<label for="<%= formId(auto_play_images_key) %>"><%= i18n.t("blocks:solr_documents_carousel:interval:title") %></label>','<select name="<%= auto_play_images_interval_key %>" id="<%= formId(auto_play_images_interval_key) %>" data=key="<%= auto_play_images_interval_key %>">','<option value=""><%= i18n.t("blocks:solr_documents_carousel:interval:placeholder") %></option>',"<%= addCarouselCycleOptions(carouselCycleTimesInSeconds) %>","</select>","</div>",'<div class="field-select max-heights" data-behavior="max-heights">','<label for="<%= formId(max_height_key) %>"><%= i18n.t("blocks:solr_documents_carousel:height:title") %></label><br/>',"<%= addCarouselMaxHeightOptions(carouselMaxHeights) %>","</div>"].join("\n")},addCarouselCycleOptions:function(t){var e="";return $.each(t.values,function(n,i){var r=i===t.selected?"selected":"",o=1e3*parseInt(i,10);e+='<option value="'+o+'" '+r+">"+i+" seconds</option>"}),e},addCarouselMaxHeightOptions:function(t){var e="",n=this;return $.each(t.values,function(i,r){var o=i===t.selected?"checked":"",s=n.formId(n.max_height_key);e+='<input data-key="'+n.max_height_key+'" type="radio" name="'+s+'" value="'+r+'" id="'+s+'" '+o+">",e+='<label class="carousel-size" for="'+s+'">'+i+"</label>"}),e},afterPreviewLoad:function(){$(this.inner).find(".carousel").carousel();var t=function(t){var e,n=$(this),i=$(n.attr("data-target")||(e=n.attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,""));if(i.hasClass("carousel")){var r=$.extend({},i.data(),n.data()),o=n.attr("data-slide-to");o&&(r.interval=!1),$.fn.carousel.call(i,r),o&&i.data("bs.carousel").to(o),t.preventDefault()}};$(this.inner).find(".carousel").on("click.bs.carousel.data-api","[data-slide]",t).on("click.bs.carousel.data-api","[data-slide-to]",t)}}),SirTrevor.Blocks.SolrDocumentsEmbed=SirTrevor.Blocks.SolrDocumentsBase.extend({type:"solr_documents_embed",icon_name:"item_embed",item_options:function(){return""},afterPreviewLoad:function(){$(this.inner).find("picture[data-openseadragon]").openseadragon()}}),SirTrevor.Blocks.SolrDocumentsFeatures=SirTrevor.Blocks.SolrDocumentsBase.extend({plustextable:!1,type:"solr_documents_features",icon_name:"item_features",afterPreviewLoad:function(){$(this.inner).find(".carousel").carousel();var t=function(t){var e,n=$(this),i=$(n.attr("data-target")||(e=n.attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,""));if(i.hasClass("carousel")){var r=$.extend({},i.data(),n.data()),o=n.attr("data-slide-to");o&&(r.interval=!1),$.fn.carousel.call(i,r),o&&i.data("bs.carousel").to(o),t.preventDefault()}};$(this.inner).find(".carousel").on("click.bs.carousel.data-api","[data-slide]",t).on("click.bs.carousel.data-api","[data-slide-to]",t)}}),SirTrevor.Blocks.SolrDocumentsGrid=SirTrevor.Blocks.SolrDocumentsBase.extend({type:"solr_documents_grid",icon_name:"item_grid",item_options:function(){return""}}),SirTrevor.Blocks.UploadedItems=Spotlight.Block.Resources.extend({plustextable:!0,uploadable:!0,autocompleteable:!1,id_key:"file",type:"uploaded_items",icon_name:"items",blockGroup:"undefined",upload_options:{html:""},fileInput:function(){return $(this.inner).find('input[type="file"]')},onBlockRender:function(){SpotlightNestable.init($(this.inner).find('[data-behavior="nestable"]')),this.fileInput().on("change",function(t){this.onDrop(t.currentTarget)}.bind(this))},onDrop:function(t){var e=t.files[0];"undefined"!=typeof URL?URL:"undefined"!=typeof webkitURL&&webkitURL;/image/.test(e.type)&&(this.loading(),this.uploader(e,function(t){this.createItemPanel(t),this.fileInput().val(""),this.ready()},function(){this.addMessage(i18n.t("blocks:image:upload_error")),this.ready()}))},title:function(){return i18n.t("blocks:uploaded_items:title")},description:function(){return i18n.t("blocks:uploaded_items:description")},globalIndex:0,_itemPanel:function(t){var e="file_"+this.globalIndex++,n='checked="checked"';"false"==t.display&&(n="");var i=t.id||t.uid,r=t.title||t.name,o=t.url||t.file.url,s=['<li class="field form-inline dd-item dd3-item" data-id="'+e+'" id="'+this.formId("item_"+i)+'">','<input type="hidden" name="item['+e+'][id]" value="'+i+'" />','<input type="hidden" name="item['+e+'][title]" value="'+r+'" />','<input type="hidden" name="item['+e+'][url]" data-item-grid-thumbnail="true"  value="'+o+'"/>','<input data-property="weight" type="hidden" name="item['+e+'][weight]" value="'+t.weight+'" />','<div class="dd-handle dd3-handle"><%= i18n.t("blocks:resources:panel:drag") %></div>','<div class="dd3-content panel panel-default">','<div class="panel-heading item-grid">','<div class="checkbox">','<input name="item['+e+'][display]" type="hidden" value="false" />','<input name="item['+e+'][display]" id="'+this.formId(this.display_checkbox+"_"+i)+'" type="checkbox" '+n+' class="item-grid-checkbox" value="true"  />','<label class="sr-only" for="'+this.formId(this.display_checkbox+"_"+i)+'"><%= i18n.t("blocks:resources:panel:display") %></label>',"</div>",'<div class="pic thumbnail">','<img src="'+o+'" />',"</div>",'<div class="main form-horizontal">','<div class="title panel-title">'+r+"</div>",'<div class="field">','<label for="'+this.formId("caption_"+i)+'" class="control-label col-md-3"><%= i18n.t("blocks:uploaded_items:caption") %></label>','<input type="text" class="form-control" id="'+this.formId("caption_"+i)+'" name="item['+e+'][caption]" data-field="caption"/>',"</div>","</div>",'<div class="remove pull-right">','<a data-item-grid-panel-remove="true" href="#"><%= i18n.t("blocks:resources:panel:remove") %></a>',"</div>","</div>","</div>","</li>"].join("\n"),a=$(_.template(s)(this));a.find('[data-field="caption"]').val(t.caption);var u=this;return $(".remove a",a).on("click",function(t){t.preventDefault(),$(this).closest(".field").remove(),u.afterPanelDelete()}),this.afterPanelRender(t,a),a},template:['<div class="form oembed-text-admin clearfix">','<div class="widget-header">',"<%= description() %>","</div>",'<div class="row">','<div class="form-group col-md-8">','<div class="panels dd nestable-item-grid" data-behavior="nestable" data-max-depth="1">','<ol class="dd-list">',"</ol>","</div>",'<input type="file" id="uploaded_item_url" name="file[file_0][file_data]" />',"</div>","</div>","<%= text_area() %>","</div>"].join("\n")}),Spotlight.onLoad(function(){if($("#solr_document_exhibit_tag_list").length>0){$("#solr_document_exhibit_tag_list").tagsinput();var t=new Bloodhound({datumTokenizer:function(t){return Bloodhound.tokenizers.whitespace(t.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,limit:100,prefetch:{url:$("#solr_document_exhibit_tag_list").data("autocomplete_url"),ttl:1,filter:function(t){return $.map(t,function(t){return{name:t}})}}});t.initialize(),$("#solr_document_exhibit_tag_list").tagsinput("input").typeahead({highlight:!0,hint:!1},{name:"tags",displayKey:"name",source:t.ttAdapter()}).bind("typeahead:selected",$.proxy(function(t,e){$("#solr_document_exhibit_tag_list").tagsinput("add",e.name),$("#solr_document_exhibit_tag_list").tagsinput("input").typeahead("val","")})).bind("blur",function(){$("#solr_document_exhibit_tag_list").tagsinput("add",$("#solr_document_exhibit_tag_list").tagsinput("input").typeahead("val")),$("#solr_document_exhibit_tag_list").tagsinput("input").typeahead("val","")})}$(".visiblity_toggle").bl_checkbox_submit({css_class:"toggle_visibility",success:function(t){var e=$($(this).data("label-toggle-target"));t?e.removeClass("blacklight-private"):e.addClass("blacklight-private")}})}),Function.prototype.bind||(Function.prototype.bind=function(t){var e=this,n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice();return i.push.apply(i,arguments),e.apply(t,i)}}),function(t){function e(t){b.push(t),y||(y=!0,m(i))}function n(t){return window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(t)||t}function i(){y=!1;var t=b;b=[],t.sort(function(t,e){return t.uid_-e.uid_});var e=!1;t.forEach(function(t){var n=t.takeRecords();r(t),n.length&&(t.callback_(n,t),e=!0)}),e&&i()}function r(t){t.nodes_.forEach(function(e){var n=g.get(e);n&&n.forEach(function(e){e.observer===t&&e.removeTransientObservers()})})}function o(t,e){for(var n=t;n;n=n.parentNode){var i=g.get(n);if(i)for(var r=0;r<i.length;r++){var o=i[r],s=o.options;if(n===t||s.subtree){var a=e(s);a&&o.enqueue(a)}}}}function s(t){this.callback_=t,this.nodes_=[],this.records_=[],this.uid_=++x}function a(t,e){this.type=t,this.target=e,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function u(t){var e=new a(t.type,t.target);return e.addedNodes=t.addedNodes.slice(),e.removedNodes=t.removedNodes.slice(),e.previousSibling=t.previousSibling,e.nextSibling=t.nextSibling,e.attributeName=t.attributeName,e.attributeNamespace=t.attributeNamespace,e.oldValue=t.oldValue,e}function c(t,e){return w=new a(t,e)}function l(t){return k||(k=u(w),k.oldValue=t,k)}function h(){w=k=undefined}function f(t){return t===k||t===w}function d(t,e){return t===e?t:k&&f(t)?k:null}function p(t,e,n){this.observer=t,this.target=e,this.options=n,this.transientObservedNodes=[]}"undefined"==typeof WeakMap&&function(){var t=Object.defineProperty,e=Date.now()%1e9,n=function(){this.name="__st"+(1e9*Math.random()>>>0)+e+++"__"};n.prototype={set:function(e,n){var i=e[this.name];return i&&i[0]===e?i[1]=n:t(e,this.name,{value:[e,n],writable:!0}),this},get:function(t){var e;return(e=t[this.name])&&e[0]===t?e[1]:undefined},"delete":function(t){var e=t[this.name];return!(!e||e[0]!==t)&&(e[0]=e[1]=undefined,!0)},has:function(t){var e=t[this.name];return!!e&&e[0]===t}},window.WeakMap=n}();var m,g=new WeakMap;if(/Trident|Edge/.test(navigator.userAgent))m=setTimeout;else if(window.setImmediate)m=window.setImmediate;else{var v=[],_=String(Math.random());window.addEventListener("message",function(t){if(t.data===_){var e=v;v=[],e.forEach(function(t){t()})}}),m=function(t){v.push(t),window.postMessage(_,"*")}}var y=!1,b=[],x=0;s.prototype={observe:function(t,e){if(t=n(t),!e.childList&&!e.attributes&&!e.characterData||e.attributeOldValue&&!e.attributes||e.attributeFilter&&e.attributeFilter.length&&!e.attributes||e.characterDataOldValue&&!e.characterData)throw new SyntaxError;var i=g.get(t);i||g.set(t,i=[]);for(var r,o=0;o<i.length;o++)if(i[o].observer===this){(r=i[o]).removeListeners(),r.options=e;break}r||(r=new p(this,t,e),i.push(r),this.nodes_.push(t)),r.addListeners()},disconnect:function(){this.nodes_.forEach(function(t){for(var e=g.get(t),n=0;n<e.length;n++){var i=e[n];if(i.observer===this){i.removeListeners(),e.splice(n,1);break}}},this),this.records_=[]},takeRecords:function(){var t=this.records_;return this.records_=[],t}};var w,k;p.prototype={enqueue:function(t){var n=this.observer.records_,i=n.length;if(n.length>0){var r=d(n[i-1],t);if(r)return void(n[i-1]=r)}else e(this.observer);n[i]=t},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(t){var e=this.options;e.attributes&&t.addEventListener("DOMAttrModified",this,!0),e.characterData&&t.addEventListener("DOMCharacterDataModified",this,!0),e.childList&&t.addEventListener("DOMNodeInserted",this,!0),(e.childList||e.subtree)&&t.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(t){var e=this.options;e.attributes&&t.removeEventListener("DOMAttrModified",this,!0),e.characterData&&t.removeEventListener("DOMCharacterDataModified",this,!0),e.childList&&t.removeEventListener("DOMNodeInserted",this,!0),(e.childList||e.subtree)&&t.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(t){if(t!==this.target){this.addListeners_(t),this.transientObservedNodes.push(t);var e=g.get(t);e||g.set(t,e=[]),e.push(this)}},removeTransientObservers:function(){var t=this.transientObservedNodes;this.transientObservedNodes=[],t.forEach(function(t){this.removeListeners_(t);for(var e=g.get(t),n=0;n<e.length;n++)if(e[n]===this){e.splice(n,1);break}},this)},handleEvent:function(t){switch(t.stopImmediatePropagation(),t.type){case"DOMAttrModified":var e=t.attrName,n=t.relatedNode.namespaceURI,i=t.target;(s=new c("attributes",i)).attributeName=e,s.attributeNamespace=n;var r=t.attrChange===MutationEvent.ADDITION?null:t.prevValue;o(i,function(t){if(t.attributes&&(!t.attributeFilter||!t.attributeFilter.length||-1!==t.attributeFilter.indexOf(e)||-1!==t.attributeFilter.indexOf(n)))return t.attributeOldValue?l(r):s});break;case"DOMCharacterDataModified":var s=c("characterData",i=t.target);r=t.prevValue;o(i,function(t){if(t.characterData)return t.characterDataOldValue?l(r):s});break;case"DOMNodeRemoved":this.addTransientObserver(t.target);case"DOMNodeInserted":i=t.relatedNode;var a,u,f=t.target;"DOMNodeInserted"===t.type?(a=[f],u=[]):(a=[],u=[f]);var d=f.previousSibling,p=f.nextSibling;(s=c("childList",i)).addedNodes=a,s.removedNodes=u,s.previousSibling=d,s.nextSibling=p,o(i,function(t){if(t.childList)return s})}h()}},t.JsMutationObserver=s,t.MutationObserver||(t.MutationObserver=s)}(this),jQuery.fn.copyEmailAddresses=function(){new Clipboard(".copy-email-addresses")},Spotlight.onLoad(function(){$(".copy-email-addresses").copyEmailAddresses()}),define("spotlight/crop",["exports","module"],function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(e){n(this,t),this.cropArea=e,this.cropArea.data("iiifCropper",this),this.cropSelector='[data-cropper="'+e.data("cropperKey")+'"]',this.cropTool=$(this.cropSelector),this.formPrefix=this.cropTool.data("form-prefix"),this.iiifUrlField=$("#"+this.formPrefix+"_iiif_tilesource"),this.iiifRegionField=$("#"+this.formPrefix+"_iiif_region"),this.iiifManifestField=$("#"+this.formPrefix+"_iiif_manifest_url"),this.iiifCanvasField=$("#"+this.formPrefix+"_iiif_canvas_id"),this.iiifImageField=$("#"+this.formPrefix+"_iiif_image_id"),this.form=e.closest("form"),this.tileSource=null}return i(t,[{key:"render",value:function(){this.setupAutoCompletes(),this.setupAjaxFileUpload(),this.setupExistingIiifCropper()}},{key:"setupExistingIiifCropper",value:function(){""!==this.iiifUrlField.val()&&(this.addImageSelectorToExistingCropTool(),this.setTileSource(this.iiifUrlField.val()))}},{key:"setupIiifCropper",value:function(){this.loaded=!1,this.renderCropperMap(),this.imageLayer&&this.cropperMap.removeLayer(this.imageLayer),this.imageLayer=L.tileLayer.iiif(this.tileSource).addTo(this.cropperMap);var t=this;this.imageLayer.on("load",function(){if(!t.loaded){var e=t.getCropRegion();t.positionIiifCropBox(e),t.loaded=!0}}),this.cropArea.data("initiallyVisible",this.cropArea.is(":visible"))}},{key:"getCropRegion",value:function(){var t=this.iiifRegionField.val();if(t&&""!==t)return t.split(",");var e=this.defaultCropRegion();return this.iiifRegionField.val(e),e}},{key:"defaultCropRegion",value:function(){var t=this.imageLayer.x,e=this.imageLayer.y,n=Math.floor(t/2),i=Math.floor(n/this.aspectRatio());return[Math.floor((t-n)/2),Math.floor((e-i)/2),n,i]}},{key:"aspectRatio",value:function(){return parseInt(this.cropArea.data("crop-width"))/parseInt(this.cropArea.data("crop-height"))}},{key:"positionIiifCropBox",value:function(t){var e=this.unprojectIIIFRegionToBounds(t);this.cropBox||this.renderCropBox(e),this.cropBox.setBounds(e),this.cropperMap.invalidateSize(),this.cropperMap.fitBounds(e),this.cropBox.editor.editLayer.clearLayers(),this.cropBox.editor.refresh(),this.cropBox.editor.initVertexMarkers()}},{key:"setIiifFields",value:function(t){this.setTileSource(t.tilesource),this.iiifManifestField.val(t.manifest),this.iiifCanvasField.val(t.canvasId),this.iiifImageField.val(t.imageId)}},{key:"setTileSource",value:function(t){t!=this.tileSource&&(null!==t&&t!==undefined?(this.cropBox&&this.iiifRegionField.val(""),this.tileSource=t,this.iiifUrlField.val(t),this.setupIiifCropper()):console.error("No tilesource provided when setting up IIIF Cropper"))}},{key:"renderCropperMap",value:function(){this.cropperMap||(this.cropperMap=L.map(this.cropArea.attr("id"),{editable:!0,center:[0,0],crs:L.CRS.Simple,zoom:0,editOptions:{rectangleEditorClass:this.aspectRatioPreservingRectangleEditor(this.aspectRatio())}}),this.invalidateMapSizeOnTabToggle())}},{key:"renderCropBox",value:function(t){this.cropBox=L.rectangle(t),this.cropBox.addTo(this.cropperMap),this.cropBox.enableEdit(),this.cropBox.on("dblclick",L.DomEvent.stop).on("dblclick",this.cropBox.toggleEdit);var e=this;this.cropperMap.on("editable:dragend editable:vertex:dragend",function(t){var n=t.layer.getBounds(),i=e.projectBoundsToIIIFRegion(n);e.iiifRegionField.val(i.join(","))})}},{key:"maxZoom",value:function(){if(this.imageLayer)return this.imageLayer.maxZoom}},{key:"projectBoundsToIIIFRegion",value:function(t){var e=this.cropperMap.project(t.getNorthWest(),this.maxZoom()),n=this.cropperMap.project(t.getSouthEast(),this.maxZoom());return[Math.max(Math.floor(e.x),0),Math.max(Math.floor(e.y),0),Math.floor(n.x-e.x),Math.floor(n.y-e.y)]}},{key:"unprojectIIIFRegionToBounds",value:function(t){var e=L.point(parseInt(t[0]),parseInt(t[1])),n=L.point(parseInt(t[0])+parseInt(t[2]),parseInt(t[1])+parseInt(t[3])),i=this.cropperMap.unproject(e,this.maxZoom()),r=this.cropperMap.unproject(n,this.maxZoom());return L.latLngBounds(i,r)}},{key:"setupAutoCompletes",value:function(){$('[data-behavior="autocomplete"]',this.cropTool).data("iiifCropper",this)}},{key:"setupAjaxFileUpload",value:function(){var t=this;this.fileInput=$('input[type="file"]',this.cropTool),this.fileInput.change(function(){return t.uploadFile()})}},{key:"addImageSelectorToExistingCropTool",value:function(){if(""!==this.iiifManifestField.val()){var t=$('[data-behavior="autocomplete"]',this.cropTool);addImageSelector(t,$(t.data("target-panel")),this.iiifManifestField.val(),!this.iiifImageField.val())}}},{key:"invalidateMapSizeOnTabToggle",value:function(){var t=this;$('[role="tablist"]',this.form).on("shown.bs.tab",function(){!1===t.cropArea.data("initiallyVisible")&&t.cropArea.is(":visible")&&(t.cropperMap.invalidateSize(),t.cropArea.data("initiallyVisible",null))})}},{key:"getData",value:function(){var t=new FormData(this.form[0]);return t.append("_method",null),t}},{key:"uploadFile",value:function(){var t=this,e=this.fileInput.data("endpoint");$.ajax({url:e,type:"POST",success:function(e,n,i){return t.successHandler(e,n,i)},data:this.getData(),cache:!1,contentType:!1,processData:!1})}},{key:"successHandler",value:function(t){this.setIiifFields({tilesource:t.tilesource})}},{key:"aspectRatioPreservingRectangleEditor",value:function(t){return L.Editable.RectangleEditor.extend({extendBounds:function(e){var n=e.vertex.getIndex(),i=e.vertex.getNext(),r=e.vertex.getPrevious(),o=(n+2)%4,s=e.vertex.latlngs[o];n%2==1?e.latlng.update([s.lat+1/t*(s.lng-e.latlng.lng),e.latlng.lng]):e.latlng.update([e.latlng.lat,s.lng-t*(s.lat-e.latlng.lat)]);var a=new L.LatLngBounds(e.latlng,s);r.latlng.update([e.latlng.lat,s.lng]),i.latlng.update([s.lat,e.latlng.lng]),this.updateBounds(a),this.refreshVertexMarkers()}})}}]),t}();e.exports=r}),Spotlight.onLoad(function(){$('[data-behavior="iiif-cropper"]').croppable()}),function(t){t.fn.croppable=function(){var e=this,n=require("spotlight/crop");return t(e).each(function(){var e=t(this);new n(e).render()}),this}}(jQuery),Spotlight.onLoad(function(){$("[data-in-place-edit-target]").spotlightEditInPlace()}),function(t){t.fn.spotlightEditInPlace=function(){return t(this).each(function(){t(this).on("click.inplaceedit",function(){var e=t(this).find(t(this).data("in-place-edit-target")),n=t(this).find(t(this).data("in-place-edit-field-target"));return t(this).addClass("hide-edit-icon"),e.hide(),n.val(e.text()),n.attr("type","text"),n.select(),n.focus(),n.on("keypress",function(t){if(13==t.which)return n.trigger("blur.inplaceedit"),!1}),n.on("blur.inplaceedit",function(){return e.text(n.val()),e.show(),n.attr("type","hidden"),t("[data-in-place-edit-target]").removeClass("hide-edit-icon"),!1}),!1})}),this}}(jQuery),Spotlight.onLoad(function(){$("#new_exhibit").each(function(){$("#exhibit_title").on("change keyup",function(){$("#exhibit_slug").attr("placeholder",URLify($(this).val(),$(this).val().length))}),$("#exhibit_slug").on("focus",function(){""===$(this).val()&&$(this).val($(this).attr("placeholder"))})}),$("#another-email").on("click",function(){var t=$(this).closest(".form-group").find(".contact"),e=t.first().clone();e.find("input").each(function(){$(this).val(""),$(this).attr("id",$(this).attr("id").replace("0",t.length)),$(this).attr("name",$(this).attr("name").replace("0",t.length))}),e.find(".contact-email-delete-wrapper").remove(),e.find(".confirmation-status").remove(),e.find(".input-group input:only-child").closest(".input-group").removeClass("input-group"),$(e).insertAfter(t.last())}),$(".contact-email-delete").on("ajax:success",function(){$(this).closest(".contact").fadeOut(250,function(){$(this).remove()})}),$(".contact-email-delete").on("ajax:error",function(t,e,n,i){var r=$(this).closest(".contact").find(".contact-email-delete-error");r.show(),r.find(".error-msg").first().text(i||t.detail[1])}),$(".btn-with-tooltip").tooltip(),$("#save-modal").on("shown.bs.modal",function(){$("#search_title").focus()})}),Spotlight.onLoad(function(){serializeObservedForms(observedForms())}),$(window).on("beforeunload page:before-change turbolinks:before-cache",function(t){if(observedFormsStatusHasChanged()){var e="You have unsaved changes. Are you sure you want to leave this page?";return"beforeunload"==t.type?e:confirm(e)}}),define("spotlight/iiif",["exports","module"],function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(e,i){n(this,t),this.manifestUrl=e,this.manifest=i}return i(t,[{key:"sequences",value:function(){var t={},e=this;return t[Symbol.iterator]=regeneratorRuntime.mark(function n(){var t,i,r,o,s,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t=!0,i=!1,r=undefined,n.prev=3,o=e.manifest.sequences[Symbol.iterator]();case 5:if(t=(s=o.next()).done){n.next=12;break}return a=s.value,n.next=9,a;case 9:t=!0,n.next=5;break;case 12:n.next=18;break;case 14:n.prev=14,n.t0=n["catch"](3),i=!0,r=n.t0;case 18:n.prev=18,n.prev=19,!t&&o["return"]&&o["return"]();case 21:if(n.prev=21,!i){n.next=24;break}throw r;case 24:return n.finish(21);case 25:return n.finish(18);case 26:case 27:case"end":return n.stop()}},n,this,[[3,14,18,26],[19,,21,25]])}),t}},{key:"canvases",value:function(){var t={},e=this;return t[Symbol.iterator]=regeneratorRuntime.mark(function n(){var t,i,r,o,s,a,u,c,l,h,f,d;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t=!0,i=!1,r=undefined,n.prev=3,o=e.sequences()[Symbol.iterator]();case 5:if(t=(s=o.next()).done){n.next=36;break}a=s.value,u=!0,c=!1,l=undefined,n.prev=10,h=a.canvases[Symbol.iterator]();case 12:if(u=(f=h.next()).done){n.next=19;break}return d=f.value,n.next=16,d;case 16:u=!0,n.next=12;break;case 19:n.next=25;break;case 21:n.prev=21,n.t0=n["catch"](10),c=!0,l=n.t0;case 25:n.prev=25,n.prev=26,!u&&h["return"]&&h["return"]();case 28:if(n.prev=28,!c){n.next=31;break}throw l;case 31:return n.finish(28);case 32:return n.finish(25);case 33:t=!0,n.next=5;break;case 36:n.next=42;break;case 38:n.prev=38,n.t1=n["catch"](3),i=!0,r=n.t1;case 42:n.prev=42,n.prev=43,!t&&o["return"]&&o["return"]();case 45:if(n.prev=45,!i){n.next=48;break}throw r;case 48:return n.finish(45);case 49:return n.finish(42);case 50:case"end":return n.stop()}},n,this,[[3,38,42,50],[10,21,25,33],[26,,28,32],[43,,45,49]])}),t}},{key:"images",value:function(){var t={},e=this;return t[Symbol.iterator]=regeneratorRuntime.mark(function n(){var t,i,r,o,s,a,u,c,l,h,f,d,p;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t=!0,i=!1,r=undefined,n.prev=3,o=e.canvases()[Symbol.iterator]();case 5:if(t=(s=o.next()).done){n.next=37;break}a=s.value,u=!0,c=!1,l=undefined,n.prev=10,h=a.images[Symbol.iterator]();case 12:if(u=(f=h.next()).done){n.next=20;break}return d=f.value,p=d.resource.service["@id"],n.next=17,{thumb:p+"/full/!100,100/0/default.jpg",tilesource:p+"/info.json",manifest:e.manifestUrl,canvasId:a["@id"],imageId:d["@id"]};case 17:u=!0,n.next=12;break;case 20:n.next=26;break;case 22:n.prev=22,n.t0=n["catch"](10),c=!0,l=n.t0;case 26:n.prev=26,n.prev=27,!u&&h["return"]&&h["return"]();case 29:if(n.prev=29,!c){n.next=32;break}throw l;case 32:return n.finish(29);case 33:return n.finish(26);case 34:t=!0,n.next=5;break;case 37:n.next=43;break;case 39:n.prev=39,n.t1=n["catch"](3),i=!0,r=n.t1;case 43:n.prev=43,n.prev=44,!t&&o["return"]&&o["return"]();case 46:if(n.prev=46,!i){n.next=49;break}throw r;case 49:return n.finish(46);case 50:return n.finish(43);case 51:case"end":return n.stop()}},n,this,[[3,39,43,51],[10,22,26,34],[27,,29,33],[44,,46,50]])}),t}},{key:"imagesArray",value:function(){return Array.from(this.images())}}]),t}();e.exports=r}),Spotlight.onLoad(function(){function t(t){$.ajax({url:$(t).data("lock"),type:"POST",data:{_method:"delete"},async:!1}),$(t).removeAttr("data-lock")}$("[data-lock]").on("click",function(){t(this)})}),jQuery,$.fn.multiImageSelector=function(t,e,n){function i(e){g=e,o(),t&&t.length>1&&(r(),f())}function r(){$("[data-panel-image-pagination]",g).html("Image <span data-current-image='true'>"+s(n)+"</span> of "+t.length).show().append(" ").append(v),a()}function o(){var t=$("[data-panel-image-pagination]",g);t.html(""),t.next("."+_.attr("class")).remove()}function s(t){return(index=b.indexOf(t))>-1?index+1:1}function a(){v.on("click",function(){_.slideToggle(),u(),l(),h(),c(),p($(this))})}function u(){var t=0;$("li",y).each(function(){t+=$(this).outerWidth()}),y.width(t+5)}function c(){var t=_.width(),e=0;$("li",y).each(function(){var n=$(this),i=$("img",n),r=e+=n.width();position=y.position().left+r-n.width(),position>=0&&position<t&&i.prop("src",i.data("src"))})}function l(){_.scrollStop(function(){c()})}function h(){var t=_.width()/2,e=($(".active",y).position()||$("li",y).first().position()).left,n=$(".active",y).width()/2;_.scrollLeft(e-t+n)}function f(){m(),d(),$(".panel-heading",g).append(_.append(y))}function d(){$("li",y).each(function(){var t=$(this);$("img",t).data("image-id")==n&&t.addClass("active")})}function p(t){t.text("Change"==t.text()?"Close":"Change")}function m(){$.each(t,function(n){var i=$('<li><a href="javascript:;"><img src="'+t[n].thumb+'" data-image-id="'+t[n].imageId+'" /></a></li>');i.on("click",function(){$("img",$(this)).data("image-id");var i=$("img",$(this)).attr("src");$("li.active",y).removeClass("active"),$(this).addClass("active"),$(".pic.thumbnail img",g).attr("src",i),$("[data-panel-image-pagination] [data-current-image]",g).text($("li",y).index($(this))+1),h(),"function"==typeof e&&e(t[n])}),$("img",i).on("load",function(){u()}),y.append(i)})}var g,v=$("<a href='javascript:;'>Change</a>"),_=$("<div class='thumbs-list' style='display:none'></div>"),y=$("<ul class='pagination'></ul>"),b=$.map(t,function(t){return t.imageId});return i(this)},jQuery.fn.scrollStop=function(t){$(this).scroll(function(){var e=this,n=$(e);n.data("scrollTimeout")&&clearTimeout(n.data("scrollTimeout")),n.data("scrollTimeout",setTimeout(t,250,e))})},Spotlight.onLoad(function(){var t="undefined"==typeof Rails?$.rails:Rails;SirTrevor.setDefaults({iconUrl:"/assets/spotlight/blocks/sir-trevor-icons-c6b5285b61a032e4fa071f5eaa24be067ec95c12d49f9c259643f18f6ada094a.svg",uploadUrl:$("[data-attachment-endpoint]").data("attachment-endpoint"),ajaxOptions:{headers:{"X-CSRF-Token":t.csrfToken()||""},credentials:"same-origin"}}),SirTrevor.Blocks.Heading.prototype.toolbarEnabled=!0,
SirTrevor.Blocks.Quote.prototype.toolbarEnabled=!0,SirTrevor.Blocks.Text.prototype.toolbarEnabled=!0;var e=$(".js-st-instance").first();if(e.length){var n=new SirTrevor.Editor({el:e[0],blockTypes:e.data("blockTypes"),defaultType:["Text"],onEditorRender:function(){serializeObservedForms(observedForms())},blockTypeLimits:{SearchResults:1}});n.blockControls=Spotlight.BlockControls.create(n),new Spotlight.BlockLimits(n).enforceLimits(n)}$(".carousel").carousel()}),Spotlight.onLoad(function(){$("input[type='checkbox'][data-readonly]").on("click",function(t){t.preventDefault()})}),Spotlight.onLoad(function(){$('[data-behavior="reindex-monitor"]').reindexMonitor()}),function(t){t.fn.reindexMonitor=function(){function e(e){t.ajax(e).success(n).fail(i)}function n(t){t.recently_in_progress?(r(t),c().show()):c().hide()}function i(){c().hide()}function r(t){l().text(t.started_at),h().text(t.updated_at),d().text(t.completed),a(t),s(t),o(t)}function o(t){var e=u(t);p().attr("aria-valuemax",t.total).attr("aria-valuenow",e).css("width",e+"%").text(e+"%"),t.finished&&p().removeClass("active").removeClass("progress-bar-striped")}function s(t){t.errored?m().show():m().hide()}function a(e){f().each(function(){t(this).text(e.total)})}function u(t){return Math.floor(t.completed/t.total*100)}function c(){return g.find(".index-status")}function l(){return c().find('[data-behavior="monitor-start"]').find('[data-behavior="date"]')}function h(){return c().find('[data-behavior="monitor-current"]').find('[data-behavior="date"]')}function f(){return c().find('[data-behavior="total"]')}function d(){return c().find('[data-behavior="monitor-current"]').find('[data-behavior="completed"]')}function p(){return c().find(".progress-bar")}function m(){return c().find('[data-behavior="monitor-error"]')}var g,v=3e3;return t(this).each(function(){var n=(g=t(this)).data("monitorUrl"),i=g.data("refreshRate")||v;setInterval(function(){e(n)},i)}),this}}(jQuery),function(t){t.fn.reportProblem=function(e){function n(){target_val=o.attr("data-target"),target_val&&(s=t("#"+target_val),o.on("click",i),s.find('[data-behavior="cancel-link"]').on("click",r))}function i(t){t.preventDefault(),s.slideToggle("slow")}function r(t){t.preventDefault(),s.slideUp("fast")}var o,s;t.extend({},e);return this.each(function(){o=t(this),n()})}}(jQuery),Spotlight.onLoad(function(){$('[data-behavior="contact-link"]').reportProblem()}),function(t){var e={isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:t.isArray,isFunction:t.isFunction,isObject:t.isPlainObject,isUndefined:function(t){return void 0===t},bind:t.proxy,each:function(e,n){function i(t,e){return n(e,t)}t.each(e,i)},map:t.map,filter:t.grep,every:function(e,n){var i=!0;return e?(t.each(e,function(t,r){return!!(i=n.call(null,r,t,e))&&void 0}),!!i):i},some:function(e,n){var i=!1;return e?(t.each(e,function(t,r){return!(i=n.call(null,r,t,e))&&void 0}),!!i):i},mixin:t.extend,getUniqueId:function(){var t=0;return function(){return t++}}(),templatify:function(e){function n(){return String(e)}return t.isFunction(e)?e:n},defer:function(t){setTimeout(t,0)},debounce:function(t,e,n){var i,r;return function(){var o,s,a=this,u=arguments;return o=function(){i=null,n||(r=t.apply(a,u))},s=n&&!i,clearTimeout(i),i=setTimeout(o,e),s&&(r=t.apply(a,u)),r}},throttle:function(t,e){var n,i,r,o,s,a;return s=0,a=function(){s=new Date,r=null,o=t.apply(n,i)},function(){var u=new Date,c=e-(u-s);return n=this,i=arguments,0>=c?(clearTimeout(r),r=null,s=u,o=t.apply(n,i)):r||(r=setTimeout(a,c)),o}},noop:function(){}},n="0.10.2",i=function(){function t(t){return t.split(/\s+/)}function e(t){return t.split(/\W+/)}function n(t){return function(e){return function(n){return t(n[e])}}}return{nonword:e,whitespace:t,obj:{nonword:n(e),whitespace:n(t)}}}(),r=function(){function t(t){this.maxSize=t||100,this.size=0,this.hash={},this.list=new n}function n(){this.head=this.tail=null}function i(t,e){this.key=t,this.val=e,this.prev=this.next=null}return e.mixin(t.prototype,{set:function(t,e){var n,r=this.list.tail;this.size>=this.maxSize&&(this.list.remove(r),delete this.hash[r.key]),(n=this.hash[t])?(n.val=e,this.list.moveToFront(n)):(n=new i(t,e),this.list.add(n),this.hash[t]=n,this.size++)},get:function(t){var e=this.hash[t];return e?(this.list.moveToFront(e),e.val):void 0}}),e.mixin(n.prototype,{add:function(t){this.head&&(t.next=this.head,this.head.prev=t),this.head=t,this.tail=this.tail||t},remove:function(t){t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev},moveToFront:function(t){this.remove(t),this.add(t)}}),t}(),o=function(){function t(t){this.prefix=["__",t,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+this.prefix)}function n(){return(new Date).getTime()}function i(t){return JSON.stringify(e.isUndefined(t)?null:t)}function r(t){return JSON.parse(t)}var o,s;try{(o=window.localStorage).setItem("~~~","!"),o.removeItem("~~~")}catch(a){o=null}return s=o&&window.JSON?{_prefix:function(t){return this.prefix+t},_ttlKey:function(t){return this._prefix(t)+this.ttlKey},get:function(t){return this.isExpired(t)&&this.remove(t),r(o.getItem(this._prefix(t)))},set:function(t,r,s){return e.isNumber(s)?o.setItem(this._ttlKey(t),i(n()+s)):o.removeItem(this._ttlKey(t)),o.setItem(this._prefix(t),i(r))},remove:function(t){return o.removeItem(this._ttlKey(t)),o.removeItem(this._prefix(t)),this},clear:function(){var t,e,n=[],i=o.length;for(t=0;i>t;t++)(e=o.key(t)).match(this.keyMatcher)&&n.push(e.replace(this.keyMatcher,""));for(t=n.length;t--;)this.remove(n[t]);return this},isExpired:function(t){var i=r(o.getItem(this._ttlKey(t)));return!!(e.isNumber(i)&&n()>i)}}:{get:e.noop,set:e.noop,remove:e.noop,clear:e.noop,isExpired:e.noop},e.mixin(t.prototype,s),t}(),s=function(){function n(e){e=e||{},this._send=e.transport?i(e.transport):t.ajax,this._get=e.rateLimiter?e.rateLimiter(this._get):this._get}function i(n){return function(i,r){function o(t){e.defer(function(){a.resolve(t)})}function s(t){e.defer(function(){a.reject(t)})}var a=t.Deferred();return n(i,r,o,s),a}}var o=0,s={},a=6,u=new r(10);return n.setMaxPendingRequests=function(t){a=t},n.resetCache=function(){u=new r(10)},e.mixin(n.prototype,{_get:function(t,e,n){function i(e){n&&n(null,e),u.set(t,e)}function r(){n&&n(!0)}function c(){o--,delete s[t],h.onDeckRequestArgs&&(h._get.apply(h,h.onDeckRequestArgs),h.onDeckRequestArgs=null)}var l,h=this;(l=s[t])?l.done(i).fail(r):a>o?(o++,s[t]=this._send(t,e).done(i).fail(r).always(c)):this.onDeckRequestArgs=[].slice.call(arguments,0)},get:function(t,n,i){var r;return e.isFunction(n)&&(i=n,n={}),(r=u.get(t))?e.defer(function(){i&&i(null,r)}):this._get(t,n,i),!!r}}),n}(),a=function(){function n(e){(e=e||{}).datumTokenizer&&e.queryTokenizer||t.error("datumTokenizer and queryTokenizer are both required"),this.datumTokenizer=e.datumTokenizer,this.queryTokenizer=e.queryTokenizer,this.reset()}function i(t){return t=e.filter(t,function(t){return!!t}),t=e.map(t,function(t){return t.toLowerCase()})}function r(){return{ids:[],children:{}}}function o(t){for(var e={},n=[],i=0;i<t.length;i++)e[t[i]]||(e[t[i]]=!0,n.push(t[i]));return n}function s(t,e){function n(t,e){return t-e}var i=0,r=0,o=[];for(t=t.sort(n),e=e.sort(n);i<t.length&&r<e.length;)t[i]<e[r]?i++:t[i]>e[r]?r++:(o.push(t[i]),i++,r++);return o}return e.mixin(n.prototype,{bootstrap:function(t){this.datums=t.datums,this.trie=t.trie},add:function(t){var n=this;t=e.isArray(t)?t:[t],e.each(t,function(t){var o,s;o=n.datums.push(t)-1,s=i(n.datumTokenizer(t)),e.each(s,function(t){var e,i,s;for(e=n.trie,i=t.split("");s=i.shift();)(e=e.children[s]||(e.children[s]=r())).ids.push(o)})})},get:function(t){var n,r,a=this;return n=i(this.queryTokenizer(t)),e.each(n,function(t){var e,n,i,o;if(r&&0===r.length)return!1;for(e=a.trie,n=t.split("");e&&(i=n.shift());)e=e.children[i];return e&&0===n.length?(o=e.ids.slice(0),void(r=r?s(r,o):o)):(r=[],!1)}),r?e.map(o(r),function(t){return a.datums[t]}):[]},reset:function(){this.datums=[],this.trie=r()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),n}(),u=function(){function i(t){return t.local||null}function r(i){var r,o;return o={url:null,thumbprint:"",ttl:864e5,filter:null,ajax:{}},(r=i.prefetch||null)&&(r=e.isString(r)?{url:r}:r,r=e.mixin(o,r),r.thumbprint=n+r.thumbprint,r.ajax.type=r.ajax.type||"GET",r.ajax.dataType=r.ajax.dataType||"json",!r.url&&t.error("prefetch requires url to be set")),r}function o(n){function i(t){return function(n){return e.debounce(n,t)}}function r(t){return function(n){return e.throttle(n,t)}}var o,s;return s={url:null,wildcard:"%QUERY",replace:null,rateLimitBy:"debounce",rateLimitWait:300,send:null,filter:null,ajax:{}},(o=n.remote||null)&&(o=e.isString(o)?{url:o}:o,o=e.mixin(s,o),o.rateLimiter=/^throttle$/i.test(o.rateLimitBy)?r(o.rateLimitWait):i(o.rateLimitWait),o.ajax.type=o.ajax.type||"GET",o.ajax.dataType=o.ajax.dataType||"json",delete o.rateLimitBy,delete o.rateLimitWait,!o.url&&t.error("remote requires url to be set")),o}return{local:i,prefetch:r,remote:o}}();!function(n){function r(e){e&&(e.local||e.prefetch||e.remote)||t.error("one of local, prefetch, or remote is required"),this.limit=e.limit||5,this.sorter=c(e.sorter),this.dupDetector=e.dupDetector||l,this.local=u.local(e),this.prefetch=u.prefetch(e),this.remote=u.remote(e),this.cacheKey=this.prefetch?this.prefetch.cacheKey||this.prefetch.url:null,this.index=new a({datumTokenizer:e.datumTokenizer,queryTokenizer:e.queryTokenizer}),this.storage=this.cacheKey?new o(this.cacheKey):null}function c(t){function n(e){return e.sort(t)}function i(t){return t}return e.isFunction(t)?n:i}function l(){return!1}var h,f;h=n.Bloodhound,f={data:"data",protocol:"protocol",thumbprint:"thumbprint"},n.Bloodhound=r,r.noConflict=function(){return n.Bloodhound=h,r},r.tokenizers=i,e.mixin(r.prototype,{_loadPrefetch:function(e){function n(t){o.clear(),o.add(e.filter?e.filter(t):t),o._saveToStorage(o.index.serialize(),e.thumbprint,e.ttl)}var i,r,o=this;return(i=this._readFromStorage(e.thumbprint))?(this.index.bootstrap(i),r=t.Deferred().resolve()):r=t.ajax(e.url,e.ajax).done(n),r},_getFromRemote:function(t,e){function n(t,n){e(t?[]:o.remote.filter?o.remote.filter(n):n)}var i,r,o=this;return t=t||"",r=encodeURIComponent(t),i=this.remote.replace?this.remote.replace(this.remote.url,t):this.remote.url.replace(this.remote.wildcard,r),this.transport.get(i,this.remote.ajax,n)},_saveToStorage:function(t,e,n){this.storage&&(this.storage.set(f.data,t,n),this.storage.set(f.protocol,location.protocol,n),this.storage.set(f.thumbprint,e,n))},_readFromStorage:function(t){var e,n={};return this.storage&&(n.data=this.storage.get(f.data),n.protocol=this.storage.get(f.protocol),n.thumbprint=this.storage.get(f.thumbprint)),e=n.thumbprint!==t||n.protocol!==location.protocol,n.data&&!e?n.data:null},_initialize:function(){function n(){r.add(e.isFunction(o)?o():o)}var i,r=this,o=this.local;return i=this.prefetch?this._loadPrefetch(this.prefetch):t.Deferred().resolve(),o&&i.done(n),this.transport=this.remote?new s(this.remote):null,this.initPromise=i.promise()},initialize:function(t){return!this.initPromise||t?this._initialize():this.initPromise},add:function(t){this.index.add(t)},get:function(t,n){function i(t){var i=o.slice(0);e.each(t,function(t){return!e.some(i,function(e){return r.dupDetector(t,e)})&&i.push(t),i.length<r.limit}),n&&n(r.sorter(i))}var r=this,o=[],s=!1;o=this.index.get(t),(o=this.sorter(o).slice(0,this.limit)).length<this.limit&&this.transport&&(s=this._getFromRemote(t,i)),s||(o.length>0||!this.transport)&&n&&n(o)},clear:function(){this.index.reset()},clearPrefetchCache:function(){this.storage&&this.storage.clear()},clearRemoteCache:function(){this.transport&&s.resetCache()},ttAdapter:function(){return e.bind(this.get,this)}})}(this);var c={wrapper:'<span class="twitter-typeahead"></span>',dropdown:'<span class="tt-dropdown-menu"></span>',dataset:'<div class="tt-dataset-%CLASS%"></div>',suggestions:'<span class="tt-suggestions"></span>',suggestion:'<div class="tt-suggestion"></div>'},l={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},suggestions:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};e.isMsie()&&e.mixin(l.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),e.isMsie()&&e.isMsie()<=7&&e.mixin(l.input,{marginTop:"-1px"});var h=function(){function n(e){e&&e.el||t.error("EventBus initialized without el"),this.$el=t(e.el)}var i="typeahead:";return e.mixin(n.prototype,{trigger:function(t){var e=[].slice.call(arguments,1);this.$el.trigger(i+t,e)}}),n}(),f=function(){function t(t,e,n,i){var r;if(!n)return this;for(e=e.split(u),n=i?a(n,i):n,this._callbacks=this._callbacks||{};r=e.shift();)this._callbacks[r]=this._callbacks[r]||{sync:[],async:[]},this._callbacks[r][t].push(n);return this}function e(e,n,i){return t.call(this,"async",e,n,i)}function n(e,n,i){return t.call(this,"sync",e,n,i)}function i(t){var e;if(!this._callbacks)return this;for(t=t.split(u);e=t.shift();)delete this._callbacks[e];return this}function r(t){var e,n,i,r,s;if(!this._callbacks)return this;for(t=t.split(u),i=[].slice.call(arguments,1);(e=t.shift())&&(n=this._callbacks[e]);)r=o(n.sync,this,[e].concat(i)),s=o(n.async,this,[e].concat(i)),r()&&c(s);return this}function o(t,e,n){function i(){for(var i,r=0;!i&&r<t.length;r+=1)i=!1===t[r].apply(e,n);return!i}return i}function s(){return window.setImmediate?function(t){setImmediate(function(){t()})}:function(t){setTimeout(function(){t()},0)}}function a(t,e){return t.bind?t.bind(e):function(){t.apply(e,[].slice.call(arguments,0))}}var u=/\s+/,c=s();return{onSync:n,onAsync:e,off:i,trigger:r}}(),d=function(t){function n(t,n,i){for(var r,o=[],s=0;s<t.length;s++)o.push(e.escapeRegExChars(t[s]));return r=i?"\\b("+o.join("|")+")\\b":"("+o.join("|")+")",n?new RegExp(r):new RegExp(r,"i")}var i={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(r){function o(e){var n,i;return(n=a.exec(e.data))&&(wrapperNode=t.createElement(r.tagName),r.className&&(wrapperNode.className=r.className),(i=e.splitText(n.index)).splitText(n[0].length),wrapperNode.appendChild(i.cloneNode(!0)),e.parentNode.replaceChild(wrapperNode,i)),!!n}function s(t,e){for(var n,i=3,r=0;r<t.childNodes.length;r++)(n=t.childNodes[r]).nodeType===i?r+=e(n)?1:0:s(n,e)}var a;(r=e.mixin({},i,r)).node&&r.pattern&&(r.pattern=e.isArray(r.pattern)?r.pattern:[r.pattern],a=n(r.pattern,r.caseSensitive,r.wordsOnly),s(r.node,o))}}(window.document),p=function(){function n(n){var r,o,a,u,c=this;(n=n||{}).input||t.error("input is missing"),r=e.bind(this._onBlur,this),o=e.bind(this._onFocus,this),a=e.bind(this._onKeydown,this),u=e.bind(this._onInput,this),this.$hint=t(n.hint),this.$input=t(n.input).on("blur.tt",r).on("focus.tt",o).on("keydown.tt",a),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=e.noop),e.isMsie()?this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(t){s[t.which||t.keyCode]||e.defer(e.bind(c._onInput,c,t))}):this.$input.on("input.tt",u),this.query=this.$input.val(),this.$overflowHelper=i(this.$input)}function i(e){return t('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:e.css("font-family"),fontSize:e.css("font-size"),fontStyle:e.css("font-style"),fontVariant:e.css("font-variant"),fontWeight:e.css("font-weight"),wordSpacing:e.css("word-spacing"),letterSpacing:e.css("letter-spacing"),textIndent:e.css("text-indent"),textRendering:e.css("text-rendering"),textTransform:e.css("text-transform")}).insertAfter(e)}function r(t,e){return n.normalizeQuery(t)===n.normalizeQuery(e)}function o(t){return t.altKey||t.ctrlKey||t.metaKey||t.shiftKey}var s;return s={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},n.normalizeQuery=function(t){return(t||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")},e.mixin(n.prototype,f,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.trigger("focused")},_onKeydown:function(t){var e=s[t.which||t.keyCode];this._managePreventDefault(e,t),e&&this._shouldTrigger(e,t)&&this.trigger(e+"Keyed",t)},_onInput:function(){this._checkInputValue()},_managePreventDefault:function(t,e){var n,i,r;switch(t){case"tab":i=this.getHint(),r=this.getInputValue(),n=i&&i!==r&&!o(e);break;case"up":case"down":n=!o(e);break;default:n=!1}n&&e.preventDefault()},_shouldTrigger:function(t,e){var n;switch(t){case"tab":n=!o(e);break;default:n=!0}return n},_checkInputValue:function(){var t,e,n;n=!!(e=r(t=this.getInputValue(),this.query))&&this.query.length!==t.length,e?n&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query=t)},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(t){this.query=t},getInputValue:function(){return this.$input.val()},setInputValue:function(t,e){this.$input.val(t),e?this.clearHint():this._checkInputValue()},resetInputValue:function(){this.setInputValue(this.query,!0)},getHint:function(){return this.$hint.val()},setHint:function(t){this.$hint.val(t)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var t,e,n;n=(t=this.getInputValue())!==(e=this.getHint())&&0===e.indexOf(t),(""===t||!n||this.hasOverflow())&&this.clearHint()},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},hasOverflow:function(){var t=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=t},isCursorAtEnd:function(){var t,n,i;return t=this.$input.val().length,n=this.$input[0].selectionStart,e.isNumber(n)?n===t:!document.selection||((i=document.selection.createRange()).moveStart("character",-t),t===i.text.length)},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$hint=this.$input=this.$overflowHelper=null}}),n}(),m=function(){function n(n){(n=n||{}).templates=n.templates||{},n.source||t.error("missing source"),n.name&&!o(n.name)&&t.error("invalid dataset name: "+n.name),this.query=null,this.highlight=!!n.highlight,this.name=n.name||e.getUniqueId(),this.source=n.source,this.displayFn=i(n.display||n.displayKey),this.templates=r(n.templates,this.displayFn),this.$el=t(c.dataset.replace("%CLASS%",this.name))}function i(t){function n(e){return e[t]}return t=t||"value",e.isFunction(t)?t:n}function r(t,n){function i(t){return"<p>"+n(t)+"</p>"}return{empty:t.empty&&e.templatify(t.empty),header:t.header&&e.templatify(t.header),footer:t.footer&&e.templatify(t.footer),suggestion:t.suggestion||i}}function o(t){return/^[_a-zA-Z0-9-]+$/.test(t)}var s="ttDataset",a="ttValue",u="ttDatum";return n.extractDatasetName=function(e){return t(e).data(s)},n.extractValue=function(e){return t(e).data(a)},n.extractDatum=function(e){return t(e).data(u)},e.mixin(n.prototype,f,{_render:function(n,i){function r(){return m.templates.empty({query:n,isEmpty:!0})}function o(){function r(e){var n;return(n=t(c.suggestion).append(m.templates.suggestion(e)).data(s,m.name).data(a,m.displayFn(e)).data(u,e)).children().each(function(){t(this).css(l.suggestionChild)}),n}var o,h;return o=t(c.suggestions).css(l.suggestions),h=e.map(i,r),o.append.apply(o,h),m.highlight&&d({node:o[0],pattern:n}),o}function h(){return m.templates.header({query:n,isEmpty:!p})}function f(){return m.templates.footer({query:n,isEmpty:!p})}if(this.$el){var p,m=this;this.$el.empty(),!(p=i&&i.length)&&this.templates.empty?this.$el.html(r()).prepend(m.templates.header?h():null).append(m.templates.footer?f():null):p&&this.$el.html(o()).prepend(m.templates.header?h():null).append(m.templates.footer?f():null),this.trigger("rendered")}},getRoot:function(){return this.$el},update:function(t){function e(e){n.canceled||t!==n.query||n._render(t,e)}var n=this;this.query=t,this.canceled=!1,this.source(t,e)},cancel:function(){this.canceled=!0},clear:function(){this.cancel(),this.$el.empty(),this.trigger("rendered")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=null}}),n}(),g=function(){function n(n){var r,o,s,a=this;(n=n||{}).menu||t.error("menu is required"),this.isOpen=!1,this.isEmpty=!0,this.datasets=e.map(n.datasets,i),r=e.bind(this._onSuggestionClick,this),o=e.bind(this._onSuggestionMouseEnter,this),s=e.bind(this._onSuggestionMouseLeave,this),this.$menu=t(n.menu).on("click.tt",".tt-suggestion",r).on("mouseenter.tt",".tt-suggestion",o).on("mouseleave.tt",".tt-suggestion",s),e.each(this.datasets,function(t){a.$menu.append(t.getRoot()),t.onSync("rendered",a._onRendered,a)})}function i(t){return new m(t)}return e.mixin(n.prototype,f,{_onSuggestionClick:function(e){this.trigger("suggestionClicked",t(e.currentTarget))},_onSuggestionMouseEnter:function(e){this._removeCursor(),this._setCursor(t(e.currentTarget),!0)},_onSuggestionMouseLeave:function(){this._removeCursor()},_onRendered:function(){function t(t){return t.isEmpty()}this.isEmpty=e.every(this.datasets,t),this.isEmpty?this._hide():this.isOpen&&this._show(),this.trigger("datasetRendered")},_hide:function(){this.$menu.hide()},_show:function(){this.$menu.css("display","block")},_getSuggestions:function(){return this.$menu.find(".tt-suggestion")},_getCursor:function(){return this.$menu.find(".tt-cursor").first()},_setCursor:function(t,e){t.first().addClass("tt-cursor"),!e&&this.trigger("cursorMoved")},_removeCursor:function(){this._getCursor().removeClass("tt-cursor")},_moveCursor:function(t){var e,n,i,r;if(this.isOpen){if(n=this._getCursor(),e=this._getSuggestions(),this._removeCursor(),i=e.index(n)+t,-1===(i=(i+1)%(e.length+1)-1))return void this.trigger("cursorRemoved");-1>i&&(i=e.length-1),this._setCursor(r=e.eq(i)),this._ensureVisible(r)}},_ensureVisible:function(t){var e,n,i,r;n=(e=t.position().top)+t.outerHeight(!0),i=this.$menu.scrollTop(),r=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10),0>e?this.$menu.scrollTop(i+e):n>r&&this.$menu.scrollTop(i+(n-r))},close:function(){this.isOpen&&(this.isOpen=!1,this._removeCursor(),this._hide(),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,!this.isEmpty&&this._show(),this.trigger("opened"))},setLanguageDirection:function(t){this.$menu.css("ltr"===t?l.ltr:l.rtl)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getDatumForSuggestion:function(t){var e=null;return t.length&&(e={raw:m.extractDatum(t),value:m.extractValue(t),datasetName:m.extractDatasetName(t)}),e},getDatumForCursor:function(){return this.getDatumForSuggestion(this._getCursor().first())},getDatumForTopSuggestion:function(){return this.getDatumForSuggestion(this._getSuggestions().first())},update:function(t){function n(e){e.update(t)}e.each(this.datasets,n)},empty:function(){function t(t){t.clear()}e.each(this.datasets,t),this.isEmpty=!0},isVisible:function(){return this.isOpen&&!this.isEmpty},destroy:function(){function t(t){t.destroy()}this.$menu.off(".tt"),this.$menu=null,e.each(this.datasets,t)}}),n}(),v=function(){function n(n){var r,o,s;(n=n||{}).input||t.error("missing input"),this.isActivated=!1,this.autoselect=!!n.autoselect,this.minLength=e.isNumber(n.minLength)?n.minLength:1,this.$node=i(n.input,n.withHint),r=this.$node.find(".tt-dropdown-menu"),o=this.$node.find(".tt-input"),s=this.$node.find(".tt-hint"),o.on("blur.tt",function(t){var n,i,s;n=document.activeElement,i=r.is(n),s=r.has(n).length>0,e.isMsie()&&(i||s)&&(t.preventDefault(),t.stopImmediatePropagation(),e.defer(function(){o.focus()}))}),r.on("mousedown.tt",function(t){t.preventDefault()}),this.eventBus=n.eventBus||new h({el:o}),this.dropdown=new g({menu:r,datasets:n.datasets}).onSync("suggestionClicked",this._onSuggestionClicked,this).onSync("cursorMoved",this._onCursorMoved,this).onSync("cursorRemoved",this._onCursorRemoved,this).onSync("opened",this._onOpened,this).onSync("closed",this._onClosed,this).onAsync("datasetRendered",this._onDatasetRendered,this),this.input=new p({input:o,hint:s}).onSync("focused",this._onFocused,this).onSync("blurred",this._onBlurred,this).onSync("enterKeyed",this._onEnterKeyed,this).onSync("tabKeyed",this._onTabKeyed,this).onSync("escKeyed",this._onEscKeyed,this).onSync("upKeyed",this._onUpKeyed,this).onSync("downKeyed",this._onDownKeyed,this).onSync("leftKeyed",this._onLeftKeyed,this).onSync("rightKeyed",this._onRightKeyed,this).onSync("queryChanged",this._onQueryChanged,this).onSync("whitespaceChanged",this._onWhitespaceChanged,this),this._setLanguageDirection()}function i(e,n){var i,o,a,u;i=t(e),o=t(c.wrapper).css(l.wrapper),a=t(c.dropdown).css(l.dropdown),(u=i.clone().css(l.hint).css(r(i))).val("").removeData().addClass("tt-hint").removeAttr("id name placeholder").prop("disabled",!0).attr({autocomplete:"off",spellcheck:"false"}),i.data(s,{dir:i.attr("dir"),autocomplete:i.attr("autocomplete"),spellcheck:i.attr("spellcheck"),style:i.attr("style")}),i.addClass("tt-input").attr({autocomplete:"off",spellcheck:!1}).css(n?l.input:l.inputWithNoHint);try{!i.attr("dir")&&i.attr("dir","auto")}catch(h){}return i.wrap(o).parent().prepend(n?u:null).append(a)}function r(t){return{backgroundAttachment:t.css("background-attachment"),backgroundClip:t.css("background-clip"),backgroundColor:t.css("background-color"),backgroundImage:t.css("background-image"),backgroundOrigin:t.css("background-origin"),backgroundPosition:t.css("background-position"),backgroundRepeat:t.css("background-repeat"),backgroundSize:t.css("background-size")}}function o(t){var n=t.find(".tt-input");e.each(n.data(s),function(t,i){e.isUndefined(t)?n.removeAttr(i):n.attr(i,t)}),n.detach().removeData(s).removeClass("tt-input").insertAfter(t),t.remove()}var s="ttAttrs";return e.mixin(n.prototype,{_onSuggestionClicked:function(t,e){var n;(n=this.dropdown.getDatumForSuggestion(e))&&this._select(n)},_onCursorMoved:function(){var t=this.dropdown.getDatumForCursor();this.input.setInputValue(t.value,!0),this.eventBus.trigger("cursorchanged",t.raw,t.datasetName)},_onCursorRemoved:function(){this.input.resetInputValue(),this._updateHint()},_onDatasetRendered:function(){this._updateHint()},_onOpened:function(){this._updateHint(),this.eventBus.trigger("opened")},_onClosed:function(){this.input.clearHint(),this.eventBus.trigger("closed")},_onFocused:function(){this.isActivated=!0,this.dropdown.open()},_onBlurred:function(){this.isActivated=!1,this.dropdown.empty(),this.dropdown.close()},_onEnterKeyed:function(t,e){var n,i;n=this.dropdown.getDatumForCursor(),i=this.dropdown.getDatumForTopSuggestion(),n?(this._select(n),e.preventDefault()):this.autoselect&&i&&(this._select(i),e.preventDefault())},_onTabKeyed:function(t,e){var n;(n=this.dropdown.getDatumForCursor())?(this._select(n),e.preventDefault()):this._autocomplete(!0)},_onEscKeyed:function(){this.dropdown.close(),this.input.resetInputValue()},_onUpKeyed:function(){var t=this.input.getQuery();this.dropdown.isEmpty&&t.length>=this.minLength?this.dropdown.update(t):this.dropdown.moveCursorUp(),this.dropdown.open()},_onDownKeyed:function(){var t=this.input.getQuery();this.dropdown.isEmpty&&t.length>=this.minLength?this.dropdown.update(t):this.dropdown.moveCursorDown(),this.dropdown.open()},_onLeftKeyed:function(){"rtl"===this.dir&&this._autocomplete()},_onRightKeyed:function(){"ltr"===this.dir&&this._autocomplete()},_onQueryChanged:function(t,e){this.input.clearHintIfInvalid(),e.length>=this.minLength?this.dropdown.update(e):this.dropdown.empty(),this.dropdown.open(),this._setLanguageDirection()},_onWhitespaceChanged:function(){this._updateHint(),this.dropdown.open()},_setLanguageDirection:function(){var t;this.dir!==(t=this.input.getLanguageDirection())&&(this.dir=t,this.$node.css("direction",t),this.dropdown.setLanguageDirection(t))},_updateHint:function(){var t,n,i,r,o,s;(t=this.dropdown.getDatumForTopSuggestion())&&this.dropdown.isVisible()&&!this.input.hasOverflow()?(n=this.input.getInputValue(),i=p.normalizeQuery(n),r=e.escapeRegExChars(i),o=new RegExp("^(?:"+r+")(.+$)","i"),(s=o.exec(t.value))?this.input.setHint(n+s[1]):this.input.clearHint()):this.input.clearHint()},_autocomplete:function(t){var e,n,i,r;e=this.input.getHint(),n=this.input.getQuery(),i=t||this.input.isCursorAtEnd(),e&&n!==e&&i&&((r=this.dropdown.getDatumForTopSuggestion())&&this.input.setInputValue(r.value),this.eventBus.trigger("autocompleted",r.raw,r.datasetName))},_select:function(t){this.input.setQuery(t.value),this.input.setInputValue(t.value,!0),this._setLanguageDirection(),this.eventBus.trigger("selected",t.raw,t.datasetName),this.dropdown.close(),e.defer(e.bind(this.dropdown.empty,this.dropdown))},open:function(){this.dropdown.open()},close:function(){this.dropdown.close()},setVal:function(t){this.isActivated?this.input.setInputValue(t):(this.input.setQuery(t),this.input.setInputValue(t,!0)),this._setLanguageDirection()},getVal:function(){return this.input.getQuery()},destroy:function(){this.input.destroy(),this.dropdown.destroy(),o(this.$node),this.$node=null}}),n}();!function(){var n,i,r;n=t.fn.typeahead,i="ttTypeahead",r={initialize:function(n,r){function o(){var o,s=t(this);e.each(r,function(t){t.highlight=!!n.highlight}),o=new v({input:s,eventBus:new h({el:s}),withHint:!!e.isUndefined(n.hint)||!!n.hint,minLength:n.minLength,autoselect:n.autoselect,datasets:r}),s.data(i,o)}return r=e.isArray(r)?r:[].slice.call(arguments,1),n=n||{},this.each(o)},open:function(){function e(){var e;(e=t(this).data(i))&&e.open()}return this.each(e)},close:function(){function e(){var e;(e=t(this).data(i))&&e.close()}return this.each(e)},val:function(e){function n(){var n;(n=t(this).data(i))&&n.setVal(e)}function r(t){var e,n;return(e=t.data(i))&&(n=e.getVal()),n}return arguments.length?this.each(n):r(this.first())},destroy:function(){function e(){var e,n=t(this);(e=n.data(i))&&(e.destroy(),n.removeData(i))}return this.each(e)}},t.fn.typeahead=function(t){return r[t]?r[t].apply(this,[].slice.call(arguments,1)):r.initialize.apply(this,arguments)},t.fn.typeahead.noConflict=function(){return t.fn.typeahead=n,this}}()}(window.jQuery);var Handlebars=function(){var t=function(){"use strict";function t(t){this.string=t}return t.prototype.toString=function(){return""+this.string},t}(),e=function(){"use strict";function e(t){return a[t]||"&amp;"}function n(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}function i(t){return t instanceof s?t.toString():t||0===t?(t=""+t,c.test(t)?t.replace(u,e):t):""}function r(t){return!t&&0!==t||!(!f(t)||0!==t.length)}var o={},s=t,a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},u=/[&<>"'`]/g,c=/[&<>"'`]/;o.extend=n;var l=Object.prototype.toString;o.toString=l;(h=function(t){return"function"==typeof t})(/x/)&&(h=function(t){return"function"==typeof t&&"[object Function]"===l.call(t)});var h;o.isFunction=h;var f=Array.isArray||function(t){return!(!t||"object"!=typeof t)&&"[object Array]"===l.call(t)};return o.isArray=f,o.escapeExpression=i,o.isEmpty=r,o}(),n=function(){"use strict";function t(t,n){var i;n&&n.firstLine&&(t+=" - "+(i=n.firstLine)+":"+n.firstColumn);for(var r=Error.prototype.constructor.call(this,t),o=0;o<e.length;o++)this[e[o]]=r[e[o]];i&&(this.lineNumber=i,this.column=n.firstColumn)}var e=["description","fileName","lineNumber","message","name","number","stack"];return t.prototype=new Error,t}(),i=function(){"use strict";function t(t,e){this.helpers=t||{},this.partials=e||{},i(this)}function i(t){t.registerHelper("helperMissing",function(t){if(2===arguments.length)return undefined;throw new a("Missing helper: '"+t+"'")}),t.registerHelper("blockHelperMissing",function(e,n){var i=n.inverse||function(){},r=n.fn;return f(e)&&(e=e.call(this)),!0===e?r(this):!1===e||null==e?i(this):h(e)?e.length>0?t.helpers.each(e,n):i(this):r(e)}),t.registerHelper("each",function(t,e){var n,i=e.fn,r=e.inverse,o=0,s="";if(f(t)&&(t=t.call(this)),e.data&&(n=g(e.data)),t&&"object"==typeof t)if(h(t))for(var a=t.length;o<a;o++)n&&(n.index=o,n.first=0===o,
n.last=o===t.length-1),s+=i(t[o],{data:n});else for(var u in t)t.hasOwnProperty(u)&&(n&&(n.key=u,n.index=o,n.first=0===o),s+=i(t[u],{data:n}),o++);return 0===o&&(s=r(this)),s}),t.registerHelper("if",function(t,e){return f(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||s.isEmpty(t)?e.inverse(this):e.fn(this)}),t.registerHelper("unless",function(e,n){return t.helpers["if"].call(this,e,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),t.registerHelper("with",function(t,e){if(f(t)&&(t=t.call(this)),!s.isEmpty(t))return e.fn(t)}),t.registerHelper("log",function(e,n){var i=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;t.log(i,e)})}function r(t,e){m.log(t,e)}var o={},s=e,a=n,u="1.3.0";o.VERSION=u;var c=4;o.COMPILER_REVISION=c;var l={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};o.REVISION_CHANGES=l;var h=s.isArray,f=s.isFunction,d=s.toString,p="[object Object]";o.HandlebarsEnvironment=t,t.prototype={constructor:t,logger:m,log:r,registerHelper:function(t,e,n){if(d.call(t)===p){if(n||e)throw new a("Arg not supported with multiple helpers");s.extend(this.helpers,t)}else n&&(e.not=n),this.helpers[t]=e},registerPartial:function(t,e){d.call(t)===p?s.extend(this.partials,t):this.partials[t]=e}};var m={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(t,e){if(m.level<=t){var n=m.methodMap[t];"undefined"!=typeof console&&console[n]&&console[n].call(console,e)}}};o.logger=m,o.log=r;var g=function(t){var e={};return s.extend(e,t),e};return o.createFrame=g,o}(),r=function(t,i,r){"use strict";function o(t){var e=t&&t[0]||1;if(e!==p){if(e<p){var n=m[p],i=m[e];throw new d("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+n+") or downgrade your runtime to an older version ("+i+").")}throw new d("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}}function s(t,e){if(!e)throw new d("No environment passed to template");var n=function(t,n,i,r,o,s){var a=e.VM.invokePartial.apply(this,arguments);if(null!=a)return a;if(e.compile){var u={helpers:r,partials:o,data:s};return o[n]=e.compile(t,{data:s!==undefined},e),o[n](i,u)}throw new d("The partial "+n+" could not be compiled when running in runtime-only mode")},i={escapeExpression:f.escapeExpression,invokePartial:n,programs:[],program:function(t,e,n){var i=this.programs[t];return n?i=u(t,e,n):i||(i=this.programs[t]=u(t,e)),i},merge:function(t,e){var n=t||e;return t&&e&&t!==e&&(n={},f.extend(n,e),f.extend(n,t)),n},programWithDepth:e.VM.programWithDepth,noop:e.VM.noop,compilerInfo:null};return function(n,r){var o,s,a=(r=r||{}).partial?r:e;r.partial||(o=r.helpers,s=r.partials);var u=t.call(i,a,n,o,s,r.data);return r.partial||e.VM.checkRevision(i.compilerInfo),u}}function a(t,e,n){var i=Array.prototype.slice.call(arguments,3),r=function(t,r){return r=r||{},e.apply(this,[t,r.data||n].concat(i))};return r.program=t,r.depth=i.length,r}function u(t,e,n){var i=function(t,i){return i=i||{},e(t,i.data||n)};return i.program=t,i.depth=0,i}function c(t,e,n,i,r,o){var s={partial:!0,helpers:i,partials:r,data:o};if(t===undefined)throw new d("The partial "+e+" could not be found");if(t instanceof Function)return t(n,s)}function l(){return""}var h={},f=e,d=n,p=r.COMPILER_REVISION,m=r.REVISION_CHANGES;return h.checkRevision=o,h.template=s,h.programWithDepth=a,h.program=u,h.invokePartial=c,h.noop=l,h}(0,0,i),o=function(){"use strict";var o=i,s=t,a=n,u=e,c=r,l=function(){var t=new o.HandlebarsEnvironment;return u.extend(t,o),t.SafeString=s,t.Exception=a,t.Utils=u,t.VM=c,t.template=function(e){return c.template(e,t)},t},h=l();return h.create=l,h}(),s=function(){"use strict";function t(t){t=t||{},this.firstLine=t.first_line,this.firstColumn=t.first_column,this.lastColumn=t.last_column,this.lastLine=t.last_line}var e=n,i={ProgramNode:function(e,n,r,o){var s,a;3===arguments.length?(o=r,r=null):2===arguments.length&&(o=n,n=null),t.call(this,o),this.type="program",this.statements=e,this.strip={},r?((a=r[0])?(s={first_line:a.firstLine,last_line:a.lastLine,last_column:a.lastColumn,first_column:a.firstColumn},this.inverse=new i.ProgramNode(r,n,s)):this.inverse=new i.ProgramNode(r,n),this.strip.right=n.left):n&&(this.strip.left=n.right)},MustacheNode:function(e,n,r,o,s){if(t.call(this,s),this.type="mustache",this.strip=o,null!=r&&r.charAt){var a=r.charAt(3)||r.charAt(2);this.escaped="{"!==a&&"&"!==a}else this.escaped=!!r;e instanceof i.SexprNode?this.sexpr=e:this.sexpr=new i.SexprNode(e,n),this.sexpr.isRoot=!0,this.id=this.sexpr.id,this.params=this.sexpr.params,this.hash=this.sexpr.hash,this.eligibleHelper=this.sexpr.eligibleHelper,this.isHelper=this.sexpr.isHelper},SexprNode:function(e,n,i){t.call(this,i),this.type="sexpr",this.hash=n;var r=this.id=e[0],o=this.params=e.slice(1),s=this.eligibleHelper=r.isSimple;this.isHelper=s&&(o.length||n)},PartialNode:function(e,n,i,r){t.call(this,r),this.type="partial",this.partialName=e,this.context=n,this.strip=i},BlockNode:function(n,i,r,o,s){if(t.call(this,s),n.sexpr.id.original!==o.path.original)throw new e(n.sexpr.id.original+" doesn't match "+o.path.original,this);this.type="block",this.mustache=n,this.program=i,this.inverse=r,this.strip={left:n.strip.left,right:o.strip.right},(i||r).strip.left=n.strip.right,(r||i).strip.right=o.strip.left,r&&!i&&(this.isInverse=!0)},ContentNode:function(e,n){t.call(this,n),this.type="content",this.string=e},HashNode:function(e,n){t.call(this,n),this.type="hash",this.pairs=e},IdNode:function(n,i){t.call(this,i),this.type="ID";for(var r="",o=[],s=0,a=0,u=n.length;a<u;a++){var c=n[a].part;if(r+=(n[a].separator||"")+c,".."===c||"."===c||"this"===c){if(o.length>0)throw new e("Invalid path: "+r,this);".."===c?s++:this.isScoped=!0}else o.push(c)}this.original=r,this.parts=o,this.string=o.join("."),this.depth=s,this.isSimple=1===n.length&&!this.isScoped&&0===s,this.stringModeValue=this.string},PartialNameNode:function(e,n){t.call(this,n),this.type="PARTIAL_NAME",this.name=e.original},DataNode:function(e,n){t.call(this,n),this.type="DATA",this.id=e},StringNode:function(e,n){t.call(this,n),this.type="STRING",this.original=this.string=this.stringModeValue=e},IntegerNode:function(e,n){t.call(this,n),this.type="INTEGER",this.original=this.integer=e,this.stringModeValue=Number(e)},BooleanNode:function(e,n){t.call(this,n),this.type="BOOLEAN",this.bool=e,this.stringModeValue="true"===e},CommentNode:function(e,n){t.call(this,n),this.type="comment",this.comment=e}};return i}(),a=function(){"use strict";return function(){function t(t,e){return{left:"~"===t.charAt(2),right:"~"===e.charAt(0)||"~"===e.charAt(1)}}function e(){this.yy={}}var n={trace:function(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,sexpr:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,sexpr_repetition0:28,sexpr_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,OPEN_SEXPR:35,CLOSE_SEXPR:36,hash:37,hash_repetition_plus0:38,hashSegment:39,ID:40,EQUALS:41,DATA:42,pathSegments:43,SEP:44,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",35:"OPEN_SEXPR",36:"CLOSE_SEXPR",40:"ID",41:"EQUALS",42:"DATA",44:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],performAction:function(e,n,i,r,o,s){var a=s.length-1;switch(o){case 1:return new r.ProgramNode(s[a-1],this._$);case 2:return new r.ProgramNode([],this._$);case 3:this.$=new r.ProgramNode([],s[a-1],s[a],this._$);break;case 4:this.$=new r.ProgramNode(s[a-2],s[a-1],s[a],this._$);break;case 5:this.$=new r.ProgramNode(s[a-1],s[a],[],this._$);break;case 6:this.$=new r.ProgramNode(s[a],this._$);break;case 7:case 8:this.$=new r.ProgramNode([],this._$);break;case 9:this.$=[s[a]];break;case 10:s[a-1].push(s[a]),this.$=s[a-1];break;case 11:this.$=new r.BlockNode(s[a-2],s[a-1].inverse,s[a-1],s[a],this._$);break;case 12:this.$=new r.BlockNode(s[a-2],s[a-1],s[a-1].inverse,s[a],this._$);break;case 13:case 14:this.$=s[a];break;case 15:this.$=new r.ContentNode(s[a],this._$);break;case 16:this.$=new r.CommentNode(s[a],this._$);break;case 17:case 18:this.$=new r.MustacheNode(s[a-1],null,s[a-2],t(s[a-2],s[a]),this._$);break;case 19:this.$={path:s[a-1],strip:t(s[a-2],s[a])};break;case 20:case 21:this.$=new r.MustacheNode(s[a-1],null,s[a-2],t(s[a-2],s[a]),this._$);break;case 22:this.$=new r.PartialNode(s[a-2],s[a-1],t(s[a-3],s[a]),this._$);break;case 23:this.$=t(s[a-1],s[a]);break;case 24:this.$=new r.SexprNode([s[a-2]].concat(s[a-1]),s[a],this._$);break;case 25:this.$=new r.SexprNode([s[a]],null,this._$);break;case 26:this.$=s[a];break;case 27:this.$=new r.StringNode(s[a],this._$);break;case 28:this.$=new r.IntegerNode(s[a],this._$);break;case 29:this.$=new r.BooleanNode(s[a],this._$);break;case 30:this.$=s[a];break;case 31:s[a-1].isHelper=!0,this.$=s[a-1];break;case 32:this.$=new r.HashNode(s[a],this._$);break;case 33:this.$=[s[a-2],s[a]];break;case 34:this.$=new r.PartialNameNode(s[a],this._$);break;case 35:this.$=new r.PartialNameNode(new r.StringNode(s[a],this._$),this._$);break;case 36:this.$=new r.PartialNameNode(new r.IntegerNode(s[a],this._$));break;case 37:this.$=new r.DataNode(s[a],this._$);break;case 38:this.$=new r.IdNode(s[a],this._$);break;case 39:s[a-2].push({part:s[a],separator:s[a-1]}),this.$=s[a-2];break;case 40:this.$=[{part:s[a]}];break;case 43:this.$=[];break;case 44:s[a-1].push(s[a]);break;case 47:this.$=[s[a]];break;case 48:s[a-1].push(s[a])}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],42:[1,27],43:26},{18:[2,32],24:[2,32],36:[2,32],39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],defaultActions:{3:[2,2],16:[2,1],50:[2,42]},parseError:function(t){throw new Error(t)},parse:function(t){function e(){var t;return"number"!=typeof(t=n.lexer.lex()||1)&&(t=n.symbols_[t]||t),t}var n=this,i=[0],r=[null],o=[],s=this.table,a="",u=0,c=0,l=0;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var h=this.lexer.yylloc;o.push(h);var f=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var d,p,m,g,v,_,y,b,x,w={};;){if(m=i[i.length-1],this.defaultActions[m]?g=this.defaultActions[m]:(null!==d&&void 0!==d||(d=e()),g=s[m]&&s[m][d]),void 0===g||!g.length||!g[0]){var k="";if(!l){x=[];for(_ in s[m])this.terminals_[_]&&_>2&&x.push("'"+this.terminals_[_]+"'");k=this.lexer.showPosition?"Parse error on line "+(u+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+x.join(", ")+", got '"+(this.terminals_[d]||d)+"'":"Parse error on line "+(u+1)+": Unexpected "+(1==d?"end of input":"'"+(this.terminals_[d]||d)+"'"),this.parseError(k,{text:this.lexer.match,token:this.terminals_[d]||d,line:this.lexer.yylineno,loc:h,expected:x})}}if(g[0]instanceof Array&&g.length>1)throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+d);switch(g[0]){case 1:i.push(d),r.push(this.lexer.yytext),o.push(this.lexer.yylloc),i.push(g[1]),d=null,p?(d=p,p=null):(c=this.lexer.yyleng,a=this.lexer.yytext,u=this.lexer.yylineno,h=this.lexer.yylloc,l>0&&l--);break;case 2:if(y=this.productions_[g[1]][1],w.$=r[r.length-y],w._$={first_line:o[o.length-(y||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(y||1)].first_column,last_column:o[o.length-1].last_column},f&&(w._$.range=[o[o.length-(y||1)].range[0],o[o.length-1].range[1]]),void 0!==(v=this.performAction.call(w,a,c,u,this.yy,g[1],r,o)))return v;y&&(i=i.slice(0,-1*y*2),r=r.slice(0,-1*y),o=o.slice(0,-1*y)),i.push(this.productions_[g[1]][0]),r.push(w.$),o.push(w._$),b=s[i[i.length-2]][i[i.length-1]],i.push(b);break;case 3:return!0}}return!0}},i=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t;return t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===i.length?this.yylloc.first_column:0)+i[i.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-e]),this},more:function(){return this._more=!0,this},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var t,e,n,i,r;this._more||(this.yytext="",this.match="");for(var o=this._currentRules(),s=0;s<o.length&&(!(n=this._input.match(this.rules[o[s]]))||e&&!(n[0].length>e[0].length)||(e=n,i=s,this.options.flex));s++);return e?((r=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,o[i],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t||void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return void 0!==t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return t.options={},t.performAction=function(t,e,n){function i(t,n){return e.yytext=e.yytext.substr(t,e.yyleng-n)}switch(n){case 0:if("\\\\"===e.yytext.slice(-2)?(i(0,1),this.begin("mu")):"\\"===e.yytext.slice(-1)?(i(0,1),this.begin("emu")):this.begin("mu"),e.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return i(0,4),this.popState(),15;case 4:return 35;case 5:return 36;case 6:return 25;case 7:return 16;case 8:return 20;case 9:case 10:return 19;case 11:return 23;case 12:return 22;case 13:this.popState(),this.begin("com");break;case 14:return i(3,5),this.popState(),15;case 15:return 22;case 16:return 41;case 17:case 18:return 40;case 19:return 44;case 20:break;case 21:return this.popState(),24;case 22:return this.popState(),18;case 23:return e.yytext=i(1,2).replace(/\\"/g,'"'),32;case 24:return e.yytext=i(1,2).replace(/\\'/g,"'"),32;case 25:return 42;case 26:case 27:return 34;case 28:return 33;case 29:return 40;case 30:return e.yytext=i(1,2),40;case 31:return"INVALID";case 32:return 5}},t.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],t.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}},t}();return n.lexer=i,e.prototype=n,n.Parser=e,new e}()}();return function(t,e,n,i,r){"use strict";var a=o,u=s,c=n.parser,l=n.parse,h=i.Compiler,f=i.compile,d=i.precompile,p=r,m=a.create,g=function(){var t=m();return t.compile=function(e,n){return f(e,n,t)},t.precompile=function(e,n){return d(e,n,t)},t.AST=u,t.Compiler=h,t.JavaScriptCompiler=p,t.Parser=c,t.parse=l,t};return a=g(),a.create=g,a}(0,0,function(){"use strict";function t(t){return t.constructor===i.ProgramNode?t:(n.yy=i,n.parse(t))}var e={},n=a,i=s;return e.parser=n,e.parse=t,e}(),function(){"use strict";function t(){}function e(t,e,n){if(null==t||"string"!=typeof t&&t.constructor!==n.AST.ProgramNode)throw new o("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+t);"data"in(e=e||{})||(e.data=!0);var i=n.parse(t),r=(new n.Compiler).compile(i,e);return(new n.JavaScriptCompiler).compile(r,e)}function i(t,e,n){function i(){var i=n.parse(t),r=(new n.Compiler).compile(i,e),o=(new n.JavaScriptCompiler).compile(r,e,undefined,!0);return n.template(o)}if(null==t||"string"!=typeof t&&t.constructor!==n.AST.ProgramNode)throw new o("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+t);"data"in(e=e||{})||(e.data=!0);var r;return function(t,e){return r||(r=i()),r.call(this,t,e)}}var r={},o=n;return r.Compiler=t,t.prototype={compiler:t,disassemble:function(){for(var t,e,n,i=this.opcodes,r=[],o=0,s=i.length;o<s;o++)if("DECLARE"===(t=i[o]).opcode)r.push("DECLARE "+t.name+"="+t.value);else{e=[];for(var a=0;a<t.args.length;a++)"string"==typeof(n=t.args[a])&&(n='"'+n.replace("\n","\\n")+'"'),e.push(n);r.push(t.opcode+" "+e.join(" "))}return r.join("\n")},equals:function(t){var e=this.opcodes.length;if(t.opcodes.length!==e)return!1;for(var n=0;n<e;n++){var i=this.opcodes[n],r=t.opcodes[n];if(i.opcode!==r.opcode||i.args.length!==r.args.length)return!1;for(var o=0;o<i.args.length;o++)if(i.args[o]!==r.args[o])return!1}if(e=this.children.length,t.children.length!==e)return!1;for(n=0;n<e;n++)if(!this.children[n].equals(t.children[n]))return!1;return!0},guid:0,compile:function(t,e){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=e;var n=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},n)for(var i in n)this.options.knownHelpers[i]=n[i];return this.accept(t)},accept:function(t){var e,n=t.strip||{};return n.left&&this.opcode("strip"),e=this[t.type](t),n.right&&this.opcode("strip"),e},program:function(t){for(var e=t.statements,n=0,i=e.length;n<i;n++)this.accept(e[n]);return this.isSimple=1===i,this.depths.list=this.depths.list.sort(function(t,e){return t-e}),this},compileProgram:function(t){var e,n=(new this.compiler).compile(t,this.options),i=this.guid++;this.usePartial=this.usePartial||n.usePartial,this.children[i]=n;for(var r=0,o=n.depths.list.length;r<o;r++)(e=n.depths.list[r])<2||this.addDepth(e-1);return i},block:function(t){var e=t.mustache,n=t.program,i=t.inverse;n&&(n=this.compileProgram(n)),i&&(i=this.compileProgram(i));var r=e.sexpr,o=this.classifySexpr(r);"helper"===o?this.helperSexpr(r,n,i):"simple"===o?(this.simpleSexpr(r),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousSexpr(r,n,i),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(t){var e,n,i=t.pairs;this.opcode("pushHash");for(var r=0,o=i.length;r<o;r++)n=(e=i[r])[1],this.options.stringParams?(n.depth&&this.addDepth(n.depth),this.opcode("getContext",n.depth||0),this.opcode("pushStringParam",n.stringModeValue,n.type),"sexpr"===n.type&&this.sexpr(n)):this.accept(n),this.opcode("assignToHash",e[0]);this.opcode("popHash")},partial:function(t){var e=t.partialName;this.usePartial=!0,t.context?this.ID(t.context):this.opcode("push","depth0"),this.opcode("invokePartial",e.name),this.opcode("append")},content:function(t){this.opcode("appendContent",t.string)},mustache:function(t){this.sexpr(t.sexpr),t.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousSexpr:function(t,e,n){var i=t.id,r=i.parts[0],o=null!=e||null!=n;this.opcode("getContext",i.depth),this.opcode("pushProgram",e),this.opcode("pushProgram",n),this.opcode("invokeAmbiguous",r,o)},simpleSexpr:function(t){var e=t.id;"DATA"===e.type?this.DATA(e):e.parts.length?this.ID(e):(this.addDepth(e.depth),this.opcode("getContext",e.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperSexpr:function(t,e,n){var i=this.setupFullMustacheParams(t,e,n),r=t.id.parts[0];if(this.options.knownHelpers[r])this.opcode("invokeKnownHelper",i.length,r);else{if(this.options.knownHelpersOnly)throw new o("You specified knownHelpersOnly, but used the unknown helper "+r,t);this.opcode("invokeHelper",i.length,r,t.isRoot)}},sexpr:function(t){var e=this.classifySexpr(t);"simple"===e?this.simpleSexpr(t):"helper"===e?this.helperSexpr(t):this.ambiguousSexpr(t)},ID:function(t){this.addDepth(t.depth),this.opcode("getContext",t.depth);t.parts[0]?this.opcode("lookupOnContext",t.parts[0]):this.opcode("pushContext");for(var e=1,n=t.parts.length;e<n;e++)this.opcode("lookup",t.parts[e])},DATA:function(t){if(this.options.data=!0,t.id.isScoped||t.id.depth)throw new o("Scoped data references are not supported: "+t.original,t);this.opcode("lookupData");for(var e=t.id.parts,n=0,i=e.length;n<i;n++)this.opcode("lookup",e[n])},STRING:function(t){this.opcode("pushString",t.string)},INTEGER:function(t){this.opcode("pushLiteral",t.integer)},BOOLEAN:function(t){this.opcode("pushLiteral",t.bool)},comment:function(){},opcode:function(t){this.opcodes.push({opcode:t,args:[].slice.call(arguments,1)})},declare:function(t,e){this.opcodes.push({opcode:"DECLARE",name:t,value:e})},addDepth:function(t){0!==t&&(this.depths[t]||(this.depths[t]=!0,this.depths.list.push(t)))},classifySexpr:function(t){var e=t.isHelper,n=t.eligibleHelper,i=this.options;if(n&&!e){var r=t.id.parts[0];i.knownHelpers[r]?e=!0:i.knownHelpersOnly&&(n=!1)}return e?"helper":n?"ambiguous":"simple"},pushParams:function(t){for(var e,n=t.length;n--;)e=t[n],this.options.stringParams?(e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",e.stringModeValue,e.type),"sexpr"===e.type&&this.sexpr(e)):this[e.type](e)},setupFullMustacheParams:function(t,e,n){var i=t.params;return this.pushParams(i),this.opcode("pushProgram",e),this.opcode("pushProgram",n),t.hash?this.hash(t.hash):this.opcode("emptyHash"),i}},r.precompile=e,r.compile=i,r}(),function(t,e){"use strict";function n(t){this.value=t}function i(){}var r=t.COMPILER_REVISION,o=t.REVISION_CHANGES,s=t.log,a=e;i.prototype={nameLookup:function(t,e){var n,r;return 0===t.indexOf("depth")&&(n=!0),r=/^[0-9]+$/.test(e)?t+"["+e+"]":i.isValidJavaScriptVariableName(e)?t+"."+e:t+"['"+e+"']",n?"("+t+" && "+r+")":r},compilerInfo:function(){return"this.compilerInfo = ["+r+",'"+o[r]+"'];\n"},appendToBuffer:function(t){return this.environment.isSimple?"return "+t+";":{appendToBuffer:!0,content:t,toString:function(){return"buffer += "+t+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(t,e,n,i){this.environment=t,this.options=e||{},s("debug",this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!n,this.context=n||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.compileChildren(t,e);var r,o=t.opcodes;this.i=0;for(var u=o.length;this.i<u;this.i++)"DECLARE"===(r=o[this.i]).opcode?this[r.name]=r.value:this[r.opcode].apply(this,r.args),r.opcode!==this.stripNext&&(this.stripNext=!1);if(this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new a("Compile completed with content left on stack");return this.createFunctionContext(i)},preamble:function(){var t=[];if(this.isChild)t.push("");else{var e=this.namespace,n="helpers = this.merge(helpers, "+e+".helpers);";this.environment.usePartial&&(n=n+" partials = this.merge(partials, "+e+".partials);"),this.options.data&&(n+=" data = data || {};"),t.push(n)}this.environment.isSimple?t.push(""):t.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=t},createFunctionContext:function(t){var e=this.stackVars.concat(this.registers.list);if(e.length>0&&(this.source[1]=this.source[1]+", "+e.join(", ")),!this.isChild)for(var n in this.context.aliases)this.context.aliases.hasOwnProperty(n)&&(this.source[1]=this.source[1]+", "+n+"="+this.context.aliases[n]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.pushSource("return buffer;");for(var i=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],r=0,o=this.environment.depths.list.length;r<o;r++)i.push("depth"+this.environment.depths.list[r]);var a=this.mergeSource();if(this.isChild||(a=this.compilerInfo()+a),t)return i.push(a),Function.apply(this,i);var u="function "+(this.name||"")+"("+i.join(",")+") {\n  "+a+"}";return s("debug",u+"\n\n"),u},mergeSource:function(){for(var t,e="",n=0,i=this.source.length;n<i;n++){var r=this.source[n];r.appendToBuffer?t=t?t+"\n    + "+r.content:r.content:(t&&(e+="buffer += "+t+";\n  ",t=undefined),e+=r+"\n  ")}return e},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=["depth0"];this.setupParams(0,t),this.replaceStack(function(e){return t.splice(1,0,e),"blockHelperMissing.call("+t.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=["depth0"];this.setupParams(0,t);var e=this.topStack();t.splice(1,0,e),this.pushSource("if (!"+this.lastHelper+") { "+e+" = blockHelperMissing.call("+t.join(", ")+"); }")},appendContent:function(t){this.pendingContent&&(t=this.pendingContent+t),this.stripNext&&(t=t.replace(/^\s+/,"")),this.pendingContent=t},strip:function(){this.pendingContent&&(this.pendingContent=this.pendingContent.replace(/\s+$/,"")),this.stripNext="strip"},append:function(){
this.flushInline();var t=this.popStack();this.pushSource("if("+t+" || "+t+" === 0) { "+this.appendToBuffer(t)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(t){this.lastContext!==t&&(this.lastContext=t)},lookupOnContext:function(t){this.push(this.nameLookup("depth"+this.lastContext,t,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(t){return"typeof "+t+" === functionType ? "+t+".apply(depth0) : "+t})},lookup:function(t){this.replaceStack(function(e){return e+" == null || "+e+" === false ? "+e+" : "+this.nameLookup(e,t,"context")})},lookupData:function(){this.pushStackLiteral("data")},pushStringParam:function(t,e){this.pushStackLiteral("depth"+this.lastContext),this.pushString(e),"sexpr"!==e&&("string"==typeof t?this.pushString(t):this.pushStackLiteral(t))},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.push("{}"),this.push("{}"))},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[]}},popHash:function(){var t=this.hash;this.hash=this.hashes.pop(),this.options.stringParams&&(this.push("{"+t.contexts.join(",")+"}"),this.push("{"+t.types.join(",")+"}")),this.push("{\n    "+t.values.join(",\n    ")+"\n  }")},pushString:function(t){this.pushStackLiteral(this.quotedString(t))},push:function(t){return this.inlineStack.push(t),t},pushLiteral:function(t){this.pushStackLiteral(t)},pushProgram:function(t){null!=t?this.pushStackLiteral(this.programExpression(t)):this.pushStackLiteral(null)},invokeHelper:function(t,e,n){this.context.aliases.helperMissing="helpers.helperMissing",this.useRegister("helper");var i=this.lastHelper=this.setupHelper(t,e,!0),r=this.nameLookup("depth"+this.lastContext,e,"context"),o="helper = "+i.name+" || "+r;i.paramsInit&&(o+=","+i.paramsInit),this.push("("+o+",helper ? helper.call("+i.callParams+") : helperMissing.call("+i.helperMissingParams+"))"),n||this.flushInline()},invokeKnownHelper:function(t,e){var n=this.setupHelper(t,e);this.push(n.name+".call("+n.callParams+")")},invokeAmbiguous:function(t,e){this.context.aliases.functionType='"function"',this.useRegister("helper"),this.emptyHash();var n=this.setupHelper(0,t,e),i=this.lastHelper=this.nameLookup("helpers",t,"helper"),r=this.nameLookup("depth"+this.lastContext,t,"context"),o=this.nextStack();n.paramsInit&&this.pushSource(n.paramsInit),this.pushSource("if (helper = "+i+") { "+o+" = helper.call("+n.callParams+"); }"),this.pushSource("else { helper = "+r+"; "+o+" = typeof helper === functionType ? helper.call("+n.callParams+") : helper; }")},invokePartial:function(t){var e=[this.nameLookup("partials",t,"partial"),"'"+t+"'",this.popStack(),"helpers","partials"];this.options.data&&e.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+e.join(", ")+")")},assignToHash:function(t){var e,n,i=this.popStack();this.options.stringParams&&(n=this.popStack(),e=this.popStack());var r=this.hash;e&&r.contexts.push("'"+t+"': "+e),n&&r.types.push("'"+t+"': "+n),r.values.push("'"+t+"': ("+i+")")},compiler:i,compileChildren:function(t,e){for(var n,i,r=t.children,o=0,s=r.length;o<s;o++){n=r[o],i=new this.compiler;var a=this.matchExistingProgram(n);null==a?(this.context.programs.push(""),a=this.context.programs.length,n.index=a,n.name="program"+a,this.context.programs[a]=i.compile(n,e,this.context),this.context.environments[a]=n):(n.index=a,n.name="program"+a)}},matchExistingProgram:function(t){for(var e=0,n=this.context.environments.length;e<n;e++){var i=this.context.environments[e];if(i&&i.equals(t))return e}},programExpression:function(t){if(this.context.aliases.self="this",null==t)return"self.noop";for(var e,n=this.environment.children[t],i=n.depths.list,r=[n.index,n.name,"data"],o=0,s=i.length;o<s;o++)1===(e=i[o])?r.push("depth0"):r.push("depth"+(e-1));return(0===i.length?"self.program(":"self.programWithDepth(")+r.join(", ")+")"},register:function(t,e){this.useRegister(t),this.pushSource(t+" = "+e+";")},useRegister:function(t){this.registers[t]||(this.registers[t]=!0,this.registers.list.push(t))},pushStackLiteral:function(t){return this.push(new n(t))},pushSource:function(t){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=undefined),t&&this.source.push(t)},pushStack:function(t){this.flushInline();var e=this.incrStack();return t&&this.pushSource(e+" = "+t+";"),this.compileStack.push(e),e},replaceStack:function(t){var e,i,r,o="",s=this.isInline();if(s){var a=this.popStack(!0);if(a instanceof n)e=a.value,r=!0;else{var u=(i=!this.stackSlot)?this.incrStack():this.topStackName();o="("+this.push(u)+" = "+a+"),",e=this.topStack()}}else e=this.topStack();var c=t.call(this,e);return s?(r||this.popStack(),i&&this.stackSlot--,this.push("("+o+c+")")):(/^stack/.test(e)||(e=this.nextStack()),this.pushSource(e+" = ("+o+c+");")),e},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var t=this.inlineStack;if(t.length){this.inlineStack=[];for(var e=0,i=t.length;e<i;e++){var r=t[e];r instanceof n?this.compileStack.push(r):this.pushStack(r)}}},isInline:function(){return this.inlineStack.length},popStack:function(t){var e=this.isInline(),i=(e?this.inlineStack:this.compileStack).pop();if(!t&&i instanceof n)return i.value;if(!e){if(!this.stackSlot)throw new a("Invalid stack pop");this.stackSlot--}return i},topStack:function(t){var e=this.isInline()?this.inlineStack:this.compileStack,i=e[e.length-1];return!t&&i instanceof n?i.value:i},quotedString:function(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(t,e,n){var i=[];return{params:i,paramsInit:this.setupParams(t,i,n),name:this.nameLookup("helpers",e,"helper"),callParams:["depth0"].concat(i).join(", "),helperMissingParams:n&&["depth0",this.quotedString(e)].concat(i).join(", ")}},setupOptions:function(t,e){var n,i,r,o=[],s=[],a=[];o.push("hash:"+this.popStack()),this.options.stringParams&&(o.push("hashTypes:"+this.popStack()),o.push("hashContexts:"+this.popStack())),i=this.popStack(),((r=this.popStack())||i)&&(r||(this.context.aliases.self="this",r="self.noop"),i||(this.context.aliases.self="this",i="self.noop"),o.push("inverse:"+i),o.push("fn:"+r));for(var u=0;u<t;u++)n=this.popStack(),e.push(n),this.options.stringParams&&(a.push(this.popStack()),s.push(this.popStack()));return this.options.stringParams&&(o.push("contexts:["+s.join(",")+"]"),o.push("types:["+a.join(",")+"]")),this.options.data&&o.push("data:data"),o},setupParams:function(t,e,n){var i="{"+this.setupOptions(t,e).join(",")+"}";return n?(this.useRegister("options"),e.push("options"),"options="+i):(e.push(i),"")}};for(var u="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),c=i.RESERVED_WORDS={},l=0,h=u.length;l<h;l++)c[u[l]]=!0;return i.isValidJavaScriptVariableName=function(t){return!(i.RESERVED_WORDS[t]||!/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(t))},i}(i,n))}();!function(t){t.fn.spotlightSearchTypeAhead=function(e){function n(n,i){i=t.extend({displayKey:"title",minLength:0,highlight:n.data("autocomplete-highlight")||!0,hint:n.data("autocomplete-hint")||!1,autoselect:n.data("autocomplete-autoselect")||!0},e);n.typeahead(i,{displayKey:i.displayKey,source:i.bloodhound.ttAdapter(),templates:{suggestion:Handlebars.compile(i.template)}})}return t.each(this,function(){n(t(this))}),this}}(jQuery),Spotlight.onLoad(function(){addAutocompletetoFeaturedImage()}),Spotlight.onLoad(function(){$("[data-input-select-target]").selectRelatedInput()}),function(t){t.fn.selectRelatedInput=function(){return t(this).each(function(){var e,n=t(t(this).data("input-select-target"));e=t(this).is("select")?"change":"click",t(this).on(e,function(){n.is(":checkbox")||n.is(":radio")?n.prop("checked",!0):n.focus()})}),this}}(jQuery),function(t){function e(t,e){var n={};for(var r in e){var o=e[r];if(t.hasOwnProperty(o)&&t[o].prototype.toolbarEnabled){var s;"undefined"!=(s=$.isFunction(t[o].prototype.blockGroup)?t[o].prototype.blockGroup():t[o].prototype.blockGroup)&&s!==undefined||(s=i18n.t("blocks:group:undefined")),n[s]=n[s]||[],n[s].push(i(t[o].prototype))}}return Object.keys(n).reduce(function(t,e){var i=n[e],r=$("<div class='st-controls-group'><div class='st-group-control-label'>"+e+"</div></div>"),o=i.reduce(function(t,e){return t+=e},"");return r.append(o),0===t.length?t+=r[0].outerHTML:t+="<hr />"+r[0].outerHTML},"")}function n(){var t=document.createElement("div");t.className="st-block-controls__buttons",t.innerHTML=e.apply(null,arguments);var n=document.createElement("div");return n.className="spotlight-block-controls",n.appendChild(t),n}var i=function(t){var e=document.createElement("button");e.className="st-block-controls__button",e.setAttribute("data-type",t.type),e.type="button";var n=document.createElement("svg");n.className="st-icon",n.setAttribute("role","img");var i=document.createElement("use");return i.setAttributeNS("https://www.w3.org/1999/xlink","href",SirTrevor.config.defaults.iconUrl+"#"+t.icon_name),n.appendChild(i),e.appendChild(n),e.appendChild(document.createTextNode(t.title())),e.outerHTML};t.Spotlight.BlockControls=function(){},t.Spotlight.BlockControls.create=function(t){function e(){var t=o.parentNode;if(t)return t.removeChild(o),t.classList.remove("st-block--controls-active"),t}function i(){SirTrevor=null,o=null}function r(t){t.stopPropagation();var n=this.parentNode;n&&e()!==n&&($(".st-block__inner",n).after(o),n.classList.add("st-block--controls-active"))}var o=n(SirTrevor.Blocks,t.blockManager.blockTypes);return $(t.wrapper).delegate(".st-block-replacer","click",r),$(t.wrapper).delegate(".st-block-controls__button","click",r),{el:o,hide:e,destroy:i}}}(this),Spotlight.BlockLimits=function(t){this.editor=t},Spotlight.BlockLimits.prototype.enforceLimits=function(t){this.addEditorCallbacks(t),this.checkGlobalBlockTypeLimit()()},Spotlight.BlockLimits.prototype.addEditorCallbacks=function(){SirTrevor.EventBus.on("block:create:new",this.checkBlockTypeLimitOnAdd()),SirTrevor.EventBus.on("block:remove",this.checkGlobalBlockTypeLimit())},Spotlight.BlockLimits.prototype.checkBlockTypeLimitOnAdd=function(){var t=this.editor;return function(e){$(".st-block-controls__button[data-type='"+e.type+"']",t.blockControls.el).prop("disabled",!t.blockManager.canCreateBlock(e["class"]()))}},Spotlight.BlockLimits.prototype.checkGlobalBlockTypeLimit=function(){var t=this.editor;return function(){$.each(t.blockManager.blockTypes,function(e,n){var i=SirTrevor.Blocks[n].prototype;$(t.blockControls.el).find(".st-block-controls__button[data-type='"+i.type+"']").prop("disabled",!t.blockManager.canCreateBlock(n))})}},SirTrevor.Locales.en.blocks=$.extend(SirTrevor.Locales.en.blocks,{autocompleteable:{placeholder:"Enter a title..."},browse:{title:"Browse Categories",description:"This widget highlights browse categories. Each highlighted category links to the corresponding browse category results page.",item_counts:"Include item counts?"},link_to_search:{title:"Saved Searches",description:"This widget highlights saved searches. Each highlighted saved search links to the search results page generated by the saved search parameters. Any saved search listed on the Curation > Browse Categories page, whether published or not, can be highlighted as a saved search.",item_counts:"Include item counts?"},iframe:{title:"IFrame",description:"This widget embeds iframe-based embed code into pages",placeholder:"Enter embed code here. It should begin with e.g. '<iframe'"},oembed:{title:"Embed + Text",description:"This widget embeds a web resource and a text block to the left or right of it.",url:"URL"},uploaded_items:{title:"Uploaded Item Row",description:"This widget displays uploaded items in a horizontal row. Optionally, you can add a heading and/or text to be displayed adjacent to the items.",caption:"Caption"},featured_pages:{title:"Pages",description:"This widget highlights pages from this exhibit. Each highlighted item links to the corresponding page."},resources:{panel:{drag:"Drag",display:"Display?",remove:"Remove"}},rule:{title:"Horizontal Rule"},search_results:{title:"Search Results",description:"This widget displays a set of search results on a page. Specify a search result set by selecting an existing browse category. You can also select the view types that are available to the user when viewing the result set."},solr_documents:{title:"Item Row",description:"This widget displays exhibit items in a horizontal row. Optionally, you can add a heading and/or text to be displayed adjacent to the items.",caption:{placeholder:"Select...",primary:"Primary caption",secondary:"Secondary caption"},zpr:{title:"Display ZPR link"}},solr_documents_carousel:{title:"Item Carousel",description:"This widget displays exhibit items in a carousel. You can configure the item captions, how the images are cycled, and the size of the carousel.",interval:{title:"Automatically cycle images",placeholder:"Select..."},height:{title:"Maximum carousel height"}},solr_documents_embed:{title:"Item Embed",description:"This widget embeds exhibit items on a page. Optionally, you can add a heading and/or text to be displayed adjacent to the items."},solr_documents_features:{title:"Item Slideshow",description:"This widget displays exhibit items in a static slideshow. The user will move between items in the slideshow using the field you select as the primary caption."},solr_documents_grid:{title:"Item Grid",description:"This widget displays exhibit items in a multi-row grid. Optionally, you can add a heading and/or text to be displayed adjacent to the items."},textable:{heading:"Heading",text:"Text",align:{title:"Display text on:",left:"Left",right:"Right"}},group:{undefined:"Standard widgets",items:"Exhibit item widgets"}}),function(t){var e=function(){function t(t){t.on("change",function(t){var r=$(t.currentTarget),o=$(this).nestable("serialize"),s=0;for(var a in o){var u=o[a].id;if(parent_node=e(u,r),n(parent_node,s++),o[a].children){var c=o[a].children;for(var l in c){var h=c[l].id;child_node=e(h,r),n(child_node,s++),i(child_node,u)}}else i(parent_node,"")}})}function e(t,e){return e.find("[data-id="+t+"]")}function n(t,e){r(t).val(e)}function i(t,e){o(t).val(e)}function r(t){return s(t,"weight")}function o(t){return s(t,"parent_page")}function s(t,e){return t.find("input[data-property="+e+"]")}var a='[data-behavior="nestable"]';return{init:function(e){$(e||a).each(function(){$(this).nestable($(this).data()),t($(this))})}}}();t.SpotlightNestable=e}(this),Spotlight.onLoad(function(){if($("[role=tabpanel]").length>0&&window.location.hash){var t=$(window.location.hash).closest("[role=tabpanel]");$("a[role=tab][href=#"+t.attr("id")+"]").tab("show")}}),function(t){t.fn.spotlight_users=function(e){function n(e){e.preventDefault(),t(this).closest("tr").hide(),id=t(this).attr("data-target"),edit_view=t("[data-edit-for='"+id+"']",c).show(),t.each(edit_view.find('input[type="text"], select'),function(){t(this).data("orig",t(this).val())})}function i(e){e.preventDefault(),id=t(this).closest("tr").attr("data-edit-for"),edit_view=t("[data-edit-for='"+id+"']",c).hide(),r(edit_view),o(edit_view),t("[data-show-for='"+id+"']",c).show()}function r(t){t.find(".has-error").removeClass("has-error").find(".help-block").remove()}function o(e){t.each(e.find('input[type="text"], select'),function(){t(this).val(t(this).data("orig")).trigger("change")})}function s(){id=t(this).attr("data-target"),t("[data-destroy-for='"+id+"']",c).val("1")}function a(e){e.preventDefault(),edit_view=t("[data-edit-for='new']",c).show(),t.each(edit_view.find('input[type="text"], select'),function(){t(this).data("orig",t(this).val())})}function u(){edit_row=c.find(".has-error").closest("[data-edit-for]"),edit_row.show(),edit_row.next().show()}var c;t.extend({},e);return this.each(function(){c=t(this),t("[data-edit-for]",c).hide(),u(),t("[data-behavior='edit-user']",c).on("click",n),t("[data-behavior='cancel-edit']",c).on("click",i),t("[data-behavior='destroy-user']",c).on("click",s),t("[data-behavior='new-user']",c).on("click",a)})}}(jQuery),Spotlight.onLoad(function(){$(".edit_exhibit, .admin-users").spotlight_users()}),Spotlight.onLoad(function(){$(".zpr-link").on("click",function(){$("#ajax-modal .modal-content").html('<div id="osd-modal-container"></div>');var t=['<div class="controls">','  <a id="osd-zoom-in"><span class="glyphicon glyphicon-plus-sign"></span></a>','  <a id="osd-zoom-out"><span class="glyphicon glyphicon-minus-sign"></span></a>','  <a id="osd-home"><span class="glyphicon glyphicon-resize-small"></span></a>','  <a id="osd-full-page"><span class="glyphicon glyphicon-fullscreen"></span></a>',"</div>"].join("\n");$("#osd-modal-container").append(t),$("#osd-modal-container").append('<div id="osd-div"></div>'),$("#osd-div").css("height","400px"),$("#ajax-modal").modal("show"),OpenSeadragon({id:"osd-div",zoomInButton:"osd-zoom-in",zoomOutButton:"osd-zoom-out",homeButton:"osd-home",fullPageButton:"osd-full-page",nextButton:"osd-next",previousButton:"osd-previous",tileSources:[$(this).data("iiif-tilesource")]})})});